const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-CdPPfnpG.js","assets/index-OpixsfJo.js","assets/_sentry-release-injection-file-Dec5dsmA.js","assets/Globe-4Vn8cRN0.js","assets/PersistentThemeProvider-q8PzpqSm.js","assets/PersistentThemeProvider-D2ywlyAK.css","assets/index-C3TyUNv_.js","assets/_baseAssignValue-B_971tEX.js","assets/types-3I6JK6RV.js","assets/index-_7IW_eX0.css","assets/QueryResultTable-O_wafvI0.js","assets/isEqual-BiGFJjcc.js","assets/useOnChangeEffect-Bal3n1jq.js","assets/DatabaseSelect-xWQhCdhU.js","assets/platforms-CYprUum5.js","assets/_overRest-JEouTFcv.js","assets/isArrayLikeObject-C0iN-hoE.js","assets/DatabaseSelect-Bt365KOi.css","assets/PageHeader-DHt_6nLN.js","assets/PageHeader-DCGitpeK.css","assets/QueryResultTable-Dx2-Zswy.css","assets/browserDetect-CKtkmMbF.js","assets/app-NF06A9kP.js","assets/TrackingRoute-DSeQ32wX.js","assets/index-DRtA3AAP.js","assets/metrics-CtAnJ1pi.js","assets/memoize-780jiHt5.js","assets/metrics-DFo5ENOZ.css","assets/StatusButton-Dl5RuHOD.js","assets/StatusButton-aDTkPdit.css","assets/CreateProjectForm-DfZ1Ovlh.js","assets/CreateProjectForm-WpzMG55S.css","assets/identity-urls-D5IY6Ynp.js","assets/identity-events-CIeQZKCk.js","assets/cjs-gUGMV2OB.js","assets/Globe-CA5r9G6v.css","assets/DrizzleStudio-zZ9NAwqk.js","assets/DrizzleStudio-BJmYJuzu.css","assets/load-bundle-B_6N7ayM.js"])))=>i.map(i=>d[i]);
var tT=Object.defineProperty;var sT=(t,s,n)=>s in t?tT(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var nu=(t,s,n)=>sT(t,typeof s!="symbol"?s+"":s,n);import{n as jp,b as Lw,o as nT,p as Dw,q as rT,r as Mw,i as oT,c as aT,t as Uw,v as Fw,w as iT,U as xx,x as qw,y as zw,z as Hw,A as Vw,a as qh,B as k_,D as cT,E as lT,F as dT,G as uT,H as hT,$ as Pf,J as pT,K as mT,M as gT,N as _T,j as e,I as L,e as We,L as A,h as wr,T as cn,O as k,P as Sr,m as xs,S as Me,Q as Ww,g as fT,_ as Cr,k as Gw,s as $t,R as Tf,V as bT,u as vo,W as Kw,C as bo,X as xT,Y as jT,Z as yT,a0 as vT,a1 as wT,f as ST,a2 as CT,a3 as kT,a4 as jx,a5 as IT}from"./PersistentThemeProvider-q8PzpqSm.js";import{r as m,R as ro,c as M,g as PT,b as TT,d as Nf,e as Qw}from"./index-OpixsfJo.js";import"./_sentry-release-injection-file-Dec5dsmA.js";import{ba as NT,bb as AT,bc as ET,bd as $T,be as OT,bf as RT,bg as yp,bh as $,o as he,T,bi as Ld,c as Z,bj as Af,bk as Ef,bl as Yw,bm as Dd,bn as $f,bo as Of,bp as vp,bq as Jw,br as Zw,bs as Rf,bt as Xw,bu as Bf,bv as BT,bw as zi,$ as z,R as Bt,bx as LT,by as DT,bz as MT,bA as Ls,bB as wp,bC as I_,bD as P_,ah as ie,bE as UT,bF as FT,E as st,aq as nt,J as ne,B as P,bG as Y,bH as q,bI as yx,bJ as vx,bK as ae,bL as Ra,a3 as Qe,G as be,K as ge,a5 as ls,k as re,t as tt,f as Ln,D as ve,bM as e1,af as Ot,q as xe,bN as Lf,x as It,S as _e,bO as vs,bP as ds,bQ as Ba,bR as qT,bS as zT,bT as Pt,bU as gt,bV as HT,bW as VT,a1 as zn,H as Df,F as R,bX as t1,y as La,N as Ds,s as Te,w as Fe,bY as WT,bZ as GT,A as Q,b_ as Dn,b$ as O,c0 as wo,c1 as Mf,h as H,av as $s,c2 as T_,c3 as Xi,c4 as zh,c5 as Md,c6 as Sp,ar as us,a0 as Lt,c7 as mc,aU as gc,c8 as _c,v as fc,M as ws,a4 as me,at as He,c9 as Cp,ca as s1,a6 as rt,cb as Ia,cc as wx,cd as Uf,g as F,ce as C,az as lt,C as pe,cf as kp,cg as bc,ch as kt,ci as Wa,cj as br,ck as KT,cl as Ms,cm as Ip,cn as QT,co as wt,cp as Vt,cq as YT,cr as JT,cs as n1,ct as r1,cu as ZT,cv as o1,ag as lo,cw as Th,cx as a1,cy as XT,cz as eN,cA as tN,cB as i1,cC as sN,cD as c1,cE as N_,cF as Sx,cG as nN,I as kr,cH as rN,cI as oN,cJ as Hh,aL as Os,cK as aN,aD as vt,p as _t,cL as yr,cM as iN,cN as Ff,cO as cN,cP as Pn,cQ as lN,cR as ee,cS as jm,aY as Cx,cT as ym,cU as dN,cV as uN,cW as l1,aZ as d1,cX as uo,aB as u1,cY as kx,a as le,cZ as yd,c_ as ke,c$ as un,d0 as Ud,d1 as Ye,d2 as h1,d3 as Vh,d4 as hN,d5 as Fd,O as Ne,d6 as xc,d7 as Yl,d8 as p1,P as jc,d9 as pN,da as mN,a7 as m1,a8 as qf,V as Dt,db as gN,dc as _N,aE as Mn,dd as fN,de as bN,df as xN,dg as jN,dh as Nr,di as Ar,dj as g1,dk as qd,dl as Ve,dm as De,ai as yc,dn as zd,dp as yN,dq as vN,dr as Wh,ds as Hd,dt as wN,du as zf,dv as So,dw as Hf,dx as SN,dy as CN,dz as kN,dA as IN,dB as _1,dC as PN,dD as TN,dE as Vf,dF as Pp,dG as Tp,dH as Wf,dI as Gf,dJ as Kf,dK as Qf,dL as vc,r as NN,z as wc,dM as Np,dN as Mt,dO as AN,dP as EN,dQ as f1,dR as ja,l as Da,m as as,dS as $N,dT as b1,dU as x1,dV as xr,dW as ON,dX as jr,dY as j1,dZ as On,d_ as Sc,d$ as Ix,e0 as Px,e1 as hs,e2 as RN,e3 as dn,e4 as y1,e5 as v1,e6 as w1,e7 as S1,a9 as Ap,e8 as Vd,e9 as Tx,ea as BN,eb as LN,ec as C1,ed as Nx,ee as DN,ef as k1,eg as I1,aj as Oe,j as de,eh as Cc,ei as ya,au as Yf,ej as Ep,ek as $p,el as MN,aJ as Jf,aK as _o,em as UN,en as Ax,aa as Ir,_ as Pa,ac as FN,eo as Zf,W as Zt,ep as Xf,eq as ut,er as eb,es as tb,et as Ma,n as Wd,aw as Gh,eu as sb,ap as ec,a2 as Un,ev as Ua,ew as P1,aI as is,ex as T1,ey as qN,ez as vd,eA as N1,eB as te,eC as zN,eD as HN,eE as VN,eF as WN,eG as GN,eH as KN,eI as QN,eJ as YN,eK as $e,eL as ye,eM as Hn,eN as JN,eO as wd,aX as ZN,eP as Nh,eQ as A1,eR as XN,eS as E1,eT as eA,eU as Kh,eV as $1,eW as tA,U as Fn,eX as ru,eY as sA,eZ as nA,e_ as Co,e$ as nb,f0 as kc,f1 as rA,f2 as oA,f3 as aA,f4 as iA,f5 as cA,f6 as rb,f7 as ga,f8 as O1,f9 as lA,fa as dA,fb as R1,fc as A_,fd as uA,fe as hA,ff as pA,fg as B1,aW as Op,fh as mA,fi as Qh,fj as L1,fk as gA,fl as _A,fm as Yh,fn as fA,Q as D1,fo as bA,fp as ob,fq as M1,fr as Rp,fs as ab,ft as U1,fu as F1,fv as xA,fw as jA,fx as xo,fy as yA,fz as vA,aC as Gd,fA as wA,fB as q1,fC as SA,fD as z1,fE as CA,fF as H1,fG as V1,fH as W1,fI as G1,fJ as K1,fK as Q1,b8 as ce,fL as Y1,fM as kA,fN as J1,fO as IA,fP as PA,fQ as TA,fR as NA,fS as AA,fT as EA,fU as Pr,fV as Z1,fW as X1,fX as eS,fY as $A,fZ as OA,f_ as ib,f$ as RA,g0 as BA,g1 as LA,g2 as DA,g3 as MA,g4 as UA,g5 as FA,g6 as cb,g7 as qA,g8 as zA,g9 as qs,ga as HA,gb as VA,gc as qc,gd as WA,ge as tS,gf as Ex,gg as GA,gh as KA,gi as QA,b7 as Ai,gj as sS,L as nS,b6 as Je,a_ as YA,gk as JA,a$ as ZA,gl as XA,gm as eE,gn as tE,b2 as sE,go as nE,b4 as rE,b3 as oE,b0 as aE,b5 as iE,Y as cE,e as lE,b9 as dE}from"./index-C3TyUNv_.js";import{l as rS,u as uE}from"./browserDetect-CKtkmMbF.js";import{u as Fa,P as hE,R as pE}from"./platforms-CYprUum5.js";import{u as Ic,a as mE,A as gE}from"./app-NF06A9kP.js";import{T as Be}from"./TrackingRoute-DSeQ32wX.js";import{t as lb,p as _E,l as oS,u as aS,a as fE}from"./index-DRtA3AAP.js";import{C as Bp,u as bE,q as xE,r as jE,s as yE,t as E_,v as Lp,T as hn,w as Pc,x as db,y as ub,z as vm,B as Ga,E as $_,G as wm,I as vE,J as wE,R as Ee,K as SE,M as CE,U as kE,V as qa,W as IE,D as Vn,i as Wn,X as Jl,Y as Kd,Z as iS,_ as zc,$ as cS,a0 as Ei,a1 as lS,o as dS,a2 as PE,Q as uS,a3 as TE,k as pn,a as hb,a4 as hS,P as NE,a5 as AE,a6 as EE,d as $E,b as OE,A as RE,F as Sd,H as Tr,e as cs,a7 as Sm,a8 as pb,a9 as BE,n as pS,j as mn,aa as LE,ab as Zl,ac as Dp,ad as DE,ae as mS,af as Us,p as Ae,l as mb,g as Pe,ag as ME,S as UE,L as FE,O as gS,h as qE,ah as O_,c as _S,ai as fS,aj as zE,ak as HE,al as Ka,am as bS,an as VE,N as gb,ao as Ue,ap as $x,aq as WE,f as Cm,ar as GE}from"./QueryResultTable-O_wafvI0.js";import{b as KE,i as QE}from"./isArrayLikeObject-C0iN-hoE.js";import{r as R_,u as Gn,s as gn,p as Kn,C as Fs,T as Qn,Y as Yn,A as os,L as Ke,a as Mp,M as Jh,b as Tc,g as xS,c as YE}from"./metrics-CtAnJ1pi.js";import{B as JE,D as ZE,E as XE,I as e$,N as t$,O as s$,P as n$,Z as km,a as r$,b as o$,c as a$,d as i$,e as c$,f as l$,g as d$,h as u$,i as h$,j as Ox,k as p$,l as B_,m as m$,n as g$,o as _$,p as Li,q as f$,r as b$,s as x$,t as j$,u as y$,v as v$,w as w$,x as S$,y as C$,z as k$,A as I$,C as P$,F as T$,G as N$,H as A$,J as E$,K as $$,L as O$,M as R$,Q as B$,R as L$,S as D$,T as M$,U as U$,V as F$,W as q$,X as va,Y as z$,_ as Cd,$ as _b,a0 as jS,a1 as Hi,a2 as H$,a3 as V$,a4 as W$,a5 as Rx,a6 as yS,a7 as G$,a8 as K$,a9 as Q$,aa as Y$,ab as J$,ac as Z$,ad as X$,ae as eO,af as tO,ag as sO,ah as nO,ai as Fl,aj as rO,ak as oO,al as aO,am as iO,an as cO,ao as lO,ap as dO,aq as an,ar as Rt,as as uO,at as hO,au as pO,av as mO,aw as gO,ax as _O,ay as fO,az as bO,aA as xO,aB as jO,aC as yO,aD as vO,aE as Ah,aF as dt,aG as wO,aH as SO,aI as vS,aJ as wS,aK as Eh,aL as CO,aM as kO}from"./types-3I6JK6RV.js";import{A as IO,C as PO,a as TO,b as NO,c as AO,D as EO,d as $O,E as OO,F as RO,e as BO,G as LO,f as L_,g as DO,H as MO,h as UO,i as FO,K as qO,M as zO,N as HO,j as VO,k as WO,O as GO,l as D_,P as KO,R as QO,m as YO,n as JO,o as ZO,S as XO,p as eR,q as tR,V as sR,r as SS,W as nR,u as ko,I as vr,s as wa,t as rR,v as ho,w as jo,x as Bx,y as Up,z as Fp,B as _n,J as oR,L as Hc,Q as Nt,T as CS,U as kS,X as IS,Y as aR,Z as iR,_ as cR,$ as lR,a0 as dR}from"./StatusButton-Dl5RuHOD.js";import{k as PS,u as uR,C as TS,a as hR,b as pR,c as mR,s as gR,d as _R,e as fR}from"./CreateProjectForm-DfZ1Ovlh.js";import{c as bR,u as xR}from"./useOnChangeEffect-Bal3n1jq.js";import{d as NS,a as AS,u as ES,b as $S,c as OS,G as jR,e as fb,f as yR,g as RS,h as qp,i as Jn,T as Er,j as zp,B as vR,k as BS,l as bb,m as wR,n as LS,o as SR,p as CR,q as tc,r as kR,s as IR,t as PR,P as TR,v as NR,C as AR,L as DS,w as ER,D as $R,S as Im,x as OR}from"./DatabaseSelect-xWQhCdhU.js";import{o as MS,I as RR}from"./identity-urls-D5IY6Ynp.js";import{g as BR,i as LR,c as DR,a as Hp}from"./identity-events-CIeQZKCk.js";import{P as Nc}from"./PageHeader-DHt_6nLN.js";import{i as US}from"./isEqual-BiGFJjcc.js";import{r as FS}from"./cjs-gUGMV2OB.js";import"./_baseAssignValue-B_971tEX.js";import"./_overRest-JEouTFcv.js";import"./memoize-780jiHt5.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="694a4ad9-9869-458c-9d30-32c08e705283",t._sentryDebugIdIdentifier="sentry-dbid-694a4ad9-9869-458c-9d30-32c08e705283")}catch{}})();{var Va=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};Va._sentryModuleMetadata=Va._sentryModuleMetadata||{},Va._sentryModuleMetadata[new Va.Error().stack]=Object.assign({},Va._sentryModuleMetadata[new Va.Error().stack],{"_sentryBundlerPluginAppKey:neon-console":!0})}var Lx=Object.create,MR=function(){function t(){}return function(s){if(!jp(s))return{};if(Lx)return Lx(s);t.prototype=s;var n=new t;return t.prototype=void 0,n}}();function UR(t,s){var n=-1,r=t.length;for(s||(s=Array(r));++n<r;)s[n]=t[n];return s}function FR(t,s,n,r){var o=!n;n||(n={});for(var a=-1,i=s.length;++a<i;){var c=s[a],l=void 0;l===void 0&&(l=t[c]),o?Lw(n,c,l):nT(n,c,l)}return n}function qR(t,s,n){if(!jp(n))return!1;var r=typeof s;return(r=="number"?Dw(n)&&rT(s,n.length):r=="string"&&s in n)?Mw(n[s],t):!1}function zR(t){return KE(function(s,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,i&&qR(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),s=Object(s);++r<o;){var c=n[r];c&&t(s,c,r,a)}return s})}var HR="[object Object]",VR=Function.prototype,WR=Object.prototype,qS=VR.toString,GR=WR.hasOwnProperty,KR=qS.call(Object);function QR(t){if(!oT(t)||aT(t)!=HR)return!1;var s=Uw(t);if(s===null)return!0;var n=GR.call(s,"constructor")&&s.constructor;return typeof n=="function"&&n instanceof n&&qS.call(n)==KR}function YR(t,s,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)n=s(n,t[o],o,t);return n}function JR(t){return function(s){return t==null?void 0:t[s]}}var ZR={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},XR=JR(ZR),eB=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tB="\\u0300-\\u036f",sB="\\ufe20-\\ufe2f",nB="\\u20d0-\\u20ff",rB=tB+sB+nB,oB="["+rB+"]",aB=RegExp(oB,"g");function iB(t){return t=Fw(t),t&&t.replace(eB,XR).replace(aB,"")}var cB=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function lB(t){return t.match(cB)||[]}var dB=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function uB(t){return dB.test(t)}var zS="\\ud800-\\udfff",hB="\\u0300-\\u036f",pB="\\ufe20-\\ufe2f",mB="\\u20d0-\\u20ff",gB=hB+pB+mB,HS="\\u2700-\\u27bf",VS="a-z\\xdf-\\xf6\\xf8-\\xff",_B="\\xac\\xb1\\xd7\\xf7",fB="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bB="\\u2000-\\u206f",xB=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",WS="A-Z\\xc0-\\xd6\\xd8-\\xde",jB="\\ufe0e\\ufe0f",GS=_B+fB+bB+xB,KS="['’]",Dx="["+GS+"]",yB="["+gB+"]",QS="\\d+",vB="["+HS+"]",YS="["+VS+"]",JS="[^"+zS+GS+QS+HS+VS+WS+"]",wB="\\ud83c[\\udffb-\\udfff]",SB="(?:"+yB+"|"+wB+")",CB="[^"+zS+"]",ZS="(?:\\ud83c[\\udde6-\\uddff]){2}",XS="[\\ud800-\\udbff][\\udc00-\\udfff]",$i="["+WS+"]",kB="\\u200d",Mx="(?:"+YS+"|"+JS+")",IB="(?:"+$i+"|"+JS+")",Ux="(?:"+KS+"(?:d|ll|m|re|s|t|ve))?",Fx="(?:"+KS+"(?:D|LL|M|RE|S|T|VE))?",eC=SB+"?",tC="["+jB+"]?",PB="(?:"+kB+"(?:"+[CB,ZS,XS].join("|")+")"+tC+eC+")*",TB="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",NB="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",AB=tC+eC+PB,EB="(?:"+[vB,ZS,XS].join("|")+")"+AB,$B=RegExp([$i+"?"+YS+"+"+Ux+"(?="+[Dx,$i,"$"].join("|")+")",IB+"+"+Fx+"(?="+[Dx,$i+Mx,"$"].join("|")+")",$i+"?"+Mx+"+"+Ux,$i+"+"+Fx,NB,TB,QS,EB].join("|"),"g");function OB(t){return t.match($B)||[]}function RB(t,s,n){return t=Fw(t),s=s,s===void 0?uB(t)?OB(t):lB(t):t.match(s)||[]}var BB="['’]",LB=RegExp(BB,"g");function DB(t){return function(s){return YR(RB(iB(s).replace(LB,"")),t,"")}}var sC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qx=sC&&typeof module=="object"&&module&&!module.nodeType&&module,MB=qx&&qx.exports===sC,zx=MB?iT.Buffer:void 0;zx&&zx.allocUnsafe;function UB(t,s){return t.slice()}function FB(t){var s=new t.constructor(t.byteLength);return new xx(s).set(new xx(t)),s}function qB(t,s){var n=FB(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function zB(t){return typeof t.constructor=="function"&&!qw(t)?MR(Uw(t)):{}}function M_(t,s,n){(n!==void 0&&!Mw(t[s],n)||n===void 0&&!(s in t))&&Lw(t,s,n)}function U_(t,s){if(!(s==="constructor"&&typeof t[s]=="function")&&s!="__proto__")return t[s]}function HB(t){return FR(t,zw(t))}function VB(t,s,n,r,o,a,i){var c=U_(t,n),l=U_(s,n),d=i.get(l);if(d){M_(t,n,d);return}var u=a?a(c,l,n+"",t,s,i):void 0,h=u===void 0;if(h){var p=qh(l),g=!p&&Hw(l),_=!p&&!g&&Vw(l);u=l,p||g||_?qh(c)?u=c:QE(c)?u=UR(c):g?(h=!1,u=UB(l)):_?(h=!1,u=qB(l)):u=[]:QR(l)||k_(l)?(u=c,k_(c)?u=HB(c):(!jp(c)||cT(c))&&(u=zB(l))):h=!1}h&&(i.set(l,u),o(u,l,r,a,i),i.delete(l)),M_(t,n,u)}function nC(t,s,n,r,o){t!==s&&NT(s,function(a,i){if(o||(o=new lT),jp(a))VB(t,s,i,n,nC,r,o);else{var c=r?r(U_(t,i),a,i+"",t,s,o):void 0;c===void 0&&(c=a),M_(t,i,c)}},zw)}var WB=zR(function(t,s,n,r){nC(t,s,n,r)});function GB(t){return t&&t.length?t[0]:void 0}var KB="[object Map]",QB="[object Set]",YB=Object.prototype,JB=YB.hasOwnProperty;function ZB(t){if(t==null)return!0;if(Dw(t)&&(qh(t)||typeof t=="string"||typeof t.splice=="function"||Hw(t)||Vw(t)||k_(t)))return!t.length;var s=dT(t);if(s==KB||s==QB)return!t.size;if(qw(t))return!uT(t).length;for(var n in t)if(JB.call(t,n))return!1;return!0}function XB(t,s){for(var n,r=-1,o=t.length;++r<o;){var a=s(t[r]);a!==void 0&&(n=n===void 0?a:n+a)}return n}var rC=bR(function(t,s,n){t[n?0:1].push(s)},function(){return[[],[]]}),eL=DB(function(t,s,n){return t+(n?" ":"")+AT(s)});function tL(t,s){return t&&t.length?XB(t,hT(s)):0}var oC={};oC={breadcrumbs:"عناصر الواجهة"};var aC={};aC={breadcrumbs:"Трохи хляб"};var iC={};iC={breadcrumbs:"Popis cesty"};var cC={};cC={breadcrumbs:"Brødkrummer"};var lC={};lC={breadcrumbs:"Breadcrumbs"};var dC={};dC={breadcrumbs:"Πλοηγήσεις breadcrumb"};var uC={};uC={breadcrumbs:"Breadcrumbs"};var hC={};hC={breadcrumbs:"Migas de pan"};var pC={};pC={breadcrumbs:"Lingiread"};var mC={};mC={breadcrumbs:"Navigointilinkit"};var gC={};gC={breadcrumbs:"Chemin de navigation"};var _C={};_C={breadcrumbs:"שבילי ניווט"};var fC={};fC={breadcrumbs:"Navigacijski putovi"};var bC={};bC={breadcrumbs:"Morzsamenü"};var xC={};xC={breadcrumbs:"Breadcrumb"};var jC={};jC={breadcrumbs:"パンくずリスト"};var yC={};yC={breadcrumbs:"탐색 표시"};var vC={};vC={breadcrumbs:"Naršymo kelias"};var wC={};wC={breadcrumbs:"Atpakaļceļi"};var SC={};SC={breadcrumbs:"Navigasjonsstier"};var CC={};CC={breadcrumbs:"Broodkruimels"};var kC={};kC={breadcrumbs:"Struktura nawigacyjna"};var IC={};IC={breadcrumbs:"Caminho detalhado"};var PC={};PC={breadcrumbs:"Categorias"};var TC={};TC={breadcrumbs:"Miez de pâine"};var NC={};NC={breadcrumbs:"Навигация"};var AC={};AC={breadcrumbs:"Navigačné prvky Breadcrumbs"};var EC={};EC={breadcrumbs:"Drobtine"};var $C={};$C={breadcrumbs:"Putanje navigacije"};var OC={};OC={breadcrumbs:"Sökvägar"};var RC={};RC={breadcrumbs:"İçerik haritaları"};var BC={};BC={breadcrumbs:"Навігаційна стежка"};var LC={};LC={breadcrumbs:"导航栏"};var DC={};DC={breadcrumbs:"導覽列"};var MC={};MC={"ar-AE":oC,"bg-BG":aC,"cs-CZ":iC,"da-DK":cC,"de-DE":lC,"el-GR":dC,"en-US":uC,"es-ES":hC,"et-EE":pC,"fi-FI":mC,"fr-FR":gC,"he-IL":_C,"hr-HR":fC,"hu-HU":bC,"it-IT":xC,"ja-JP":jC,"ko-KR":yC,"lt-LT":vC,"lv-LV":wC,"nb-NO":SC,"nl-NL":CC,"pl-PL":kC,"pt-BR":IC,"pt-PT":PC,"ro-RO":TC,"ru-RU":NC,"sk-SK":AC,"sl-SI":EC,"sr-SP":$C,"sv-SE":OC,"tr-TR":RC,"uk-UA":BC,"zh-CN":LC,"zh-TW":DC};function sL(t){return t&&t.__esModule?t.default:t}function nL(t){let{"aria-label":s,...n}=t,r=ET(sL(MC),"@react-aria/breadcrumbs");return{navProps:{...Pf(n,{labelable:!0}),"aria-label":s||r.format("breadcrumbs")}}}function rL(t){let s=Pf(t,{labelable:!0}),n;return t.orientation==="vertical"&&(n="vertical"),t.elementType!=="hr"?{separatorProps:{...s,role:"separator","aria-orientation":n}}:{separatorProps:s}}const F_=m.createContext(null),oL=m.forwardRef(function(s,n){[s,n]=pT(s,n,F_);let{CollectionRoot:r}=m.useContext(OT),{navProps:o}=nL(s);return ro.createElement(RT,{content:ro.createElement(yp,s)},a=>{var i;return ro.createElement("ol",{ref:n,...o,slot:s.slot||void 0,style:s.style,className:(i=s.className)!==null&&i!==void 0?i:"react-aria-Breadcrumbs"},ro.createElement(F_.Provider,{value:s},ro.createElement(r,{collection:a})))})}),aL=$T("item",function(s,n,r){let o=r.nextKey==null,{isDisabled:a,onAction:i}=mT(F_),c={"aria-current":o?"page":null,isDisabled:a||o,onPress:()=>i==null?void 0:i(r.key)},l=gT({...r.props,children:r.rendered,values:{isDisabled:a||o,isCurrent:o},defaultClassName:"react-aria-Breadcrumb"});return ro.createElement("li",{...Pf(s),...l,ref:n,"data-disabled":a||o||void 0,"data-current":o||void 0},ro.createElement(_T.Provider,{value:c},l.children))}),UC=()=>e.jsx($,{width:60,height:20}),iL="_root_gawjx_1",cL="_root_s_gawjx_12",lL="_root_green_gawjx_16",dL="_root_blue_gawjx_21",uL="_button_gawjx_26",hL="_bannerContainer_gawjx_30",Qa={root:iL,root_s:cL,root_green:lL,root_blue:dL,button:uL,bannerContainer:hL},FC=({description:t,appearance:s,icon:n,title:r,actions:o,size:a="m"})=>e.jsxs("div",{className:M(Qa.root,{[Qa.root_green]:s==="green",[Qa.root_blue]:s==="blue",[Qa.root_s]:a==="s"}),children:[n&&e.jsx(L,{name:n,size:16}),r&&e.jsx(he,{appearance:"neon",children:r}),e.jsxs("div",{className:Qa.bannerContainer,children:[e.jsx(T,{children:t}),o==null?void 0:o.map(i=>e.jsx(Ld,{onPress:i.onClick,className:Qa.button,children:i.label},i.label))]})]}),pL="_content_r8fgm_1",mL={content:pL},sc=({content:t,maxWidth:s,...n})=>{const r=m.useRef(null),[o,a]=m.useState(!1);return m.useEffect(()=>{if(r.current){const{scrollWidth:i,offsetWidth:c}=r.current;a(i>c)}},[r]),e.jsx(Z,{content:t,disabled:!o,children:e.jsx(T,{ref:r,className:mL.content,style:{maxWidth:s},...n,children:t})})},gL="_link_lqbub_1",_L={link:gL},qC=({href:t,children:s,onClick:n,ariaLabel:r})=>e.jsx(We,{href:t,onClick:n,className:_L.link,"aria-label":r,isDisabled:!1,children:s}),fL="_root_1irq5_1",bL="_button_1irq5_7",xL="_icon_1irq5_26",jL="_buttonLabel_1irq5_33",yL="_popover_1irq5_40",vL="_searchInput_1irq5_60",wL="_menu_1irq5_76",SL="_section_1irq5_83",CL="_menuItem_1irq5_100",kL="_label_1irq5_133",IL="_check_1irq5_139",tn={root:fL,button:bL,icon:xL,buttonLabel:jL,popover:yL,searchInput:vL,menu:wL,section:SL,menuItem:CL,label:kL,check:IL};function Xl(t){return"items"in t?`section-${t.title}`:`item-${t.href}-${t.label}`}const zC=t=>!t.hidden&&e.jsx(Xw,{id:Xl(t),className:tn.menuItem,href:t.href,textValue:t.label,isDisabled:t.disabled,onAction:t.onClick,children:({isSelected:s})=>e.jsxs(e.Fragment,{children:[t.icon&&e.jsx(L,{name:t.icon,size:16}),e.jsx(Bf,{slot:"label",className:tn.label,children:t.label}),t.suffix,s&&e.jsx(L,{className:tn.check,name:"check",size:20})]})}),PL=({title:t,showBetaBadge:s,items:n})=>n.length===0?null:e.jsxs(Zw,{className:tn.section,children:[e.jsxs(Rf,{children:[t,s&&e.jsx(he,{appearance:"experimental",margin:"left",children:"beta"})]}),e.jsx(yp,{items:n,children:r=>e.jsx(zC,{id:Xl(r),...r})})]}),TL=({items:t,filterable:s,qa:n,selectedKey:r,onOpen:o})=>{const{pathname:a,isCurrent:i}=Af(),c=m.useMemo(()=>{const h=t.flatMap(p=>"items"in p?p.items:[p]);return r?h.find(p=>p.href===r):h.find(p=>p.href&&i(a,p.href))},[r,t,i,a]),{contains:l}=Ef({sensitivity:"base"}),d=m.useMemo(()=>c?[Xl(c)]:[],[c]),u=e.jsx(Jw,{disallowEmptySelection:!0,className:tn.menu,selectionMode:"single",selectedKeys:d,items:t,children:h=>"items"in h?e.jsx(PL,{id:Xl(h),title:h.title,showBetaBadge:h.showBetaBadge,items:h.items}):e.jsx(zC,{id:Xl(h),...h})});return e.jsx("div",{className:tn.root,"data-qa":n,children:e.jsxs(Yw,{onOpenChange:h=>h&&(o==null?void 0:o()),children:[e.jsxs(Ld,{className:tn.button,children:[e.jsx("div",{className:tn.buttonLabel,children:c==null?void 0:c.label}),c==null?void 0:c.triggerSuffix,e.jsx(L,{name:"select",size:16,className:tn.icon})]}),e.jsx(Dd,{className:tn.popover,children:s?e.jsxs($f,{filter:l,children:[e.jsx(Of,{autoFocus:!0,"aria-label":"Search",children:e.jsx(vp,{placeholder:"Search...",className:tn.searchInput})}),u]}):u})]})})},NL="_link_5xx1n_1",AL={link:NL},EL=({href:t,children:s,onClick:n,ariaLabel:r})=>e.jsx(We,{href:t,onClick:n,className:AL.link,"aria-label":r,isDisabled:!1,children:s}),$L="_root_epxr7_1",OL="_button_epxr7_7",RL="_buttonLabel_epxr7_26",BL="_popover_epxr7_33",LL="_searchInput_epxr7_53",DL="_menu_epxr7_69",ML="_section_epxr7_76",UL="_menuItem_epxr7_93",FL="_label_epxr7_126",qL="_check_epxr7_132",Tn={root:$L,button:OL,buttonLabel:RL,popover:BL,searchInput:LL,menu:DL,section:ML,menuItem:UL,label:FL,check:qL};function ed(t){return"items"in t?`section-${t.title}`:`item-${t.href}-${t.label}`}const HC=t=>!t.hidden&&e.jsx(Xw,{id:ed(t),className:Tn.menuItem,href:t.href,textValue:t.label,isDisabled:t.disabled,onAction:t.onClick,children:({isSelected:s})=>e.jsxs(e.Fragment,{children:[t.icon&&e.jsx(L,{name:t.icon,size:16}),e.jsx(Bf,{slot:"label",className:Tn.label,children:t.label}),t.suffix,s&&e.jsx(L,{className:Tn.check,name:"check",size:20})]})}),zL=({title:t,showBetaBadge:s,items:n})=>n.length===0?null:e.jsxs(Zw,{className:Tn.section,children:[e.jsxs(Rf,{children:[t,s&&e.jsx(he,{appearance:"experimental",margin:"left",children:"beta"})]}),e.jsx(yp,{items:n,children:r=>e.jsx(HC,{id:ed(r),...r})})]}),HL=({items:t,filterable:s,qa:n,selectedKey:r,onOpen:o})=>{const{pathname:a,isCurrent:i}=Af(),c=m.useMemo(()=>{const h=t.flatMap(p=>"items"in p?p.items:[p]);return r?h.find(p=>p.href===r):h.find(p=>p.href&&i(a,p.href))},[r,t,i,a]),{contains:l}=Ef({sensitivity:"base"}),d=m.useMemo(()=>c?[ed(c)]:[],[c]),u=e.jsx(Jw,{disallowEmptySelection:!0,className:Tn.menu,selectionMode:"single",selectedKeys:d,items:t,children:h=>"items"in h?e.jsx(zL,{id:ed(h),title:h.title,showBetaBadge:h.showBetaBadge,items:h.items}):e.jsx(HC,{id:ed(h),...h})});return e.jsxs("div",{className:Tn.root,"data-qa":n,children:[c&&e.jsxs(EL,{href:c.href??"",children:[e.jsx("div",{className:Tn.buttonLabel,children:c.label}),c.triggerSuffix]}),e.jsxs(Yw,{onOpenChange:h=>h&&(o==null?void 0:o()),children:[e.jsx(Ld,{className:Tn.button,"aria-label":"Open menu",children:e.jsx(L,{name:"select",size:16})}),e.jsx(Dd,{className:Tn.popover,children:s?e.jsxs($f,{filter:l,children:[e.jsx(Of,{autoFocus:!0,"aria-label":"Search",children:e.jsx(vp,{placeholder:"Search...",className:Tn.searchInput})}),u]}):u})]})]})},VL="_breadcrumbs_17ozs_1",WL="_breadcrumb_17ozs_1",GL="_breadcrumbV2_17ozs_13",Pm={breadcrumbs:VL,breadcrumb:WL,breadcrumbV2:GL},KL="_separator_19gij_1",QL={separator:KL},YL=()=>{const{separatorProps:t}=rL({orientation:"vertical",elementType:"span"});return e.jsx("span",{...t,className:QL.separator,children:"/"})},JL=({item:t})=>"loading"in t?e.jsx($,{width:100,height:16}):"items"in t?e.jsx(TL,{...t}):e.jsx(qC,{...t}),ZL=({item:t})=>"loading"in t?e.jsx($,{width:100,height:16}):"items"in t?e.jsx(HL,{...t}):e.jsx(qC,{...t}),XL=({items:t})=>{const{breadcrumbsSeparatedDropdown:s}=BT(),n=s?ZL:JL;return e.jsx("nav",{"aria-label":"Breadcrumbs",children:e.jsx(oL,{className:Pm.breadcrumbs,children:t.map((r,o)=>e.jsxs(aL,{className:s?Pm.breadcrumbV2:Pm.breadcrumb,children:[o>0&&e.jsx(YL,{}),e.jsx(n,{item:r})]},o))})})},e2=(t,s,n)=>{const[r,o]=m.useState(s??t),a=s!==void 0,i=a?s:r,c=m.useCallback(l=>{a||o(l),n==null||n(l)},[a,n]);return[i,c]},t2="_root_awjnf_1",s2="_root_primary_awjnf_10",n2="_root_secondary_awjnf_14",r2="_root_xsmall_awjnf_18",o2="_root_small_awjnf_22",a2="_root_large_awjnf_26",i2="_header_awjnf_30",c2="_header_large_awjnf_37",l2="_header_small_awjnf_42",d2="_icon_awjnf_47",u2="_icon_opened_awjnf_55",h2="_content_small_awjnf_63",p2="_content_large_awjnf_67",Yt={root:t2,root_primary:s2,root_secondary:n2,root_xsmall:r2,root_small:o2,root_large:a2,header:i2,header_large:c2,header_small:l2,icon:d2,icon_opened:u2,content_small:h2,content_large:p2},Hx={primary:Yt.root_primary,secondary:Yt.root_secondary,xs:Yt.root_xsmall,s:Yt.root_small,l:Yt.root_large},xb=({appearance:t="primary",size:s="l",initiallyCollapsed:n=!1,disabled:r=!1,header:o,scrollIfNeeded:a=!1,children:i,isCollapsed:c,onCollapseStateChange:l,className:d,iconPosition:u="right"})=>{const[h,p]=e2(n,c,l),g=m.useRef(null),_=m.useCallback(()=>p(!h),[h,p]);return e.jsxs("div",{className:M(Yt.root,Hx[t],Hx[s],d),children:[e.jsxs(Ld,{type:"button",className:M(Yt.header,{[Yt.header_small]:s==="s",[Yt.header_large]:s==="l"}),isDisabled:r,onPress:_,children:[u==="right"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:o}),e.jsx(L,{name:"chevron_down",size:24,className:M(Yt.icon,{[Yt.icon_opened]:!h})})]}),u==="left"&&e.jsxs(e.Fragment,{children:[e.jsx(L,{name:"chevron_down",size:24,className:M(Yt.icon,{[Yt.icon_opened]:!h})}),e.jsx("div",{children:o})]})]}),e.jsx(Bp,{collapsed:h,scrollIfNeeded:a,children:e.jsx("div",{ref:g,className:M({[Yt.content_small]:s==="s",[Yt.content_large]:s==="l"}),children:i})})]})},m2="_root_asir7_1",g2="_header_asir7_9",_2="_header_button_asir7_15",f2="_title_asir7_22",b2="_subTitle_asir7_26",x2="_toggleButton_asir7_32",j2="_toggleButtonIcon_asir7_36",y2="_toggleButtonIcon_closed_asir7_41",v2="_content_asir7_45",w2="_list_asir7_49",S2="_list_vertical_asir7_58",C2="_item_asir7_63",k2="_item_equalWidth_asir7_67",I2="_itemLink_asir7_71",P2="_extraBlock_asir7_90",Ut={root:m2,header:g2,header_button:_2,title:f2,subTitle:b2,toggleButton:x2,toggleButtonIcon:j2,toggleButtonIcon_closed:y2,content:v2,list:w2,list_vertical:S2,item:C2,item_equalWidth:k2,itemLink:I2,extraBlock:P2},T2=({title:t,subTitle:s,extraBlock:n,vertical:r=!1,equalWidth:o=!1,items:a,className:i,initialCollapsed:c,onCollapseChange:l})=>{const[d,u]=m.useState(!c),h=e.jsx(T,{as:"h2",appearance:"secondary",className:Ut.title,role:"heading",children:t}),p=e.jsxs(e.Fragment,{children:[s&&e.jsx(T,{as:"p",appearance:"primary",className:Ut.subTitle,children:s}),n&&e.jsx("div",{className:Ut.extraBlock,children:n}),e.jsx("nav",{className:Ut.content,children:e.jsx("ul",{className:M(Ut.list,{[Ut.list_vertical]:r}),children:a.map((g,_)=>e.jsx("li",{className:M(Ut.item,{[Ut.item_equalWidth]:o&&!r}),children:e.jsx(A,{href:g.url,openInNewTab:!0,className:Ut.itemLink,icon:"external_link",onClick:g.onClick,children:g.title})},_))})})]});return e.jsx("div",{className:M(Ut.root,i),"data-qa":"doc_links_panel",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ut.header,children:h}),p]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:M(Ut.header,Ut.header_button),onClick:()=>{u(!d),l==null||l(d)},children:[h,!r&&e.jsx("div",{className:Ut.toggleButton,children:e.jsx(L,{name:"chevron_down",size:20,className:M(Ut.toggleButtonIcon,{[Ut.toggleButtonIcon_closed]:!d})})})]}),e.jsx(Bp,{collapsed:!d,children:p})]})})},N2="_root_1or1f_3",A2="_cover_1or1f_15",E2="_background_1or1f_36",$2="_closeButton_1or1f_47",O2="_iconWrapper_1or1f_52",R2="_headerSection_1or1f_87",B2="_header_1or1f_87",L2="_subtitle_1or1f_100",D2="_coverHeaderContainer_1or1f_104",M2="_coverHiddenTitle_1or1f_111",U2="_coverHiddenTitle_withIcon_1or1f_123",F2="_body_1or1f_127",q2="_spacer_1or1f_136",ms={root:N2,cover:A2,background:E2,closeButton:$2,iconWrapper:O2,headerSection:R2,header:B2,subtitle:L2,coverHeaderContainer:D2,coverHiddenTitle:M2,coverHiddenTitle_withIcon:U2,body:F2,spacer:q2},Vc=80,z2=26,H2=50,V2=54,W2=80,Vx={s:{coverWidth:420,coverHeight:148},m:{coverWidth:540,coverHeight:190},l:{coverWidth:720,coverHeight:190}};function G2(t){return new Promise((s,n)=>{const r=new Image;r.addEventListener("load",()=>s()),r.addEventListener("error",n),r.src=t})}const K2=({title:t,subtitle:s,icon:n,coverImage:r,action:o,scrollContainerRef:a,children:i,footer:c})=>{const{width:l,size:d}=bE(),u=m.useRef(null),h=a??u,p=m.useRef(null),g=xE(),_=m.useRef(null),x=m.useRef(null),j=m.useRef(null),b=m.useRef(0),f={...Vx[d],coverHeight:r.height??Vx[d].coverHeight},y=f.coverHeight-Vc,[v,w]=m.useState(r.x1),S=wr(N=>{const{scrollTop:D}=N.target,U=_.current;if(!U)return;const E=zi(D/y,0,1);if(b.current!==E){b.current=E;const J=Vc+(1-E)*y;U.style.height=`${J}px`;const B=1-E*(1-Math.min(1,l/f.coverWidth));U.style.backgroundSize=`${f.coverWidth*B}px ${f.coverHeight*B}px`;const W=x.current;W&&W.style.setProperty("--js-icon-interpolation",`${E}`)}const K=j.current;if(K){const J=y+z2,B=zi((D-J)/Vc,0,1);K.style.transform=`translateY(${(1-B)*Vc}px)`}if(t&&_.current){const J=y+H2,B=zi((D-J)/(.7*Vc),0,1);_.current.style.setProperty("--js-darken-interpolation",`${B}`)}});m.useEffect(()=>{const N=h==null?void 0:h.current,D=p.current;N&&D&&setTimeout(()=>{const U=N.scrollHeight-N.clientHeight,E=y+V2,K=E+W2;if(U>=E&&U<K){const J=K-U;D.style.height=`${J}px`}},0)},[]);const I=jE("(-webkit-min-device-pixel-ratio: 1.5), (resolution >= 144dpi)");return m.useEffect(()=>{!I||r.x2===r.x1||G2(r.x2).then(()=>w(r.x2))},[I,r.x1,r.x2]),e.jsx("div",{className:ms.root,style:{"--js-cover-width":`${f.coverWidth}px`,"--js-cover-height":`${f.coverHeight}px`},children:e.jsxs("div",{ref:h,className:ms.body,onScroll:S,children:[e.jsxs("div",{className:ms.cover,children:[e.jsx("div",{ref:_,className:ms.background,style:{backgroundImage:`url("${v}")`}}),n&&e.jsx("span",{ref:x,className:ms.iconWrapper,children:e.jsx(L,{name:n,size:46,forcedTheme:cn.Light})}),t&&e.jsx("div",{className:ms.coverHeaderContainer,children:e.jsx(z,{ref:j,level:2,size:"h2",className:M(ms.coverHiddenTitle,{[ms.coverHiddenTitle_withIcon]:!!n}),"aria-hidden":"true",children:t})}),e.jsx(yE,{className:ms.closeButton,blurry:!0,onClick:g})]}),t&&e.jsxs("div",{className:ms.headerSection,children:[e.jsxs("div",{className:ms.header,children:[e.jsx(z,{level:2,size:"h1",children:t}),o]}),s&&e.jsx(z,{level:2,size:"h4",className:ms.subtitle,children:s})]}),i,e.jsx("div",{ref:p,className:ms.spacer}),c&&e.jsx(E_,{children:c})]})})},Q2="_inputContainer_139pg_1",Y2="_label_139pg_8",J2="_input_139pg_1",Z2="_icon_139pg_32",X2="_root_139pg_51",Wc={inputContainer:Q2,label:Y2,input:J2,icon:Z2,root:X2},VC=({value:t,onSave:s,isLoading:n=!1,className:r})=>{const[o,a]=m.useState(null),i=m.useRef(!1),c=m.useRef(null),l=async()=>{o&&await s(o)},d=async()=>{i.current||await l(),a(null),i.current=!1},u=g=>{g.key==="Enter"?g.target.blur():g.key==="Escape"&&(i.current=!0,g.target.blur())},h=()=>{var g;(g=c.current)==null||g.focus()},p=g=>{var _;(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),(_=c.current)==null||_.focus())};return e.jsx("div",{className:M(Wc.root,r),children:e.jsxs("div",{className:Wc.inputContainer,children:[e.jsx("span",{className:Wc.label,children:(o??t)||" "}),e.jsx(vp,{ref:c,className:Wc.input,value:o??t,onChange:g=>{a(g.target.value)},onBlur:d,onKeyDown:u,disabled:n}),e.jsx("div",{className:Wc.icon,onClick:h,onKeyDown:p,role:"button",tabIndex:0,"aria-label":n?"Saving...":"Edit text",children:n?e.jsx(Bt,{size:16,className:"loader"}):e.jsx(L,{name:"edit",size:16})})]})})},eD="_root_gyp2s_1",tD={root:eD},jb=({className:t,children:s,...n})=>e.jsx("div",{...n,className:M(t,tD.root),children:s}),sD="_container_o9w7m_1",nD="_wide_o9w7m_10",rD="_bar_o9w7m_14",oD="_primary_o9w7m_18",aD="_error_o9w7m_22",iD="_loading_o9w7m_26",Vi={container:sD,wide:nD,bar:rD,primary:oD,error:aD,loading:iD},cD={primary:Vi.primary,loading:Vi.loading,error:Vi.error},q_=m.forwardRef(({appearance:t,width:s,wide:n,...r},o)=>e.jsx("div",{className:M(Vi.container,{[Vi.wide]:n}),...r,ref:o,children:e.jsx("div",{className:M(Vi.bar,t&&cD[t]),style:{width:s}})}));q_.displayName="Bar";const lD="_root_18e9x_1",dD="_text_18e9x_6",uD="_wide_18e9x_11",Tm={root:lD,text:dD,wide:uD},hD=({percent:t,appearance:s="primary",hint:n,hideText:r,wide:o=!1,className:a})=>{const i=s==="loading"?100:Math.floor(t*100);return e.jsxs("div",{className:M(Tm.root,a,{[Tm.wide]:o}),children:[n?e.jsx(Z,{content:n,children:e.jsx(q_,{wide:o,width:`${i}%`,appearance:s})}):e.jsx(q_,{wide:o,width:`${i}%`,appearance:s}),!r&&e.jsxs("div",{className:Tm.text,children:[i,"%"]})]})},pD="_popover_1yf84_1",mD={popover:pD},WC=({trigger:t,content:s,placement:n})=>e.jsxs(LT,{children:[t,e.jsx(Dd,{placement:n,className:mD.popover,children:e.jsx(DT,{children:s})})]});WC.displayName="Popover";const z_=t=>{const{value:s,onChange:n,...r}=t;return e.jsx(MT,{...r,values:[s],onChange:o=>n(o[0])})},gD=()=>{const t=Ls(),{modalStates:s}=wp(I_.selector),{location:n}=window;return m.useEffect(()=>{const o=new URLSearchParams(n.search).get(P_);t(I_.actions.syncWithUrl({modalId:o}))},[n.search,t,s]),null};function Wx(t,s){return t.findAll(s.filters).map(n=>s.select?s.select(n):n.state)}function Nm(t={},s){const n=ie(s).getMutationCache(),r=m.useRef(t),o=m.useRef(null);return o.current||(o.current=Wx(n,t)),m.useEffect(()=>{r.current=t}),m.useSyncExternalStore(m.useCallback(a=>n.subscribe(()=>{const i=UT(o.current,Wx(n,r.current));o.current!==i&&(o.current=i,FT.schedule(a))}),[n]),()=>o.current,()=>o.current)}const To=Object.freeze(Object.defineProperty({__proto__:null,BRAND:JE,DIRTY:ZE,EMPTY_PATH:XE,INVALID:e$,NEVER:t$,OK:s$,ParseStatus:n$,Schema:km,ZodAny:r$,ZodArray:o$,ZodBigInt:a$,ZodBoolean:i$,ZodBranded:c$,ZodCatch:l$,ZodDate:d$,ZodDefault:u$,ZodDiscriminatedUnion:h$,ZodEffects:Ox,ZodEnum:p$,ZodError:B_,get ZodFirstPartyTypeKind(){return m$},ZodFunction:g$,ZodIntersection:_$,ZodIssueCode:Li,ZodLazy:f$,ZodLiteral:b$,ZodMap:x$,ZodNaN:j$,ZodNativeEnum:y$,ZodNever:v$,ZodNull:w$,ZodNullable:S$,ZodNumber:C$,ZodObject:k$,ZodOptional:I$,ZodParsedType:P$,ZodPipeline:T$,ZodPromise:N$,ZodReadonly:A$,ZodRecord:E$,ZodSchema:km,ZodSet:$$,ZodString:O$,ZodSymbol:R$,ZodTransformer:Ox,ZodTuple:B$,ZodType:km,ZodUndefined:L$,ZodUnion:D$,ZodUnknown:M$,ZodVoid:U$,addIssueToContext:F$,any:q$,array:va,bigint:z$,boolean:Cd,coerce:_b,custom:jS,date:Hi,datetimeRegex:H$,defaultErrorMap:V$,discriminatedUnion:W$,effect:Rx,enum:yS,function:G$,getErrorMap:K$,getParsedType:Q$,instanceof:Y$,intersection:J$,isAborted:Z$,isAsync:X$,isDirty:eO,isValid:tO,late:sO,lazy:nO,literal:Fl,makeIssue:rO,map:oO,nan:aO,nativeEnum:iO,never:cO,null:lO,nullable:dO,number:an,object:Rt,get objectUtil(){return uO},oboolean:hO,onumber:pO,optional:mO,ostring:gO,pipeline:_O,preprocess:fO,promise:bO,quotelessJson:xO,record:jO,set:yO,setErrorMap:vO,strictObject:Ah,string:dt,symbol:wO,transformer:Rx,tuple:SO,undefined:vS,union:wS,unknown:Eh,get util(){return CO},void:kO},Symbol.toStringTag,{value:"Module"})),$h=8,_D=(t,s)=>{const[n,r]=m.useState(t),o=m.useMemo(()=>NS(a=>{r(a)},s),[s]);return m.useEffect(()=>{o(t)},[t,o]),n},fD=async t=>{const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-1",s);return Array.from(new Uint8Array(n)).map(a=>a.toString(16).padStart(2,"0")).join("")},Gx=t=>["leaked-password",t],bD=(t,s)=>{const n=_D(t,500),r=s&&n!==void 0&&n.length>=$h,{data:o}=st({queryKey:Gx(n),queryFn:async({queryKey:i})=>{const c=i[1];if(c===void 0)return!1;const l=await fD(c),d=l.slice(0,5),u=await(await fetch(`https://api.pwnedpasswords.com/range/${d}`,{headers:{"add-padding":"true"}})).text();let h;const p=u.split(`\r
`);for(const _ of p){const[x,j]=_.split(":");if(`${d}${x}`.toUpperCase()===l.toUpperCase()){h=Number(j);break}}return h!==void 0&&h>10},enabled:r,staleTime:1/0}),a=ie();if(r){const i=a.getQueryData(Gx(t));if(i!==void 0)return[i,t]}return[o,n]},xD="_tooltipContent_15ul8_1",jD="_tooltipList_15ul8_5",yD="_tooltipItem_15ul8_14",vD="_valid_15ul8_31",ou={tooltipContent:xD,tooltipList:jD,tooltipItem:yD,valid:vD},wD="Password doesn't meet requirements",SD="Choose a more unique password",H_=[{id:"length",text:`${$h}+ characters`,validate:t=>t.length>=$h,passwordRule:`minlength: ${$h}`},{id:"lowercase",text:"1 lowercase character",validate:t=>!!t.match(/[a-z]/),passwordRule:"required: lower"},{id:"uppercase",text:"1 uppercase character",validate:t=>!!t.match(/[A-Z]/),passwordRule:"required: upper"},{id:"number",text:"1 number",validate:t=>!!t.match(/[0-9]/),passwordRule:"required: digit"},{id:"special",text:"1 special character",validate:t=>!!t.match(/[^A-Za-z0-9]/),passwordRule:"required: special"},{id:"leaked",text:"Avoid common patterns",validate:()=>!0,passwordRule:""}],CD=Object.fromEntries(H_.map(({id:t,validate:s})=>[t,n=>s(n)||wD])),td=({name:t,applyConstraints:s=!1,registerProps:n,tooltipPlacement:r="right",...o})=>{var v,w;const[a,i]=m.useState(!1),{register:c,watch:l,setError:d,getFieldState:u,formState:h}=nt(),p=l(t),[g,_]=bD(p,s);m.useEffect(()=>{var N;if(!g)return;const I=(N=u(t).error)==null?void 0:N.types;setTimeout(()=>{d(t,{types:{...I,leaked:!0},message:SD})},0)},[_,g,d,t,u]);const x=(w=(v=h.errors)==null?void 0:v[t])==null?void 0:w.types,j=!!h.dirtyFields[t],b=m.useMemo(()=>e.jsxs("div",{className:ou.tooltipContent,children:[e.jsx("span",{children:"Password strength:"}),e.jsx("ul",{className:ou.tooltipList,children:H_.map(({id:S,text:I})=>e.jsx("li",{className:M(ou.tooltipItem,{[ou.valid]:j&&!(x!=null&&x[S])}),children:I},S))})]}),[j,x]),f=m.useCallback(()=>i(!0),[]),y=m.useCallback(()=>i(!1),[]);return e.jsx(Z,{content:b,visible:s&&a,placement:r,children:e.jsx(ne,{id:t,type:"password",passwordrules:H_.map(({passwordRule:S})=>S).join("; "),...o,...c(t,{required:{value:!0,message:"This field is required"},validate:s?CD:void 0,onBlur:y,...n}),onFocus:f})})},kD="_headerWithActions_1xh0n_1",ID="_heading_1xh0n_6",Kx={headerWithActions:kD,heading:ID},fe=({level:t=2,size:s,className:n,titleClassName:r,actions:o,children:a,"data-qa":i,id:c})=>o?e.jsxs("div",{className:M(Kx.headerWithActions,n),"data-qa":i,children:[e.jsx(z,{level:t,size:s,id:c,className:M(Kx.heading,r),children:a}),o]}):e.jsx(z,{level:t,size:s,className:M(n,r),"data-qa":i,id:c,children:a}),PD="_root_1n0pi_1",TD={root:PD},Ss=({"data-qa":t,children:s})=>e.jsx("div",{className:TD.root,"data-qa":t,children:s}),Am={title:"Something went wrong",unknownError:"Unknown error",retryButton:"Retry"},ND="_root_y3n05_1",AD="_content_y3n05_7",ED="_title_y3n05_13",Em={root:ND,content:AD,title:ED},GC=({error:t,onReset:s})=>e.jsxs("div",{className:Em.root,children:[e.jsxs("div",{className:Em.content,children:[e.jsx("div",{className:Em.title,children:Am.title}),e.jsx("code",{children:String(t)||Am.unknownError})]}),s&&e.jsx("div",{children:e.jsx(P,{onClick:s,children:Am.retryButton})})]}),V_=t=>["activeAddons",t??"currentUser"];function KC(){const{orgId:t,isLoading:s}=Y();return st({queryKey:V_(t),queryFn:async()=>{const{data:n}=await q.activeAddOns({org_id:t});return n.add_ons},enabled:!s})}function $D(){const t=Ls(),s=ie(),{orgId:n}=Y();return{activateAddon:wr(async r=>{await q.activateAddOn({org_id:n,add_on_ids:[r]}),s.invalidateQueries({queryKey:V_(n)}),t(yx()),n&&t(vx())}),deactivateAddon:wr(async(r,{dryRun:o=!1}={})=>{await q.deactivateAddOn({org_id:n,add_on_ids:[r],dry_run:o}),o||(s.invalidateQueries({queryKey:V_(n)}),t(yx()),n&&t(vx()))})}}const OD="_root_io51y_1",RD="_content_io51y_12",BD="_title_io51y_19",LD="_description_io51y_23",DD="_actions_io51y_27",Gc={root:OD,content:RD,title:BD,description:LD,actions:DD},yb=({title:t,description:s,docLink:n,actions:r})=>e.jsxs("div",{className:Gc.root,children:[e.jsxs("div",{className:Gc.content,children:[n?e.jsx(A,{href:n,openInNewTab:!0,icon:"external_link",children:t}):e.jsx("div",{className:Gc.title,children:t}),e.jsx("div",{className:Gc.description,children:s})]}),r&&e.jsx("div",{className:Gc.actions,children:r})]}),Qx={enabling:{openDialogButton:"Request",dialogTitle:"Request HIPAA",dialogContent:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Enable HIPAA compliance for your Neon projects with this add-on. To activate, submit a request. Our support team will contact you soon via email to complete the setup."}),e.jsx("br",{}),e.jsx("p",{children:"You won't be charged until HIPAA compliance is enabled on your account."})]}),dialogRequestButton:"Request HIPAA",successToast:"HIPAA requested. Neon will contact you soon.",successBadge:"Pending enable"},disabling:{openDialogButton:"Disable",dialogTitle:"Disable HIPAA",dialogContent:e.jsx("p",{children:"Submit your request to disable the HIPAA compliance add-on. Our support team will contact you soon via email to confirm the change."}),dialogRequestButton:"Disable",successToast:"Request to disable HIPAA submitted. Neon support will contact you soon.",successBadge:"Pending disable"}},MD="_content_zhjmz_1",UD={content:MD},FD=({title:t,description:s,docLink:n,addonEnabled:r,disabled:o,hideActions:a})=>{const[i]=m.useState(r),{orgId:c,org:l}=Y(),{email:d}=ae(),{submitHipaaRequestForm:u}=Ra(),[h,p]=m.useState(!1),[g,_]=m.useState(!1),[x,j]=m.useState(!1),b=i?Qx.disabling:Qx.enabling,f=async()=>{_(!0);try{await u({requestType:i?"remove":"add",email:d,orgId:c,orgName:l==null?void 0:l.name}),p(!1),j(!0),re(b.successToast)}catch(y){tt(`Something went wrong. ${y}`)}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{title:b.dialogTitle,isOpen:h,width:720,onRequestClose:()=>{p(!1)},children:[e.jsx(be,{className:UD.content,children:b.dialogContent}),e.jsxs(ge,{children:[g&&e.jsx(Bt,{fadeInSlowly:!0}),e.jsx(ls,{appearance:"secondary",children:"Cancel"}),e.jsx(P,{onClick:f,children:b.dialogRequestButton})]})]}),e.jsx(yb,{title:t,description:s,docLink:n,actions:e.jsx(e.Fragment,{children:x?e.jsx(he,{children:b.successBadge}):e.jsxs(e.Fragment,{children:[r&&e.jsx(he,{appearance:"success",children:"Enabled"}),!a&&e.jsx(P,{appearance:"secondary",disabled:o,onClick:()=>{p(!0)},children:b.openDialogButton})]})})})]})},qD="_root_r2rfl_1",zD="_header_r2rfl_11",HD="_description_r2rfl_18",$m={root:qD,header:zD,description:HD},nc=({id:t,title:s,description:n,action:r,"data-qa":o,children:a})=>e.jsxs("div",{className:$m.root,"data-qa":o,children:[e.jsxs("div",{children:[e.jsxs("div",{className:$m.header,id:t,children:[e.jsx(z,{level:2,children:s}),r]}),n&&e.jsx("div",{className:$m.description,children:n})]}),a]}),VD="_border_5rfxj_1",WD="_bg_5rfxj_6",GD="_padding_5rfxj_10",Om={border:VD,bg:WD,padding:GD},ln=({className:t,children:s,bg:n=!0,padding:r=!0,border:o=!0,role:a})=>e.jsx("div",{className:M(t,{[Om.bg]:n,[Om.padding]:r,[Om.border]:o}),role:a,children:s}),KD={title:"Current billing period:"},QD="_root_m0um1_1",YD="_secondaryTextColor_m0um1_7",JD="_currentPeriod_m0um1_11",Rm={root:QD,secondaryTextColor:YD,currentPeriod:JD},ZD=t=>`${Ln(t.period_start,ve.Date)} to ${Ln(t.period_end,ve.Date)}`,QC=({noColor:t})=>{const{consumptionPeriods:s,isConsumptionLoading:n}=Lp(),r=s==null?void 0:s[0];return e.jsx("div",{className:M(Rm.root,{[Rm.secondaryTextColor]:!t}),children:n?e.jsx($,{width:350,height:24}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:KD.title}),e.jsx("span",{className:Rm.currentPeriod,"data-qa":"sub_billing_period",children:r&&ZD(r)})]})})},XD={compare:"Compare plans"},eM=()=>{const{trackUiInteraction:t}=k();return e.jsx(A,{openInNewTab:!0,href:e1,icon:"external_link",onClick:()=>t("billing_plans_clicked"),children:XD.compare})},tM="_highlight_jt531_1",sM={highlight:tM},Yx=({children:t})=>e.jsx("span",{className:sM.highlight,children:t}),No={unlocked:"Unlocked",unlockedText:"Autoscaling is now available for all branches and computes.",subtitle:"Enable autoscaling on your default branch?",description:t=>e.jsxs(e.Fragment,{children:["Dynamically scale from ",t.min,"-",t.max," CU to match your current workload.",e.jsx("br",{}),"Only pay for the resources you need."]}),enableText:({project:t,branch:s})=>e.jsxs(e.Fragment,{children:["Enable autoscaling for branch ",e.jsx(Yx,{children:s})," in project"," ",e.jsx(Yx,{children:t}),e.jsx(Ot,{icon:"info_italic",children:"Adjust your settings in Branches > Branch > Edit Endpoint"})]}),later:"I'll do it later",save:"Save"},nM="_wrapper_if1va_1",rM="_card_if1va_7",oM="_unlockedTag_if1va_17",aM="_content_if1va_28",iM="_footer_if1va_34",Kc={wrapper:nM,card:rM,unlockedTag:oM,content:aM,footer:iM},cM=({projectId:t,projectName:s,branchName:n,endpointId:r,autoscalingRange:o,onRequestClose:a})=>{const i=xe({defaultValues:{isAutoscalingEnabled:!1}}),c=i.watch("isAutoscalingEnabled"),{trackUiInteraction:l}=k({mountEvent:"enable_autoscaling_modal_shown"}),d=Lf({projectId:t},{onSuccess:a,onError:h=>Sr(h)}),u=wr(()=>{l("enable_autoscaling_modal_autoscaling_save_clicked"),d.mutate({endpointId:r,request:{endpoint:{autoscaling_limit_min_cu:o.min,autoscaling_limit_max_cu:o.max}}})});return e.jsxs(It,{providerProps:i,formBodyClassName:Kc.wrapper,onSubmit:u,children:[e.jsxs("div",{className:Kc.card,children:[e.jsx("span",{className:Kc.unlockedTag,children:No.unlocked}),No.unlockedText]}),e.jsxs("div",{className:Kc.content,children:[e.jsx(z,{level:3,size:"h5",children:No.subtitle}),e.jsx("p",{children:No.description(o)}),e.jsx(hn,{isSelected:c,isDisabled:i.formState.isSubmitting,onChange:h=>{l(h?"enable_autoscaling_modal_autoscaling_enabled":"enable_autoscaling_modal_autoscaling_disabled"),i.setValue("isAutoscalingEnabled",h)},wrap:!0,children:e.jsx("span",{children:No.enableText({project:s,branch:n})})})]}),e.jsxs("div",{className:Kc.footer,children:[e.jsx(P,{appearance:"secondary",onClick:()=>{l("enable_autoscaling_modal_autoscaling_later_clicked"),a()},children:No.later}),e.jsx(_e,{size:"s",disabled:!c,children:No.save})]})]})},Jx={modalTitle:"Enable autoscaling",beta:"BETA"},lM="_title_1i7tw_1",dM="_betaBadge_1i7tw_7",Zx={title:lM,betaBadge:dM};function uM({projectId:t}){const[s,n]=m.useState(),[r,o]=m.useState(),[a,i]=m.useState(),{data:c,isLoading:l}=vs();if(!r&&!l&&c){let u;t&&(u=c.find(({id:h})=>h===t)),!u&&c.length===1&&(u=GB(c)),u&&(n(u.id),o({projectId:u.id,projectName:u.name}))}const d=ds({projectId:s??""});return m.useEffect(()=>{(async()=>{if(!s||d.status!=="success")return;const[{data:u},{data:h}]=await Promise.all([q.getProjectLimits(s),q.listProjectBranches({projectId:s})]),p=h.branches.find(f=>f.default);if(!p)return;const g=d.data.endpoints.filter(f=>!f.disabled&&f.branch_id===p.id);if(!g.length)return;const _=Ba(g);if(!_||_.autoscaling_limit_min_cu!==_.autoscaling_limit_max_cu)return;const{limits:x}=u,j={min:void 0,max:x.max_autoscaling_cu},b=Math.min(1,x.max_autoscaling_cu);b<j.max&&(j.min=b),i({branchName:p.name,endpointId:_.id,autoscalingRange:j})})()},[d.data,d.status,s]),{projectInfo:r,modalParams:a}}const hM=({projectId:t})=>{const[s,n]=m.useState(!0),{projectInfo:r,modalParams:o}=uM({projectId:t});return m.useEffect(()=>{const a=setTimeout(()=>{qT()},2e3);return()=>{clearTimeout(a)}},[]),!r||!o?null:e.jsx(Qe,{isOpen:s,title:e.jsxs("div",{className:Zx.title,children:[Jx.modalTitle," ",e.jsx("span",{className:Zx.betaBadge,children:Jx.beta})]}),width:674,onRequestClose:()=>{n(!1)},children:e.jsx(cM,{projectId:r.projectId,projectName:r.projectName,branchName:o.branchName,endpointId:o.endpointId,autoscalingRange:o.autoscalingRange,onRequestClose:()=>{n(!1)}})})},pM=()=>{const t=zT(),{isFetching:s,subscriptionType:n}=ae();return s||!t||t.plan===n?null:e.jsx(hM,{projectId:t.projectId})},Bm={upgradeTextPartOne:"Need a larger restore window? ",upgradeButtonText:"Upgrade your account",upgradeTextPartTwo:" to get up to 30 days."},mM=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(!1),r=ae();return!r.isFreeSubscription&&r.subscriptionType!=="launch"?null:e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.HistoryRetentionLimitReached,isOpen:s,onRequestClose:()=>{n(!1)}}),e.jsxs("div",{children:[Bm.upgradeTextPartOne,e.jsx(A,{onClick:()=>{t("project_settings_storage_upgrade_clicked"),n(!0)},children:Bm.upgradeButtonText}),Bm.upgradeTextPartTwo]})]})},gM="_body_e5ojt_1",_M={body:gM},fM=({onRequestClose:t})=>{var d,u;const{trackUiInteraction:s}=k(),{email:n}=wp(HT),{submitFeedbackForm:r}=Ra(),o=VT();m.useEffect(()=>{s("billing_request_trial_modal_shown")},[]);const a=wr(()=>{t&&(s("billing_request_trial_modal_closed"),t())}),i=zn({defaultValues:{email:n,message:""}}),{formState:{errors:c},register:l}=i;return e.jsxs(It,{providerProps:i,onSubmit:async h=>{s("billing_request_trial_modal_submitted");try{await r({email:h.email,message:`TRIAL REQUEST

${h.message.trim()}`.trim()}),Te(e.jsx(Fe,{children:"Thanks for your request!"})),a()}catch(p){Sr(p),WT(o)}},children:[e.jsxs(Df,{children:[e.jsx(R,{error:(d=c.email)==null?void 0:d.message,label:"Email",children:e.jsx(ne,{...l("email",{required:{value:!0,message:"This field is required"},pattern:{value:t1,message:"Please input a valid email"}})})}),e.jsx(R,{error:(u=c.message)==null?void 0:u.message,label:"Message",children:e.jsx(La,{autoFocus:!0,placeholder:"Tell us about your needs",...l("message")})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{onClick:()=>s("billing_request_trial_modal_closed")}),e.jsx(_e,{children:"Request trial"})]})]})},YC=({isOpen:t,onRequestClose:s})=>{const{subscriptionType:n}=ae(),{scale:r,business:o}=GT();let a;switch(n){case"business":a={planName:"Business",maxCu:o.limits.max_autoscaling_cu};break;case"scale":a={planName:"Scale",maxCu:r.limits.max_autoscaling_cu};break}return e.jsx(Qe,{title:"To extend compute size limits, request an Enterprise trial",isOpen:t,width:650,onRequestClose:s,children:e.jsxs("div",{className:_M.body,children:[a&&e.jsxs(Q,{children:[a.planName," plan is limited to"," ",Dn(a.maxCu)]}),e.jsx(fM,{onRequestClose:s})]})})},bM=()=>{const{isOwnProject:t}=O(),{trackUiInteraction:s}=k(),n=ae(),[r,o]=m.useState(!1),[a,i]=m.useState(!1),c=t,l=n.subscriptionType!=="business"&&n.subscriptionType!=="business_v3",d=l?"upgrade your plan":"request more resources",{billingUrl:u,isLoading:h}=wo();return e.jsxs(e.Fragment,{children:[c&&e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>o(!1)}),e.jsx(YC,{isOpen:a,onRequestClose:()=>i(!1)})]}),"To extend the compute size limit,"," ",c?e.jsx(A,{onClick:()=>{s("compute_widget_upgrade_clicked"),l?o(!0):i(!0)},children:d}):e.jsx(A,{href:u,disabled:h,onClick:()=>{s("compute_widget_upgrade_clicked")},children:d})]})};function xM(){const{project:t,isOwnProject:s}=O(),n=Mf(t),r=ae();if(n||s&&(r.subscriptionType==="launch"||r.subscriptionType==="scale"))return e.jsx(bM,{})}const jM=t=>{if(t.limits.length===0)return;const s=t.limits[0];switch(s.name){case"subscription_type":{const n=T_(s.expected)?Xi[s.expected]:s.expected,r=T_(s.actual)?Xi[s.actual]:s.actual;return`Cannot transfer projects from ${n} to ${r} plan.`}case"projects_count":{const n=Number(s.expected)-Number(s.actual);return`Organization has ${n===0?"no":`only ${n}`} ${$s("slot",n)} left for projects.`}case"project_region":return`Project regions (${s.actual}) are not allowed in the target organization.`;default:return"Unknown error"}},yM=t=>{if(t.projects.length===0)return;const s=[],n=[],r=[];for(const o of t.projects)switch(o.integration){case"github":{s.push(o.id);break}case"vercel":{n.push(o.id);break}case"outerbase":{r.push(o.id);break}default:return"Unknown error"}return r.length>0?`Cannot transfer projects with Outerbase integration. Outerbase projects: ${r.join(",")}`:s.length>0&&n.length>0?`Cannot transfer projects with Github/Vercel integrations. ${s.length} projects have github integration and ${n.length} have vercel integration`:s.length>0?`Cannot transfer projects with Github integration. Github projects: ${s.join(",")}`:n.length>0?`Cannot transfer projects with Vercel integrations. Vercel projects: ${n.join(",")}`:"Unknown error"},vM=t=>{t&&typeof t=="object"&&"limits"in t?tt(jM(t)):t&&typeof t=="object"&&"projects"in t?tt(yM(t)):H(t)},JC=()=>{const{orgId:t}=Y();return t?zh.useUpdateBillingAccountMutation():Md.useUpdateBillingAccountMutation()},wM=({onSuccess:t,onFail:s,children:n})=>{const{paymentInfo:r}=Sp(),{orgId:o}=Y(),[a]=JC(),i=zn({defaultValues:{email:r==null?void 0:r.email}}),c=async({email:l})=>{try{await a({billing_account:{email:l,org_id:o}}),t&&t()}catch(d){s&&s(d)}};return e.jsx(us,{...i,children:e.jsx(Lt,{onSubmit:i.handleSubmit(c),children:n})})},SM=()=>{var n;const{register:t,formState:s}=nt();return e.jsx(e.Fragment,{children:e.jsx(R,{error:(n=s.errors.email)==null?void 0:n.message,label:"Email",children:e.jsx(ne,{...t("email",{required:{value:!0,message:"This field is required"},pattern:{value:t1,message:"Please input a valid email"}})})})})},CM=({isOpen:t,onRequestClose:s})=>{const{trackUiInteraction:n}=k();return e.jsx(mc,{title:"Edit Billing Email",isOpen:t,onRequestClose:()=>{n("billing_edit_email_dismissed"),s==null||s()},children:e.jsxs(wM,{onSuccess:()=>{Te(e.jsx(Fe,{children:"Email updated"})),s==null||s()},onFail:()=>{Te(e.jsx(fc,{children:"Request to update email failed"}))},children:[e.jsx(gc,{children:e.jsx(SM,{})}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{onClick:()=>n("billing_edit_email_submitted"),children:"Send"})]})]})})},kM=()=>Md.useLazyGetBillingAvailableCountriesQuery(void 0),ot={success:"Billing info was saved",info:"Changes will apply to future invoices.",required:"This field is required",title:"Edit billing info",companyLabel:"Company name",countryLabel:"Country",address1Label:"Address line 1",address2Label:"Address line 2",cityLabel:"City",postalCodeLabel:"Postal/ZIP",stateLabel:"State",taxTypeLabel:"VAT/Tax ID Type",taxIdLabel:"VAT/Tax ID",save:"Save",optional:"Optional"},IM="_root_10rv8_1",PM="_info_10rv8_7",TM="_field_10rv8_11",NM="_smallField_10rv8_15",zs={root:IM,info:PM,field:TM,smallField:NM},AM=({isOpen:t,onRequestClose:s})=>{var S,I,N,D,U,E,K,J,B;const{trackUiInteraction:n}=k(),{orgId:r}=Y(),{paymentInfo:o}=Sp(),[a,{data:i}]=kM(),[c,{isLoading:l}]=JC();m.useEffect(()=>{t&&a(void 0)},[t,a]);const d=m.useMemo(()=>(i==null?void 0:i.map(({code:W,name:X})=>({value:W,label:X})))??[],[i]),u=xe({defaultValues:{name:o==null?void 0:o.name,state:o==null?void 0:o.addressState,city:o==null?void 0:o.addressCity,line1:o==null?void 0:o.addressLine1,line2:o==null?void 0:o.addressLine2,postalCode:o==null?void 0:o.addressPostalCode,taxIdValue:o==null?void 0:o.taxId},shouldUnregister:!0}),{register:h,formState:p,watch:g,setValue:_}=u,x=g("country"),j=!!g("taxIdValue"),b=m.useMemo(()=>{var W,X;return((X=(W=i==null?void 0:i.find(({code:G})=>G===x))==null?void 0:W.tax_ids)==null?void 0:X.map(({type:G,description:V})=>({value:G,label:V})))??[]},[i,x]),f=()=>{j||_("taxIdType","")},y=()=>{_("taxIdValue",""),_("taxIdType","")},v=()=>{s(),re(ot.success)},w=async({name:W,country:X,state:G,city:V,line1:Se,line2:Ie,postalCode:St,taxIdType:ps,taxIdValue:su})=>{try{await c({billing_account:{name:W,org_id:r,billing_info:{country:X,city:V,state:G,line1:Se,line2:Ie,postal_code:St,tax_id:su&&ps?{id_type:ps,id:su}:void 0}}}).unwrap(),v()}catch(Fc){Cp(Fc)}};return e.jsxs(ws,{modalProps:{title:ot.title,isOpen:t,maxWidth:700,onRequestClose(){n("billing_edit_info_dismissed"),s()}},providerProps:u,onSubmit:w,children:[e.jsxs(be,{className:zs.root,children:[e.jsx(Q,{className:zs.info,children:ot.info}),e.jsx(R,{label:ot.companyLabel,error:(S=p.errors.name)==null?void 0:S.message,className:zs.field,children:e.jsx(ne,{...h("name",{required:{value:!0,message:ot.required}}),disabled:l})}),e.jsx(R,{label:ot.countryLabel,error:(I=p.errors.country)==null?void 0:I.message,className:zs.field,children:e.jsx(me,{name:"country",defaultValue:o==null?void 0:o.addressCountry,rules:{required:{value:!0,message:ot.required}},control:u.control,render:({field:{onChange:W,...X}})=>e.jsx(He,{options:d,filterable:!0,"aria-label":ot.countryLabel,disabled:l,onChange:G=>{W(G),y()},...X})})}),e.jsx(R,{label:ot.address1Label,error:(N=p.errors.line1)==null?void 0:N.message,className:zs.field,children:e.jsx(ne,{...h("line1",{required:{value:!0,message:ot.required}}),disabled:l})}),e.jsx(R,{label:ot.address2Label,error:(D=p.errors.line2)==null?void 0:D.message,className:zs.field,children:e.jsx(ne,{...h("line2"),disabled:l})}),e.jsx(R,{label:ot.cityLabel,error:(U=p.errors.city)==null?void 0:U.message,className:zs.smallField,children:e.jsx(ne,{...h("city",{required:{value:!0,message:ot.required}}),disabled:l})}),e.jsx(R,{label:ot.postalCodeLabel,error:(E=p.errors.postalCode)==null?void 0:E.message,className:zs.smallField,children:e.jsx(ne,{...h("postalCode",{required:{value:!0,message:ot.required}}),disabled:l})}),e.jsx(R,{label:ot.stateLabel,error:(K=p.errors.state)==null?void 0:K.message,className:zs.smallField,children:e.jsx(ne,{...h("state"),disabled:l})}),e.jsx(R,{label:ot.taxTypeLabel,error:(J=p.errors.taxIdType)==null?void 0:J.message,className:zs.field,children:e.jsx(me,{name:"taxIdType",defaultValue:o==null?void 0:o.taxIdType,rules:{required:{value:j,message:ot.required}},control:u.control,render:({field:W})=>e.jsx(He,{"aria-label":ot.taxTypeLabel,options:b,disabled:l||!b.length,placeholder:j?void 0:ot.optional,...W})})}),e.jsx(R,{label:ot.taxIdLabel,error:(B=p.errors.taxIdValue)==null?void 0:B.message,className:zs.field,children:e.jsx(ne,{...h("taxIdValue"),disabled:l||!b.length,placeholder:ot.optional,onBlur:f})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{disabled:l}),e.jsx(_e,{onClick:()=>n("billing_edit_info_submitted"),children:ot.save})]})]})},EM=({label:t,appearance:s})=>{const{trackUiInteraction:n}=k(),[r,o]=m.useState(!1),a=()=>o(!0),i=()=>o(!1);return e.jsxs(e.Fragment,{children:[e.jsx(AM,{isOpen:r,onRequestClose:i}),e.jsx(s1,{appearance:s,onClick:()=>{n("billing_edit_info_clicked"),a()},label:t})]})},Ya={success:"success",required:"This field is required",relatedCharge:"Related charge",description:"Problem description",descriptionPlaceholder:"Please provide a detailed description of the problem",subject:{paid:"Refund request",issued:"Credit note request"}},$M=({isOpen:t,chargeInfo:s,onRequestClose:n,invoiceId:r,amount:o,requestSubject:a,invoiceStatus:i})=>{var b,f;const{trackUiInteraction:c}=k(),{submitRefundRequestForm:l}=Ra(),{data:d}=rt(),[u,h]=m.useState(!1),p=xe({defaultValues:{relatedCharge:s}}),{register:g,formState:_,reset:x}=p,j=async({description:y})=>{if(d!==void 0)try{h(!0),await l(d.email,{subject:Ya.subject[i],invoiceId:r,description:y,amount:o}),re(Ya.success),n()}catch(v){H(v)}finally{h(!1)}};return m.useEffect(()=>{t&&x()},[t,x]),e.jsxs(ws,{modalProps:{title:a,isOpen:t,width:560,onRequestClose(){c("billing_invoice_refund_request_dismissed"),n()}},providerProps:p,onSubmit:j,children:[e.jsx(be,{children:e.jsxs(Df,{children:[e.jsx(R,{label:Ya.relatedCharge,error:(b=_.errors.relatedCharge)==null?void 0:b.message,children:e.jsx(ne,{...g("relatedCharge"),disabled:!0})}),e.jsx(R,{label:Ya.description,error:(f=_.errors.description)==null?void 0:f.message,children:e.jsx(La,{placeholder:Ya.descriptionPlaceholder,autoFocus:!0,rows:3,disabled:u,...g("description",{required:{value:!0,message:Ya.required}})})})]})}),e.jsxs(ge,{children:[e.jsx(Ds,{disabled:u}),e.jsx(_e,{onClick:()=>c("billing_invoice_refund_request_submitted"),children:a})]})]})},Lm={heading:"Neon subscription managed by Vercel",text:e.jsxs("span",{children:["Your Neon subscription is managed directly in your Vercel account.",e.jsx("br",{})," See ",e.jsx("strong",{children:"Integrations > Neon Database > Settings"})," ","in Vercel."]}),button:"Manage Neon subscription"},OM="_root_czdvg_1",RM={root:OM},BM=()=>{const{orgId:t,isLoading:s}=Y();return e.jsxs("div",{className:RM.root,children:[e.jsx(L,{name:"vercel",size:46}),e.jsx(z,{level:4,children:Lm.heading}),e.jsx(T,{align:"center",children:Lm.text}),e.jsx(P,{as:"a",appearance:"primary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${t}`,loading:s,children:Lm.button})]})},sn={failedToEnable:"Failed to enable add-on",failedToDisable:"Failed to disable add-on",enable:t=>`Enable ${t}`,disable:t=>`Disable ${t}`,disablingLargerComputeWarning:t=>`Disabling extra compute resources will limit all projects to ${Uf(t)}.`,disablingSoc2Warning:"You will lose access to Neon's SOC 2 compliance report.",invalidOperation:"Invalid operation",addonEnabledToast:t=>`${wx[t]} is now enabled`,addonDisabledToast:t=>`${wx[t]} is now disabled`,largerComputeEnabledToast:`You can now use ${Ia.add_on_extra_compute_16cu} in your projects`,largerComputeDisabledToast:"Extra compute resources are now disabled"},LM={add_on_ip_allow:"ip_allow_addresses_count",add_on_monitoring_integration:"monitoring_integrations_count"},DM="_root_guuvz_1",MM="_listWrapper_guuvz_7",UM="_list_guuvz_7",FM="_unexpectedLimitsBlock_guuvz_21",qM="_unknownLimits_guuvz_27",Qc={root:DM,listWrapper:MM,list:UM,unexpectedLimitsBlock:FM,unknownLimits:qM},Dm=10,zM=({addonId:t,unsatisfiedLimits:s})=>{const n=LM[t],{data:r}=vs(),o=m.useMemo(()=>PS(r,c=>c.id),[r]),[a,i]=m.useMemo(()=>rC(s,c=>n&&c.name===n&&c.project_id),[s,n]);return m.useEffect(()=>{if(i.length)for(const c of i)Sr(new Error(`Unknown add-on "${t}" limit "${c.name}"`))},[t,i]),e.jsxs(e.Fragment,{children:[e.jsxs(be,{gaps:!0,children:[e.jsxs("div",{className:Qc.root,children:[e.jsx("div",{children:"To disable this add-on, you first need to remove it from all projects where it's currently enabled."}),e.jsxs("div",{className:Qc.listWrapper,children:[a.length>0&&e.jsx("ul",{className:Qc.list,children:a.slice(0,Dm).map(c=>{var d;const l=c.project_id;return e.jsx("li",{children:e.jsx(A,{href:F(C.ProjectsItem,{projectId:l}),children:((d=o[l])==null?void 0:d.name)||`id:${l}`})},l)})}),a.length>Dm&&e.jsxs("div",{children:["+ ",a.length-Dm," more"]})]})]}),i.length>0&&e.jsxs("div",{className:Qc.unexpectedLimitsBlock,children:[e.jsx(z,{level:2,size:"h3",children:"Unknown limits"}),e.jsx("pre",{className:Qc.unknownLimits,children:JSON.stringify(i,null,2)})]})]}),e.jsx(ge,{children:e.jsx(ls,{appearance:"secondary",children:"Close"})})]})},Xx={disablingConfirmation:t=>`Are you sure you want to disable ${Ia[t]}?`,disableButton:t=>`Disable ${Ia[t]}`},HM="_body_1uhhq_1",VM={body:HM},WM=({addonId:t,additionalText:s,disabled:n,showLoader:r,onConfirm:o})=>e.jsxs(e.Fragment,{children:[e.jsxs(be,{className:VM.body,children:[Xx.disablingConfirmation(t),s&&e.jsxs(e.Fragment,{children:[" ",s]})]}),e.jsxs(ge,{children:[r&&e.jsx(Bt,{fadeInSlowly:!0}),e.jsx(ls,{appearance:"secondary",children:"Cancel"}),e.jsx(P,{appearance:"error",disabled:n,onClick:o,children:Xx.disableButton(t)})]})]}),ej={confirmation:(t,s)=>e.jsxs(e.Fragment,{children:["You're about to enable ",Ia[t]," for"," ",lt(s)," per month. This month's charge will be prorated from the date of purchase.",t==="add_on_extra_compute_16cu"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),"After enabling, you'll need to"," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/manage/endpoints#edit-a-compute",icon:"external_link",children:"update your compute settings"})," ","to configure larger compute sizes"]})]}),enableButton:t=>`Enable ${Ia[t]}`},GM="_body_1uhhq_1",KM={body:GM},QM=({addonId:t,price:s,disabled:n,showLoader:r,onConfirm:o})=>e.jsxs(e.Fragment,{children:[e.jsx(be,{className:KM.body,children:ej.confirmation(t,s)}),e.jsxs(ge,{children:[r&&e.jsx(Bt,{fadeInSlowly:!0}),e.jsx(ls,{appearance:"secondary",children:"Cancel"}),e.jsx(P,{disabled:n,onClick:o,children:ej.enableButton(t)})]})]}),YM=({error:t})=>e.jsxs(e.Fragment,{children:[e.jsx(GC,{error:t}),e.jsx(ge,{children:e.jsx(ls,{children:"Close"})})]}),JM="_root_1ni2t_1",ZM={root:JM},XM=()=>e.jsx("div",{className:ZM.root,children:e.jsx(pe,{fadeInSlowly:!0})});function eU(t){return!!(t&&"limits"in t)}function tU(t,s){return s?t==="add_on_extra_compute_16cu"?sn.largerComputeEnabledToast:sn.addonEnabledToast(t):t==="add_on_extra_compute_16cu"?sn.largerComputeDisabledToast:sn.addonDisabledToast(t)}const sU=({mode:t,addonId:s,price:n,onRequestClose:r})=>{const[o,a]=m.useState(!1),{max_autoscaling_cu:i}=kp(),{activateAddon:c,deactivateAddon:l}=$D(),[d,u]=m.useState(()=>({state:t==="enabling"?"enablingConfirmation":"waitingForDisablingDryRunResults"})),h=Ia[s];m.useEffect(()=>{let g=!1;if(d.state==="waitingForDisablingDryRunResults")return(async()=>{var _;try{await l(s,{dryRun:!0})}catch(x){if(g)return;if(!bc(x)||x.status!==406||!eU((_=x.response)==null?void 0:_.data)){u({state:"error",error:x});return}u({state:"disablingBlocked",data:x.response.data});return}g||u({state:"disablingConfirmation"})})(),()=>{g=!0}},[s,l,d.state]);const p=async()=>{if(d.state!=="disablingConfirmation"&&d.state!=="enablingConfirmation"){tt(sn.invalidOperation);return}a(!0);try{t==="enabling"?await c(s):await l(s),re(tU(s,t==="enabling"))}catch(g){Sr(g),tt(t==="enabling"?sn.failedToEnable:sn.failedToDisable);return}finally{a(!1)}r()};return e.jsx(Qe,{isOpen:!0,title:t==="enabling"?sn.enable(h):sn.disable(h),width:720,noDismiss:o,onRequestClose:r,children:(()=>{switch(d.state){case"enablingConfirmation":return e.jsx(QM,{addonId:s,price:n,disabled:o,showLoader:o,onConfirm:p});case"waitingForDisablingDryRunResults":return e.jsx(XM,{});case"error":return e.jsx(YM,{error:d.error});case"disablingConfirmation":{let g;switch(s){case"add_on_extra_compute_16cu":kt(i)&&(g=sn.disablingLargerComputeWarning(i));break;case"add_on_soc2":g=sn.disablingSoc2Warning;break}return e.jsx(WM,{addonId:s,additionalText:g,disabled:o,showLoader:o,onConfirm:p})}case"disablingBlocked":return e.jsx(zM,{addonId:s,unsatisfiedLimits:d.data.limits})}})()})},nU="_price_19sne_1",rU={price:nU},oU=({title:t,description:s,docLink:n,addonEnabled:r,disabled:o,price:a,additionalActions:i,onToggle:c,hideActions:l})=>e.jsx(yb,{title:t,description:s,docLink:n,actions:r?e.jsxs(e.Fragment,{children:[e.jsx(he,{appearance:"success",children:"Enabled"}),i,!l&&e.jsx(P,{appearance:"secondary",disabled:o,onClick:()=>{c(!1)},children:"Disable"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:rU.price,children:[lt(a),"/month"]}),!l&&e.jsx(P,{appearance:"secondary",disabled:o,onClick:()=>{c(!0)},children:"Enable"})]})}),ZC=[{addonId:"add_on_ip_allow",title:Wa.add_on_ip_allow,description:"Limit database access to trusted IP addresses.",docLink:"https://neon.tech/docs/introduction/ip-allow"},{addonId:"add_on_monitoring_integration",title:Wa.add_on_monitoring_integration,description:"Send metrics and events to Datadog.",docLink:"https://neon.tech/docs/guides/datadog"},{addonId:"add_on_priority_support",title:Wa.add_on_priority_support,description:"Support tickets are top priority for the Neon support team.",docLink:"https://neon.tech/docs/introduction/support"},{addonId:"add_on_extra_compute_16cu",title:Wa.add_on_extra_compute_16cu,description:"Larger compute sizes with autoscaling up to 16 CU.",docLink:"https://neon.tech/docs/introduction/autoscaling"},{addonId:"add_on_hipaa",title:Wa.add_on_hipaa,description:"Enable HIPAA compliance for your Neon projects.",docLink:"https://neon.tech/docs/security/hipaa"},{addonId:"add_on_soc2",title:Wa.add_on_soc2,description:"Configure your database for SOC 2 compliance.",docLink:"https://neon.tech/docs/security/security-overview"}],aU="_root_nndxf_1",iU="_skeletonRow_nndxf_8",tj={root:aU,skeletonRow:iU},cU=()=>e.jsx("div",{className:tj.root,children:br(5).map(t=>e.jsx($,{className:tj.skeletonRow},t))}),Ja={title:"Request SOC 2 report",content:"This request notifies the support team that  you require access to Neon's SOC 2 compliance report. A team member will contact you soon via email to fulfill your request.",requestButton:"Request",successBadge:"Report requested",successToast:"SOC 2 report was requested. Neon support will contact you soon."},lU="_body_1uhhq_1",dU={body:lU},sj=({hideActions:t})=>{const{orgId:s,org:n}=Y(),{email:r}=ae(),{submitSoc2RequestForm:o}=Ra(),[a,i]=m.useState(!1),[c,l]=m.useState(!1),[d,u]=m.useState(!1),h=async()=>{i(!0);try{await o({email:r,orgId:s,orgName:n==null?void 0:n.name}),l(!1),u(!0),re(Ja.successToast)}catch(p){tt(`Something went wrong. ${p}`)}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{title:Ja.title,isOpen:c,width:720,onRequestClose:()=>{l(!1)},children:[e.jsx(be,{className:dU.body,children:Ja.content}),e.jsxs(ge,{children:[a&&e.jsx(Bt,{fadeInSlowly:!0}),e.jsx(ls,{appearance:"secondary",children:"Cancel"}),e.jsx(P,{disabled:a,onClick:h,children:Ja.requestButton})]})]}),d?e.jsx(he,{children:Ja.successBadge}):e.jsx(e.Fragment,{children:!t&&e.jsx(P,{appearance:"secondary",onClick:()=>{l(!0)},children:Ja.requestButton})})]})},uU=["add_on_soc2"],hU=()=>{const{availableAddons:t}=Ip(),{builtInAddons:s}=QT(),{data:n=[],isLoading:r,isFetching:o,error:a}=KC(),{orgId:i}=Y(),{isOrgAdmin:c,isLoading:l}=wt(),d=m.useMemo(()=>!l&&!!i&&!c,[l,i,c]);if(a)throw a;const[u,h]=m.useState(),p=m.useMemo(()=>{const g=[];for(const _ of ZC){const{addonId:x}=_,j=t[x];if(j){const b=n.some(({add_on_id:f})=>f===x);g.push({type:b?"enabled":"disabled",description:_,price:j.price})}s.filter(b=>uU.includes(b)).includes(x)&&g.push({type:"builtIn",description:_,price:0})}return g},[t,s,n]);return r||l?e.jsx(nc,{title:"Add-ons",id:"addons",children:e.jsx(cU,{})}):e.jsxs(e.Fragment,{children:[u&&e.jsx(sU,{addonId:u.addonId,mode:u.mode,price:u.price,onRequestClose:()=>{h(void 0)}}),e.jsx(nc,{title:"Add-ons",id:"addons",action:o?e.jsx(Bt,{fadeInSlowly:!0}):void 0,children:p.length===0?e.jsx("div",{children:"No available add-ons"}):p.map(({description:{addonId:g,title:_,description:x,docLink:j},type:b,price:f})=>{if(g==="add_on_hipaa")return e.jsx(FD,{title:_,docLink:j,description:x,addonEnabled:b==="enabled",hideActions:d,disabled:o},g);if(b==="builtIn")return e.jsx(yb,{title:_,docLink:j,description:x,actions:g==="add_on_soc2"&&e.jsx(sj,{hideActions:d})},g);const y=b==="enabled";return e.jsx(oU,{title:_,docLink:j,description:x,addonEnabled:y,disabled:o,price:f,additionalActions:g==="add_on_soc2"&&y&&e.jsx(sj,{}),onToggle:()=>{h({addonId:g,price:f,mode:y?"disabling":"enabling"})},hideActions:d},g)})})]})},pU=()=>e.jsx(KT,{children:({reset:t})=>e.jsx(Ms,{onReset:t,fallback:({error:s,resetError:n})=>e.jsx(nc,{title:"Add-ons",id:"addons",children:e.jsx(GC,{error:s,onReset:n})}),children:e.jsx(hU,{})})}),Za={companyName:"Company name",address:"Address",city:"City",postal:"Postal/ZIP",country:"Country",tax:"VAT/Tax ID"},mU="_root_1x455_1",gU="_doubleWidth_1x455_8",_U="_item_1x455_12",Wi={root:mU,doubleWidth:gU,item:_U},fU=()=>e.jsxs("div",{className:Wi.root,children:[e.jsx($,{width:"100%",height:44,className:Wi.doubleWidth}),e.jsx($,{width:"100%",height:44,className:Wi.doubleWidth}),e.jsx($,{width:"100%",height:44}),e.jsx($,{width:"100%",height:44}),e.jsx($,{width:"100%",height:44}),e.jsx($,{width:"100%",height:44})]}),bU="-",Xa=({label:t,value:s,isDoubleWidth:n=!1})=>e.jsxs("div",{className:M(Wi.item,{[Wi.doubleWidth]:n}),children:[e.jsx(Vt,{children:t}),e.jsx(Vt,{appearance:"secondary",children:s||bU})]}),xU=()=>{const{paymentInfo:t}=Sp();if(!t)return null;const{name:s,addressLine1:n,addressLine2:r,addressCity:o,addressPostalCode:a,addressCountry:i,addressCountryName:c,taxId:l}=t;return e.jsxs("div",{className:Wi.root,children:[e.jsx(Xa,{label:Za.companyName,value:s,isDoubleWidth:!0}),e.jsx(Xa,{label:Za.address,value:`${n} ${r}`,isDoubleWidth:!0}),e.jsx(Xa,{label:Za.city,value:o}),e.jsx(Xa,{label:Za.postal,value:a}),e.jsx(Xa,{label:Za.country,value:c??i}),e.jsx(Xa,{label:Za.tax,value:l})]})},na={description:"Charges are applied to your card on the first day of the month.",paymentMethod:"Payment method",billingEmail:"Billing email",edit:"Edit",billingInfo:"Billing Info"},jU="_cards_1b95y_1",yU="_doubleWidth_1b95y_7",vU="_header_1b95y_11",wU="_cardBg_1b95y_18",fs={cards:jU,doubleWidth:yU,header:vU,cardBg:wU},SU=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(!1),r=()=>n(!0),o=()=>n(!1);return e.jsxs(e.Fragment,{children:[e.jsx(CM,{isOpen:s,onRequestClose:o}),e.jsx(s1,{appearance:"link",onClick:()=>{t("billing_edit_email_clicked"),r()},label:na.edit})]})},CU=()=>e.jsxs(e.Fragment,{children:[e.jsxs(ln,{children:[e.jsxs("div",{className:fs.header,children:[e.jsx($,{width:160,height:28}),e.jsx($,{width:26,height:20})]}),e.jsx($,{width:"100%",height:21})]}),e.jsxs(ln,{children:[e.jsxs("div",{className:fs.header,children:[e.jsx($,{width:160,height:28}),e.jsx($,{width:26,height:20})]}),e.jsx($,{width:"100%",height:21})]}),e.jsxs(ln,{className:fs.doubleWidth,children:[e.jsxs("div",{className:fs.header,children:[e.jsx($,{width:100,height:28}),e.jsx($,{width:26,height:20})]}),e.jsx(fU,{})]})]}),kU=({id:t,title:s})=>{const{paymentMethod:n,isFetching:r}=ae(),{paymentInfo:o,isLoading:a}=Sp(),i=n==="stripe",c=r||a;return e.jsxs(nc,{title:s,id:t,children:[e.jsx(Vt,{children:na.description}),e.jsx("div",{className:fs.cards,children:c?e.jsx(CU,{}):e.jsxs(e.Fragment,{children:[i&&e.jsxs(ln,{className:fs.cardBg,children:[e.jsxs("div",{className:fs.header,children:[e.jsx(z,{level:3,children:na.paymentMethod}),e.jsx(YT,{appearance:"link",label:na.edit})]}),e.jsx(JT,{})]}),e.jsxs(ln,{className:M(fs.cardBg,{[fs.doubleWidth]:!i}),children:[e.jsxs("div",{className:fs.header,children:[e.jsx(z,{level:3,children:na.billingEmail}),e.jsx(SU,{})]}),e.jsx(Vt,{appearance:"secondary",children:o==null?void 0:o.email})]}),e.jsxs(ln,{className:M(fs.cardBg,fs.doubleWidth),children:[e.jsxs("div",{className:fs.header,children:[e.jsx(z,{level:3,children:na.billingInfo}),e.jsx(EM,{appearance:"link",label:na.edit})]}),e.jsx(xU,{})]})]})})]})},nj={freeV2ToV3MigrationText:({serverlessPlanCost:t})=>e.jsxs(e.Fragment,{children:["We've updated our Free plan. It now includes 10 projects, each with 0.5 GB of storage and 50 compute hours. See the details on our"," ",e.jsx(A,{href:e1,openInNewTab:!0,children:"pricing page"}),". Need more? The Serverless plan starts at just"," ",lt(t),"/month."]}),hideBtn:"Got it"},IU="_alert_1lbsr_1",PU={alert:IU},TU="free_v2",rj="free",NU=4,AU=t=>{var r,o,a;if(!(t!=null&&t.length)||((r=t[0].plan_details)==null?void 0:r.name)!==rj)return!1;const n=t.slice(0,NU);for(let i=0;i<n.length;i+=1){if(i+1===n.length)return!1;const c=n[i];if(((o=n[i+1].plan_details)==null?void 0:o.name)===TU&&((a=c.plan_details)==null?void 0:a.name)===rj)return!0}return!1},EU=()=>{const t=n1(),{orgId:s}=Y(),n=m.useMemo(()=>{var c;return(c=t.find(l=>l.subscriptionType==="serverless_v3"))==null?void 0:c.price},[t]),{consumptionPeriods:r,isConsumptionLoading:o}=Lp(),[a,i]=xs(Me.FreeV2ToV3MigrationAlertDimissed,s||"user",!1);return a||o||!n||!AU(r)?null:e.jsx(Q,{appearance:"info",className:PU.alert,action:e.jsx(A,{onClick:()=>i(!0),children:nj.hideBtn}),children:e.jsx(T,{children:nj.freeV2ToV3MigrationText({serverlessPlanCost:n})})})},$U={description:"Our plans are built to fit the size of your project. Pay a flat rate for a set plan, plus a little extra if you go over. Upgrade to the next tier as your project grows."},OU="_root_1y26d_1",RU="_section_1y26d_9",BU="_sectionHeader_1y26d_16",LU="_sectionTitle_1y26d_22",au={root:OU,section:RU,sectionHeader:BU,sectionTitle:LU},iu={planName:t=>`${t} Plan`,currentPlan:"Current plan",whatIsIncluded:"What's included:",whatIsIncludedPerProject:"What's included per project:"},DU="_root_1wwb6_1",MU="_loaderWrapper_1wwb6_6",UU="_content_1wwb6_14",FU="_titleAndPrice_1wwb6_20",qU="_title_1wwb6_20",zU="_price_1wwb6_33",HU="_amount_1wwb6_37",VU="_features_1wwb6_41",WU="_featuresList_1wwb6_47",GU="_featureItem_1wwb6_56",KU="_featureIcon_1wwb6_62",Cs={root:DU,loaderWrapper:MU,content:UU,titleAndPrice:FU,title:qU,price:zU,amount:HU,features:VU,featuresList:WU,featureItem:GU,featureIcon:KU};function QU(){const t=r1(),s=kp();return m.useMemo(()=>{var a,i,c;if(!t)return;const n=[],r=ZT((a=t.pg_settings)==null?void 0:a["neon.max_cluster_size"]);r&&n.push({description:`${r} storage`}),kt(s.max_autoscaling_cu)&&n.push({description:`Autoscaling to ${o1(s.max_autoscaling_cu)}`,hint:Uf(s.max_autoscaling_cu)});const o=s.per_project.compute_time_seconds;if(kt(o))n.push({description:`${lo(o)} compute hours`});else{const l=Th((c=(i=t.metrics)==null?void 0:i.items)==null?void 0:c.per_project_aggr_compute_time,d=>`${lo(d)} compute hours`);l&&n.push(l)}return kt(s.max_branches)&&n.push({description:`${s.max_branches} branches`}),n},[s,t])}const YU=({titleId:t})=>{const{isPricingV3Account:s}=ae(),n=a1(),r=QU();return n?e.jsx("div",{className:Cs.root,children:e.jsxs("div",{className:Cs.content,children:[e.jsxs("div",{className:Cs.titleAndPrice,children:[e.jsxs("div",{id:t,className:Cs.title,children:[e.jsx(z,{level:1,size:"h2",children:iu.planName(n.title)}),e.jsx(he,{children:iu.currentPlan})]}),e.jsxs("div",{className:Cs.price,children:[e.jsx("span",{className:Cs.amount,children:lt(n.cost,!0)}),"/month"]})]}),e.jsxs("div",{className:Cs.features,children:[e.jsx(z,{level:2,size:"h5",children:s?iu.whatIsIncludedPerProject:iu.whatIsIncluded}),e.jsx("ul",{className:Cs.featuresList,"data-qa":"current_plan_features_list",children:(r??n.usageMetrics).filter(({id:o})=>o!=="compute").map(({description:o,hint:a})=>e.jsxs("li",{className:Cs.featureItem,children:[e.jsx(L,{name:"check",size:24,className:Cs.featureIcon}),o,a&&e.jsx(Ot,{icon:"info_italic",children:a})]},o))})]})]})}):e.jsx("div",{className:Cs.root,children:e.jsx("div",{id:t,className:Cs.loaderWrapper,children:e.jsx(Bt,{})})})},JU=({id:t,title:s})=>{const{trackUiInteraction:n}=k(),{shouldDisplayPricingV3:r}=XT(),o=a=>{n(`billing_upgrade_to_${i1(a)}_plan_clicked`)};return e.jsxs(e.Fragment,{children:[e.jsx(EU,{}),e.jsxs("div",{className:au.root,"data-qa":"billing_plans_section",children:[e.jsx(YU,{titleId:t}),e.jsxs("div",{className:au.section,children:[e.jsxs("div",{className:au.sectionHeader,children:[e.jsxs("div",{className:au.sectionTitle,children:[e.jsx(z,{level:2,size:"h3",children:s}),e.jsx(eM,{})]}),e.jsx(Vt,{children:$U.description})]}),r?e.jsx(eN,{hideIncludedTitle:!0,hideCurrentPlan:!0,onChangePlanClick:o}):e.jsx(tN,{type:gt.Default,compact:!0,isFullFeatureList:!0,onUpgradeClick:o})]})]})]})},Mm={awsInfo:"To manage your Neon subscription for the above IDs, go to the AWS Marketplace Subscription Management.",awsAccountId:"AWS Account ID",awsEntitlementId:"AWS Entitlement ID"},ZU="_awsCard_lpo77_1",XU="_awsCardItem_lpo77_7",Um={awsCard:ZU,awsCardItem:XU},e4=()=>{const{awsAccountId:t="N/A",awsEntitlementId:s="N/A"}=sN();return e.jsxs("div",{className:Um.awsCard,children:[e.jsx(Q,{children:Mm.awsInfo}),e.jsxs("div",{className:Um.awsCardItem,children:[e.jsx(Vt,{appearance:"primary",children:Mm.awsAccountId}),e.jsx(Vt,{appearance:"secondary","data-qa":"aws_account_id",children:t})]}),e.jsxs("div",{className:Um.awsCardItem,children:[e.jsx(Vt,{appearance:"primary",children:Mm.awsEntitlementId}),e.jsx(Vt,{appearance:"secondary","data-qa":"aws_entitlement_id",children:s})]})]})},Vp=()=>{const{orgId:t}=Y(),s=c1(t),{data:n,isLoading:r,error:o,refetch:a}=Md.useGetBillingCreditBalanceQuery(s?N_:t);return{creditBalance:n,isLoading:r,error:o,refetch:a}},cu={totalCost:"Total charges to date",totalCostExplanation:"Includes your plan's monthly fee and charges for extra usage beyond your plan's monthly allowances. The plan fee is prorated if you changed your plan during this billing period. This amount does not account for any credits you may have.",creditsBalance:"Credit balance",creditsBalanceExplanation:"Credits will be applied to future invoices, before charging your payment method. If your credit balance runs out, your default payment method will be charged."},t4="_summary_192py_1",s4="_totalCostsAmount_192py_13",Fm={summary:t4,totalCostsAmount:s4},n4=()=>{var h;const{consumptionPeriods:t,isConsumptionLoading:s}=Lp(),{projectedServiceFee:n,isLoading:r}=Pc(),{extraAllowanceProjectedTotalCost:o,isLoading:a}=db(),{isLoading:i,creditBalance:c}=Vp(),l=n+o,d=r||a||s||i,u=((h=t==null?void 0:t[0])==null?void 0:h.cost_total)||l;return u?e.jsxs("div",{className:Fm.summary,children:[e.jsxs("span",{children:[cu.totalCost," ",e.jsx(Sx,{children:cu.totalCostExplanation})]}),d?e.jsx($,{width:80,height:20}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Fm.totalCostsAmount,"data-qa":"total_cost",children:lt(u)}),c&&c.balance_cents>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[cu.creditsBalance," ",e.jsx(Sx,{children:cu.creditsBalanceExplanation})]}),e.jsx("span",{className:Fm.totalCostsAmount,"data-qa":"credits_balance",children:lt(c.balance_cents)})]})]})]}):null},r4={viewInOrb:"View detailed usage in Orb"},o4="_directCard_1hn60_1",a4={directCard:o4},i4=()=>{const{portalUrl:t}=ae();return e.jsx("div",{className:a4.directCard,children:e.jsx(A,{openInNewTab:!0,href:t,icon:"external_link",children:r4.viewInOrb})})},c4={azureOrgInfo:e.jsxs(e.Fragment,{children:["To change the billing plan for your Azure subscription, see"," ",e.jsx(A,{href:nN,openInNewTab:!0,children:"changing your plan"}),"."]})},l4=()=>{const{isAzureOrg:t}=Y();return e.jsx(e.Fragment,{children:t&&e.jsx(Q,{children:c4.azureOrgInfo})})},d4="_collapseIcon_1pvrk_1",u4="_collapseIcon_collapsed_1pvrk_8",h4="_usagePurchases_1pvrk_12",p4="_usageItem_1pvrk_20",m4="_usageTitle_1pvrk_31",g4="_usageDetails_1pvrk_37",_4="_itemDescription_1pvrk_42",f4="_itemCost_1pvrk_47",Zn={collapseIcon:d4,collapseIcon_collapsed:u4,usagePurchases:h4,usageItem:p4,usageTitle:m4,usageDetails:g4,itemDescription:_4,itemCost:f4},vb=({title:t,description:s,cost:n=0,purchases:r=[],"data-qa":o})=>{const[a,i]=m.useState(!0),c=()=>i(d=>!d),l=!!r.length;return e.jsxs("div",{className:Zn.usageItem,"data-qa":o,children:[e.jsx("div",{className:Zn.usageDetails,children:e.jsxs("div",{className:Zn.usageTitle,children:[l&&e.jsx(kr,{appearance:"default",onClick:c,iconName:"chevron_down",iconSize:20,className:M(Zn.collapseIcon,{[Zn.collapseIcon_collapsed]:a})}),e.jsx("span",{"data-qa":"usage_title",children:t})]})}),e.jsx("div",{className:Zn.itemDescription,children:s}),e.jsx("div",{className:Zn.itemCost,children:lt(n)}),l&&e.jsx(Bp,{collapsed:a,className:Zn.usagePurchases,children:r.map(({purchasedOn:d,purchaseDescription:u})=>e.jsx("div",{className:Zn.itemDescription,children:u},d))})]})},oo={extraUsage:"Extras",month:"month",plan:"plan",noExtrasDescription:"No extra charges yet — current usage is covered by your plan.",archiveStorage:"Archive storage"},Re={computeHours:"Compute hours",storage:"Storage",privateDataTransfer:"Private data transfer",publicDataTransfer:"Public data transfer",projects:"Projects",branches:"Branches",pitr7day:"7 day instant recovery",pitr30day:"30 day instant recovery",datadogMetricsExport:"Datadog metrics export",prioritySupport:"Priority support",largerCompute:"Larger compute",ipAllow:"IP Allow",soc2:"SOC 2",hipaa:"HIPAA",month:"month",project:"project",compute:"compute",hour:"hour"};class XC{constructor(s,n){nu(this,"v3Metrics");nu(this,"plan");nu(this,"availableAddons");this.v3Metrics=s,this.plan=n,this.availableAddons=rN(this.plan)}collectAccountUsageItems(){return[...this.collectComputeUsage(),...this.collectStorageUsage(),...this.collectDataTransferUsage(),...this.collectProjectUsage(),...this.collectBranchesUsage(),...this.collectPitr(),...this.collectAddons()]}collectProjectUsageMetrics(){const s=this.findExtraUsageAndCost("per_project_aggr_compute_time"),n=this.findExtraUsageAndCost("per_project_aggr_outbound_public_network_traffic");return{computeSeconds:s.usage,storage:this.getTotalStorage().usage,privateTransfer:this.getTotalPrivateTransfer().usage,publicTransfer:n.usage}}collectComputeUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_compute_time");return[{displayName:Re.computeHours,description:`${lo(s.usage)} ${Re.compute} ${$s(Re.hour,s.usage/oN)}`,cost:s.cost}]}collectStorageUsage(){const s=this.getTotalStorage();return[{displayName:Re.storage,description:Hh(s.usage),cost:s.cost}]}collectDataTransferUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_outbound_public_network_traffic"),n=this.getTotalPrivateTransfer();return[{displayName:Re.privateDataTransfer,description:Os(n.usage),cost:n.cost},{displayName:Re.publicDataTransfer,description:Os(s.usage),cost:s.cost}]}collectProjectUsage(){var o,a;const s=this.findExtraUsageAndCost("extra_projects_active_hourly"),n=(a=(o=this.plan.metrics)==null?void 0:o.items)==null?void 0:a.extra_projects_active_hourly,r=n?aN(n):0;return[{displayName:Re.projects,description:`${lt(r)} / ${Re.project} / ${Re.month}`,cost:s.cost}]}collectBranchesUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_hourly_active_extra_child_branches");return[{displayName:Re.branches,description:`${s.usage} ${$s(Re.hour,s.usage)}`,cost:s.cost}]}collectPitr(){var c,l,d,u,h,p,g;const s=(h=(u=(d=(l=(c=this.plan)==null?void 0:c.metrics)==null?void 0:l.items)==null?void 0:d.per_project_aggr_hourly_pitr_usage)==null?void 0:u.range_based_tiers)==null?void 0:h.tiers,n=PS(s,_=>_.id),r=this.findPitrExtraUsageAndCost("pitr_7d"),o=((p=n.pitr_7d)==null?void 0:p.price)??0,a=this.findPitrExtraUsageAndCost("pitr_30d"),i=((g=n.pitr_30d)==null?void 0:g.price)??0;return[{displayName:Re.pitr7day,description:`${lt(o)} / ${Re.project} / ${Re.month}`,cost:r.cost},{displayName:Re.pitr30day,description:`${lt(i)} / ${Re.project} / ${Re.month}`,cost:a.cost}]}collectAddons(){var g,_,x,j,b,f;const s=this.findAddonExtraUsageAndCost("add_on_hipaa"),n=((g=this.availableAddons.add_on_hipaa)==null?void 0:g.price)??0,r=this.findAddonExtraUsageAndCost("add_on_ip_allow"),o=((_=this.availableAddons.add_on_ip_allow)==null?void 0:_.price)??0,a=this.findAddonExtraUsageAndCost("add_on_soc2"),i=((x=this.availableAddons.add_on_soc2)==null?void 0:x.price)??0,c=this.findAddonExtraUsageAndCost("add_on_extra_compute_16cu"),l=((j=this.availableAddons.add_on_extra_compute_16cu)==null?void 0:j.price)??0,d=this.findAddonExtraUsageAndCost("add_on_priority_support"),u=((b=this.availableAddons.add_on_priority_support)==null?void 0:b.price)??0,h=this.findAddonExtraUsageAndCost("add_on_monitoring_integration"),p=((f=this.availableAddons.add_on_monitoring_integration)==null?void 0:f.price)??0;return[{displayName:Re.ipAllow,description:`${lt(o)} / ${Re.month}`,cost:r.cost},{displayName:Re.datadogMetricsExport,description:`${lt(p)} / ${Re.month}`,cost:h.cost},{displayName:Re.prioritySupport,description:`${lt(u)} / ${Re.month}`,cost:d.cost},{displayName:Re.largerCompute,description:`${lt(l)} / ${Re.month}`,cost:c.cost},{displayName:Re.soc2,description:`${lt(i)} / ${Re.month}`,cost:a.cost},{displayName:Re.hipaa,description:`${lt(n)} / ${Re.month}`,cost:s.cost}]}getTotalStorage(){const s=this.findExtraUsageAndCost("per_project_aggr_cumulative_root_branch_history_size"),n=this.findExtraUsageAndCost("per_project_aggr_cumulative_root_branch_logical_size"),r=this.findExtraUsageAndCost("per_project_aggr_cumulative_child_branch_change_size");return{usage:s.usage+n.usage+r.usage,cost:s.cost+n.cost+r.cost}}getTotalPrivateTransfer(){const s=this.findExtraUsageAndCost("per_project_aggr_inbound_private_network_traffic"),n=this.findExtraUsageAndCost("per_project_aggr_outbound_private_network_traffic");return{usage:s.usage+n.usage,cost:s.cost+n.cost}}findExtraUsageAndCost(s){var r,o;const n=(r=this.v3Metrics)==null?void 0:r.find(a=>a.name===s);return n?(o=n.sub_items)!=null&&o.length?this.calcSubItemsUsageAndCost(n.sub_items??[]):{cost:n.cost??0,usage:n.usage??0}:{usage:0,cost:0}}findAddonExtraUsageAndCost(s){return this.findNestedExtraUsageAndCost(s,"add_on_active_hourly")}findPitrExtraUsageAndCost(s){return this.findNestedExtraUsageAndCost(s,"per_project_aggr_hourly_pitr_usage")}findNestedExtraUsageAndCost(s,n){var a,i,c;const r=(a=this.v3Metrics)==null?void 0:a.find(l=>l.name===n);if(!r)return{usage:0,cost:0};const o=(i=r.sub_items)==null?void 0:i.find(l=>l.id===s);return o?(c=o.sub_items)!=null&&c.length?this.calcSubItemsUsageAndCost(o.sub_items??[]):{cost:o.cost??0,usage:o.usage??0}:{usage:0,cost:0}}calcSubItemsUsageAndCost(s){return s.reduce((n,r)=>{var a;if(!((a=r.sub_items)!=null&&a.length))return{cost:n.cost+(r.cost??0),usage:n.usage+(r.usage??0)};const o=this.calcSubItemsUsageAndCost(r.sub_items);return{cost:n.cost+o.cost,usage:n.usage+o.usage}},{cost:0,usage:0})}}const b4=()=>{const{consumptionPeriods:t,isConsumptionLoading:s}=Lp(),n=r1(),r=t==null?void 0:t[0];return{metrics:m.useMemo(()=>!(r!=null&&r.v3_metrics)||!n?[]:new XC(r.v3_metrics,n).collectAccountUsageItems(),[n,r]),isLoading:s}},x4="_noExtrasDescription_1tbq7_1",e0={noExtrasDescription:x4},j4=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{width:120,height:24}),e.jsx($,{width:230,height:24}),e.jsx($,{width:50,height:24})]}),y4=()=>{const{metrics:t,isLoading:s}=b4(),n=m.useMemo(()=>t.filter(({cost:r})=>r>0),[t]);return s?e.jsx(j4,{}):n.length?n.map(({displayName:r,description:o,cost:a})=>e.jsx(vb,{title:r,description:o,cost:a,"data-qa":"extra_usage_item"},r)):e.jsx("div",{className:e0.noExtrasDescription,children:oo.noExtrasDescription})},v4="_paidCard_wnmu5_1",w4="_paidCard_skeleton_wnmu5_9",S4="_paidCardDivider_wnmu5_14",C4="_sectionHeadline_wnmu5_18",Gi={paidCard:v4,paidCard_skeleton:w4,paidCardDivider:S4,sectionHeadline:C4},k4=["storage","syntheticStorage","compute","archiveStorage","projects"],Oh=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{width:120,height:24}),e.jsx($,{width:230,height:24}),e.jsx($,{width:50,height:24})]}),I4=({metrics:t})=>{const{extraAllowanceProjectedCost:s,extraAllowanceDescription:n,extraAllowancePurchases:r,isLoading:o}=db(),a=m.useMemo(()=>vt(k4.map(i=>{const c=t.find(({id:l,isFlexible:d})=>l===i&&d);if(c)return{id:c.id,title:c.title};if(i==="archiveStorage")return{id:i,title:oo.archiveStorage}})),[t]);return o?e.jsx(Oh,{}):a.length?a.map(({id:i,title:c})=>e.jsx(vb,{title:c,description:n[i],cost:s[i],purchases:r[i],"data-qa":"extra_usage_item"},i)):e.jsx("div",{className:e0.noExtrasDescription,children:oo.noExtrasDescription})},P4=()=>e.jsxs("div",{className:M(Gi.paidCard,Gi.paidCard_skeleton),children:[e.jsx(Oh,{}),e.jsx(yr,{className:Gi.paidCardDivider}),e.jsx(Oh,{}),e.jsx(Oh,{})]}),T4=({plan:t})=>{const{isPricingV3Account:s}=ae(),{startPeriod:n,projectedServiceFee:r,endPeriod:o,isLoading:a}=Pc(),i=m.useMemo(()=>{if(r!==t.cost){const c=_t(o).diff(_t(n),"month",!0).toPrecision(1);return`${lt(t.cost)} x ~${c} ${oo.month}`}return`${lt(t.cost)} x 1 ${oo.month}`},[t.cost,r,n,o]);return a?e.jsx(P4,{}):e.jsxs("div",{className:Gi.paidCard,children:[e.jsxs("div",{children:[e.jsx("div",{className:Gi.sectionHeadline,children:oo.plan}),e.jsx(vb,{title:t.title,description:s?`${lt(t.cost)} / ${oo.month}`:i,cost:r,"data-qa":"plan_details"})]}),e.jsxs("div",{children:[e.jsx("div",{className:Gi.sectionHeadline,children:oo.extraUsage}),s?e.jsx(y4,{}):e.jsx(I4,{metrics:t.usageMetrics})]})]})},N4="_root_6x7cj_1",A4="_planTag_6x7cj_9",E4="_changePlanBtnWrapper_6x7cj_16",qm={root:N4,planTag:A4,changePlanBtnWrapper:E4},t0=({planName:t,showChangePlanButton:s=!1})=>{const[n,r]=m.useState(!1);return e.jsxs("div",{className:qm.root,children:[e.jsx("div",{className:qm.planTag,children:"Plan"}),e.jsx(Vt,{appearance:"headline","data-qa":"sub_plan_name",children:t}),s&&e.jsxs("div",{className:qm.changePlanBtnWrapper,children:[e.jsx(M4,{setUpgradeModalOpen:r}),e.jsx(Pt,{type:gt.AllPlansSelection,isOpen:n,onRequestClose:()=>r(!1)})]})]})},$4="_root_sxji6_1",O4="_metric_sxji6_9",R4="_checkIcon_sxji6_14",B4="_hint_sxji6_18",lu={root:$4,metric:O4,checkIcon:R4,hint:B4},s0=({usageMetrics:t,className:s})=>e.jsx("ul",{className:M(lu.root,s),"data-qa":"plan_usage_metrics",children:t.map(({description:n,hint:r})=>e.jsxs("li",{className:lu.metric,children:[e.jsx(L,{name:"check",size:24,className:lu.checkIcon}),e.jsxs(Vt,{appearance:"tertiary",children:[n," ",r&&e.jsx(Ot,{icon:"info_italic",size:"l",className:lu.hint,children:r})]})]},n))}),W_={included:"Included with",changePlan:"Change plan",changeInVercel:"Change in Vercel"},L4="_root_ctmox_1",D4="_planDesc_ctmox_6",oj={root:L4,planDesc:D4},M4=t=>{const{isVercelOrg:s}=Y();return s?e.jsx(P,{as:We,appearance:"secondary",href:iN,icon:"external_link",iconSide:"right",target:"_blank",children:W_.changeInVercel}):e.jsx(P,{appearance:"secondary",onClick:()=>t.setUpgradeModalOpen(!0),children:W_.changePlan})},U4=({plan:t,showChangePlanButton:s})=>t?e.jsxs("div",{className:oj.root,children:[e.jsx(t0,{planName:t.title,showChangePlanButton:s}),e.jsxs("div",{className:oj.planDesc,children:[e.jsx(Vt,{appearance:"primary",children:`${W_.included} ${t.title}:`}),e.jsx(s0,{usageMetrics:t.usageMetrics})]})]}):null,F4="_root_yz1p4_1",q4="_groupedPlanFeatures_yz1p4_7",z4="_descriptionGroup_yz1p4_14",zm={root:F4,groupedPlanFeatures:q4,descriptionGroup:z4},H4=["add_on_soc2","add_on_monitoring_integration","add_on_ip_allow"];function V4(){var l,d,u;const t=Ff(),{planInfo:s}=cN(),{data:n}=KC(),r=m.useMemo(()=>new Set((n==null?void 0:n.map(({add_on_id:h})=>h))??[]),[n]),o=(l=s.metrics)==null?void 0:l.items,a=(d=s.limits)==null?void 0:d.max_autoscaling_cu,i=(u=s.limits)==null?void 0:u.max_branches,c=m.useMemo(()=>{const h={included:[],includedPerProject:[],addons:[]};o&&(h.included.push(Th(o.extra_projects_active_hourly,g=>`${g} projects`)),h.includedPerProject.push(Th(o.per_project_aggr_cumulative_logical_size,g=>`${Pn(g)} GB-month storage`)),h.includedPerProject.push(Th(o.per_project_aggr_compute_time,g=>`${lo(g)} compute hours`)));const p=lN(t);for(const g of H4)p.includes(g)&&h.included.push({description:Ia[g]});a!==void 0&&kt(a)&&h.includedPerProject.push({description:`Autoscaling to ${a} CU`,hint:Uf(a)}),i!==void 0&&kt(i)&&h.includedPerProject.push({description:`Up to ${i} branches`}),kt(s.limits.max_read_only_endpoints,!0)||h.includedPerProject.push({description:"Instant Read Replicas"});for(const{addonId:g,title:_}of ZC)r.has(g)&&h.addons.push({description:_});return h},[o,t,a,i,s.limits.max_read_only_endpoints,r]);return m.useMemo(()=>[{title:"Included",items:vt(c.included)},{title:"Included per project",items:vt(c.includedPerProject)},{title:"Add-ons",items:vt(c.addons)}].filter(h=>h.items.length>0),[c])}const W4=({showChangePlanButton:t})=>{const{subscriptionType:s}=ae(),n=V4();return e.jsxs("div",{className:zm.root,children:[e.jsx(t0,{planName:Xi[s],showChangePlanButton:t}),e.jsx("div",{className:zm.groupedPlanFeatures,children:n.map(r=>e.jsxs("div",{className:zm.descriptionGroup,children:[e.jsxs(z,{level:4,size:"h6",children:[r.title,":"]}),e.jsx(s0,{usageMetrics:r.items})]},r.title))})]})},Hm={currentCosts:"Charges to date",staffAccountHeader:"Staff account active",staffAccountDescription:"This is a staff account. Use admin UI to change your plan."},G4="_root_1wom2_1",K4="_summaryCard_1wom2_7",Q4="_centerVertically_1wom2_14",Y4="_fullWidth_1wom2_20",J4="_contentWrapper_1wom2_24",Z4="_noBottomPadding_1wom2_31",X4="_currentCostsHeader_1wom2_35",Or={root:G4,summaryCard:K4,centerVertically:Q4,fullWidth:Y4,contentWrapper:J4,noBottomPadding:Z4,currentCostsHeader:X4},e3=({id:t,title:s})=>{const{subscriptionType:n,isMarketplaceAccount:r,isSelfServedAccount:o,isPaidSubscription:a,isStaffAccount:i,isTrialAccount:c,isPricingV3Account:l}=ae(),d=a1(),{orgId:u}=Y(),{isOrgAdmin:h}=wt(),p=aF({subscriptionType:n,isStaffAccount:i,isTrialAccount:c,isMarketplaceAccount:r,orgId:u,isOrgAdmin:h}),{isAzureOrg:g,isVercelOrg:_}=Y(),x=ee("show_azure_orgs_billing_cost_breakdown"),j=d!==void 0&&(o||g&&x&&a),b=n==="direct_sales";return e.jsx(nc,{title:s,id:t,description:e.jsx(QC,{}),children:e.jsxs("div",{className:Or.root,children:[l?e.jsx(W4,{showChangePlanButton:p}):e.jsx(U4,{showChangePlanButton:p,plan:d}),b&&e.jsx(i4,{}),e.jsxs(ln,{bg:!1,padding:!1,border:!b,className:M(Or.summaryCard,{[Or.centerVertically]:!j,[Or.fullWidth]:!d}),children:[e.jsxs("div",{className:M(Or.contentWrapper,{[Or.noBottomPadding]:j}),children:[_&&e.jsx(BM,{}),n==="aws_marketplace"&&e.jsx(e4,{}),r&&e.jsx(l4,{}),i&&e.jsxs("div",{children:[e.jsx(z,{level:4,className:Or.currentCostsHeader,children:Hm.staffAccountHeader}),e.jsx(T,{children:Hm.staffAccountDescription})]}),j&&e.jsxs("div",{children:[e.jsx(z,{level:4,className:Or.currentCostsHeader,children:Hm.currentCosts}),e.jsx(T4,{plan:d})]})]}),j&&e.jsx(n4,{})]})]})})},it={descriptionPaidPlan:"Your plan includes an allowance of data and storage resources that you can exceed as needed.",descriptionFreePlan:"Your plan includes an allowance of data and storage resources.",computeTitle:"Compute",computeDescription:"The total number of compute hours used.",computeExtra:"Additional compute usage:",nonPrimaryComputeTitle:"Branch compute",nonPrimaryComputeDescription:"The total number of compute hours used by non-default branches.",nonPrimaryComputeExtra:"Additional non-default compute usage:",storageTitle:"Storage",storageDescription:"Storage is the total volume of data and history stored in Neon.",storageExtra:"Additional storage usage:",projectsTitle:"Projects",projectsDescription:"Number of projects currently active in your account.",projectsExtra:"Additional projects usage:",dataTransferTitle:"Data transfer",dataTransferDescription:"The total volume of data transferred out of Neon (egress).",dataTransferExtra:"Additional data transfer usage:",archiveStorageTitle:"Archive storage",archiveStorageDescription:"The total number of gigabyte-months used for archived branches.",archiveStorageExtra:"Additional archive storage usage:",syntheticStorageTitle:"Storage",syntheticStorageDescription:"Storage is the total volume of data and history stored in Neon.",syntheticStorageExtra:"Additional storage usage:"},t3=(t,s,n)=>{if(n)return t<=.5*jm?"info":void 0;if(s)return t<=2*jm?"info":void 0;if(t<=0)return"error";if(t<=.1*jm)return"warning"},s3=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},n3=t=>{if(t>=1)return"error";if(t>=.8)return"warning"},r3=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},o3=(t,s)=>{if(s)return t>=1?"error":t>=.8?"warning":void 0;if(t>=.9&&t<=1)return"info"},a3=(t,s,n)=>{if(s)return t<=50?"info":void 0;if(t<=0)return"error";if(n){if(t<=5)return"warning";if(t<=10)return"info"}if(t<=1)return"warning";if(t<=3)return"info"},i3=t=>{if(t>=1)return"error";if(t>=.8)return"warning"},c3=(t,s)=>Math.min(Math.floor(t/s*100),100),Ao=(t,s,n)=>{const r=n();if(!(!r||!kt(s)))return{usagePercent:c3(t,s),severity:r}},wb=()=>{const{isFreeSubscription:t,subscriptionType:s}=ae(),n=s==="scale"||s==="business",r=s==="launch",{usage:o}=Pc(),a=ub(),{extraAllowanceAmount:{storage:i=0,projects:c=0}}=db(),l=Ao(o.storage,a.storage+i,()=>t3(a.storage+i-o.storage,n,r)),d=Ao(o.compute,a.compute,()=>s3(o.compute/a.compute,t)),u=Ao(o.nonPrimaryCompute,a.nonPrimaryCompute,()=>n3(o.nonPrimaryCompute/a.nonPrimaryCompute)),h=Ao(o.archiveStorage,a.archiveStorage,()=>r3(o.archiveStorage/a.archiveStorage,t)),p=Ao(o.projects,a.projects+c,()=>a3(a.projects+c-o.projects,n,r)),g=Ao(o.dataTransfer,a.dataTransfer,()=>i3(o.dataTransfer/a.dataTransfer)),_=Ao(o.syntheticStorage,a.syntheticStorage,()=>o3(o.syntheticStorage/a.syntheticStorage,t));return{storage:l,compute:d,nonPrimaryCompute:u,projects:p,dataTransfer:g,archiveStorage:h,syntheticStorage:_}},aj=-1,l3=(t,s)=>{if(!kt(s))return 0;const n=t-s;return Math.max(0,n)},d3=(t,s)=>`${Math.min(100,Math.floor(t/s*100))}%`;function Yc({value:t,allowance:s,unit:n,converter:r=Ww}){const o=n?` ${n}`:"";return`${r(t)}${kt(s)?`/${r(s)}${o} - ${d3(t,s)}`:o}`}const Eo=({allowance:t,usage:s,peakUsage:n,printValue:r=c=>c,unit:o,pluralizeUnit:a,isExtraAllowanceAllowed:i})=>{const c=l3(s,t),l=s-c,d=t>0?Math.min(l,t):l,u={withinPlanUsage:r(d),baseLimit:t===aj?void 0:r(t),rawBaseAllowance:t===aj?void 0:t,totalUsage:r(s),peakUsage:n,unit:o,pluralizeUnit:a,rawWithinPlanUsage:d};return i?(u.extraUsage=r(c),u.rawExtraUsage=c):(u.overLimitUsage=r(c),u.rawOverLimitUsage=c),u},u3=()=>{var U,E,K,J,B,W,X;const t=ee("growth_remove_non_primary_compute_limit"),{isPaidAccount:s,isFreeSubscription:n}=ae(),{usage:r,peakUsage:o,isLoading:a}=Pc(),i=ub(),c=wb(),l=(G,V)=>s||!V?void 0:G;let d;if(n){const G=Eo({allowance:i.storage,usage:r.storage,printValue:Pn,unit:"GB",isExtraAllowanceAllowed:!1}),V=l(`${it.storageExtra} ${Os(G.rawOverLimitUsage)}`,G.rawOverLimitUsage);d={id:"storage",title:it.storageTitle,description:it.storageDescription,usage:Yc({value:r.storage,allowance:i.storage,unit:"GB",converter:Pn}),hint:V,overLimit:(U=c.storage)==null?void 0:U.severity,usageDetails:G,isUpgradable:!0}}else{const G=Eo({allowance:i.syntheticStorage,usage:r.syntheticStorage,printValue:Pn,unit:"GB-month",isExtraAllowanceAllowed:!0}),V=l(`${it.syntheticStorageExtra} ${Hh(G.rawOverLimitUsage)}`,G.rawOverLimitUsage);d={id:"syntheticStorage",title:it.syntheticStorageTitle,description:it.syntheticStorageDescription,usage:Yc({value:r.syntheticStorage,allowance:i.syntheticStorage,unit:"GB-month",converter:Pn}),hint:V,overLimit:(E=c.syntheticStorage)==null?void 0:E.severity,usageDetails:G,isUpgradable:!1}}const u=Eo({allowance:i.compute,usage:r.compute,printValue:lo,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),h=Yc({value:r.compute,allowance:i.compute,unit:"h",converter:lo}),p=l(`${it.computeExtra} ${Cx(u.rawOverLimitUsage)}`,u.rawOverLimitUsage),g=Eo({allowance:i.nonPrimaryCompute,usage:r.nonPrimaryCompute,printValue:lo,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),_=Yc({value:r.nonPrimaryCompute,allowance:i.nonPrimaryCompute,unit:"h",converter:lo}),x=l(`${it.nonPrimaryComputeExtra} ${Cx(g.rawOverLimitUsage)}`,u.rawOverLimitUsage),j=Eo({allowance:i.archiveStorage,usage:r.archiveStorage,printValue:Pn,unit:"GB-month",isExtraAllowanceAllowed:!n}),b=Yc({value:r.archiveStorage,allowance:i.archiveStorage,unit:"GB-month",converter:Pn}),f=l(`${it.archiveStorageExtra} ${Hh(j.rawOverLimitUsage)}`,j.rawOverLimitUsage),y=Eo({allowance:i.projects,usage:r.projects,peakUsage:n?void 0:o.projects,unit:"project",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),v=i.projects,w=`${r.projects}${kt(v)?`/${v}`:""}`,S=l(`${it.projectsExtra} ${y.rawOverLimitUsage}`,y.rawOverLimitUsage),I=Eo({allowance:i.dataTransfer,usage:r.dataTransfer,printValue:Pn,unit:"GB",isExtraAllowanceAllowed:!n}),N=`${ym(r.dataTransfer,!0)}/${ym(i.dataTransfer)}`,D=l(`${it.dataTransferExtra} ${ym(I.rawOverLimitUsage)}`,I.rawOverLimitUsage);return{usageMetrics:vt([d,{id:"compute",title:it.computeTitle,description:it.computeDescription,usage:h,hint:p,overLimit:(K=c.compute)==null?void 0:K.severity,usageDetails:u,isUpgradable:n,hide:n&&!kt(i.compute)},t?void 0:{id:"nonPrimaryCompute",title:it.nonPrimaryComputeTitle,description:it.nonPrimaryComputeDescription,usage:_,hint:x,overLimit:(J=c.nonPrimaryCompute)==null?void 0:J.severity,isUpgradable:n,hide:!n,usageDetails:g},{id:"archiveStorage",title:it.archiveStorageTitle,description:it.archiveStorageDescription,usage:b,hint:f,overLimit:(B=c.archiveStorage)==null?void 0:B.severity,usageDetails:j,isUpgradable:n},{id:"projects",title:it.projectsTitle,description:it.projectsDescription,usage:w,hint:S,overLimit:(W=c.projects)==null?void 0:W.severity,usageDetails:y,isUpgradable:n},{id:"dataTransfer",title:it.dataTransferTitle,description:it.dataTransferDescription,usage:N,hint:D,overLimit:(X=c.dataTransfer)==null?void 0:X.severity,usageDetails:I,isUpgradable:n,hide:!kt(i.dataTransfer)}]),isLoading:a}},h3="_cards_y9pix_1",p3="_externalLinkIcon_y9pix_7",n0={cards:h3,externalLinkIcon:p3},m3={info:"most of",warning:"most of",error:"all"};function Vm(t,s,n){const r=dN[t],o=`You have used ${m3[s]} your ${r} allowance`;return n?`${o}, upgrade your account to increase your ${r} limit.`:`${o}.`}const g3={info:(t,s)=>Vm(t,"info",s),warning:(t,s)=>Vm(t,"warning",s),error:(t,s)=>Vm(t,"error",s)},_3="_text_4f1ay_1",f3="_description_4f1ay_8",b3="_bar_4f1ay_14",x3="_overLimit_4f1ay_18",du={text:_3,description:f3,bar:b3,overLimit:x3},sd={withinPlanUsage:"Within plan usage",overLimitUsage:"Over-limit usage",extra:"Extra",totalUsage:"Total usage",peakUsage:"Peak usage"},j3="_root_1ag1q_1",y3="_extra_1ag1q_8",v3="_current_1ag1q_9",w3="_peak_1ag1q_10",S3="_overlimit_1ag1q_11",C3="_mathSymbol_1ag1q_39",Xr={root:j3,extra:y3,current:v3,peak:w3,overlimit:S3,mathSymbol:C3},k3="_card_1lpdc_1",I3="_flexibleCard_1lpdc_12",P3="_label_1lpdc_16",T3="_value_1lpdc_22",N3="_limitDivider_1lpdc_27",Jc={card:k3,flexibleCard:I3,label:P3,value:T3,limitDivider:N3};function A3(t,s,n){return!n||!t&&t!==0?n:typeof s=="string"?$s(n,parseInt(s,10)):typeof s=="number"?$s(n,s):typeof t=="string"?$s(n,parseInt(t,10)):$s(n,t)}const uu=({value:t,limit:s,label:n,unit:r,pluralizeUnit:o,className:a,flexible:i})=>!t&&t!==0?null:e.jsxs("div",{className:M(Jc.card,{[Jc.flexibleCard]:i}),children:[e.jsx("div",{className:M(Jc.label,a),children:n}),e.jsxs("div",{children:[e.jsx("span",{className:Jc.value,children:t}),!!s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Jc.limitDivider,children:"/"}),s]}),r&&` ${o?A3(t,s,r):r}`]})]}),E3=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{width:"100%",height:60}),e.jsx($,{width:"100%",height:60}),e.jsx($,{width:"100%",height:60})]}),$3=(t,s,n)=>t?{label:sd.overLimitUsage,className:Xr.overlimit,value:s}:{label:sd.extra,className:Xr.extra,value:n},O3=({withinPlanUsage:t,baseLimit:s,extraUsage:n,overLimitUsage:r,rawOverLimitUsage:o,peakUsage:a,totalUsage:i,unit:c,pluralizeUnit:l,isLoading:d=!1,shouldAlwaysDisplayExtra:u=!1})=>{if(d)return e.jsx("div",{className:Xr.root,children:e.jsx(E3,{})});const h=!!(o&&o>0),p=u&&!!s||h,{label:g,className:_,value:x}=$3(h,r,n);return e.jsxs("div",{className:Xr.root,children:[p&&e.jsxs(e.Fragment,{children:[e.jsx(uu,{label:sd.withinPlanUsage,value:t,limit:s,unit:c,className:Xr.current,flexible:p,pluralizeUnit:l}),e.jsx("span",{className:Xr.mathSymbol,children:"+"}),e.jsx(uu,{label:g,value:x,unit:c,className:_,flexible:p,pluralizeUnit:l}),e.jsx("span",{className:Xr.mathSymbol,children:"="})]}),e.jsx(uu,{label:sd.totalUsage,value:i,limit:u?void 0:s,unit:c,flexible:p,pluralizeUnit:l}),e.jsx(uu,{label:sd.peakUsage,value:a,unit:c,className:Xr.peak,flexible:p,pluralizeUnit:l})]})},R3="_container_1jsfm_1",B3="_barWrapper_1jsfm_6",L3="_bar_1jsfm_6",D3="_overLimit_1jsfm_21",M3="_usage_1jsfm_27",U3="_baseLimit_1jsfm_32",F3="_extraUsage_1jsfm_38",q3="_emptyExtraUsage_1jsfm_61",ks={container:R3,barWrapper:B3,bar:L3,overLimit:D3,usage:M3,baseLimit:U3,extraUsage:F3,emptyExtraUsage:q3},z3=.02,H3=1,ij=.25,cj=.75;function V3({withinPlanUsage:t,extraUsage:s,totalUsage:n}){const r=t!==0?s/n:0;return r>cj?cj:r>ij?r:ij}function W3({withinPlanUsage:t,baseAllowance:s,extraUsage:n,shouldAlwaysDisplayExtraBar:r}){const o=t+n;let a=V3({withinPlanUsage:t,extraUsage:n,totalUsage:o}),i=1-a;const c=.25*o;let l=c!==0?n/c:0;l=Math.min(l,H3);const d=s!==0?t/s:0;return l===0&&!r&&(a=0,i=1),{extraBarWidth:parseFloat(a.toFixed(2)),extraBarFillRatio:parseFloat(l.toFixed(2)),withinPlanUsageBarWidth:parseFloat(i.toFixed(2)),withinPlanUsageBarFillRatio:parseFloat(d.toFixed(2))}}const lj=t=>t===0?0:Math.max(t,z3)*100,G3=({hint:t,isLoading:s=!1,usageDetails:n,shouldAlwaysDisplayExtraBar:r})=>{const{rawWithinPlanUsage:o,rawExtraUsage:a,rawBaseAllowance:i,rawOverLimitUsage:c}=n;if(i===void 0||i<=0)return null;const l=(c||a)??0,d=c&&c>0,{withinPlanUsageBarWidth:u,withinPlanUsageBarFillRatio:h,extraBarWidth:p,extraBarFillRatio:g}=W3({withinPlanUsage:o,extraUsage:l,baseAllowance:i,shouldAlwaysDisplayExtraBar:r});return s?e.jsx($,{height:10}):e.jsx(Z,{content:t,children:e.jsxs("div",{className:ks.container,children:[e.jsxs("div",{className:ks.barWrapper,style:{width:`${u*100}%`},children:[!!h&&e.jsx("div",{style:{width:`${lj(h)}%`},className:M(ks.bar,ks.usage)}),e.jsx("div",{className:M(ks.bar,ks.baseLimit)})]}),p>0&&e.jsxs("div",{className:ks.barWrapper,style:{width:`${p*100}%`},children:[e.jsx("div",{className:M(ks.bar,ks.emptyExtraUsage)}),g>0&&e.jsx("div",{style:{width:`${lj(g)}%`},className:M(ks.bar,{[ks.extraUsage]:!d,[ks.overLimit]:d})})]})]})})},K3=({id:t,title:s,description:n,usage:r="",hint:o="",isLoading:a=!1,overLimit:i,usageDetails:c,shouldAlwaysDisplayExtra:l,isUpgradable:d})=>e.jsxs(ln,{children:[e.jsx(z,{level:3,children:s}),e.jsxs("div",{className:du.text,children:[e.jsx("div",{className:du.description,children:n}),!c&&(a?e.jsx($,{width:60,height:20}):e.jsx(Vt,{appearance:"secondary",children:r}))]}),!!c.baseLimit&&e.jsx("div",{className:du.bar,children:e.jsx(G3,{usageDetails:c,isLoading:a,hint:o,shouldAlwaysDisplayExtraBar:l})}),e.jsx(O3,{...c,shouldAlwaysDisplayExtra:l,isLoading:a}),i&&e.jsx(Q,{appearance:i,className:du.overLimit,children:g3[i](t,d)})]}),Q3=()=>e.jsxs(A,{href:uN,openInNewTab:!0,children:["Explain metrics"," ",e.jsx(L,{size:14,name:"external_link",className:n0.externalLinkIcon})]}),Y3=({id:t,title:s})=>{const{isFreeSubscription:n,isTrialAccount:r,isPaidAccount:o}=ae(),a=o?it.descriptionPaidPlan:it.descriptionFreePlan,{usageMetrics:i,isLoading:c}=u3();return e.jsx(nc,{title:s,description:e.jsxs(e.Fragment,{children:[a,(n||r)&&e.jsx(QC,{noColor:!0})]}),id:t,action:e.jsx(Q3,{}),children:e.jsx("div",{className:n0.cards,children:i.filter(({hide:l})=>!l).map(l=>e.jsx(K3,{shouldAlwaysDisplayExtra:o,isLoading:c,...l},l.id))})})},J3={plans:{id:"plans",name:"Upgrade plan",Component:JU},addons:{id:"addons",name:"Add-ons",Component:pU},usage:{id:"usage",name:"Usage",Component:Y3},payment_info:{id:"payment_info",name:"Payment info",Component:kU},summary:{id:"summary",name:"Billing summary",titleOverride:"This month's summary",Component:e3}},Z3={UNKNOWN:[],free_v2:["plans","usage"],launch:["summary","usage","payment_info"],scale:["summary","usage","payment_info"],business:["summary","usage","payment_info"],direct_sales:["summary","usage","payment_info"],aws_marketplace:["summary","usage"],vercel_pg_legacy:[],free_v3:["plans"],serverless_v3:["summary","addons","payment_info"],business_v3:["summary","addons","payment_info"]},X3=["summary","addons","usage"],eF=["plans","usage"],tF=["summary","usage"],sF=["addons"],nF=["free_v2","launch","scale","business","direct_sales"],hu=t=>t.map(s=>J3[s]),rF=t=>{const{subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:o,isPricingV3Account:a}=t;if(r)return hu(eF);if(n){const i=hu(X3);return a?i:i.filter(c=>!sF.includes(c.id))}return hu(o?tF:Z3[s])},r0=()=>{const{isFetching:t,subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:o,isPricingV3Account:a}=ae();return t?[]:rF({subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:o,isPricingV3Account:a})},oF=["launch","scale","business","serverless_v3","business_v3"],aF=({subscriptionType:t,isStaffAccount:s,isTrialAccount:n,isMarketplaceAccount:r,orgId:o,isOrgAdmin:a})=>n?!1:s?!0:r||o&&!a?!1:oF.includes(t),iF=t=>nF.includes(t),o0=({hint:t="",appearance:s,subscriptionType:n})=>e.jsx(Z,{content:t,children:e.jsx(he,{size:"m",appearance:s,"data-qa":"billing_plan_badge",children:Xi[n]??n})}),dj=t=>{const{subscriptionType:s,isFetching:n}=ae();return n?e.jsx(UC,{}):e.jsx(o0,{...t,subscriptionType:s})},cF=t=>{const{subscriptionType:s,isFetching:n}=l1();return n?e.jsx(UC,{}):e.jsx(o0,{...t,subscriptionType:s})},lF=()=>{const{orgId:t}=Y(),{data:s,isLoading:n}=Md.useGetBillingInvoicesQuery(t);return{invoices:s,isInvoicesLoading:n}},dF=t=>({dataTransfer:{error:"You've used all your data transfer allowance for this month.",warning:`You've used ${t}% of your data transfer allowance this month.`,info:""},compute:{error:"You've used all your compute allowance for this month.",warning:`You've used ${t}% of your compute allowance this month.`,info:""},nonPrimaryCompute:{error:"You've used all your non-primary compute allowance for this month.",warning:`You've used ${t}% of your non-primary compute allowance this month.`,info:""},storage:{error:"You've used all your storage allowance for this account.",warning:`You've used ${t}% of your storage allowance for this account.`,info:""},syntheticStorage:{error:"You've used all your synthetic storage allowance for this account.",warning:`You've used ${t}% of your synthetic storage allowance for this account.`,info:""}}),uF=t=>{const s=dF(t.usagePercent);return t.usageId&&t.severity?s[t.usageId][t.severity]:""},pu={getUsageLimitMessage:uF,badge:{info:"approaching limit",warning:"approaching limit",error:"limit reached"},upgradePlan:"Upgrade plan",reviewUsage:"Review usage"},hF="_root_pch5t_1",pF="_info_pch5t_7",mF="_warning_pch5t_11",gF="_error_pch5t_15",_F="_inner_pch5t_19",fF="_description_pch5t_25",bF="_button_pch5t_29",ao={root:hF,info:pF,warning:mF,error:gF,inner:_F,description:fF,button:bF},xF={info:ao.info,warning:ao.warning,error:ao.error},uj=["error","warning","info",void 0];let hj=!1;const pj=["dataTransfer","compute","storage","nonPrimaryCompute"],jF=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(!1),{isVercelOrg:r}=Y(),{compute:o,dataTransfer:a,nonPrimaryCompute:i,storage:c}=wb(),l=m.useMemo(()=>[{usageId:"compute",...o||{}},{usageId:"dataTransfer",...a||{}},{usageId:"nonPrimaryCompute",...i||{}},{usageId:"storage",...c||{}}],[o,a,i,c]),d=m.useMemo(()=>l.length===0?null:l.sort((b,f)=>{const y=uj.indexOf(b.severity)-uj.indexOf(f.severity);return y!==0?y:pj.indexOf(b.usageId)-pj.indexOf(f.usageId)})[0],[l]),u=()=>{t("overlimit_banner_review_usage_clicked",{is_vercel_org:r})},h=()=>{t("overlimit_banner_upgrade_clicked",{is_vercel_org:r}),r||n(!0)},{billingUrl:p,isLoading:g}=wo();if(m.useEffect(()=>{d!=null&&d.severity&&(d!=null&&d.usagePercent)&&!hj&&(t("overlimit_banner_shown",{limit:d,is_vercel_org:r}),hj=!0)},[d,t,r]),!(d!=null&&d.severity)||!(d!=null&&d.usagePercent))return null;const{usageId:_,severity:x,usagePercent:j}=d;return e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.Default,isOpen:s,onRequestClose:()=>{n(!1)}}),e.jsx("div",{className:M(ao.root,xF[x]),children:e.jsxs("div",{className:ao.inner,children:[e.jsx(he,{appearance:`overlimit_${x}`,children:pu.badge[x]}),e.jsx(T,{className:ao.description,children:pu.getUsageLimitMessage({usageId:_,severity:x,usagePercent:j})}),e.jsx(A,{href:p,disabled:g,className:ao.button,onClick:u,children:pu.reviewUsage}),e.jsx(A,{href:r?p:void 0,className:ao.button,onClick:h,children:pu.upgradePlan})]})})]})},yF="_root_1ymdh_1",vF="_body_1ymdh_10",wF="_icon_1ymdh_17",Wm={root:yF,body:vF,icon:wF},Sb=({title:t,children:s,className:n,type:r="info",...o})=>{const a=r==="warn"?"warning":"info_italic",i=r==="warn"?"alert":"status";return e.jsxs("div",{role:i,className:M(n,Wm.root),...o,children:[e.jsx(L,{className:Wm.icon,name:a,size:20}),e.jsxs("div",{className:Wm.body,children:[t?e.jsx(z,{level:5,children:t}):null,e.jsx("div",{children:s})]})]})},a0="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}@{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require",i0="Host={{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}; Database={{{pgEncodedDatabase}}}; Username={{{pgEncodedRole}}}; {{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}Password={{{pgEncodedPasswordOrPlaceholder}}}; {{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}SSL Mode=VerifyFull; Channel Binding=Require;",SF=`# Add these at the top of your settings.py
import os
from dotenv import load_dotenv
from urllib.parse import urlparse, parse_qsl

load_dotenv()

# Replace the DATABASES section of your settings.py with this
tmpPostgres = urlparse(os.getenv("DATABASE_URL"))

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': tmpPostgres.path.replace('/', ''),
        'USER': tmpPostgres.username,
        'PASSWORD': tmpPostgres.password,
        'HOST': tmpPostgres.hostname,
        'PORT': 5432,
        'OPTIONS': dict(parse_qsl(tmpPostgres.query)),
    }
}
`,CF="DATABASE_URL='{{> connstring}}'",kF=`"{{> connstring_dotnet }}"
`,IF=`{
  ...
  "ConnectionStrings": {
    "DefaultConnection": "{{> connstring_dotnet }}"
  },
  ...
}
`,PF=`package main

import (
	"context"
	"fmt"
	"log"
	"os"

	"github.com/jackc/pgx/v5"
	"github.com/joho/godotenv"
)

func main() {
	err := godotenv.Load()
	if err != nil {
		log.Fatal("Error loading .env file")
	}
	connStr := os.Getenv("DATABASE_URL")
	conn, err := pgx.Connect(context.Background(), connStr)
	if err != nil {
		panic(err)
	}
	defer conn.Close(context.Background())
	_, err = conn.Exec(context.Background(), "CREATE TABLE IF NOT EXISTS playing_with_neon(id SERIAL PRIMARY KEY, name TEXT NOT NULL, value REAL);")
	if err != nil {
		panic(err)
	}
	_, err = conn.Exec(context.Background(), "INSERT INTO playing_with_neon(name, value) SELECT LEFT(md5(i::TEXT), 10), random() FROM generate_series(1, 10) s(i);")
	if err != nil {
		panic(err)
	}
	rows, err := conn.Query(context.Background(), "SELECT * FROM playing_with_neon")
	if err != nil {
		panic(err)
	}
	defer rows.Close()
	for rows.Next() {
		var id int32
		var name string
		var value float32
		if err := rows.Scan(&id, &name, &value); err != nil {
			panic(err)
		}
		fmt.Printf("%d | %s | %f\\n", id, name, value)
	}
}`,TF="DATABASE_URL='{{> connstring}}'",NF=`//Let it be table 't' with a single column 'text' of a type 'Text'. Once created, you can put some rows into it and finally navigate to the API section for endpoint creation. In the GraphQL tab, we can query our table with GraphQL, for example:

query MyQuery {
t {
text
}
}
Save this GraphQL query as an HTTP API endpoint by clicking the REST tab. Let us call the endpoint 'query_t'.

Finally, you can use this endpoint to get the table content now. For example, that is how it works from the shell:

$ curl -H 'x-hasura-admin-secret: {admin_secret}' https://{projectName}.hasura.app/api/rest/query_t
{"t":[{"text":"test"}]}
`,AF=`jdbc:postgresql://{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?user={{{pgEncodedRole}}}{{#storePasswords}}&password={{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}&sslmode=require&channelBinding=require
`,EF=`// database.service.ts
import { neon } from '@neondatabase/serverless';
import { Injectable } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';

@Injectable()
export class DatabaseService {
    private readonly sql;

    constructor(private configService: ConfigService) {
        const databaseUrl = this.configService.get('DATABASE_URL');
        this.sql = neon(databaseUrl);
    }
        async getData() {
        const data = await this.sql\`...\`;
        return data;
    }
}
`,$F=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,OF=`// app/actions.ts
"use server";
import { neon } from "@neondatabase/serverless";

export async function getData() {
    const sql = neon(process.env.DATABASE_URL);
    const data = await sql\`...\`;
    return data;
}
`,RF=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,BF=`require("dotenv").config();

const http = require("http");
const { neon } = require("@neondatabase/serverless");

const sql = neon(process.env.DATABASE_URL);

const requestHandler = async (req, res) => {
  const result = await sql\`SELECT version()\`;
  const { version } = result[0];
  res.writeHead(200, { "Content-Type": "text/plain" });
  res.end(version);
};

http.createServer(requestHandler).listen(3000, () => {
  console.log("Server running at http://localhost:3000");
});`,LF="DATABASE_URL='{{> connstring}}'",DF=`{{#preferPooled}}
PGHOST='{{{poolerHost}}}'
{{/preferPooled}}
{{^preferPooled}}
PGHOST='{{{host}}}'
{{/preferPooled}}
PGDATABASE='{{{pgEncodedDatabase}}}'
PGUSER='{{{pgEncodedRole}}}'
{{#pgEncodedPasswordOrPlaceholder}}PGPASSWORD='{{{pgEncodedPasswordOrPlaceholder}}}'{{/pgEncodedPasswordOrPlaceholder}}
PGSSLMODE='require'
PGCHANNELBINDING='require'
`,MF=`// prisma/schema.prisma
datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}
`,UF=`DATABASE_URL="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{poolerHost}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
# uncomment next line if you use Prisma <5.10
# DATABASE_URL_UNPOOLED="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{host}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
`,FF=`psql '{{> connstring}}'
`,qF=`psql -h pg.neon.tech
`,zF="# To be done",HF=`import { neon } from '@neondatabase/serverless';

const sql = neon('{{> connstring}}');

const posts = await sql('SELECT * FROM posts');

// See https://neon.tech/docs/serverless/serverless-driver
// for more information
`,VF=`import { neon } from '@neondatabase/serverless';

// Retrieve the JWT token (implementation depends on your auth system)
const authToken = getAuthToken();

// Initialize the Neon client with connection string and auth token
const sql = neon('{{> connstring}}', { authToken });

// Run a query
const posts = await sql('SELECT * FROM posts');

// See https://neon.tech/docs/serverless/serverless-driver
// for more information
`,WF=`import { Pool } from '@neondatabase/serverless';

const pool = new Pool({ connectionString: '{{> connstring}}' });

const { rows: [post] } = await pool.query('SELECT * FROM posts');

pool.end();
`,GF=`import os
import asyncio
import re
from sqlalchemy import text
from dotenv import load_dotenv
from sqlalchemy.ext.asyncio import create_async_engine

load_dotenv()

async def async_main() -> None:
    engine = create_async_engine(re.sub(r'^postgresql:', 'postgresql+asyncpg:', os.getenv('DATABASE_URL')), echo=True)
    async with engine.connect() as conn:
        result = await conn.execute(text("select 'hello world'"))
        print(result.fetchall())
    await engine.dispose()

asyncio.run(async_main())`,KF="DATABASE_URL='{{> connstring}}'",QF=`# cat .env | grep DATABASE_URL
DATABASE_URL="{{> connstring}}&charset=utf8"
`,YF=Object.freeze(Object.defineProperty({__proto__:null,_connstring:a0,_connstring_dotnet:i0,django:SF,django_env:CF,dotnet_appsettings:IF,dotnet_ssl:kF,go:PF,go_env:TF,hasura:NF,java:AF,nestjs:EF,nestjs_env:$F,nextjs:OF,nextjs_env:RF,nodejs:BF,nodejs_env:LF,parameters:DF,prismajs:MF,prismajs_env:UF,psql:FF,psql_passwordless:qF,ruby:zF,serverless_http:HF,serverless_http_jwt:VF,serverless_web_sockets:WF,sql_alchemy:GF,sql_alchemy_env:KF,symfony:QF},Symbol.toStringTag,{value:"Module"}));var se=(t=>(t.ConnectionString="connection_string",t.ParametersOnly="parameters_only",t.Psql="psql",t.NextJS="nextjs",t.PrismaJS="prismajs",t.Django="django",t.Java="java",t.SQLAlchemy="sql_alchemy",t.NodeJS="nodejs",t.Symfony="symfony",t.Go="go",t.Serverless="serverless",t.ServerlessJWT="serverless_jwt",t.NestJS="nestjs",t.DotNet="dotnet",t))(se||{});const JF=["psql","connection_string","parameters_only","nextjs","prismajs","nodejs","dotnet","django","sql_alchemy","java","symfony","go","serverless","nestjs"],ZF=["connection_string","parameters_only","serverless_jwt"],XF={connstring:a0.trim(),connstring_dotnet:i0.trim()},Cb={[se.ConnectionString]:{value:se.ConnectionString,label:"Connection string",tabs:[{value:se.ConnectionString,label:"Connection string",template:"_connstring",hasSecrets:!0,language:"text"}]},[se.ParametersOnly]:{value:se.ParametersOnly,label:"Parameters only",tabs:[{value:se.ParametersOnly,label:"Parameters only",template:"parameters",hasSecrets:!0,language:"nix"}]},[se.Psql]:{value:se.Psql,label:"psql",tabs:[{value:se.Psql,label:"connection string",template:"psql",hasSecrets:!0,language:"nix"},{value:"passwordless_auth",label:"passwordless auth",template:"psql_passwordless",hasSecrets:!1,language:"nix"}]},[se.NextJS]:{value:se.NextJS,label:"Next.js",tabs:[{value:se.NextJS,label:"actions.ts",template:"nextjs",language:"javascript"},{value:"env",label:".env",template:"nextjs_env",hasSecrets:!0,language:"nix"}]},[se.PrismaJS]:{value:se.PrismaJS,label:"Prisma",tabs:[{value:se.PrismaJS,label:"schema.prisma",template:"prismajs",language:"prisma"},{value:"env",label:".env",template:"prismajs_env",hasSecrets:!0,language:"nix"}]},[se.DotNet]:{value:se.DotNet,label:".NET",tabs:[{value:se.DotNet,label:"Connection string",template:"dotnet_ssl",hasSecrets:!0,language:"java"},{value:"appsettings",label:"Entity Framework (appsettings.json)",template:"dotnet_appsettings",hasSecrets:!0,language:"nix"}]},[se.Django]:{value:se.Django,label:"Django",tabs:[{value:se.Django,label:"settings.py",template:"django",hasSecrets:!1,language:"python"},{value:"env",label:".env",template:"django_env",hasSecrets:!0,language:"nix"}]},[se.Java]:{value:se.Java,label:"Java",tabs:[{value:se.Java,label:"Java",template:"java",hasSecrets:!0,language:"text"}]},[se.SQLAlchemy]:{value:se.SQLAlchemy,label:"SQLAlchemy",tabs:[{value:se.SQLAlchemy,label:"SQLAlchemy",template:"sql_alchemy",language:"python"},{value:"env",label:".env",template:"sql_alchemy_env",hasSecrets:!0,language:"nix"}]},[se.NodeJS]:{value:se.NodeJS,label:"Node.js",tabs:[{value:se.NodeJS,label:"src/app.js",template:"nodejs",language:"javascript"},{value:"env",label:".env",template:"nodejs_env",hasSecrets:!0,language:"nix"}]},[se.Symfony]:{value:se.Symfony,label:"Symfony",tabs:[{value:se.Symfony,label:"Symfony",template:"symfony",hasSecrets:!0,language:"nix"}]},[se.Go]:{value:se.Go,label:"Go",tabs:[{value:se.Go,label:"Go",template:"go",language:"golang"},{value:"env",label:".env",template:"go_env",hasSecrets:!0,language:"nix"}]},[se.Serverless]:{value:se.Serverless,label:"Neon Serverless Driver",tabs:[{value:"http",label:"HTTP (Recommended)",template:"serverless_http",hasSecrets:!0,language:"javascript"},{value:"websockets",label:"WebSockets",template:"serverless_web_sockets",hasSecrets:!0,language:"javascript"}]},[se.ServerlessJWT]:{value:se.ServerlessJWT,label:"Neon Serverless Driver (JWT)",tabs:[{value:"http-jwt",label:"HTTP (Recommended)",template:"serverless_http_jwt",language:"javascript",hasSecrets:!0}]},[se.NestJS]:{value:se.NestJS,label:"NestJS",tabs:[{value:se.NestJS,label:"database.service.ts",template:"nestjs",language:"javascript"},{value:"env",label:".env",template:"nestjs_env",hasSecrets:!0,language:"nix"}]}},e5=(t="password")=>(t==="passwordless"?ZF:JF).map(n=>Cb[n]),t5=Object.fromEntries(Object.values(Cb).flatMap(t=>t.tabs.map(s=>[s.template,YF[s.template].trim()])));/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var s5=Object.prototype.toString,Ac=Array.isArray||function(s){return s5.call(s)==="[object Array]"};function kb(t){return typeof t=="function"}function n5(t){return Ac(t)?"array":typeof t}function Gm(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function mj(t,s){return t!=null&&typeof t=="object"&&s in t}function r5(t,s){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(s)}var o5=RegExp.prototype.test;function a5(t,s){return o5.call(t,s)}var i5=/\S/;function c5(t){return!a5(i5,t)}var l5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function d5(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return l5[n]})}var u5=/\s*/,h5=/\s+/,gj=/\s*=/,p5=/\s*\}/,m5=/#|\^|\/|>|\{|&|=|!/;function g5(t,s){if(!t)return[];var n=!1,r=[],o=[],a=[],i=!1,c=!1,l="",d=0;function u(){if(i&&!c)for(;a.length;)delete o[a.pop()];else a=[];i=!1,c=!1}var h,p,g;function _(N){if(typeof N=="string"&&(N=N.split(h5,2)),!Ac(N)||N.length!==2)throw new Error("Invalid tags: "+N);h=new RegExp(Gm(N[0])+"\\s*"),p=new RegExp("\\s*"+Gm(N[1])),g=new RegExp("\\s*"+Gm("}"+N[1]))}_(s||Bs.tags);for(var x=new Qd(t),j,b,f,y,v,w;!x.eos();){if(j=x.pos,f=x.scanUntil(h),f)for(var S=0,I=f.length;S<I;++S)y=f.charAt(S),c5(y)?(a.push(o.length),l+=y):(c=!0,n=!0,l+=" "),o.push(["text",y,j,j+1]),j+=1,y===`
`&&(u(),l="",d=0,n=!1);if(!x.scan(h))break;if(i=!0,b=x.scan(m5)||"name",x.scan(u5),b==="="?(f=x.scanUntil(gj),x.scan(gj),x.scanUntil(p)):b==="{"?(f=x.scanUntil(g),x.scan(p5),x.scanUntil(p),b="&"):f=x.scanUntil(p),!x.scan(p))throw new Error("Unclosed tag at "+x.pos);if(b==">"?v=[b,f,j,x.pos,l,d,n]:v=[b,f,j,x.pos],d++,o.push(v),b==="#"||b==="^")r.push(v);else if(b==="/"){if(w=r.pop(),!w)throw new Error('Unopened section "'+f+'" at '+j);if(w[1]!==f)throw new Error('Unclosed section "'+w[1]+'" at '+j)}else b==="name"||b==="{"||b==="&"?c=!0:b==="="&&_(f)}if(u(),w=r.pop(),w)throw new Error('Unclosed section "'+w[1]+'" at '+x.pos);return f5(_5(o))}function _5(t){for(var s=[],n,r,o=0,a=t.length;o<a;++o)n=t[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(s.push(n),r=n));return s}function f5(t){for(var s=[],n=s,r=[],o,a,i=0,c=t.length;i<c;++i)switch(o=t[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:s;break;default:n.push(o)}return s}function Qd(t){this.string=t,this.tail=t,this.pos=0}Qd.prototype.eos=function(){return this.tail===""};Qd.prototype.scan=function(s){var n=this.tail.match(s);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};Qd.prototype.scanUntil=function(s){var n=this.tail.search(s),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function rc(t,s){this.view=t,this.cache={".":this.view},this.parent=s}rc.prototype.push=function(s){return new rc(s,this)};rc.prototype.lookup=function(s){var n=this.cache,r;if(n.hasOwnProperty(s))r=n[s];else{for(var o=this,a,i,c,l=!1;o;){if(s.indexOf(".")>0)for(a=o.view,i=s.split("."),c=0;a!=null&&c<i.length;)c===i.length-1&&(l=mj(a,i[c])||r5(a,i[c])),a=a[i[c++]];else a=o.view[s],l=mj(o.view,s);if(l){r=a;break}o=o.parent}n[s]=r}return kb(r)&&(r=r.call(this.view)),r};function Xt(){this.templateCache={_cache:{},set:function(s,n){this._cache[s]=n},get:function(s){return this._cache[s]},clear:function(){this._cache={}}}}Xt.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Xt.prototype.parse=function(s,n){var r=this.templateCache,o=s+":"+(n||Bs.tags).join(":"),a=typeof r<"u",i=a?r.get(o):void 0;return i==null&&(i=g5(s,n),a&&r.set(o,i)),i};Xt.prototype.render=function(s,n,r,o){var a=this.getConfigTags(o),i=this.parse(s,a),c=n instanceof rc?n:new rc(n,void 0);return this.renderTokens(i,c,r,s,o)};Xt.prototype.renderTokens=function(s,n,r,o,a){for(var i="",c,l,d,u=0,h=s.length;u<h;++u)d=void 0,c=s[u],l=c[0],l==="#"?d=this.renderSection(c,n,r,o,a):l==="^"?d=this.renderInverted(c,n,r,o,a):l===">"?d=this.renderPartial(c,n,r,a):l==="&"?d=this.unescapedValue(c,n):l==="name"?d=this.escapedValue(c,n,a):l==="text"&&(d=this.rawValue(c)),d!==void 0&&(i+=d);return i};Xt.prototype.renderSection=function(s,n,r,o,a){var i=this,c="",l=n.lookup(s[1]);function d(p){return i.render(p,n,r,a)}if(l){if(Ac(l))for(var u=0,h=l.length;u<h;++u)c+=this.renderTokens(s[4],n.push(l[u]),r,o,a);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")c+=this.renderTokens(s[4],n.push(l),r,o,a);else if(kb(l)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,o.slice(s[3],s[5]),d),l!=null&&(c+=l)}else c+=this.renderTokens(s[4],n,r,o,a);return c}};Xt.prototype.renderInverted=function(s,n,r,o,a){var i=n.lookup(s[1]);if(!i||Ac(i)&&i.length===0)return this.renderTokens(s[4],n,r,o,a)};Xt.prototype.indentPartial=function(s,n,r){for(var o=n.replace(/[^ \t]/g,""),a=s.split(`
`),i=0;i<a.length;i++)a[i].length&&(i>0||!r)&&(a[i]=o+a[i]);return a.join(`
`)};Xt.prototype.renderPartial=function(s,n,r,o){if(r){var a=this.getConfigTags(o),i=kb(r)?r(s[1]):r[s[1]];if(i!=null){var c=s[6],l=s[5],d=s[4],u=i;l==0&&d&&(u=this.indentPartial(i,d,c));var h=this.parse(u,a);return this.renderTokens(h,n,r,u,o)}}};Xt.prototype.unescapedValue=function(s,n){var r=n.lookup(s[1]);if(r!=null)return r};Xt.prototype.escapedValue=function(s,n,r){var o=this.getConfigEscape(r)||Bs.escape,a=n.lookup(s[1]);if(a!=null)return typeof a=="number"&&o===Bs.escape?String(a):o(a)};Xt.prototype.rawValue=function(s){return s[1]};Xt.prototype.getConfigTags=function(s){return Ac(s)?s:s&&typeof s=="object"?s.tags:void 0};Xt.prototype.getConfigEscape=function(s){if(s&&typeof s=="object"&&!Ac(s))return s.escape};var Bs={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){kd.templateCache=t},get templateCache(){return kd.templateCache}},kd=new Xt;Bs.clearCache=function(){return kd.clearCache()};Bs.parse=function(s,n){return kd.parse(s,n)};Bs.render=function(s,n,r,o){if(typeof s!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+n5(s)+'" was given as the first argument for mustache#render(template, view, partials)');return kd.render(s,n,r,o)};Bs.escape=d5;Bs.Scanner=Qd;Bs.Context=rc;Bs.Writer=Xt;const b5=({database:t,endpoint:s,role:n,password:r,poolerEnabled:o})=>({pgEncodedRole:Ga(n==null?void 0:n.name),singleQuoteEscapedRole:vm(n==null?void 0:n.name),roleIsEncoded:(n==null?void 0:n.name)!==Ga(n==null?void 0:n.name),pgEncodedDatabase:Ga(t==null?void 0:t.name),singleQuoteEscapedDatabase:vm(t==null?void 0:t.name),databaseIsEncoded:(t==null?void 0:t.name)!==Ga(t==null?void 0:t.name),projectName:`${(s==null?void 0:s.id)??""}${o?"-pooler":""}`,host:$_(s),poolerHost:$_(s,!0),preferPooled:o,pgEncodedPassword:Ga(r),singleQuoteEscapedPassword:vm(r),passwordIsEncoded:r!==Ga(r)}),G_=(t,s)=>{const n=b5(s);let r="";return s.roleAuthMode==="passwordless"?r="":r=n.pgEncodedPassword||wm.pgEncodedPassword,Bs.render(t5[t],{...wm,...n,pgEncodedPasswordOrPlaceholder:r,singleQuoteEscapedPasswordOrPlaceholder:n.singleQuoteEscapedPassword||wm.pgEncodedPassword,storePasswords:s.storePasswords??!1},XF)},x5="_drawer_1r7s6_1",j5={drawer:x5},c0=t=>m.useCallback(s=>{const n=new Date;return!!(t&&vE(s.startOf("day").toDate(),n)===void 0&&wE(s.endOf("day").toDate(),t,n)===void 0)},[t]),mu={lsnPlaceholder:"e.g., 0/1E89C00",timestampPlaceholder:"MM/DD/YYYY hh:mm:ss.ms",timestampSelectLabel:"Timestamp",lsnSelectLabel:"LSN"},y5="_root_1li1q_1",v5="_timestampField_1li1q_8",w5="_lsnField_1li1q_13",S5="_switchButton_1li1q_18",Zc={root:y5,timestampField:v5,lsnField:w5,switchButton:S5},Ib=({value:t,className:s,onChange:n,allowToSwitch:r=!0})=>{const{project:o}=O(),{trackUiInteraction:a}=k(),i=t.mode===Ee.Timestamp&&t.timestamp&&o&&SE(t.timestamp,o,new Date),c=t.mode===Ee.LSN&&t.lsn&&CE(t.lsn),l=c0(o),d=m.useCallback(u=>{const h=typeof u=="string"?d1(uo(u),uo(ve.Full),!0):u;n({sourceBranch:t.sourceBranch,mode:Ee.Timestamp,timestamp:h.toDate()})},[n,t.sourceBranch]);return e.jsxs("div",{className:M(Zc.root,s),children:[t.mode===Ee.Timestamp&&e.jsxs(e.Fragment,{children:[e.jsx(R,{label:mu.timestampSelectLabel,className:Zc.timestampField,error:i instanceof kE?i.message:void 0,description:e.jsx(kx,{}),children:e.jsx(u1,{dateFormat:uo(ve.Date),timeFormat:uo(ve.TimeFull),initialValue:t.timestamp??void 0,placeholder:mu.timestampPlaceholder,isValidDate:l,onChange:d})}),r&&e.jsx(A,{"data-qa":"toggle_PITR",className:Zc.switchButton,onClick:()=>{a("branch_restore_pit_lsn_clicked"),n({sourceBranch:t.sourceBranch,mode:Ee.LSN,lsn:null})},children:"LSN"})]}),t.mode===Ee.LSN&&e.jsxs(e.Fragment,{children:[e.jsx(R,{label:mu.lsnSelectLabel,className:Zc.lsnField,error:c?c.message:void 0,description:e.jsx(kx,{}),descriptionNotVisible:!0,children:e.jsx(ne,{value:t.lsn??void 0,onChange:u=>n({sourceBranch:t.sourceBranch,mode:Ee.LSN,lsn:u.target.value}),placeholder:mu.lsnPlaceholder})}),r&&e.jsx(A,{"data-qa":"toggle_PITR",className:Zc.switchButton,onClick:()=>{a("branch_restore_pit_timestamp_clicked"),n({sourceBranch:t.sourceBranch,mode:Ee.Timestamp,timestamp:null})},children:"Timestamp"})]})]})},C5="_container_12fg1_1",k5="_restoreFromContainer_12fg1_9",I5="_restoreToContainer_12fg1_10",P5="_dropdown_12fg1_19",T5="_actions_12fg1_23",$o={container:C5,restoreFromContainer:k5,restoreToContainer:I5,dropdown:P5,actions:T5},Nn={unarchiveWarning:({name:t})=>e.jsxs(e.Fragment,{children:["This action will unarchive ",e.jsx(ke,{children:t})," and the restoration source branch, if applicable."]}),restoreFromMessage:(t,s,n)=>e.jsxs(e.Fragment,{children:[e.jsx(yd,{branch:t})," will be restored"," ",s?e.jsx(e.Fragment,{children:"to its past state"}):e.jsxs(e.Fragment,{children:["from ",e.jsx(yd,{branch:n.sourceBranch})]})]}),restoreToTimestamp:(t,s,n)=>e.jsxs(e.Fragment,{children:[t," ",s?"at":"to the state of"," ",e.jsx("code",{children:le(n,ve.BranchDateTimeFormat)})]}),restoreToLsn:(t,s,n)=>e.jsxs(e.Fragment,{children:[t," ",s?"at":"to the state of"," ",e.jsx("code",{children:n})]}),restoreToHead:t=>e.jsxs(e.Fragment,{children:[t," at its current state"]}),restoreDatabasesMessage:t=>e.jsxs(e.Fragment,{children:["Databases to be restored: ",t]}),restoreRenamedMessage:t=>e.jsxs(e.Fragment,{children:["This branch will be kept and renamed to ",e.jsx("code",{children:t})]}),resetPasswordsForSameBranch:t=>{switch(t.mode){case Ee.Timestamp:return e.jsxs(e.Fragment,{children:["Any Postgres role deleted between now and"," ",e.jsx("code",{children:le(t.timestamp,ve.BranchDateTimeFormat)})," ","will get their passwords reset"]});case Ee.LSN:return e.jsxs(e.Fragment,{children:["Any Postgres role deleted between now and"," ",e.jsx("code",{children:t.lsn})," will get their passwords reset"]});case Ee.Head:return null}},restoreUndoMessage:t=>e.jsxs(e.Fragment,{children:["You can undo the restore as long as ",e.jsx("code",{children:t})," is retained"]}),storageBillMessage:t=>e.jsxs(e.Fragment,{children:["Keeping ",e.jsx("code",{children:t})," will affect your storage bill"]})},N5="_header_cioj6_1",A5="_list_cioj6_11",E5="_message_cioj6_18",$5="_icon_cioj6_35",Rh={header:N5,list:A5,message:E5,icon:$5},O5=({branch:t,restoreTo:s})=>{const n=t.id===s.sourceBranch.id,r=Nn.restoreFromMessage(t,n,s);switch(s.mode){case Ee.Timestamp:return e.jsx(e.Fragment,{children:Nn.restoreToTimestamp(r,n,s.timestamp)});case Ee.LSN:return e.jsx(e.Fragment,{children:Nn.restoreToLsn(r,n,s.lsn)});case Ee.Head:return e.jsx(e.Fragment,{children:Nn.restoreToHead(r)})}},ei=({children:t,iconName:s})=>e.jsxs("li",{children:[e.jsx(L,{name:s,size:16,className:Rh.icon}),e.jsx("div",{children:t})]}),l0=({restoreTo:t})=>{var a,i;const{list:s}=un(),{branch:n}=qa();if(!n)return;const r=n.id===t.sourceBranch.id,o=`${n.name}_old_{${IE}}`;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Rh.header,children:[e.jsx(L,{name:"restore",size:40}),n.current_state==="archived"&&e.jsx(Q,{appearance:"warning",children:Nn.unarchiveWarning(n)}),e.jsx("div",{className:Rh.message,children:e.jsx(O5,{branch:n,restoreTo:t})})]}),e.jsxs("ul",{className:Rh.list,children:[s.length>1?e.jsx(ei,{iconName:"check_flat",children:Nn.restoreDatabasesMessage(s.map((c,l)=>e.jsxs(e.Fragment,{children:[l===0?null:", ",e.jsx("code",{children:c.name},c.id)]})))}):null,(a=t.sourceBranch)!=null&&a.protected&&r?e.jsx(ei,{iconName:"check_flat",children:Nn.resetPasswordsForSameBranch(t)}):null,e.jsx(ei,{iconName:"check_flat",children:Nn.restoreRenamedMessage(o)}),e.jsx(ei,{iconName:"check_flat",children:Nn.restoreUndoMessage(o)}),e.jsx(ei,{iconName:"billing",children:Nn.storageBillMessage(o)}),(i=t.sourceBranch)!=null&&i.protected&&!r?e.jsxs(ei,{iconName:"check_flat",children:["No Postgres role passwords from"," ",e.jsx(yd,{branch:t.sourceBranch})," will be used on"," ",e.jsx(yd,{branch:n})]}):null]})]})},R5="_container_1aj9l_1",B5={container:R5},L5=({restoreTo:t,onRequestClose:s,...n})=>{const{restore:r,isRestoring:o}=qa(),{trackUiInteraction:a}=k();return e.jsx(Vn,{...n,"aria-label":"Branch Restore",size:"m",onRequestClose:s,children:e.jsx(Wn,{title:"Branch Restore",footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{appearance:"secondary",size:"l",onClick:()=>{a("branch_restore_restore_cancelled"),s==null||s()},children:"Cancel"}),e.jsx(P,{disabled:o,appearance:"primary",size:"l",onClick:()=>{a("branch_restore_restore_confirmed"),r()},children:"Restore"})]}),children:e.jsx("div",{className:B5.container,children:e.jsx(l0,{restoreTo:t})})})})},D5=({currentBranch:t,compareSource:s,onChange:n,changeableCurrentBranch:r,allowRestore:o=!1,...a})=>{var S;const{data:{selectOptions:i}}=Ud({projectId:a.project.id,branchId:(t==null?void 0:t.id)??""}),{trackUiInteraction:c}=k(),[l,d]=m.useState(!1),[u,h]=m.useState(a.compareTo),[p,g]=m.useState(null),[_,x]=m.useState(t),[j,b]=m.useState((s==null?void 0:s.branch)??t),{selectOptions:f}=Ye(),y=m.useMemo(()=>(s==null?void 0:s.mode)===Jl.Head?f.filter(({value:I})=>j.id!==I):f,[j,f,s==null?void 0:s.mode]),v=m.useMemo(()=>f.filter(({value:I})=>_.id!==I),[_,f]),w=m.useMemo(()=>{if(p&&!Kd(u,a.project,new Date))return{projectId:a.project.id,currentBranch:_,database:p.database,compareSource:{...iS(u),branch:j}}},[a.project,j,u,p,_]);return e.jsxs(e.Fragment,{children:[e.jsx(h1,{projectId:a.project.id,branchId:(S=u.sourceBranch)==null?void 0:S.id,children:e.jsx(L5,{isOpen:l,restoreTo:u,onRequestClose:()=>d(!1)})}),e.jsxs("div",{className:$o.container,children:[e.jsxs("div",{className:$o.restoreToContainer,children:[e.jsx(R,{label:zc.baseBranchLabel,className:$o.dropdown,description:zc.baseBranchDesc,children:e.jsx(Vh,{disabled:!r,options:y,value:y.find(I=>{var N;return((N=I.branch)==null?void 0:N.id)===_.id}),onChange:I=>{I&&I.branch&&(c("schema_diff_form_branch_changed"),x(I.branch))}})}),e.jsx(R,{label:zc.databaseSelectLabel,className:$o.dropdown,children:e.jsx(AS,{projectId:a.project.id,value:p,options:i,disabled:i.length<=1,onChange:(I,N)=>{N||c("schema_diff_form_database_changed"),g(I)},canCreateDatabase:!1})})]}),e.jsxs("div",{className:$o.restoreFromContainer,children:[_.id!==j.id&&e.jsx(R,{label:zc.compareBranchLabel,className:$o.dropdown,description:(s==null?void 0:s.mode)===Jl.Head?zc.compareBranchDesc:"",children:e.jsx(Vh,{options:v,value:v.find(I=>{var N;return((N=I.branch)==null?void 0:N.id)===j.id}),onChange:I=>{I&&I.branch&&(c("schema_diff_form_branch_changed"),b(I.branch))}})}),(s==null?void 0:s.mode)!==Jl.Head&&e.jsx(Ib,{value:u,allowToSwitch:!1,onChange:I=>{c("schema_diff_form_pit_changed"),h(I)}})]}),e.jsxs("div",{className:$o.actions,children:[e.jsx(P,{disabled:!w,appearance:"primary",onClick:()=>{c("schema_diff_form_compare_button_clicked"),n(w)},children:"Compare"}),o&&e.jsx(P,{disabled:!w,appearance:"secondary",icon:"arrow_right",iconSide:"right",onClick:()=>{d(!0)},children:"Restore"})]})]})]})},Pb=({currentBranch:t,changeableCurrentBranch:s,...n})=>{const{trackUiInteraction:r}=k(),{list:o}=un(),{project:a}=O(),[i,c]=m.useState(t),[l,d]=m.useState(o[0]),[u,h]=m.useState();return m.useEffect(()=>{n.isOpen&&r("schema_diff_drawer_opened")},[n.isOpen,r]),m.useEffect(()=>{n.compareTo.sourceBranch&&!Kd(n.compareTo,a,new Date)&&h({...iS(n.compareTo),branch:n.compareTo.sourceBranch})},[n.compareTo,a]),!l&&o.length>0&&d(o[0]),!a||!i||!n.isOpen?null:e.jsx(Vn,{...n,"aria-label":"Schema Diff",className:j5.drawer,children:e.jsxs(Wn,{title:"Schema Diff",children:[e.jsx(D5,{...n,changeableCurrentBranch:s,project:a,currentBranch:i,compareSource:u,onChange:p=>{p&&(c(p.currentBranch),d(p.database),h(p.compareSource))}}),u&&l&&e.jsx(e.Fragment,{children:e.jsx(cS,{projectId:a.id,currentBranch:i,database:l,compareSource:u})})]})})},M5=t=>{const[s,n]=m.useState(!1),{project:r}=O(),{trackUiInteraction:o}=k(),a=!t.currentBranch||!r||Kd(t.compareTo,r,new Date);return e.jsxs(e.Fragment,{children:[!a&&e.jsx(Pb,{isOpen:s,onRequestClose:()=>{o("schema_diff_drawer_dismissed"),n(!1)},allowRestore:!0,...t}),e.jsx(P,{appearance:"secondary",disabled:!!a,icon:"schema",onClick:()=>{o("schema_diff_button_clicked"),n(!0)},children:"Schema Diff"})]})},U5=()=>{const{list:t}=un();return e.jsx(e.Fragment,{children:t.length>1&&e.jsx(Q,{appearance:"warning",children:Ei.manyDbWarning})})},F5="_root_rah0o_1",q5="_controlPanel_rah0o_7",z5="_actions_rah0o_11",H5="_description_rah0o_17",V5="_panel_rah0o_22",W5="_topBar_rah0o_32",ti={root:F5,controlPanel:q5,actions:z5,description:H5,panel:V5,topBar:W5},Km={restoreModalTitle:"Restore branch",cancel:"Cancel",restoreModalAction:"Restore"},G5=({restoreTo:t,onClose:s})=>{const{restore:n,isRestoring:r}=qa(),{trackUiInteraction:o}=k();return e.jsxs(Qe,{isOpen:!0,onRequestClose:()=>{o("branch_restore_restore_cancelled"),s()},title:Km.restoreModalTitle,children:[e.jsx(be,{gaps:!0,children:e.jsx(l0,{restoreTo:t})}),e.jsxs(ge,{children:[e.jsxs(hN,{children:["For more, see"," ",e.jsx(A,{href:"https://neon.tech/docs/guides/branch-restore",onClick:()=>o("branch_reset_docs_link_clicked"),openInNewTab:!0,children:"Branch restore"})]}),e.jsx(P,{appearance:"secondary",onClick:()=>{o("branch_restore_restore_cancelled"),s()},children:Km.cancel}),e.jsx(P,{disabled:r,appearance:"primary",onClick:()=>{o("branch_restore_restore_confirmed"),n()},children:Km.restoreModalAction})]})]})},K5="_root_mbr97_1",Q5="_expanded_mbr97_9",Y5="_expandButton_mbr97_22",Qm={root:K5,expanded:Q5,expandButton:Y5},J5="_root_pur7h_1",Z5="_body_pur7h_9",X5="_alert_pur7h_18",eq="_list_pur7h_22",tq="_descriptives_pur7h_37",sq="_queryError_pur7h_90",nq="_fixButton_pur7h_96",fn={root:J5,body:Z5,alert:X5,list:eq,descriptives:tq,queryError:sq,fixButton:nq},rq=({result:t,queryCount:s,isQueryRunning:n,queryRunError:r})=>{var j;const{currentIndex:o,onCurrentIndexChange:a}=lS(),i=ee("query_error_ai_fix"),{trackUiInteraction:c}=k();m.useEffect(()=>a(0),[t.response,a]);const[l,d]=m.useState({}),[u,h]=m.useState(t.querySeq);t.querySeq!==u&&(d({}),h(t.querySeq));const p=b=>{d({...l,[o]:b})},g=m.useMemo(()=>{const b=(t.response??[]).map((f,y)=>({value:y,label:f.query,disabled:!1}));for(let f=b.length;f<s;f+=1)b.push({value:f,label:`${f+1}: …`,disabled:!0});return b},[t,s]);let _;s>0&&t.response!==void 0&&(_=t.response[o]);let x=e.jsx("div",{className:fn.alert,children:e.jsx(Q,{appearance:"error",children:"Something went wrong"})});if(_===void 0){if(!n)return null;x=e.jsx("div",{className:M(fn.root),children:e.jsx(dS,{})})}else if(_.error)x=e.jsx("div",{className:fn.alert,children:e.jsx(Q,{appearance:"error",children:e.jsxs("div",{className:fn.queryError,children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:_.error}}),i&&r&&(r.isFixPending?e.jsx(P,{className:fn.fixButton,icon:"pgvector",iconSide:"right",appearance:"secondary",size:"s",onClick:()=>{r.fixErrorCancel(),c("playground_fix_error_cancel_clicked")},children:"Cancel"}):e.jsx(P,{className:fn.fixButton,icon:"pgvector",iconSide:"right",disabled:r.isFixDisabled,appearance:"secondary",size:"s",onClick:()=>{r.fixError(),c("playground_fix_error_clicked")},children:"Fix with AI"}))]})})});else if((j=_.explain_data)!=null&&j.length){const b=_.explain_data.map(f=>f["QUERY PLAN"]).join(`
`);x=e.jsx(PE,{query:_.fullSQL??_.query,plan:b})}else if(_.descriptiveHTML)x=e.jsx("div",{className:fn.descriptives,dangerouslySetInnerHTML:{__html:_.descriptiveHTML}});else if(_.data){const b=l[o]??0;x=e.jsxs(e.Fragment,{children:[e.jsx(uS,{offset:b,onChangeOffset:p,data:_.data}),e.jsx(TE,{result:_})]})}return e.jsxs("div",{className:fn.root,children:[s>1&&e.jsx(pn,{className:fn.list,options:g,value:o,onChange:a}),e.jsx("div",{className:fn.body,children:x})]})},d0=({className:t,result:s,isQueryRunning:n,queryRunError:r})=>{var p;const[o,a]=m.useState(!1),[i,c]=m.useState(!1),l=m.useRef(null),d=m.useRef(void 0);if(!s)return null;if(o&&!i&&setTimeout(()=>{c(o)},0),i&&!o){const g=l.current,_=()=>{g.removeEventListener("transitionend",_),c(o)};g.addEventListener("transitionend",_)}const u=d.current,h=u&&`${u.top}px 0px 0px ${u.left}px`;return e.jsxs("div",{"data-qa":"query_result",className:M(Qm.root,t,i&&Qm.expanded),ref:l,style:o!==i?{inset:h}:{},children:[e.jsx(rq,{isQueryRunning:n,queryCount:(n?s.queryCount:(p=s.response)==null?void 0:p.length)??0,result:s,queryRunError:r}),e.jsx("button",{type:"button",className:Qm.expandButton,title:i?"Return results to pane":"Expand results to window",onClick:()=>{if(!i){const g=l.current;d.current=g.getBoundingClientRect()}a(!i)},children:e.jsx(L,{name:i?"contract":"expand",size:19})})]})},Oo={title:"Time travel assist",subtitle:"Optionally, verify the selected point in time before restoring.",databaseSelectLabel:"Database",queryButtonLabel:t=>`Query at ${{[Ee.Timestamp]:"timestamp",[Ee.LSN]:"LSN",[Ee.Head]:"HEAD"}[t]}`,queryCancelButtonLabel:"Cancel",queryPlaceholder:`/*
 * Check first!
 * Run read-only queries at the selected timestamp to preview data exactly as it existed at that moment.
 * Confirm you've chosen the right point in time before you restore
 */`,queryResultDescription:(t,s)=>{var n;return`Query result from ${t} on branch ${(n=s.sourceBranch)==null?void 0:n.name} as of ${(()=>{switch(s.mode){case Ee.Timestamp:return le(s.timestamp,ve.Full);case Ee.LSN:return s.lsn;default:return"Head"}})()}`}},oq="_root_vn3ze_1",aq="_header_vn3ze_8",iq="_title_vn3ze_14",cq="_subtitle_vn3ze_19",lq="_queryEditor_vn3ze_28",dq="_queryControls_vn3ze_33",uq="_databaseFormField_vn3ze_43",hq="_pickedPointDescription_vn3ze_48",pq="_queryResult_vn3ze_65",mq="_queryResultDescription_vn3ze_70",bn={root:oq,header:aq,title:iq,subtitle:cq,queryEditor:lq,queryControls:dq,databaseFormField:uq,pickedPointDescription:hq,queryResult:pq,queryResultDescription:mq},gq=()=>{var v;const{restoreTo:t,branch:s,queryResult:n,resultOffset:r,runQuery:o,totalRows:a,cancelQuery:i,changeResultOffset:c,queriedContext:l}=qa(),{project:d,projectId:u}=O(),[h,p]=xs(Me.RestoreBranchSQL,u,Oo.queryPlaceholder),{data:g}=Ud({branchId:(s==null?void 0:s.id)??"",projectId:(d==null?void 0:d.id)??""}),[_,x]=m.useState(null),{trackUiInteraction:j}=k(),b=m.useCallback(()=>{if(_){j("branch_restore_query_at_timestamp_clicked");const w=d!=null&&d.store_passwords?_.database.owner_name:Fd;o({database:_.value,query:h,role:w})}},[_,d==null?void 0:d.store_passwords,h,o,j]),f=new Date,y=!!(h.trim().length===0||!s||Kd(t,d,f));return d?e.jsxs("section",{className:bn.root,children:[e.jsx("header",{className:bn.header,children:e.jsxs("div",{children:[e.jsx(z,{level:4,size:"h3",className:bn.title,children:Oo.title}),e.jsx("span",{className:bn.subtitle,children:Oo.subtitle})]})}),e.jsxs("div",{className:bn.pickedPointDescription,children:[e.jsxs("div",{children:["Branch: ",e.jsx("code",{children:((v=t.sourceBranch)==null?void 0:v.name)||"--"})]}),e.jsxs("div",{children:[t.mode===Ee.Head&&e.jsx(e.Fragment,{children:"HEAD"}),t.mode===Ee.Timestamp&&e.jsxs(e.Fragment,{children:["Timestamp:"," ",e.jsx("code",{children:t.timestamp?le(t.timestamp,ve.Full):"--"})]}),t.mode===Ee.LSN&&e.jsxs(e.Fragment,{children:["LSN: ",e.jsx("code",{children:t.lsn||"--"})]})]})]}),e.jsx("div",{className:bn.queryEditor,role:"textbox",tabIndex:0,onKeyDown:w=>{w.key==="Enter"&&(w.ctrlKey||w.metaKey)&&b()},children:e.jsx(hb,{width:"100%",height:"100%",name:"query_editor",mode:`pgsql${(d==null?void 0:d.pg_version)??15}`,value:h,onChange:p,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),e.jsxs("div",{className:bn.queryControls,children:[e.jsx(R,{label:Oo.databaseSelectLabel,className:bn.databaseFormField,children:e.jsx(AS,{projectId:(d==null?void 0:d.id)??"",branchId:(s==null?void 0:s.id)??"",value:_,placeholder:"--",options:g.selectOptions,disabled:g.selectOptions.length<=1,onChange:x,canCreateDatabase:!1,size:"s"})}),n.isLoading?e.jsx(P,{appearance:"error",onClick:i,children:Oo.queryCancelButtonLabel}):e.jsx(P,{appearance:"secondary",onClick:b,icon:"play",disabled:y,children:Oo.queryButtonLabel(t.mode)})]}),l&&e.jsx("div",{className:bn.queryResultDescription,children:Oo.queryResultDescription(l.database,l.pointInTime)}),e.jsxs(hS,{children:[e.jsx(d0,{className:bn.queryResult,isQueryRunning:n.isLoading,result:n.data}),e.jsx(NE,{limit:AE,total:a,offset:r,onChangeOffset:c})]})]}):e.jsx(pe,{})},_j={sourceBranchLabel:"Restore from",switchHeadToggle:"Restore from the latest data (head)"},_q="_root_l7f6r_1",fq="_branchSelectField_l7f6r_7",bq="_pitPicker_l7f6r_11",Ym={root:_q,branchSelectField:fq,pitPicker:bq},xq=({source:t,setSource:s})=>{const{branch:n,restoreTo:r,changeRestoreTo:o}=qa(),{trackUiInteraction:a}=k();m.useEffect(()=>{n&&t&&n.id===t.id&&s(null)},[n,t,s]),m.useEffect(()=>{o({...r,sourceBranch:t})},[t,r,o]);const{selectOptions:i}=Ye(),c=m.useMemo(()=>i.filter(({value:u})=>n&&n.id!==u),[n,i]),l=m.useMemo(()=>i.find(({value:u})=>{var h;return u===((h=r.sourceBranch)==null?void 0:h.id)})??null,[r.sourceBranch,i]),d=m.useCallback(()=>{a("branch_restore_head_toggled"),o({...r,...r.mode===Ee.Head?{mode:Ee.Timestamp,timestamp:null}:{mode:Ee.Head}})},[o,r,a]);return e.jsxs("div",{className:Ym.root,children:[e.jsx(R,{label:_j.sourceBranchLabel,className:Ym.branchSelectField,children:e.jsx(Vh,{options:c,value:l,includeNoneOption:!0,"data-qa":"source_branch_select",onChange:u=>{const h=(u==null?void 0:u.branch)??null;h&&s(h)}})}),e.jsx(hn,{isSelected:r.mode===Ee.Head,onChange:d,children:_j.switchHeadToggle}),r.mode!==Ee.Head&&e.jsx(Ib,{className:Ym.pitPicker,value:r,onChange:o})]})},jq=()=>{const{branch:t,restoreTo:s,changeRestoreTo:n}=qa();return m.useEffect(()=>{s.mode===Ee.Head?n({mode:Ee.Timestamp,sourceBranch:t,timestamp:null}):n({...s,sourceBranch:t})},[t,s,n]),e.jsx("div",{children:e.jsx(Ib,{value:s,onChange:n})})},yq=()=>{var S;const{selectOptions:t}=Ye(),{branch:s,restoreTo:n}=qa(),{project:r,isOwnProject:o,isLoading:a}=O(),{trackUiInteraction:i}=k(),c=new Date,[l,d]=m.useState(!1),u=!s||!!Kd(n,r,c),h=m.useRef(null);m.useEffect(()=>{var I;(I=h==null?void 0:h.current)==null||I.focus()},[]);const{isFreeSubscription:p}=ae(),g=o&&p,[_,x]=m.useState("fromHistory"),j=m.useCallback(I=>{x(I),i(I==="fromHistory"?"branch_restore_tab_from_history_clicked":"branch_restore_tab_from_another_branch_clicked")},[i]),b=m.useMemo(()=>[{label:"From history",value:"fromHistory"},{label:"From another branch",value:"anotherBranch",disabled:t.length<2}],[t]),[f,y]=m.useState(null),{billingUrl:v,isLoading:w}=wo();return e.jsxs("div",{className:ti.root,children:[l&&s&&r&&e.jsx(h1,{projectId:r==null?void 0:r.id,branchId:(S=n.sourceBranch)==null?void 0:S.id,children:e.jsx(G5,{restoreTo:n,onClose:()=>d(!1)})}),e.jsxs("div",{className:ti.panel,children:[e.jsx("div",{className:ti.topBar,children:e.jsx("div",{className:ti.description,children:a?e.jsx($,{}):e.jsxs(e.Fragment,{children:[Ei.description(xc((r==null?void 0:r.history_retention_seconds)??0))," ",g?e.jsxs(e.Fragment,{children:[e.jsx(A,{href:v,disabled:w,onClick:()=>i("branch_restore_update_to_pro_clicked"),children:Ei.descriptionUpgradeLink})," ",Ei.descriptionUpgradeAfter]}):e.jsx(A,{openInNewTab:!0,href:`${F(C.ProjectsItemSettings,{projectId:(r==null?void 0:r.id)??""})}#storage`,children:Ei.descriptionLink})]})})}),e.jsxs("div",{children:[e.jsx(pn,{options:b,value:_,onChange:j}),e.jsxs("div",{className:ti.controlPanel,children:[_==="fromHistory"&&e.jsx(jq,{}),_==="anotherBranch"&&e.jsx(xq,{source:f,setSource:y}),e.jsxs("div",{className:ti.actions,children:[e.jsx(P,{disabled:!!u,appearance:"primary",onClick:()=>{d(!0),i("branch_restore_restore_clicked")},children:Ei.restoreButtonLabel}),e.jsx(M5,{currentBranch:s,compareTo:n})]})]})]})]}),e.jsx(U5,{}),e.jsx(gq,{})]})},vq=()=>{const t=Ne(),s=m.useCallback(n=>{t.push(F(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}))},[t]);return e.jsx(EE,{onRestoreSuccess:s,children:e.jsx(yq,{})})},wq={[C.Root]:"root",[C.Home]:"home",[C.Welcome]:"welcome",[C.OrgWelcome]:"org_welcome",[C.Claim]:"claim",[C.ProjectsList]:"projects_list",[C.ProjectsSharedList]:"projects_shared_list",[C.ProjectsItem]:"projects_item_dashboard",[C.ProjectsItemSettings]:"projects_item_settings",[C.ProjectsItemIntegrations]:"projects_item_integrations",[C.ProjectsItemAuthorize]:"projects_item_authorize",[C.ProjectsItemIdentity]:"projects_item_identity",[C.UserBilling]:"billing",[C.UserSettings]:"user_settings",[C.ProjectsItemBranches]:"projects_item_branches",[C.ProjectsItemBranchesNew]:"projects_item_branches_new",[C.ProjectsItemBranchesLastUsed]:"projects_item_branches_last_used",[C.ProjectsItemBranchesItem]:"projects_item_branches_item",[C.ProjectsItemBranchesComputes]:"projects_item_branches_computes",[C.ProjectsItemBranchesRolesAndDatabases]:"projects_item_branches_roles_and_databases",[C.ProjectsItemBranchesChildBranches]:"projects_item_branches_child_branches",[C.ProjectsItemBranchesSQLEditor]:"projects_item_branches_sql_editor",[C.ProjectsItemBranchesRestore]:"projects_item_branches_restore",[C.ProjectsItemBranchesDataAPI]:"projects_item_branches_data_api",[C.ProjectsItemBranchesItemMonitoring]:"projects_item_monitoring",[C.ProjectsItemBranchesItemMonitoringMetrics]:"projects_item_monitoring_metrics",[C.ProjectsItemBranchesItemMonitoringOperations]:"projects_item_monitoring_operations",[C.ProjectsItemBranchesItemMonitoringActiveQueries]:"projects_item_monitoring_active_queries",[C.ProjectsItemBranchesItemMonitoringQueryHistory]:"projects_item_monitoring_query_history",[C.ProjectsItemDrizzle]:"projects_item_drizzle",[C.OrgRoot]:"org_root",[C.OrgProjectsList]:"org_projects_list",[C.OrgPeople]:"org_people",[C.OrgBilling]:"org_billing",[C.OrgSettings]:"org_settings",[C.UserIntegrations]:"user_integrations",[C.OrgIntegrations]:"org_integrations"},Sq=()=>{const t=Yl("promo"),s=Ne(),{refetch:n}=Vp(),{trackUiInteraction:r}=k();return m.useEffect(()=>{if(!t)return;q.applyPromoCode(t).then(({data:a})=>{Te(e.jsx(Fe,{children:`Congratulations! You have received ${lt(a.credit_cents)} in credits for your Neon account!`})),r("promo_code_applied",{promo_code:t});try{n()}catch{}}).catch(H);const o=new URLSearchParams(s.location.search);o.delete("promo"),s.replace({search:o.toString()})},[t,s,n,r]),null},Cq=({children:t})=>{const[s,n]=m.useState(),[r,o]=m.useState(),[a,i]=m.useState();return e.jsx(p1.Provider,{value:{setProjectData:n,setBranchData:o,setRoleData:i,projectData:s,branchData:r,roleData:a},children:t})},Wp=m.createContext({isKeycloakUser:!1}),kq=({config:t,children:s})=>e.jsx(Wp.Provider,{value:{isKeycloakUser:t!==void 0},children:s}),u0=()=>{const{isKeycloakUser:t}=m.useContext(Wp),{data:s,isError:n}=st({queryKey:["user_auth_info"],queryFn:()=>q.getCurrentUserAuthInfo(),select:({data:i})=>({userHasPassword:i.password_stored,userAuthAccounts:i.auth_accounts,userLinkedAccounts:i.linked_accounts})}),r=ie(),o=m.useCallback(()=>{r.invalidateQueries({queryKey:["user_auth_info"]})},[r]);return{isKeycloakUser:t,isInitialized:s!==void 0,invalidate:o,isError:n,...s}},Iq={github:"GitHub",google:"Google",hasura:"Hasura",microsoft:"Microsoft",microsoftv2:"Microsoft",keycloak:"Keycloak",vercelmp:"Vercel Marketplace"},Zh="upgrade";function fj(){const{pathname:t,search:s,hash:n}=window.location,r=new URLSearchParams(s);r.delete(Zh);const o=`${t}${r}${n}`;window.history.replaceState(null,"",o)}const Pq=({targetPlan:t})=>{const{orgId:s}=Y(),{upgradeSubscription:n,isLoading:r}=pN(),{subscriptionType:o,hasSavedCreditCard:a}=ae(),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),u=wr(()=>{fj(),n(t,s)}),h=m.useRef(!1);if(m.useEffect(()=>{if(!r&&!h.current){if(h.current=!0,o===t){fj();const p=Xi[t];Te(e.jsx(Fe,{children:`You are already on a "${p}" plan`}));return}a?l():u()}},[a,r,u,o,t,h]),o!==t)return e.jsx(mN,{isOpen:i,onRequestClose:d,subscriptionType:t,onConfirm:u})},Tq=()=>{const{search:t}=jc(),s=m.useMemo(()=>{const n=new URLSearchParams(t).get(Zh);if(!(!n||!T_(n))&&(n==="launch"||n==="scale"))return n},[t]);return s?e.jsx(Pq,{targetPlan:s}):null},Nq="_menu_1l1gk_1",Aq={menu:Nq},Eq=()=>{const{data:t}=rt(),{trackUiInteraction:s}=k(),{themeOption:n,changeTheme:r}=fT(),o=m.useCallback(()=>{s("user_menu_opened")},[s]),a=m.useCallback(()=>{s("user_menu_sign_out_clicked"),m1().then(()=>qf())},[s]),i=m.useMemo(()=>[{header:{title:t==null?void 0:t.displayName,subtitle:t==null?void 0:t.email},items:vt([{label:"Account settings",href:C.UserSettings,onClick:()=>s("user_menu_account_clicked")},{label:`Theme: ${OE[n]}`,submenu:$E.map(({value:c,label:l})=>({label:l,icon:n===c?"check":void 0,onClick:()=>{s("user_menu_theme_submenu_clicked",{theme:c}),r(c)}}))}])},{items:[{label:"Logout",onClick:a}]}],[t,n,a,s,r]);return t===void 0?null:e.jsx(e.Fragment,{children:e.jsx(Dt,{sections:i,onOpen:o,placement:"bottom right",menuClassName:Aq.menu,children:e.jsx(RE,{name:t.displayName,image:t.image,"data-qa":"account_menu_button"})})})},$q=()=>{const t=ee("growth_free_tier_autoscaling"),{isFreeSubscription:s}=ae(),{compute:n,dataTransfer:r,storage:o,nonPrimaryCompute:a}=wb();return m.useMemo(()=>s&&(n&&t||r||o||a),[s,n,t,r,o,a])?e.jsx(jF,{}):null},ts={modalTitle:"Create organization",conversionRadioLabel:"Convert personal account",creationRadioLabel:"Create new",showBenefitsToggleLabel:t=>`${t?"Hide":"Show"} plan benefits`,orgNameLabel:"Organization name",orgSubscriptionTypeLabel:"Select plan",conversionAlert:"When you convert your personal account, projects and billing are moved to the new organization. This action is permanent and cannot be undone. Your personal account switches to the Free Plan.",submitButton:"Create organization",success:"Your organization was successfully created.",error:"Something went wrong while creating the organization",integrations:{conversionInfo:"During the conversion, ownership of the integration with the GitHub App (as well as the API Keys created by this integration) and the Vercel integration will be changed from your current user to the new organization."},freeDisabled:"You already have a free organization. Upgrade to add more.",creditsLabel:"Transfer credits",creditsDescription:"You can transfer credits from your personal account to the new organization."},Oq="_root_n86oo_1",Rq={root:Oq},Bq=({control:t,freeOrgAllowed:s})=>{const{trackUiInteraction:n}=k(),r=(i,c)=>{i.onChange(c),n(`create_org_modal_${i1(c)}_plan_clicked`)},o=n1(),a=m.useMemo(()=>s?o:o.filter(i=>!gN(i.subscriptionType)),[s,o]);return e.jsx(R,{label:ts.orgSubscriptionTypeLabel,children:e.jsx(me,{name:"subscription_type",control:t,render:({field:i})=>e.jsx("div",{className:Rq.root,children:a.map(({subscriptionType:c,planName:l,isLegacyPlan:d,price:u,featureGroups:h})=>e.jsx(_N,{planName:l,isLegacyPlan:d,planChangeData:{type:"select",subscriptionType:c,isSelected:i.value===c},price:u,featureGroups:h,hideIncludedTitle:d,onChangePlanClick:p=>r(i,p)},c))})})})},Lq="_root_1bx9z_1",Dq="_root_disabled_1bx9z_8",Mq="_inner_1bx9z_13",Uq="_list_1bx9z_26",Fq="_planNameBlock_1bx9z_31",qq="_selectCircle_1bx9z_36",zq="_textBlock_1bx9z_40",Hq="_planName_1bx9z_31",Vq="_priceBlock_1bx9z_51",Wq="_price_1bx9z_51",Gq="_description_1bx9z_62",Kq="_item_1bx9z_82",Qq="_icon_1bx9z_87",Yq="_icon_includedFeature_1bx9z_91",Jq="_icon_missingFeature_1bx9z_95",Zq="_hint_1bx9z_99",Tt={root:Lq,root_disabled:Dq,inner:Mq,list:Uq,planNameBlock:Fq,selectCircle:qq,textBlock:zq,planName:Hq,priceBlock:Vq,price:Wq,description:Gq,item:Kq,icon:Qq,icon_includedFeature:Yq,icon_missingFeature:Jq,hint:Zq},gu=({planName:t,selected:s,pricePerMonth:n,features:r,disabled:o,disabledHint:a,onSelect:i})=>e.jsx("label",{className:M(Tt.root,{[Tt.root_disabled]:o}),children:e.jsx(Mn,{checked:s,disabled:o,wide:!0,circle:({checked:c})=>e.jsxs("div",{className:Tt.inner,children:[e.jsxs("div",{className:Tt.planNameBlock,children:[e.jsx("div",{className:Tt.selectCircle,children:e.jsx(fN,{checked:c,disabled:o})}),e.jsxs("div",{className:Tt.textBlock,children:[e.jsxs("span",{className:Tt.planName,children:[t,o&&e.jsxs(e.Fragment,{children:[" ",e.jsx(Ot,{icon:"info_italic",size:"l",className:Tt.hint,children:a})]})]}),e.jsxs("span",{className:Tt.priceBlock,children:[e.jsx("span",{className:Tt.price,children:lt(n,!0)}),"/month"]})]})]}),e.jsx("ul",{className:Tt.list,"data-test-qa":"upgrade_modal_feature_list",children:r.map(({id:l,description:d,hint:u,missingFeature:h})=>e.jsxs("li",{className:Tt.item,children:[h?e.jsx(L,{name:"cross_small",size:18,className:M(Tt.icon,Tt.icon_missingFeature)}):e.jsx(L,{name:"check",size:18,className:M(Tt.icon,Tt.icon_includedFeature)})," ",e.jsxs("span",{children:[e.jsx("span",{className:Tt.description,children:d}),u&&e.jsxs(e.Fragment,{children:[" ",e.jsx(Ot,{icon:"info_italic",size:"l",className:Tt.hint,children:u})]})]})]},l))})]}),onChange:c=>{c.target.checked&&i()}})}),Xq="_selectPlanLabel_trqdd_1",e6="_radioGroup_trqdd_7",bj={selectPlanLabel:Xq,radioGroup:e6},t6=3,_u=(t,s)=>m.useMemo(()=>s?t:t.slice(0,t6),[t,s]),s6=({control:t,freeOrgAllowed:s})=>{const{trackUiInteraction:n}=k(),r=bN(),[o,a]=m.useState(!1),i=_u(r.free_v2.usageMetrics,o),c=_u(r.launch.usageMetrics,o),l=_u(r.scale.usageMetrics,o),d=_u(r.business.usageMetrics,o);return e.jsx(R,{label:e.jsxs("div",{className:bj.selectPlanLabel,children:[e.jsx("div",{children:ts.orgSubscriptionTypeLabel}),e.jsx(A,{onClick:()=>a(u=>!u),children:ts.showBenefitsToggleLabel(o)})]}),children:e.jsx(me,{name:"subscription_type",control:t,render:({field:u})=>e.jsxs("div",{className:bj.radioGroup,children:[s&&e.jsx(gu,{planName:r.free_v2.title,selected:u.value==="free_v2",pricePerMonth:r.free_v2.cost,features:i,disabledHint:ts.freeDisabled,onSelect:()=>{n("create_org_modal_free_plan_clicked"),u.onChange("free_v2")}}),e.jsx(gu,{planName:r.launch.title,selected:u.value==="launch",pricePerMonth:r.launch.cost,features:c,onSelect:()=>{n("create_org_modal_launch_plan_clicked"),u.onChange("launch")}}),e.jsx(gu,{planName:r.scale.title,selected:u.value==="scale",pricePerMonth:r.scale.cost,features:l,onSelect:()=>{n("create_org_modal_scale_plan_clicked"),u.onChange("scale")}}),e.jsx(gu,{planName:r.business.title,selected:u.value==="business",pricePerMonth:r.business.cost,features:d,onSelect:()=>{n("create_org_modal_business_plan_clicked"),u.onChange("business")}})]})})})},n6=({control:t,freeOrgAllowed:s,shouldDisplayPricingV3:n})=>n?e.jsx(Bq,{control:t,freeOrgAllowed:s}):e.jsx(s6,{control:t,freeOrgAllowed:s}),r6="_personalAccount_iqa21_1",o6="_arrowContainer_iqa21_16",a6="_conversionAlert_iqa21_25",fu={personalAccount:r6,arrowContainer:o6,conversionAlert:a6},K_="#success_org_create",bu=64,Tb=({onSuccess:t,onRequestClose:s})=>{var f,y;const{shouldDisplayPricingV3:n}=xN(),r=jN(),{data:o}=rt(),{isFreeSubscription:a}=l1(),{data:i}=Nr(),{creditBalance:c}=Vp(),l=Ar(o),d=!a&&!l,u=m.useMemo(()=>{var w;const v=((w=o==null?void 0:o.firstName)==null?void 0:w.trim())||(o==null?void 0:o.email)||"";return i!=null&&i.some(S=>S.name===v)?"":v},[i,o]),h=xe({defaultValues:{user_id:o==null?void 0:o.id,name:u,subscription_type:n?"serverless_v3":"launch",creation_type:d?"convert":"create",transfer_credits:!1}}),p=Ne(),g=h.watch("creation_type"),_=async v=>{if(g==="create")try{const w=await r({organization:{name:v.name},subscription_type:v.subscription_type,transfer_credits:v.transfer_credits});t==null||t({type:"create"}),"session_url"in w?window.location.href=w.session_url:"id"in w?p.push(`${F(C.OrgProjectsList,{orgId:w.id})}${K_}`):H(ts.error)}catch(w){s==null||s(),H(w)}else try{const S=(await q.convertUserToOrg({name:v.name})).data.id;t==null||t({type:"convert",orgId:S});const I=F(C.OrgProjectsList,{orgId:S});window.location.href=`${qd}${I}${K_}`}catch(w){H(w)}},x=ee("new_users_get_orgs"),{currentData:j}=g1(),b=x&&!j&&!(i!=null&&i.some(v=>v.plan==="free_v2"||v.plan==="free"));return e.jsxs(ws,{modalProps:{isOpen:!0,title:ts.modalTitle,width:b?1100:n?950:850,onRequestClose:s},providerProps:h,onSubmit:_,children:[e.jsxs(be,{gaps:!0,children:[d&&e.jsx(Sd,{fullWidth:!1,children:e.jsx(me,{name:"creation_type",control:h.control,render:({field:v})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Mn,{...v,value:"convert",checked:v.value==="convert",children:ts.conversionRadioLabel})}),e.jsx("div",{children:e.jsx(Mn,{...v,value:"create",checked:v.value==="create",children:ts.creationRadioLabel})})]})})}),g==="create"?e.jsxs(e.Fragment,{children:[e.jsx(R,{label:ts.orgNameLabel,error:(f=h.formState.errors.name)==null?void 0:f.message,children:e.jsx(ne,{autoFocus:!0,...h.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:bu,message:`Name should be less than ${bu} characters`}})})}),e.jsx(n6,{control:h.control,freeOrgAllowed:b,shouldDisplayPricingV3:n}),((c==null?void 0:c.balance_cents)??0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs(hn,{...h.register("transfer_credits"),onChange:v=>{h.setValue("transfer_credits",v)},children:[ts.creditsLabel," (",lt((c==null?void 0:c.balance_cents)??0),")"]}),e.jsx(T,{size:"s",children:ts.creditsDescription})]})]}):e.jsxs("div",{children:[e.jsxs(Sd,{children:[e.jsx(R,{label:"Personal account","data-qa":"personal-account-info",children:e.jsxs("div",{className:fu.personalAccount,children:[e.jsx("div",{children:o==null?void 0:o.displayName}),e.jsx(cF,{})]})}),e.jsx("div",{className:fu.arrowContainer,children:e.jsx(L,{name:"arrow_right",size:16})}),e.jsx(R,{label:"New organization name",error:(y=h.formState.errors.name)==null?void 0:y.message,children:e.jsx(ne,{autoFocus:!0,...h.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:bu,message:`Name should be less than ${bu} characters`}})})})]}),e.jsx(Q,{className:fu.conversionAlert,children:ts.conversionAlert}),g==="convert"&&e.jsx(Q,{appearance:"warning",className:fu.conversionAlert,children:ts.integrations.conversionInfo})]})]}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{children:ts.submitButton})]})]})},i6="_neonLogo_b7me0_1",c6={neonLogo:i6};function Nb(){const{params:{projectId:t},path:s}=yc(),{data:n}=zd(),{data:r}=rt(),o=Ar(r),a=n==null?void 0:n.some(i=>i.id===t);return o&&(a||s===C.ProjectsSharedList)}function l6(){const{trackUiInteraction:t}=k(),s=Nb();return m.useMemo(()=>({href:s?C.ProjectsSharedList:C.Root,children:e.jsx(L,{name:"neon",size:26,className:c6.neonLogo}),onClick:()=>t("breadcrumbs_root_link_clicked"),ariaLabel:"Neon logo"}),[s,t])}function d6(t){const{data:s}=rt(),{data:n}=Nr(),{path:r}=yc(),{trackUiInteraction:o}=k(),{org:a,isLoading:i}=Y(),{data:c}=zd(),l=Nb();return m.useMemo(()=>{if(i||s===void 0)return{loading:!0};const d=Ar(s);let u=C.ProjectsList;return a&&(u=F(C.OrgProjectsList,{orgId:a.id})),l&&(u=C.ProjectsSharedList),d&&r===C.UserSettings&&(u=C.UserSettings),{selectedKey:u,onOpen:()=>o("breadcrumbs_account_menu_opened"),items:vt([u===C.UserSettings&&{label:"Account settings",href:C.UserSettings,hidden:!0},!d&&{title:"Personal account",items:[{label:s.displayName,href:C.ProjectsList,onClick:()=>o("breadcrumbs_account_menu_personal_account_selected"),triggerSuffix:e.jsx(dj,{})}]},{title:"Organizations",items:[...(n??[]).map(({id:h,name:p})=>({href:F(C.OrgProjectsList,{orgId:h}),label:p,onClick:()=>o("breadcrumbs_account_menu_org_selected"),triggerSuffix:e.jsx(dj,{})})),{icon:"add",label:"Create organization",onClick:()=>{o("breadcrumbs_account_menu_create_orgs_clicked"),t()}}]},d&&(!!(c!=null&&c.length)||r===C.ProjectsSharedList)&&{title:"Shared projects",items:[{href:C.ProjectsSharedList,label:"Projects shared with me"}]}])}},[t,a,s,i,n,c,l,r,o])}function u6(t){const{params:s,path:n}=yc(),{trackUiInteraction:r}=k(),{data:o,isLoading:a}=yN(t),{data:i,isLoading:c}=vs(),{data:l}=zd(),d=Nb();return m.useMemo(()=>{if(!t)return null;if(!a&&o){if(c||!i)return{href:F(C.ProjectsItem,{projectId:o.id}),children:o.name};const u=({id:g,name:_})=>({href:s.branchId&&g!==t?F(C.ProjectsItem,{projectId:g}):F(n,{...s,projectId:g}),label:_,onClick:()=>r("breadcrumbs_project_menu_item_selected")}),h=i.map(u),p=l==null?void 0:l.map(u);return{filterable:!0,qa:"breadcrumbs_project_select",onOpen:()=>r("breadcrumbs_project_menu_opened"),items:d?p:p!=null&&p.length?[{title:"Your projects",items:h},{title:"Shared with you",items:p}]:h}}return{loading:!0}},[c,a,i,s,n,o,t,l,d,r])}const h0=m.memo(({projectId:t})=>{const{trackUiInteraction:s}=k(),n=l6(),r=Ve(De.CreateOrg),o=d6(r.openModal),a=u6(t),i=m.useMemo(()=>vt([n,o,a]),[n,o,a]);return e.jsxs(e.Fragment,{children:[e.jsx(XL,{items:i}),r.isModalOpen&&e.jsx(Tb,{onSuccess:c=>{c.type!=="convert"&&s("create_org_modal_confirmed")},onRequestClose:()=>{r.closeModal(),s("create_org_modal_dismissed")}})]})});h0.displayName="ConsoleBreadcrumbs";const xu=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},h6=new Set(["__proto__","prototype","constructor"]),Q_=(t,s)=>{if(!xu(s))return t;t||(t={});for(const[n,r]of Object.entries(s)){if(h6.has(n))continue;const o=t[n];if(xu(o)&&xu(r))t[n]=Q_(o,r);else{if(r===void 0)continue;xu(r)?t[n]=Q_({},r):Array.isArray(r)?t[n]=[...r]:t[n]=r}}return t};function Gp(t={},s={}){return Q_(structuredClone(s),structuredClone(t))}const Kp={apiUrl:"https://api.markprompt.com"},Ab=["signal","apiUrl","headers"],Eb={};async function p6(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Ab.includes(c))),{signal:o,...a}=r??{},i=Gp(a,{...Kp,...Eb});try{const c=await fetch(`${i.apiUrl}/messages/${t.messageId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,vote:Number.parseInt(t.feedback.vote)}),signal:o});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function m6(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Ab.includes(c))),{signal:o,...a}=r??{},i=Gp(a,{...Kp,...Eb});try{const c=await fetch(`${i.apiUrl}/threads/${t.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csat:t.csat}),signal:o});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function g6(t,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>Ab.includes(c))),{signal:o,...a}=r??{},i=Gp(a,{...Kp,...Eb});try{const c=await fetch(`${i.apiUrl}/threads/${t.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csatReason:t.reason}),signal:o});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}function _6(){const t=m.useRef(void 0),s=m.useCallback(()=>{t.current&&(t.current.abort(),t.current=void 0)},[]);return{ref:t,abort:s}}function f6({feedbackOptions:t,projectKey:s,apiUrl:n}){if(!s)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to useFeedback.");const{ref:r,abort:o}=_6(),a=m.useCallback(async(l,d)=>{if(o(),!d)return;const u=new AbortController;r.current=u;try{await p6({feedback:l,messageId:d},s,{...t,signal:u.signal,apiUrl:n})}catch{}finally{r.current===u&&(r.current=void 0)}},[o,r,s,t,n]),i=m.useCallback(async(l,d)=>{o();const u=new AbortController;r.current=u;try{await m6({threadId:l,csat:d},s,{...t,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[o,r,s,t,n]),c=m.useCallback(async(l,d)=>{o();const u=new AbortController;r.current=u;try{await g6({threadId:l,reason:d},s,{...t,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[o,r,s,t,n]);return{submitFeedback:a,submitThreadCSAT:i,submitThreadCSATReason:c,abort:o}}function b6(t){return t instanceof DOMException&&t.name==="AbortError"||t instanceof Error&&t.message.includes("AbortError")}function x6(t){var s,n,r,o,a;return Array.isArray(t)&&typeof((n=(s=t.at(0))==null?void 0:s.file)==null?void 0:n.path)=="string"&&typeof((a=(o=(r=t.at(0))==null?void 0:r.file)==null?void 0:o.source)==null?void 0:a.type)=="string"}function j6(t){let s,n,r,o,a,i,c;return l(),{feed:d,reset:l};function l(){s=!0,n="",r=0,o=-1,a=void 0,i=void 0,c=""}function d(h){n=n?n+h:h,s&&y6(n)&&(n=n.slice(p0.length)),s=!1;const p=n.length;let g=0,_=!1;for(;g<p;){_&&(n[g]===`
`&&++g,_=!1);let x=-1,j=o,b;for(let f=r;x<0&&f<p;++f)b=n[f],b===":"&&j<0?j=f-g:b==="\r"?(_=!0,x=f-g):b===`
`&&(x=f-g);if(x<0){r=p-g,o=j;break}else r=0,o=-1;u(n,g,j,x),g+=x+1}g===p?n="":g>0&&(n=n.slice(g))}function u(h,p,g,_){if(_===0){c.length>0&&(t({type:"event",id:a,event:i||void 0,data:c.slice(0,-1)}),c="",a=void 0),i=void 0;return}const x=g<0,j=h.slice(p,p+(x?_:g));let b=0;x?b=_:h[p+g+1]===" "?b=g+2:b=g+1;const f=p+b,y=_-b,v=h.slice(f,f+y).toString();if(j==="data")c+=v?"".concat(v,`
`):`
`;else if(j==="event")i=v;else if(j==="id"&&!v.includes("\0"))a=v;else if(j==="retry"){const w=parseInt(v,10);Number.isNaN(w)||t({type:"reconnect-interval",value:w})}}}const p0=[239,187,191];function y6(t){return p0.every((s,n)=>t.charCodeAt(n)===s)}class xj extends TransformStream{constructor(){let s;super({start(n){s=j6(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){s.feed(n)}})}}const v6=["additionalMetadata","agentSettings","allowFollowUpQuestions","apiUrl","assistantId","assistantVersionId","context","debug","doNotInjectContext","excludeFromInsights","frequencyPenalty","headers","iDontKnowMessage","jsonOutput","maxTokens","model","outputFormat","policiesOptions","messageTagOptions","presencePenalty","redact","retrievalOptions","sectionsMatchCount","sectionsMatchThreshold","skipSystemInstructions","stream","systemPrompt","temperature","threadId","threadMetadata","toolChoice","tools","topP","useReranker"],w6=t=>v6.includes(t);function Ro(t){if(t!=null&&t.aborted)throw t.reason instanceof Error?t.reason:new Error(typeof t.reason=="string"?t.reason:"Aborted")}const S6=(t,s)=>{try{const n=t.headers.get(s);if(n){const r=new Uint8Array(n.split(",").map(Number)),a=new TextDecoder().decode(r);return JSON.parse(a)}}catch{}};function ju(t){return typeof t=="object"&&t!==null&&("threadId"in t&&typeof t.threadId=="string"||"messageId"in t&&typeof t.messageId=="string"||"references"in t&&x6(t.references))}function C6(t){return typeof t=="object"&&t!==null&&"object"in t&&t.object==="chat.completion"}const k6=t=>typeof t=="object"&&t!==null&&"content"in t&&(typeof t.content=="string"||t.content===null)&&"role"in t&&t.role==="assistant",m0=t=>typeof t=="object"&&t!==null&&"id"in t&&typeof t.id=="string"&&"type"in t&&t.type==="function"&&"function"in t,jj=t=>Array.isArray(t)&&t.every(m0),I6=t=>typeof t=="object"&&t!==null&&"object"in t&&typeof t.object=="string"&&t.object==="chat.completion.chunk",P6=t=>typeof t=="object"&&t!==null&&"text"in t,T6={frequencyPenalty:0,iDontKnowMessage:"Sorry, I am not sure how to answer that.",model:"gpt-4o",presencePenalty:0,temperature:.1,topP:1,stream:!0,outputFormat:"markdown"};async function*N6(t,s,n={}){if(!s)throw new Error("A projectKey is required.");if(!t||!Array.isArray(t)||t.length===0)return;const r=Object.fromEntries(Object.entries(n).filter(([U])=>w6(U))),{signal:o,tools:a,toolChoice:i,additionalMetadata:c,...l}=r,{debug:d,policiesOptions:u,messageTagOptions:h,retrievalOptions:p,...g}=Gp({...l,tools:a==null?void 0:a.map(U=>({function:U.function,type:U.type})),toolChoice:i},{...Kp,...r.assistantId?{}:T6}),_=crypto.randomUUID(),x=async function*(){let U;try{U=await fetch(`${g.apiUrl}/chat/events?messageId=${_}&projectKey=${s}`,{method:"GET",headers:new Headers({"X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),signal:o})}catch(K){console.error("Caught error fetching events",K);return}if(Ro(n.signal),!U.ok||!U.body){console.error("Failed to fetch events",U);return}const E=U.body.pipeThrough(new TextDecoderStream).pipeThrough(new xj).getReader();for(;;){Ro(n.signal);const{value:K,done:J}=await E.read();if(J)return;if(!K||K.data==="[DONE]")continue;let B;try{B=JSON.parse(K.data)}catch(W){console.error("Error parsing event",W);continue}typeof B.message=="string"&&(yield{event:B})}},j=async function*(){var X,G,V,Se;const U=t==null?void 0:t.slice(-1)[0],E=U==null?void 0:U.id,K=await fetch(`${g.apiUrl}/chat`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),body:JSON.stringify({projectKey:s,messages:t,debug:d,...g,policies:u,messageTags:h,retrieval:p,additionalMetadata:c,messageId:E}),signal:o}),J=S6(K,"x-markprompt-data");if(Ro(n.signal),(X=K.headers.get("Content-Type"))!=null&&X.includes("application/json")){const Ie=await K.json();if(C6(Ie)&&ju(J)&&((G=Ie.choices)!=null&&G[0]))return{...Ie.choices[0].message,...J};if(ju(J)&&(yield J),P6(Ie)){yield{content:Ie.text,references:Ie.references,steps:Ie.steps,role:"assistant"};return}throw new Error("Malformed response from Markprompt API",{cause:Ie})}if(ju(J)&&(yield J),!K.ok||!K.body){Ro(n.signal);const Ie=await K.text();try{const St=JSON.parse(Ie);if(St&&typeof St=="object"&&"error"in St&&typeof St.error=="string")throw new Error(St.error)}catch{}throw new Error(Ie,{cause:{status:K.status,statusText:K.statusText}})}Ro(n.signal);const B={},W=K.body.pipeThrough(new TextDecoderStream).pipeThrough(new xj).getReader();for(;;){Ro(n.signal);const{value:Ie,done:St}=await W.read();if(St)return;if(!Ie||Ie.data==="[DONE]")continue;const ps=JSON.parse(Ie.data);if(!I6(ps))throw new Error("Malformed response from Markprompt API",{cause:ps});WB(B,(Se=(V=ps.choices)==null?void 0:V[0])==null?void 0:Se.delta,A6),yield structuredClone(B)}},b=x(),f=j(),y={next:async()=>{const{value:U,done:E}=await b.next();return{type:"events",value:U,done:E}}},v={next:async()=>{const{value:U,done:E}=await f.next();return{type:"chat",value:U,done:E}}};let w;const S=[];let I,N,D=!1;for(;;){Ro(n.signal),I=I??v.next(),N=N??(D?void 0:y.next());const U=await Promise.race([I,...N?[N]:[]]);if(U.type==="events"){N=void 0,U.value&&(S.push(U.value.event),yield structuredClone({events:S})),U.done&&(D=!0);continue}I=void 0;const E=U.value;if(E){if(ju(E)){w=E,yield w;continue}if(U.done&&k6(E)&&w)return{...E,...w};yield E}else if(U.done)return}}function A6(t,s){if(t==="assistant"&&s==="assistant")return"assistant";if(typeof t=="string"&&typeof s=="string")return t+s;if(typeof t=="string"&&!s)return t;if(typeof s=="string"&&!t)return s}const E6={},yj=t=>{let s;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(s):u;if(!Object.is(p,s)){const g=s;s=h??(typeof p!="object"||p===null)?p:Object.assign({},s,p),n.forEach(_=>_(s,g))}},o=()=>s,l={setState:r,getState:o,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(E6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=s=t(r,o,l);return l},$6=t=>t?yj(t):yj,{useDebugValue:O6}=ro,{useSyncExternalStoreWithSelector:R6}=vN,B6=t=>t;function L6(t,s=B6,n){const r=R6(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,n);return O6(r),r}const D6={};function g0(t,s){let n;try{n=t()}catch{return}return{getItem:o=>{var a;const i=l=>l===null?null:JSON.parse(l,s==null?void 0:s.reviver),c=(a=n.getItem(o))!=null?a:null;return c instanceof Promise?c.then(i):i(c)},setItem:(o,a)=>n.setItem(o,JSON.stringify(a,s==null?void 0:s.replacer)),removeItem:o=>n.removeItem(o)}}const Id=t=>s=>{try{const n=t(s);return n instanceof Promise?n:{then(r){return Id(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Id(r)(n)}}}},M6=(t,s)=>(n,r,o)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,b)=>({...b,...j}),...s},i=!1;const c=new Set,l=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...j)},r,o);const u=Id(a.serialize),h=()=>{const j=a.partialize({...r()});let b;const f=u({state:j,version:a.version}).then(y=>d.setItem(a.name,y)).catch(y=>{b=y});if(b)throw b;return f},p=o.setState;o.setState=(j,b)=>{p(j,b),h()};const g=t((...j)=>{n(...j),h()},r,o);let _;const x=()=>{var j;if(!d)return;i=!1,c.forEach(f=>f(r()));const b=((j=a.onRehydrateStorage)==null?void 0:j.call(a,r()))||void 0;return Id(d.getItem.bind(d))(a.name).then(f=>{if(f)return a.deserialize(f)}).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==a.version){if(a.migrate)return a.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var y;return _=a.merge(f,(y=r())!=null?y:g),n(_,!0),h()}).then(()=>{b==null||b(_,void 0),i=!0,l.forEach(f=>f(_))}).catch(f=>{b==null||b(void 0,f)})};return o.persist={setOptions:j=>{a={...a,...j},j.getStorage&&(d=j.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>i,onHydrate:j=>(c.add(j),()=>{c.delete(j)}),onFinishHydration:j=>(l.add(j),()=>{l.delete(j)})},x(),_||g},U6=(t,s)=>(n,r,o)=>{let a={storage:g0(()=>localStorage),partialize:x=>x,version:0,merge:(x,j)=>({...j,...x}),...s},i=!1;const c=new Set,l=new Set;let d=a.storage;if(!d)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,o);const u=()=>{const x=a.partialize({...r()});return d.setItem(a.name,{state:x,version:a.version})},h=o.setState;o.setState=(x,j)=>{h(x,j),u()};const p=t((...x)=>{n(...x),u()},r,o);o.getInitialState=()=>p;let g;const _=()=>{var x,j;if(!d)return;i=!1,c.forEach(f=>{var y;return f((y=r())!=null?y:p)});const b=((j=a.onRehydrateStorage)==null?void 0:j.call(a,(x=r())!=null?x:p))||void 0;return Id(d.getItem.bind(d))(a.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==a.version){if(a.migrate)return[!0,a.migrate(f.state,f.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var y;const[v,w]=f;if(g=a.merge(w,(y=r())!=null?y:p),n(g,!0),v)return u()}).then(()=>{b==null||b(g,void 0),g=r(),i=!0,l.forEach(f=>f(g))}).catch(f=>{b==null||b(void 0,f)})};return o.persist={setOptions:x=>{a={...a,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>i,onHydrate:x=>(c.add(x),()=>{c.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},a.skipHydration||_(),g||p},F6=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((D6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),M6(t,s)):U6(t,s),q6=F6;var _0=Symbol.for("immer-nothing"),vj=Symbol.for("immer-draftable"),js=Symbol.for("immer-state");function on(t,...s){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var oc=Object.getPrototypeOf;function ac(t){return!!t&&!!t[js]}function Ta(t){var s;return t?f0(t)||Array.isArray(t)||!!t[vj]||!!((s=t.constructor)!=null&&s[vj])||Yp(t)||Jp(t):!1}var z6=Object.prototype.constructor.toString();function f0(t){if(!t||typeof t!="object")return!1;const s=oc(t);if(s===null)return!0;const n=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===z6}function Xh(t,s){Qp(t)===0?Reflect.ownKeys(t).forEach(n=>{s(n,t[n],t)}):t.forEach((n,r)=>s(r,n,t))}function Qp(t){const s=t[js];return s?s.type_:Array.isArray(t)?1:Yp(t)?2:Jp(t)?3:0}function Y_(t,s){return Qp(t)===2?t.has(s):Object.prototype.hasOwnProperty.call(t,s)}function b0(t,s,n){const r=Qp(t);r===2?t.set(s,n):r===3?t.add(n):t[s]=n}function H6(t,s){return t===s?t!==0||1/t===1/s:t!==t&&s!==s}function Yp(t){return t instanceof Map}function Jp(t){return t instanceof Set}function ra(t){return t.copy_||t.base_}function J_(t,s){if(Yp(t))return new Map(t);if(Jp(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=f0(t);if(s===!0||s==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[js];let o=Reflect.ownKeys(r);for(let a=0;a<o.length;a++){const i=o[a],c=r[i];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[i]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[i]})}return Object.create(oc(t),r)}else{const r=oc(t);if(r!==null&&n)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function $b(t,s=!1){return Zp(t)||ac(t)||!Ta(t)||(Qp(t)>1&&(t.set=t.add=t.clear=t.delete=V6),Object.freeze(t),s&&Object.entries(t).forEach(([n,r])=>$b(r,!0))),t}function V6(){on(2)}function Zp(t){return Object.isFrozen(t)}var W6={};function Na(t){const s=W6[t];return s||on(0,t),s}var Pd;function x0(){return Pd}function G6(t,s){return{drafts_:[],parent_:t,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wj(t,s){s&&(Na("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=s)}function Z_(t){X_(t),t.drafts_.forEach(K6),t.drafts_=null}function X_(t){t===Pd&&(Pd=t.parent_)}function Sj(t){return Pd=G6(Pd,t)}function K6(t){const s=t[js];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function Cj(t,s){s.unfinalizedDrafts_=s.drafts_.length;const n=s.drafts_[0];return t!==void 0&&t!==n?(n[js].modified_&&(Z_(s),on(4)),Ta(t)&&(t=ep(s,t),s.parent_||tp(s,t)),s.patches_&&Na("Patches").generateReplacementPatches_(n[js].base_,t,s.patches_,s.inversePatches_)):t=ep(s,n,[]),Z_(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),t!==_0?t:void 0}function ep(t,s,n){if(Zp(s))return s;const r=s[js];if(!r)return Xh(s,(o,a)=>kj(t,r,s,o,a,n)),s;if(r.scope_!==t)return s;if(!r.modified_)return tp(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let a=o,i=!1;r.type_===3&&(a=new Set(o),o.clear(),i=!0),Xh(a,(c,l)=>kj(t,r,o,c,l,n,i)),tp(t,o,!1),n&&t.patches_&&Na("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function kj(t,s,n,r,o,a,i){if(ac(o)){const c=a&&s&&s.type_!==3&&!Y_(s.assigned_,r)?a.concat(r):void 0,l=ep(t,o,c);if(b0(n,r,l),ac(l))t.canAutoFreeze_=!1;else return}else i&&n.add(o);if(Ta(o)&&!Zp(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ep(t,o),(!s||!s.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tp(t,o)}}function tp(t,s,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$b(s,n)}function Q6(t,s){const n=Array.isArray(t),r={type_:n?1:0,scope_:s?s.scope_:x0(),modified_:!1,finalized_:!1,assigned_:{},parent_:s,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,a=Ob;n&&(o=[r],a=Td);const{revoke:i,proxy:c}=Proxy.revocable(o,a);return r.draft_=c,r.revoke_=i,c}var Ob={get(t,s){if(s===js)return t;const n=ra(t);if(!Y_(n,s))return Y6(t,n,s);const r=n[s];return t.finalized_||!Ta(r)?r:r===Jm(t.base_,s)?(Zm(t),t.copy_[s]=tf(r,t)):r},has(t,s){return s in ra(t)},ownKeys(t){return Reflect.ownKeys(ra(t))},set(t,s,n){const r=j0(ra(t),s);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const o=Jm(ra(t),s),a=o==null?void 0:o[js];if(a&&a.base_===n)return t.copy_[s]=n,t.assigned_[s]=!1,!0;if(H6(n,o)&&(n!==void 0||Y_(t.base_,s)))return!0;Zm(t),ef(t)}return t.copy_[s]===n&&(n!==void 0||s in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[s])||(t.copy_[s]=n,t.assigned_[s]=!0),!0},deleteProperty(t,s){return Jm(t.base_,s)!==void 0||s in t.base_?(t.assigned_[s]=!1,Zm(t),ef(t)):delete t.assigned_[s],t.copy_&&delete t.copy_[s],!0},getOwnPropertyDescriptor(t,s){const n=ra(t),r=Reflect.getOwnPropertyDescriptor(n,s);return r&&{writable:!0,configurable:t.type_!==1||s!=="length",enumerable:r.enumerable,value:n[s]}},defineProperty(){on(11)},getPrototypeOf(t){return oc(t.base_)},setPrototypeOf(){on(12)}},Td={};Xh(Ob,(t,s)=>{Td[t]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}});Td.deleteProperty=function(t,s){return Td.set.call(this,t,s,void 0)};Td.set=function(t,s,n){return Ob.set.call(this,t[0],s,n,t[0])};function Jm(t,s){const n=t[js];return(n?ra(n):t)[s]}function Y6(t,s,n){var o;const r=j0(s,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function j0(t,s){if(!(s in t))return;let n=oc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,s);if(r)return r;n=oc(n)}}function ef(t){t.modified_||(t.modified_=!0,t.parent_&&ef(t.parent_))}function Zm(t){t.copy_||(t.copy_=J_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var J6=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(s,n,r)=>{if(typeof s=="function"&&typeof n!="function"){const a=n;n=s;const i=this;return function(l=a,...d){return i.produce(l,u=>n.call(this,u,...d))}}typeof n!="function"&&on(6),r!==void 0&&typeof r!="function"&&on(7);let o;if(Ta(s)){const a=Sj(this),i=tf(s,void 0);let c=!0;try{o=n(i),c=!1}finally{c?Z_(a):X_(a)}return wj(a,r),Cj(o,a)}else if(!s||typeof s!="object"){if(o=n(s),o===void 0&&(o=s),o===_0&&(o=void 0),this.autoFreeze_&&$b(o,!0),r){const a=[],i=[];Na("Patches").generateReplacementPatches_(s,o,a,i),r(a,i)}return o}else on(1,s)},this.produceWithPatches=(s,n)=>{if(typeof s=="function")return(i,...c)=>this.produceWithPatches(i,l=>s(l,...c));let r,o;return[this.produce(s,n,(i,c)=>{r=i,o=c}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ta(t)||on(8),ac(t)&&(t=Z6(t));const s=Sj(this),n=tf(t,void 0);return n[js].isManual_=!0,X_(s),n}finishDraft(t,s){const n=t&&t[js];(!n||!n.isManual_)&&on(9);const{scope_:r}=n;return wj(r,s),Cj(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,s){let n;for(n=s.length-1;n>=0;n--){const o=s[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(s=s.slice(n+1));const r=Na("Patches").applyPatches_;return ac(t)?r(t,s):this.produce(t,o=>r(o,s))}};function tf(t,s){const n=Yp(t)?Na("MapSet").proxyMap_(t,s):Jp(t)?Na("MapSet").proxySet_(t,s):Q6(t,s);return(s?s.scope_:x0()).drafts_.push(n),n}function Z6(t){return ac(t)||on(10,t),y0(t)}function y0(t){if(!Ta(t)||Zp(t))return t;const s=t[js];let n;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,n=J_(t,s.scope_.immer_.useStrictShallowCopy_)}else n=J_(t,!0);return Xh(n,(r,o)=>{b0(n,r,y0(o))}),s&&(s.finalized_=!1),n}var ys=new J6,X6=ys.produce;ys.produceWithPatches.bind(ys);ys.setAutoFreeze.bind(ys);ys.setUseStrictShallowCopy.bind(ys);ys.applyPatches.bind(ys);ys.createDraft.bind(ys);ys.finishDraft.bind(ys);const ez=t=>(s,n,r)=>(r.setState=(o,a,...i)=>{const c=typeof o=="function"?X6(o):o;return s(c,a,...i)},t(r.setState,n,r)),tz=ez,Ij=async t=>{const s=Uint8Array.from(atob(t),n=>n.charCodeAt(0));return await globalThis.crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!0,["encrypt","decrypt"])},sz=(t,s)=>{const n=new Uint8Array(s.length+t.byteLength);return n.set(s,0),n.set(new Uint8Array(t),s.length),btoa(String.fromCharCode(...n))},nz=t=>{const s=atob(t),n=new Uint8Array([...s].map(a=>a.charCodeAt(0))),r=n.slice(0,12);return{ciphertext:n.slice(12).buffer,iv:r}},rz=async(t,s)=>{const n=globalThis.crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(t),o=await globalThis.crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{iv:n,ciphertext:o}},oz=async(t,s,n)=>{const r=await globalThis.crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,t);return new TextDecoder().decode(r)},az=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Cr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ec);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)};class Rb extends Error{constructor(s,n="FunctionsError",r){super(s),this.name=n,this.context=r}}class iz extends Rb{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class cz extends Rb{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class lz extends Rb{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var sf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(sf||(sf={}));var dz=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class uz{constructor(s,{headers:n={},customFetch:r,region:o=sf.Any}={}){this.url=s,this.headers=n,this.region=o,this.fetch=az(r)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var r;return dz(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:i}=n;let c={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(c["x-region"]=l);let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(c["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(c["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${s}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),o),body:d}).catch(_=>{throw new iz(_)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new cz(u);if(!u.ok)throw new lz(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield u.json():p==="application/octet-stream"?g=yield u.blob():p==="text/event-stream"?g=u:p==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(o){return{data:null,error:o}}})}}var Xc={},si={},ni={},ri={},oi={},ai={},hz=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ic=hz();const pz=ic.fetch,v0=ic.fetch.bind(ic),w0=ic.Headers,mz=ic.Request,gz=ic.Response,Ec=Object.freeze(Object.defineProperty({__proto__:null,Headers:w0,Request:mz,Response:gz,default:v0,fetch:pz},Symbol.toStringTag,{value:"Module"})),_z=PT(Ec);var yu={},Pj;function fz(){if(Pj)return yu;Pj=1,Object.defineProperty(yu,"__esModule",{value:!0});let t=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}};return yu.default=t,yu}var Tj;function S0(){if(Tj)return ai;Tj=1;var t=ai&&ai.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ai,"__esModule",{value:!0});const s=t(_z),n=t(fz());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let l=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,h,p;let g=null,_=null,x=null,j=d.status,b=d.statusText;if(d.ok){if(this.method!=="HEAD"){const w=await d.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=w:_=JSON.parse(w))}const y=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),v=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&v&&v.length>1&&(x=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(g={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,x=null,j=406,b="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const y=await d.text();try{g=JSON.parse(y),Array.isArray(g)&&d.status===404&&(_=[],g=null,j=200,b="OK")}catch{d.status===404&&y===""?(j=204,b="No Content"):g={message:y}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,j=200,b="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:_,count:x,status:j,statusText:b}});return this.shouldThrowOnError||(l=l.catch(d=>{var u,h,p;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(h=d==null?void 0:d.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(p=d==null?void 0:d.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}}return ai.default=r,ai}var Nj;function C0(){if(Nj)return oi;Nj=1;var t=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});const s=t(S0());class n extends s.default{select(o){let a=!1;const i=(o??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:a=!0,nullsFirst:i,foreignTable:c,referencedTable:l=c}={}){const d=l?`${l}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${o}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:i=a}={}){const c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(c,`${o}`),this}range(o,a,{foreignTable:i,referencedTable:c=i}={}){const l=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${o}`),this.url.searchParams.set(d,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:a=!1,settings:i=!1,buffers:c=!1,wal:l=!1,format:d="text"}={}){var u;const h=[o?"analyze":null,a?"verbose":null,i?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${p}"; options=${h};`,d==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return oi.default=n,oi}var Aj;function Bb(){if(Aj)return ri;Aj=1;var t=ri&&ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ri,"__esModule",{value:!0});const s=t(C0());class n extends s.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const i=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:i,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${l}fts${d}.${a}`),this}match(o){return Object.entries(o).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(o,a,i){return this.url.searchParams.append(o,`not.${a}.${i}`),this}or(o,{foreignTable:a,referencedTable:i=a}={}){const c=i?`${i}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,i){return this.url.searchParams.append(o,`${a}.${i}`),this}}return ri.default=n,ri}var Ej;function k0(){if(Ej)return ni;Ej=1;var t=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});const s=t(Bb());class n{constructor(o,{headers:a={},schema:i,fetch:c}){this.url=o,this.headers=a,this.schema=i,this.fetch=c}select(o,{head:a=!1,count:i}={}){const c=a?"HEAD":"GET";let l=!1;const d=(o??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:a,defaultToNull:i=!0}={}){const c="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(o)){const d=o.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:a,ignoreDuplicates:i=!1,count:c,defaultToNull:l=!0}={}){const d="POST",u=[`resolution=${i?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&u.push(this.headers.Prefer),c&&u.push(`count=${c}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(o)){const h=o.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:a}={}){const i="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),this.headers.Prefer=c.join(","),new s.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const a="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new s.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ni.default=n,ni}var el={},tl={},$j;function bz(){return $j||($j=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.version=void 0,tl.version="0.0.0-automated"),tl}var Oj;function xz(){if(Oj)return el;Oj=1,Object.defineProperty(el,"__esModule",{value:!0}),el.DEFAULT_HEADERS=void 0;const t=bz();return el.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},el}var Rj;function jz(){if(Rj)return si;Rj=1;var t=si&&si.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(si,"__esModule",{value:!0});const s=t(k0()),n=t(Bb()),r=xz();class o{constructor(i,{headers:c={},schema:l,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=l,this.fetch=d}from(i){const c=new URL(`${this.url}/${i}`);return new s.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,c={},{head:l=!1,get:d=!1,count:u}={}){let h;const p=new URL(`${this.url}/rpc/${i}`);let g;l||d?(h=l?"HEAD":"GET",Object.entries(c).filter(([x,j])=>j!==void 0).map(([x,j])=>[x,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([x,j])=>{p.searchParams.append(x,j)})):(h="POST",g=c);const _=Object.assign({},this.headers);return u&&(_.Prefer=`count=${u}`),new n.default({method:h,url:p,headers:_,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return si.default=o,si}var Bj;function yz(){return Bj||(Bj=1,function(t){var s=Xc&&Xc.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;var n=jz();Object.defineProperty(t,"PostgrestClient",{enumerable:!0,get:function(){return s(n).default}});var r=k0();Object.defineProperty(t,"PostgrestQueryBuilder",{enumerable:!0,get:function(){return s(r).default}});var o=Bb();Object.defineProperty(t,"PostgrestFilterBuilder",{enumerable:!0,get:function(){return s(o).default}});var a=C0();Object.defineProperty(t,"PostgrestTransformBuilder",{enumerable:!0,get:function(){return s(a).default}});var i=S0();Object.defineProperty(t,"PostgrestBuilder",{enumerable:!0,get:function(){return s(i).default}})}(Xc)),Xc}var vz=yz();const wz=TT(vz),{PostgrestClient:Sz,PostgrestQueryBuilder:Qye,PostgrestFilterBuilder:Yye,PostgrestTransformBuilder:Jye,PostgrestBuilder:Zye}=wz,Cz="2.10.2",kz={"X-Client-Info":`realtime-js/${Cz}`},Iz="1.0.0",I0=1e4,Pz=1e3;var Ki;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ki||(Ki={}));var _s;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_s||(_s={}));var nn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(nn||(nn={}));var nf;(function(t){t.websocket="websocket"})(nf||(nf={}));var da;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(da||(da={}));class Tz{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),r=new TextDecoder;return this._decodeBroadcast(s,n,r)}_decodeBroadcast(s,n,r){const o=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const c=r.decode(s.slice(i,i+o));i=i+o;const l=r.decode(s.slice(i,i+a));i=i+a;const d=JSON.parse(r.decode(s.slice(i,s.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class P0{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ge||(Ge={}));const Lj=(t,s,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(s).reduce((a,i)=>(a[i]=Nz(i,t,s,o),a),{})},Nz=(t,s,n,r)=>{const o=s.find(c=>c.name===t),a=o==null?void 0:o.type,i=n[t];return a&&!r.includes(a)?T0(a,i):rf(i)},T0=(t,s)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Oz(s,n)}switch(t){case Ge.bool:return Az(s);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Ez(s);case Ge.json:case Ge.jsonb:return $z(s);case Ge.timestamp:return Rz(s);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return rf(s);default:return rf(s)}},rf=t=>t,Az=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ez=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},$z=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},Oz=(t,s)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const i=t.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(c=>T0(s,c))}return t},Rz=t=>typeof t=="string"?t.replace(" ","T"):t,N0=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")};class Xm{constructor(s,n,r={},o=I0){this.channel=s,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var r;return this._hasReceived(s)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(r=>r.status===s).forEach(r=>r.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Dj;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dj||(Dj={}));class nd{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:i,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nd.syncState(this.state,o,a,i),this.pendingDiffs.forEach(l=>{this.state=nd.syncDiff(this.state,l,a,i)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=nd.syncDiff(this.state,o,a,i),c())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,r,o){const a=this.cloneDeep(s),i=this.transformState(n),c={},l={};return this.map(a,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const h=a[d];if(h){const p=u.map(j=>j.presence_ref),g=h.map(j=>j.presence_ref),_=u.filter(j=>g.indexOf(j.presence_ref)<0),x=h.filter(j=>p.indexOf(j.presence_ref)<0);_.length>0&&(c[d]=_),x.length>0&&(l[d]=x)}else c[d]=u}),this.syncDiff(a,{joins:c,leaves:l},r,o)}static syncDiff(s,n,r,o){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(c,l)=>{var d;const u=(d=s[c])!==null&&d!==void 0?d:[];if(s[c]=this.cloneDeep(l),u.length>0){const h=s[c].map(g=>g.presence_ref),p=u.filter(g=>h.indexOf(g.presence_ref)<0);s[c].unshift(...p)}r(c,u,l)}),this.map(i,(c,l)=>{let d=s[c];if(!d)return;const u=l.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),s[c]=d,o(c,d,l),d.length===0&&delete s[c]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(r=>n(r,s[r]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,r)=>{const o=s[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mj;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Mj||(Mj={}));var Uj;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Uj||(Uj={}));var Fj;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fj||(Fj={}));class Lb{constructor(s,n={config:{}},r){this.topic=s,this.params=n,this.socket=r,this.bindings={},this.state=_s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xm(this,nn.join,this.params,this.timeout),this.rejoinTimer=new P0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_s.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_s.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_s.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new nd(this),this.broadcastEndpointURL=N0(this.socket.endPoint)+"/api/broadcast"}subscribe(s,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:c}}=this.params;this._onError(u=>s&&s("CHANNEL_ERROR",u)),this._onClose(()=>s&&s("CLOSED"));const l={},d={broadcast:a,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&o!==void 0?o:[],private:c};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){s&&s("SUBSCRIBED");return}else{const p=this.bindings.postgres_changes,g=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,_=[];for(let x=0;x<g;x++){const j=p[x],{filter:{event:b,schema:f,table:y,filter:v}}=j,w=u&&u[x];if(w&&w.event===b&&w.schema===f&&w.table===y&&w.filter===v)_.push(Object.assign(Object.assign({},j),{id:w.id}));else{this.unsubscribe(),s&&s("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,s&&s("SUBSCRIBED");return}}).receive("error",u=>{s&&s("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{s&&s("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,r){return this._on(s,n,r)}async send(s,n={}){var r,o;if(!this._canPush()&&s.type==="broadcast"){const{event:a,payload:i}=s,c={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=l.body)===null||o===void 0?void 0:o.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,c,l;const d=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((l=(c=(i=this.params)===null||i===void 0?void 0:i.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=_s.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new Xm(this,nn.leave,{},s);o.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(s,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),i}_push(s,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Xm(this,s,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(s,n,r){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,r){var o,a;const i=s.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=nn;if(r&&[c,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let p=this._onMessage(i,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var _,x,j;return((_=g.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(x=g.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===i}).map(g=>g.callback(p,r)):(a=this.bindings[i])===null||a===void 0||a.filter(g=>{var _,x,j,b,f,y;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const v=g.id,w=(_=g.filter)===null||_===void 0?void 0:_.event;return v&&((x=n.ids)===null||x===void 0?void 0:x.includes(v))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const v=(f=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return v==="*"||v===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:x,table:j,commit_timestamp:b,type:f,errors:y}=_;p=Object.assign(Object.assign({},{schema:x,table:j,commit_timestamp:b,eventType:f,new:{},old:{},errors:y}),this._getPayloadRecords(_))}g.callback(p,r)})}_isClosed(){return this.state===_s.closed}_isJoined(){return this.state===_s.joined}_isJoining(){return this.state===_s.joining}_isLeaving(){return this.state===_s.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,r){const o=s.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(s,n){const r=s.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Lb.isEqual(o.filter,n))}),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const r in s)if(s[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(nn.close,{},s)}_onError(s){this._on(nn.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_s.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=Lj(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=Lj(s.columns,s.old_record)),n}}const Bz=()=>{},Lz=typeof WebSocket<"u";class Dz{constructor(s,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=kz,this.params={},this.timeout=I0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Bz,this.conn=null,this.sendBuffer=[],this.serializer=new Tz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...c)=>Cr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ec);return{default:l}},void 0).then(({default:l})=>l(...c)):i=fetch,(...c)=>i(...c)},this.endPoint=`${s}/${nf.websocket}`,this.httpEndpoint=N0(s),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;o&&(this.accessToken=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,i)=>i(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new P0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Lz){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Mz(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Cr(async()=>{const{default:s}=await import("./browser-CdPPfnpG.js").then(n=>n.b);return{default:s}},__vite__mapDeps([0,1,2])).then(({default:s})=>{this.conn=new s(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(s,n){this.conn&&(this.conn.onclose=function(){},s?this.conn.close(s,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),s}log(s,n,r){this.logger(s,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ki.connecting:return da.Connecting;case Ki.open:return da.Open;case Ki.closing:return da.Closing;default:return da.Closed}}isConnected(){return this.connectionState()===da.Open}channel(s,n={config:{}}){const r=new Lb(`realtime:${s}`,n,this);return this.channels.push(r),r}push(s){const{topic:n,event:r,payload:o,ref:a}=s,i=()=>{this.encode(s,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(s){this.accessToken=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(nn.access_token,{access_token:s})})}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(r=>r.topic===s&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n._joinRef()!==s._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Iz}))}_onConnMessage(s){this.decode(s.data,n=>{let{topic:r,event:o,payload:a,ref:i}=n;(i&&i===this.pendingHeartbeatRef||o===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,a,i)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(s=>s())}_onConnClose(s){this.log("transport","close",s),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(s))}_onConnError(s){this.log("transport",s.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(s))}_triggerChanError(){this.channels.forEach(s=>s._trigger(nn.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const r=s.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${s}${r}${o}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_sendHeartbeat(){var s;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(s=this.conn)===null||s===void 0||s.close(Pz,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Mz{constructor(s,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ki.connecting,this.send=()=>{},this.url=null,this.url=s,this.close=r.close}}class Db extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function qt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Uz extends Db{constructor(s,n){super(s),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class qj extends Db{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var Fz=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const A0=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Cr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ec);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},qz=()=>Fz(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cr(()=>Promise.resolve().then(()=>Ec),void 0)).Response:Response});var $c=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const eg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zz=(t,s)=>$c(void 0,void 0,void 0,function*(){const n=yield qz();t instanceof n?t.json().then(r=>{s(new Uz(eg(r),t.status||500))}).catch(r=>{s(new qj(eg(r),r))}):s(new qj(eg(t),t))}),Hz=(t,s,n,r)=>{const o={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};function Xp(t,s,n,r,o,a){return $c(this,void 0,void 0,function*(){return new Promise((i,c)=>{t(n,Hz(s,r,o,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>zz(l,c))})})}function of(t,s,n,r){return $c(this,void 0,void 0,function*(){return Xp(t,"GET",s,n,r)})}function eo(t,s,n,r,o){return $c(this,void 0,void 0,function*(){return Xp(t,"POST",s,r,o,n)})}function Vz(t,s,n,r,o){return $c(this,void 0,void 0,function*(){return Xp(t,"PUT",s,r,o,n)})}function E0(t,s,n,r,o){return $c(this,void 0,void 0,function*(){return Xp(t,"DELETE",s,r,o,n)})}var Is=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const Wz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gz{constructor(s,n={},r,o){this.url=s,this.headers=n,this.bucketId=r,this.fetch=A0(o)}uploadOrUpdate(s,n,r,o){return Is(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},zj),o),c=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl)):(a=r,c["cache-control"]=`max-age=${i.cacheControl}`,c["content-type"]=i.contentType);const l=this._removeEmptyFolders(n),d=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:s,body:a,headers:c},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield u.json();return u.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}upload(s,n,r){return Is(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,r)})}uploadToSignedUrl(s,n,r,o){return Is(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(s),i=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${i}`);c.searchParams.set("token",n);try{let l;const d=Object.assign({upsert:zj.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(c.toString(),{method:"PUT",body:l,headers:u}),p=yield h.json();return h.ok?{data:{path:a,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(qt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(s,n){return Is(this,void 0,void 0,function*(){try{let r=this._getFinalPath(s);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield eo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+a.url),c=i.searchParams.get("token");if(!c)throw new Db("No token returned by API");return{data:{signedUrl:i.toString(),path:s,token:c},error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}update(s,n,r){return Is(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,r)})}move(s,n,r){return Is(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}copy(s,n,r){return Is(this,void 0,void 0,function*(){try{return{data:{path:(yield eo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}createSignedUrl(s,n,r){return Is(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s),a=yield eo(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}createSignedUrls(s,n,r){return Is(this,void 0,void 0,function*(){try{const o=yield eo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}download(s,n){return Is(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"";try{const c=this._getFinalPath(s);return{data:yield(yield of(this.fetch,`${this.url}/${o}/${c}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(qt(c))return{data:null,error:c};throw c}})}getPublicUrl(s,n){const r=this._getFinalPath(s),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&o.push(l);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(s){return Is(this,void 0,void 0,function*(){try{return{data:yield E0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}list(s,n,r){return Is(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Wz),n),{prefix:s||""});return{data:yield eo(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}_getFinalPath(s){return`${this.bucketId}/${s}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const Kz="2.6.0",Qz={"X-Client-Info":`storage-js/${Kz}`};var ii=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class Yz{constructor(s,n={},r){this.url=s,this.headers=Object.assign(Object.assign({},Qz),n),this.fetch=A0(r)}listBuckets(){return ii(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}getBucket(s){return ii(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return ii(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}updateBucket(s,n){return ii(this,void 0,void 0,function*(){try{return{data:yield Vz(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}emptyBucket(s){return ii(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(s){return ii(this,void 0,void 0,function*(){try{return{data:yield E0(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}}class Jz extends Yz{constructor(s,n={},r){super(s,n,r)}from(s){return new Gz(this.url,this.headers,s,this.fetch)}}const Zz="2.44.2";let ql="";typeof Deno<"u"?ql="deno":typeof document<"u"?ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ql="react-native":ql="node";const Xz={"X-Client-Info":`supabase-js-${ql}/${Zz}`},e9={headers:Xz},t9={schema:"public"},s9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n9={};var r9=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};const o9=t=>{let s;return t?s=t:typeof fetch>"u"?s=v0:s=fetch,(...n)=>s(...n)},a9=()=>typeof Headers>"u"?w0:Headers,i9=(t,s,n)=>{const r=o9(n),o=a9();return(a,i)=>r9(void 0,void 0,void 0,function*(){var c;const l=(c=yield s())!==null&&c!==void 0?c:t;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},i),{headers:d}))})};function c9(t){return t.replace(/\/$/,"")}function l9(t,s){const{db:n,auth:r,realtime:o,global:a}=t,{db:i,auth:c,realtime:l,global:d}=s;return{db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},l),o),global:Object.assign(Object.assign({},d),a)}}const $0="2.64.2",d9="http://localhost:9999",u9="supabase.auth.token",h9={"X-Client-Info":`gotrue-js/${$0}`},Hj=10,af="X-Supabase-Api-Version",O0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function p9(t){return Math.round(Date.now()/1e3)+t}function m9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Zs=()=>typeof document<"u",Bo={tested:!1,writable:!1},rd=()=>{if(!Zs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bo.tested)return Bo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Bo.tested=!0,Bo.writable=!0}catch{Bo.tested=!0,Bo.writable=!1}return Bo.writable};function tg(t){const s={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{s[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{s[o]=r}),s}const R0=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...n)=>Cr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ec);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},g9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",B0=async(t,s,n)=>{await t.setItem(s,JSON.stringify(n))},vu=async(t,s)=>{const n=await t.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},sg=async(t,s)=>{await t.removeItem(s)};function _9(t){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,o,a,i,c,l,d,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)i=s.indexOf(t.charAt(u++)),c=s.indexOf(t.charAt(u++)),l=s.indexOf(t.charAt(u++)),d=s.indexOf(t.charAt(u++)),r=i<<2|c>>4,o=(c&15)<<4|l>>2,a=(l&3)<<6|d,n=n+String.fromCharCode(r),l!=64&&o!=0&&(n=n+String.fromCharCode(o)),d!=64&&a!=0&&(n=n+String.fromCharCode(a));return n}class em{constructor(){this.promise=new em.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}em.promiseConstructor=Promise;function Vj(t){const s=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!s.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(_9(r))}async function f9(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function b9(t,s){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!s(a,null,i)){r(i);return}}catch(i){if(!s(a,i)){o(i);return}}})()})}function x9(t){return("0"+t.toString(16)).substr(-2)}function j9(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(s),Array.from(s,x9).join("")}async function y9(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}function v9(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function w9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await y9(t);return v9(n)}async function ci(t,s,n=!1){const r=j9();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await B0(t,`${s}-code-verifier`,o);const a=await w9(r);return[a,r===a?"plain":"s256"]}const S9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function C9(t){const s=t.headers.get(af);if(!s||!s.match(S9))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}class Mb extends Error{constructor(s,n,r){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function je(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class k9 extends Mb{constructor(s,n,r){super(s,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function I9(t){return je(t)&&t.name==="AuthApiError"}class L0 extends Mb{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class za extends Mb{constructor(s,n,r,o){super(s,r,o),this.name=n,this.status=r}}class Lo extends za{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ng extends za{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wu extends za{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Su extends za{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wj extends za{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cf extends za{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function rg(t){return je(t)&&t.name==="AuthRetryableFetchError"}class Gj extends za{constructor(s,n,r){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var P9=function(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),T9=[502,503,504];async function Kj(t){var s;if(!g9(t))throw new cf(oa(t),0);if(T9.includes(t.status))throw new cf(oa(t),t.status);let n;try{n=await t.json()}catch(a){throw new L0(oa(a),a)}let r;const o=C9(t);if(o&&o.getTime()>=O0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Gj(oa(n),t.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Gj(oa(n),t.status,n.weak_password.reasons);throw new k9(oa(n),t.status||500,r)}const N9=(t,s,n,r)=>{const o={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Ce(t,s,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[af]||(a[af]=O0["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const c=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await A9(t,s,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function A9(t,s,n,r,o,a){const i=N9(s,r,o,a);let c;try{c=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new cf(oa(l),0)}if(c.ok||await Kj(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Kj(l)}}function Yr(t){var s;let n=null;R9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=p9(t.expires_in)));const r=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:n,user:r},error:null}}function Qj(t){const s=Yr(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(s.data.weak_password=t.weak_password),s}function io(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function E9(t){return{data:t,error:null}}function $9(t){const{action_link:s,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=t,i=P9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:s,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},l=Object.assign({},i);return{data:{properties:c,user:l},error:null}}function O9(t){return t}function R9(t){return t.access_token&&t.refresh_token&&t.expires_in}var B9=function(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class L9{constructor({url:s="",headers:n={},fetch:r}){this.url=s,this.headers=n,this.fetch=R0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n="global"){try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(s,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:io})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async generateLink(s){try{const{options:n}=s,r=B9(s,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:$9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:io})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,r,o,a,i,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=s==null?void 0:s.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=s==null?void 0:s.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:O9});if(u.error)throw u.error;const h=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);d[`${j}Page`]=x}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(je(d))return{data:{users:[]},error:d};throw d}}async getUserById(s){try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:io})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:io})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async deleteUser(s,n=!1){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:io})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async _listFactors(s){try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteFactor(s){try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}}const D9={getItem:t=>rd()?globalThis.localStorage.getItem(t):null,setItem:(t,s)=>{rd()&&globalThis.localStorage.setItem(t,s)},removeItem:t=>{rd()&&globalThis.localStorage.removeItem(t)}};function Yj(t={}){return{getItem:s=>t[s]||null,setItem:(s,n)=>{t[s]=n},removeItem:s=>{delete t[s]}}}function M9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const li={debug:!!(globalThis&&rd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class D0 extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class U9 extends D0{}async function F9(t,s,n){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const r=new globalThis.AbortController;return s>0&&setTimeout(()=>{r.abort(),li.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{li.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(s===0)throw li.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new U9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(li.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}M9();const q9={url:d9,storageKey:u9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:h9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},sl=30*1e3,Jj=3;async function Zj(t,s,n){return await n()}class Nd{constructor(s){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nd.nextInstanceID,Nd.nextInstanceID+=1,this.instanceID>0&&Zs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},q9),s);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new L9({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=R0(o.fetch),this.lock=o.lock||Zj,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Zs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=F9:this.lock=Zj,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:rd()?this.storage=D9:(this.memoryStorage={},this.storage=Yj(this.memoryStorage)):(this.memoryStorage={},this.storage=Yj(this.memoryStorage)),Zs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$0}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const s=Zs()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",s),s||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(s);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return je(s)?{error:s}:{error:new L0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,r,o;try{await this._removeSession();const a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=s==null?void 0:s.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=s==null?void 0:s.options)===null||o===void 0?void 0:o.captchaToken}},xform:Yr}),{data:i,error:c}=a;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(s){var n,r,o;try{await this._removeSession();let a;if("email"in s){const{email:u,password:h,options:p}=s;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await ci(this.storage,this.storageKey)),a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:_},xform:Yr})}else if("phone"in s){const{phone:u,password:h,options:p}=s;a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(o=p==null?void 0:p.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Yr})}else throw new wu("You must provide either an email or phone number and a password");const{data:i,error:c}=a;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(s){try{await this._removeSession();let n;if("email"in s){const{email:a,password:i,options:c}=s;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Qj})}else if("phone"in s){const{phone:a,password:i,options:c}=s;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Qj})}else throw new wu("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ng}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,r,o,a;return await this._removeSession(),await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=s.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=s.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=s.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async _exchangeCodeForSession(s){const n=await vu(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/"),{data:a,error:i}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:r},xform:Yr});return await sg(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null,redirectType:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ng}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}async signInWithIdToken(s){await this._removeSession();try{const{options:n,provider:r,token:o,access_token:a,nonce:i}=s,c=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Yr}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ng}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,r,o,a,i;try{if(await this._removeSession(),"email"in s){const{email:c,options:l}=s;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ci(this.storage,this.storageKey));const{error:h}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in s){const{phone:c,options:l}=s,{data:d,error:u}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l==null?void 0:l.data)!==null&&o!==void 0?o:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new wu("You must provide either an email or phone number.")}catch(c){if(je(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(s){var n,r;try{s.type!=="email_change"&&s.type!=="phone_change"&&await this._removeSession();let o,a;"options"in s&&(o=(n=s.options)===null||n===void 0?void 0:n.redirectTo,a=(r=s.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:c}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Yr});if(c)throw c;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(s){var n,r,o;try{await this._removeSession();let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await ci(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(r=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=s==null?void 0:s.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:E9})}catch(a){if(je(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:r}=s;if(r)throw r;if(!n)throw new Lo;const{error:o}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(s){if(je(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{s.type!="email_change"&&s.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in s){const{email:r,type:o,options:a}=s,{error:i}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in s){const{phone:r,type:o,options:a}=s,{data:i,error:c}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:c}}throw new wu("You must provide either an email or phone number and a type")}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await vu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const r=s.expires_at?s.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",s.expires_at),!r){if(this.storage.isServer){const i=this.suppressGetSessionWarning;s=new Proxy(s,{get(l,d,u){return!i&&d==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,d,u)}})}return{data:{session:s},error:null}}const{session:o,error:a}=await this._callRefreshToken(s.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:io}):await this._useSession(async n=>{var r,o,a;const{data:i,error:c}=n;if(c)throw c;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lo}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:io})})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Lo;const i=o.session;let c=null,l=null;this.flowType==="pkce"&&s.email!=null&&([c,l]=await ci(this.storage,this.storageKey));const{data:d,error:u}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:c,code_challenge_method:l}),jwt:i.access_token,xform:io});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}_decodeJWT(s){return Vj(s)}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Lo;const n=Date.now()/1e3;let r=n,o=!0,a=null;const i=Vj(s.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:c,error:l}=await this._callRefreshToken(s.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(s.access_token);if(l)throw l;a={access_token:s.access_token,refresh_token:s.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(je(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var r;if(!s){const{data:i,error:c}=n;if(c)throw c;s=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(s!=null&&s.refresh_token))throw new Lo;const{session:o,error:a}=await this._callRefreshToken(s.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s){try{if(!Zs())throw new Su("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Su("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!s)throw new Wj("Not a valid PKCE flow url.");const n=tg(window.location.href);if(s){if(!n.code)throw new Wj("No code detected.");const{data:f,error:y}=await this._exchangeCodeForSession(n.code);if(y)throw y;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:f.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Su(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:c,expires_at:l,token_type:d}=n;if(!a||!c||!i||!d)throw new Su("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let p=u+h;l&&(p=parseInt(l));const g=p-u;g*1e3<=sl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const _=p-h;u-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,u):u-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,p,u);const{data:x,error:j}=await this._getUser(a);if(j)throw j;const b={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(je(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const s=tg(window.location.href);return!!(Zs()&&(s.access_token||s.error_description))}async _isPKCEFlow(){const s=tg(window.location.href),n=await vu(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:c}=await this.admin.signOut(i,s);if(c&&!(I9(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return s!=="others"&&(await this._removeSession(),await sg(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(s){const n=m9(),r={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(s){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(s))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",s,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",a),console.error(a)}})}async resetPasswordForEmail(s,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await ci(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(je(a))return{data:null,error:a};throw a}}async getUserIdentities(){var s;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var i,c,l,d,u;const{data:h,error:p}=a;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(c=s.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(o)throw o;return Zs()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:s.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(je(r))return{data:{provider:s.provider,url:null},error:r};throw r}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)throw i;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await b9(async o=>(o>0&&await f9(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Yr})),(o,a)=>{const i=200*Math.pow(2,o);return a&&rg(a)&&Date.now()+i-r<sl})}catch(r){if(this._debug(n,"error",r),je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",r),Zs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:s,url:r},error:null}}async _recoverAndRefresh(){var s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await vu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),a=((s=r.expires_at)!==null&&s!==void 0?s:1/0)<o+Hj;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Hj}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),rg(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(s){var n,r;if(!s)throw new Lo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new em;const{data:a,error:i}=await this._refreshAccessToken(s);if(i)throw i;if(!a.session)throw new Lo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(o,"error",a),je(a)){const i={session:null,error:a};return rg(a)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(s,n,r=!0){const o=`#_notifyAllSubscribers(${s})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:s,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(s,n)}catch(l){a.push(l)}});if(await Promise.all(i),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await B0(this.storage,this.storageKey,s)}async _removeSession(){this._debug("#_removeSession()"),await sg(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Zs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),sl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-s)/sl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${sl}ms, refresh threshold is ${Jj} ticks`),o<=Jj&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof D0)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await ci(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${s}?${o.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:c,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:s.friendlyName,factor_type:s.factorType,issuer:s.issuer},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:i,error:c}=await Ce(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await Ce(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:r}=await this._challenge({factorId:s.factorId});return r?{data:null,error:r}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(s==null?void 0:s.factors)||[],o=r.filter(a=>a.factor_type==="totp"&&a.status==="verified");return{data:{all:r,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,r;const{data:{session:o},error:a}=s;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(o.access_token);let c=null;i.aal&&(c=i.aal);let l=c;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Nd.nextInstanceID=0;const z9=Nd;class H9 extends z9{constructor(s){super(s)}}var V9=function(t,s,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):o(u.value).then(c,l)}d((r=r.apply(t,s||[])).next())})};class W9{constructor(s,n,r){var o,a,i;if(this.supabaseUrl=s,this.supabaseKey=n,!s)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=c9(s);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:t9,realtime:n9,auth:Object.assign(Object.assign({},s9),{storageKey:l}),global:e9},u=l9(r??{},d);this.storageKey=(o=u.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=i9(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new Sz(`${c}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new uz(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Jz(this.storageUrl,this.headers,this.fetch)}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return V9(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:a,flowType:i,debug:c},l,d){var u;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H9({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:a,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,flowType:i,debug:c,fetch:d,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(s){return new Dz(this.realtimeUrl,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):s==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G9=(t,s,n)=>new W9(t,s,n),K9=(t,s)=>G9(t,s),Rr=new WeakMap,aa=new WeakMap,_r=new WeakMap;var Q9={};const sp=Symbol("anyProducer"),Xj=Promise.resolve(),np=Symbol("listenerAdded"),rp=Symbol("listenerRemoved");let op=!1,og=!1;const ap=t=>typeof t=="string"||typeof t=="symbol"||typeof t=="number";function di(t){if(!ap(t))throw new TypeError("`eventName` must be a string, symbol, or number")}function Cu(t){if(typeof t!="function")throw new TypeError("listener must be a function")}function ui(t,s){const n=aa.get(t);if(n.has(s))return n.get(s)}function od(t,s){const n=ap(s)?s:sp,r=_r.get(t);if(r.has(n))return r.get(n)}function Y9(t,s,n){const r=_r.get(t);if(r.has(s))for(const o of r.get(s))o.enqueue(n);if(r.has(sp)){const o=Promise.all([s,n]);for(const a of r.get(sp))a.enqueue(o)}}function ey(t,s){s=Array.isArray(s)?s:[s];let n=!1,r=()=>{},o=[];const a={enqueue(i){o.push(i),r()},finish(){n=!0,r()}};for(const i of s){let c=od(t,i);c||(c=new Set,_r.get(t).set(i,c)),c.add(a)}return{async next(){return o?o.length===0?n?(o=void 0,this.next()):(await new Promise(i=>{r=i}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(i){o=void 0;for(const c of s){const l=od(t,c);l&&(l.delete(a),l.size===0&&_r.get(t).delete(c))}return r(),arguments.length>0?{done:!0,value:await i}:{done:!0}},[Symbol.asyncIterator](){return this}}}function ty(t){if(t===void 0)return sy;if(!Array.isArray(t))throw new TypeError("`methodNames` must be an array of strings");for(const s of t)if(!sy.includes(s))throw typeof s!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${s} is not Emittery method`);return t}const Oi=t=>t===np||t===rp;function ku(t,s,n){if(Oi(s))try{op=!0,t.emit(s,n)}finally{op=!1}}class Aa{static mixin(s,n){return n=ty(n),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const i of n)if(r.prototype[i]!==void 0)throw new Error(`The property \`${i}\` already exists on \`target\``);function o(){return Object.defineProperty(this,s,{enumerable:!1,value:new Aa}),this[s]}Object.defineProperty(r.prototype,s,{enumerable:!1,get:o});const a=i=>function(...c){return this[s][i](...c)};for(const i of n)Object.defineProperty(r.prototype,i,{enumerable:!1,value:a(i)});return r}}static get isDebugEnabled(){if(typeof Q9!="object")return og;const{env:s}=globalThis.process??{env:{}};return s.DEBUG==="emittery"||s.DEBUG==="*"||og}static set isDebugEnabled(s){og=s}constructor(s={}){Rr.set(this,new Set),aa.set(this,new Map),_r.set(this,new Map),_r.get(this).set(sp,new Set),this.debug=s.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,r,o,a)=>{try{a=JSON.stringify(a)}catch{a=`Object with the following keys failed to stringify: ${Object.keys(a).join(",")}`}(typeof o=="symbol"||typeof o=="number")&&(o=o.toString());const i=new Date,c=`${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}`;console.log(`[${c}][emittery:${n}][${r}] Event Name: ${o}
	data: ${a}`)})}logIfDebugEnabled(s,n,r){(Aa.isDebugEnabled||this.debug.enabled)&&this.debug.logger(s,this.debug.name,n,r)}on(s,n,{signal:r}={}){Cu(n),s=Array.isArray(s)?s:[s];for(const a of s){di(a);let i=ui(this,a);i||(i=new Set,aa.get(this).set(a,i)),i.add(n),this.logIfDebugEnabled("subscribe",a,void 0),Oi(a)||ku(this,np,{eventName:a,listener:n})}const o=()=>{this.off(s,n),r==null||r.removeEventListener("abort",o)};return r==null||r.addEventListener("abort",o,{once:!0}),r!=null&&r.aborted&&o(),o}off(s,n){Cu(n),s=Array.isArray(s)?s:[s];for(const r of s){di(r);const o=ui(this,r);o&&(o.delete(n),o.size===0&&aa.get(this).delete(r)),this.logIfDebugEnabled("unsubscribe",r,void 0),Oi(r)||ku(this,rp,{eventName:r,listener:n})}}once(s){let n;const r=new Promise(o=>{n=this.on(s,a=>{n(),o(a)})});return r.off=n,r}events(s){s=Array.isArray(s)?s:[s];for(const n of s)di(n);return ey(this,s)}async emit(s,n){if(di(s),Oi(s)&&!op)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",s,n),Y9(this,s,n);const r=ui(this,s)??new Set,o=Rr.get(this),a=[...r],i=Oi(s)?[]:[...o];await Xj,await Promise.all([...a.map(async c=>{if(r.has(c))return c(n)}),...i.map(async c=>{if(o.has(c))return c(s,n)})])}async emitSerial(s,n){if(di(s),Oi(s)&&!op)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",s,n);const r=ui(this,s)??new Set,o=Rr.get(this),a=[...r],i=[...o];await Xj;for(const c of a)r.has(c)&&await c(n);for(const c of i)o.has(c)&&await c(s,n)}onAny(s,{signal:n}={}){Cu(s),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Rr.get(this).add(s),ku(this,np,{listener:s});const r=()=>{this.offAny(s),n==null||n.removeEventListener("abort",r)};return n==null||n.addEventListener("abort",r,{once:!0}),n!=null&&n.aborted&&r(),r}anyEvent(){return ey(this)}offAny(s){Cu(s),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),ku(this,rp,{listener:s}),Rr.get(this).delete(s)}clearListeners(s){s=Array.isArray(s)?s:[s];for(const n of s)if(this.logIfDebugEnabled("clear",n,void 0),ap(n)){const r=ui(this,n);r&&r.clear();const o=od(this,n);if(o){for(const a of o)a.finish();o.clear()}}else{Rr.get(this).clear();for(const[r,o]of aa.get(this).entries())o.clear(),aa.get(this).delete(r);for(const[r,o]of _r.get(this).entries()){for(const a of o)a.finish();o.clear(),_r.get(this).delete(r)}}}listenerCount(s){var r,o,a;s=Array.isArray(s)?s:[s];let n=0;for(const i of s){if(ap(i)){n+=Rr.get(this).size+(((r=ui(this,i))==null?void 0:r.size)??0)+(((o=od(this,i))==null?void 0:o.size)??0)+(((a=od(this))==null?void 0:a.size)??0);continue}i!==void 0&&di(i),n+=Rr.get(this).size;for(const c of aa.get(this).values())n+=c.size;for(const c of _r.get(this).values())n+=c.size}return n}bindMethods(s,n){if(typeof s!="object"||s===null)throw new TypeError("`target` must be an object");n=ty(n);for(const r of n){if(s[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(s,r,{enumerable:!1,value:this[r].bind(this)})}}}const sy=Object.getOwnPropertyNames(Aa.prototype).filter(t=>t!=="constructor");Object.defineProperty(Aa,"listenerAdded",{value:np,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Aa,"listenerRemoved",{value:rp,writable:!1,enumerable:!0,configurable:!1});function M0(t){return t!=null}function J9(t){return t==null||typeof t!="object"?!1:typeof t[Symbol.iterator]=="function"}function Z9(t){return s=>s[t]!==void 0&&s[t]!==null}function X9(t,s){return n=>n[t]===s}const e7=t=>typeof t=="object"&&t!==null&&"type"in t&&t.type==="error";new Aa;function t7(t){return t.map((s,n)=>{switch(s.role){case"assistant":{const{id:r,content:o,role:a,tool_calls:i}=s,c={id:r,content:o??"",role:a};if(jj(i)){c.tool_calls=i;const l=t[n+1];if(l&&l.role!=="tool")return}return c}case"tool":{const{id:r,content:o,role:a,tool_call_id:i}=s;if(!i)throw new Error("tool_call_id is required");return{id:r,content:o??"",role:a,tool_call_id:i}}case"user":{const{id:r,content:o,role:a,name:i}=s;return{id:r,content:o??"",role:a,...i?{name:i}:{}}}}}).filter(M0).filter((s,n,r)=>!(n===r.length-1&&s.role==="assistant"&&jj(s.tool_calls)&&s.content===null))}const lf=(t,s)=>{const n={...t??{},...s??{}};for(const r of Object.keys(n))n[r]=typeof(t==null?void 0:t[r])=="object"&&typeof(s==null?void 0:s[r])=="object"?lf(t[r],s[r]):structuredClone(n[r]);return n},ny="message",s7=({chatOptions:t,debug:s,persistChatHistory:n,maxHistorySize:r,projectKey:o,storeKey:a,apiUrl:i,headers:c})=>{if(!o)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to createChatStore.");if(r&&(!Number.isSafeInteger(r)||r<0))throw new Error("Markprompt: chatOptions.maxHistorySize must be a positive integer");return $6()(tz(q6((l,d)=>({apiUrl:i,headers:c,projectKey:o,messages:[],didAcceptDisclaimer:!1,threadIdsByProjectKey:{[o]:[]},messagesByThreadId:{},toolCallsByToolCallId:{},didAcceptDisclaimerByProjectKey:{},capMessagesByThreadId:()=>{l(u=>{if(!r||r<=0)return u;const h=Object.entries(u.messagesByThreadId).sort(([g,{lastUpdated:_}],[x,{lastUpdated:j}])=>new Date(j).getTime()-new Date(_).getTime()).slice(r).map(([g])=>g);for(const g of h)delete u.messagesByThreadId[g];const p=Object.keys(u.messagesByThreadId);u.threadIdsByProjectKey[o]=(u.threadIdsByProjectKey[o]||[]).filter(g=>p.includes(g)),oy(u,o,n?"localStorage":"sessionStorage")})},setThreadId:u=>{l(h=>{var p;(p=h.threadIdsByProjectKey)[o]??(p[o]=[]),h.threadId=u,J9(h.threadIdsByProjectKey[o])||(h.threadIdsByProjectKey[o]=[]),h.threadIdsByProjectKey[o]=[...new Set([...h.threadIdsByProjectKey[o],u])],h.messagesByThreadId[u]={lastUpdated:new Date().toISOString(),messages:h.messages},h.capMessagesByThreadId()})},selectThread:u=>{var h,p,g,_;u&&u===d().threadId||((p=(h=d()).abort)==null||p.call(h),l(x=>{var j;if(!u){x.threadId=void 0,x.messages=[];return}x.threadId=u,x.messages=((j=x.messagesByThreadId[u])==null?void 0:j.messages)??[]}),(_=(g=d().options)==null?void 0:g.liveChatOptions)!=null&&_.enabled&&d().setupLiveChat())},setMessages:u=>{l(h=>{h.messages=u;const p=h.threadId;p&&(h.messagesByThreadId[p]={lastUpdated:new Date().toISOString(),messages:u},h.capMessagesByThreadId())})},setMessageById:(u,h)=>{l(p=>{let g=p.messages.findIndex(j=>j.id===u);g=g===-1?p.messages.length:g;let _=p.messages[g]??{};_={..._,...h},p.messages[g]=_;const x=p.threadId;x&&(p.messagesByThreadId[x]={lastUpdated:new Date().toISOString(),messages:p.messages},oy(p,o,n?"localStorage":"sessionStorage"))})},setToolCallById(u,h){l(p=>{p.toolCallsByToolCallId[u]={...p.toolCallsByToolCallId[u],...h}})},submitChat:async(u,h)=>{var D,U,E,K,J,B,W,X,G;const p=d().realtimeChat;if(p&&u.some(V=>V.role==="user")){const V=u.find(Se=>Se.role==="user");if(V&&typeof V.content=="string"){p.sendMessage(V.content).catch(Se=>{console.error("Failed to send message via realtime chat:",Se)});return}}const g=Array.from({length:u.length},()=>self.crypto.randomUUID()),_=self.crypto.randomUUID();l(V=>{V.messages.push(...u.map((Se,Ie)=>({...Se,id:g[Ie],references:[],state:"indeterminate"})),{id:_,role:"assistant",state:"indeterminate"})}),(U=(D=d()).abort)==null||U.call(D);const x=(E=d().messages.findLast(V=>V.role==="user"&&V.state!=="done"&&V.state!=="cancelled"&&!g.includes(V.id)))==null?void 0:E.id;x&&d().setMessageById(x,{state:"cancelled"});const j=new AbortController,b=()=>{j.abort();for(const V of[...g,_])d().setMessageById(V,{state:"cancelled"})};l(V=>{V.abort=b});const f=t7(d().messages);for(const V of[...g,_])d().setMessageById(V,{state:"preload"});const y=(K=d().options)==null?void 0:K.user,v=((J=d().options)==null?void 0:J.useConversations)??!1,w=lf(lf(((B=d().options)==null?void 0:B.additionalMetadata)??{},h||{}),{internal:{...v?{storeAsConversation:v,assignToAi:!0}:{},...y?{user:y}:{}}}),S={apiUrl:d().apiUrl,headers:d().headers,threadId:d().threadId,signal:j.signal,debug:s,...d().options,tools:(X=(W=d().options)==null?void 0:W.tools)==null?void 0:X.map(V=>V.tool),additionalMetadata:w};try{for await(const V of N6(f,o,S))if(!j.signal.aborted){V.threadId&&d().setThreadId(V.threadId);for(const Se of g)d().setMessageById(Se,{state:"streaming-answer"});d().setMessageById(_,{state:"streaming-answer",...V})}}catch(V){if(console.error(V),b6(V))return;for(const Se of[...g,_])d().setMessageById(Se,{state:"cancelled"});d().setMessageById(_,{error:V instanceof Error?V:new Error(String(V))})}if(d().capMessagesByThreadId(),d().abort===b&&l(V=>{V.abort=void 0}),j.signal.aborted)return;for(const V of[...g,_]){const Se=d().messages.find(Ie=>Ie.id===V);Se&&Se.state!=="cancelled"&&d().setMessageById(V,{state:"done"})}const I=d().messages.find(V=>V.id===_);if(!((I==null?void 0:I.role)==="assistant"&&(I!=null&&I.tool_calls)))return;const N=(G=d().options)==null?void 0:G.tools;N&&I.tool_calls.every(V=>{var St;const Se=(St=V.function)==null?void 0:St.name,Ie=N.find(ps=>ps.tool.function.name===Se);return(Ie==null?void 0:Ie.requireConfirmation)===!1})&&await d().submitToolCalls(I)},async submitToolCalls(u){var g;if(!(u.role==="assistant"&&u.tool_calls))return;const h=(g=d().options)==null?void 0:g.tools;if(!h)return;const p=await Promise.allSettled(u.tool_calls.filter(m0).map(async _=>{var j;const x=h.find(b=>{var f;return b.tool.function.name===((f=_.function)==null?void 0:f.name)});if(!x)throw new Error("Tool not found");try{d().setToolCallById(_.id,{status:"loading"});const b=d().threadId;if(!b)throw new Error("No Thread ID");const f=await x.call(((j=_.function)==null?void 0:j.arguments)||"{}",{threadId:b});return d().setToolCallById(_.id,{result:f,status:"done"}),{result:f,tool_call:_,tool:x}}catch(b){d().setToolCallById(_.id,{status:"error",error:b instanceof Error?b.message:String(b)})}}));d().submitChat(p.filter(X9("status","fulfilled")).filter(Z9("value")).map(_=>{var x,j;return{role:"tool",name:(x=_.value)==null?void 0:x.tool.tool.function.name,tool_call_id:_.value.tool_call.id,content:(j=_.value)==null?void 0:j.result}}))},options:t??{},setOptions:u=>{var g;const h=(g=d().options)==null?void 0:g.liveChatOptions;l(_=>{_.options=u});const p=u.liveChatOptions;p!=null&&p.enabled?d().setupLiveChat():!(p!=null&&p.enabled)&&(h!=null&&h.enabled)&&d().closeLiveChat()},setDidAcceptDisclaimer:u=>{l(h=>{h.projectKey&&(h.didAcceptDisclaimerByProjectKey[h.projectKey]=u,h.didAcceptDisclaimer=u)})},regenerateLastAnswer:()=>{const u=[...d().messages],h=u.findLastIndex(g=>g.role==="user");if(h<0)return;const p=u[h];p.content&&(d().setMessages(u.slice(0,h)),d().submitChat([{role:"user",content:p.content}]))},setupLiveChat:async()=>{var p,g;d().closeLiveChat();const u=(p=d().options)==null?void 0:p.liveChatOptions,h=(g=d().options)==null?void 0:g.user;if(u!=null&&u.enabled&&h){const _=d().threadId??self.crypto.randomUUID();d().selectThread(_);const x=await fetch(`${d().apiUrl}/live-chat/sessions?projectKey=${d().projectKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:_})}).then(j=>j.json()).then(j=>j);try{const j=K9(x.connectionInfo.url,x.connectionInfo.anonKey),b=x.channelName,f=j.channel(b);let y=!1;const v="name"in h?{name:h.name,email:h.email,type:"customer"}:{encrypted:h.encrypted,type:"customer"},w=await Ij(x.key);f.on("broadcast",{event:ny},async N=>{const D=N.payload;if("name"in D.user&&"name"in h&&D.user.name===h.name||"encrypted"in D.user&&"encrypted"in h&&D.user.encrypted===h.encrypted)return;const{iv:U,ciphertext:E}=nz(D.content),K=await oz(E,w,U),J={id:D.id,role:"assistant",content:K,state:"done",references:[]};l(B=>{B.messages.push(J),B.threadId&&(B.messagesByThreadId[B.threadId]={lastUpdated:new Date().toISOString(),messages:B.messages})})}).on("broadcast",{event:"assign-to-ai"},N=>{if(N.payload.conversationId===d().threadId){d().closeLiveChat();const U=d().messages.at(-1);(U==null?void 0:U.role)==="user"&&(l(E=>{E.messages=E.messages.slice(0,-1)}),d().submitChat([U],{internal:{dontStoreUserMessage:!0}}))}}).subscribe(async N=>{var D,U;N==="SUBSCRIBED"?(y=!0,(U=(D=d()).liveChatConnectionCallback)==null||U.call(D,"connected"),await f.track(v)):await f.untrack(v)});const S={sendMessage:async N=>{if(!f||!y)return;const D=self.crypto.randomUUID(),U={id:D,role:"user",content:N,state:"done",references:[]};l(X=>(X.messages.push(U),X.threadId&&(X.messagesByThreadId[X.threadId]={lastUpdated:new Date().toISOString(),messages:X.messages}),X));const E=await Ij(x.key),{ciphertext:K,iv:J}=await rz(N,E),B=sz(K,J),W={id:D,content:B,user:v,createdAt:new Date().toISOString()};await f.send({type:"broadcast",event:ny,payload:W})},isConnected:!1,cleanup:()=>{j.removeChannel(f)}};Object.defineProperty(S,"isConnected",{get:()=>y}),l(N=>(N.realtimeChat=S,N));const I=setInterval(()=>{var D,U,E,K;const N=d().realtimeChat;N!=null&&N.isConnected?(U=(D=d()).liveChatConnectionCallback)==null||U.call(D,"connected"):(K=(E=d()).liveChatConnectionCallback)==null||K.call(E,"disconnected")},3e3);l(N=>(N.liveChatConnectionInterval=I,N))}catch(j){console.error("Failed to set up live chat:",j)}}},setLiveChatConnectionCallback:u=>{l(h=>(h.liveChatConnectionCallback=u,h))},closeLiveChat:()=>{const u=d().liveChatConnectionInterval;u&&(clearInterval(u),l(p=>(p.liveChatConnectionInterval=void 0,p)));const h=d().realtimeChat;h&&(h.cleanup(),l(p=>(p.realtimeChat=void 0,p)))},setHeaders:u=>{l(h=>(h.headers=u,h))}}),{name:a??"markprompt",version:1,storage:g0(()=>n?localStorage:sessionStorage,{reviver:(l,d)=>{if(d&&e7(d)){const u=new Error(d.message);return u.name=d.name,d.stack&&(u.stack=d.stack),d.cause&&(u.cause=d.cause),u}return d},replacer:(l,d)=>d instanceof Error?Object.fromEntries([["type","error"],["name",d.name],["message",d.message],["cause",d.cause]].filter(([,u])=>u!==void 0)):d}),partialize:l=>({threadIdsByProjectKey:l.threadIdsByProjectKey,messagesByThreadId:l.messagesByThreadId,toolCallsByToolCallId:l.toolCallsByToolCallId,didAcceptDisclaimerByProjectKey:l.didAcceptDisclaimerByProjectKey}),onRehydrateStorage:()=>l=>{var b,f,y;if(!l||typeof l!="object")return;(!((b=l.options)!=null&&b.disclaimerView)||o&&((f=l.didAcceptDisclaimerByProjectKey)!=null&&f[o]))&&l.setDidAcceptDisclaimer(!0),r&&r>0&&l.capMessagesByThreadId();const{threadIdsByProjectKey:d,messagesByThreadId:u}=l,h=(d==null?void 0:d[o])??[],p=new Date,g=new Date(p.getTime()-4*60*60*1e3),_=Object.entries(u).filter(([v])=>h.includes(v)).filter(([,{lastUpdated:v}])=>new Date(v)>g).sort(([,{lastUpdated:v}],[,{lastUpdated:w}])=>w.localeCompare(v));if(_.length===0||!M0(_[0]))return;const[x,{messages:j}]=_[0];l.setThreadId(x),l.setMessages(j.map(v=>({...v,state:v.state==="preload"||v.state==="streaming-answer"?"cancelled":v.state}))),(y=t==null?void 0:t.liveChatOptions)!=null&&y.enabled&&setTimeout(()=>{l.setupLiveChat()},0)}})))},U0=m.createContext(null);function Jr(t){const s=m.useContext(U0);if(!s)throw new Error("Missing ChatContext.Provider in the tree");return L6(s,t)}const ry=4e6;function oy(t,s,n){try{const r=n==="localStorage"?localStorage:sessionStorage;if(new Blob(Object.values(r)).size<ry)return;console.warn("Storage limit exceeded, purging old threads...");const a=Object.entries(t.messagesByThreadId).sort(([,i],[,c])=>new Date(i.lastUpdated).getTime()-new Date(c.lastUpdated).getTime());for(;new Blob(Object.values(r)).size>ry&&a.length!==0;){const[i]=a.shift();delete t.messagesByThreadId[i],t.threadIdsByProjectKey[s]=t.threadIdsByProjectKey[s].filter(c=>c!==i)}}catch(r){console.error("Error purging storage:",r)}}function n7(t){var d,u,h;const{chatOptions:s,children:n,debug:r,projectKey:o,storeKey:a,apiUrl:i,headers:c}=t,l=m.useRef({storeKey:void 0,store:null});return(!((d=l.current)!=null&&d.store)||((u=l.current)==null?void 0:u.storeKey)!==a)&&(l.current={storeKey:a,store:s7({apiUrl:i,headers:c,projectKey:o,chatOptions:s,debug:r,persistChatHistory:s==null?void 0:s.history,maxHistorySize:s==null?void 0:s.maxHistorySize,storeKey:a})}),m.useEffect(()=>{var p,g;s&&((g=(p=l.current)==null?void 0:p.store)==null||g.getState().setOptions(s))},[s]),e.jsx(U0.Provider,{value:(h=l.current)==null?void 0:h.store,children:n})}const ag={feedback:"Did this solve your issue?",yes:"Yes",no:"No"},r7="_root_10or9_1",o7="_actions_10or9_8",ay={root:r7,actions:o7},a7=({isLoading:t,onFeedbackSubmit:s})=>{const{trackUiInteraction:n}=k();return e.jsxs("div",{className:ay.root,children:[e.jsx(T,{size:"s",appearance:"secondary",children:ag.feedback}),e.jsxs("div",{className:ay.actions,children:[e.jsx(P,{appearance:"secondary",disabled:t,onClick:()=>{n("markprompt_get_help_feedback_positive_clicked"),s("positive")},children:ag.yes}),e.jsx(P,{appearance:"secondary",disabled:t,onClick:()=>{n("markprompt_get_help_feedback_negative_clicked"),s("negative")},children:ag.no})]})]})},kn={title:"Get help",promptPlaceholder:"I am having trouble with...",clear:"Clear",ask:"Ask",footerInfo:"Need more support?",createTicket:"Create a support ticket",feedbackResponse:"I'm glad to hear that the information helped resolve your issue! If you have any more questions or need further assistance, feel free to reach out.",feedbackNegative:"It did not help me",placeholder:t=>`${t?`Hi ${t}, `:""}I'm the Neon AI assistant. I'm designed to quickly answer your questions and guide you through any issues.
   If we need to dig deeper, I'll get you in touch with our support team.
    
  Can you provide me a little context on which area of Neon you are needing help with?`},i7="_content_1ifwn_1",c7="_prompt_1ifwn_8",l7="_promptActions_1ifwn_15",d7="_actions_1ifwn_22",Iu={content:i7,prompt:c7,promptActions:l7,actions:d7};function ua(){return ua=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ua.apply(this,arguments)}const u7=["children","options"],oe={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var iy;(function(t){t[t.MAX=0]="MAX",t[t.HIGH=1]="HIGH",t[t.MED=2]="MED",t[t.LOW=3]="LOW",t[t.MIN=4]="MIN"})(iy||(iy={}));const cy=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((t,s)=>(t[s.toLowerCase()]=s,t),{class:"className",for:"htmlFor"}),ly={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},h7=["style","script"],p7=["src","href","data","formAction","srcDoc","action"],m7=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,g7=/mailto:/i,_7=/\n{2,}$/,F0=/^(\s*>[\s\S]*?)(?=\n\n|$)/,f7=/^ *> ?/gm,b7=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,x7=/^ {2,}\n/,j7=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,q0=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,z0=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,y7=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,v7=/^(?:\n *)*\n/,w7=/\r\n?/g,S7=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,C7=/^\[\^([^\]]+)]/,k7=/\f/g,I7=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,P7=/^\s*?\[(x|\s)\]/,H0=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,V0=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,W0=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,df=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,T7=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,G0=/^<!--[\s\S]*?(?:-->)/,N7=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,uf=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,A7=/^\{.*\}$/,E7=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,$7=/^<([^ >]+@[^ >]+)>/,O7=/^<([^ >]+:\/[^ >]+)>/,R7=/-([a-z])?/gi,K0=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,B7=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,L7=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,D7=/^\[([^\]]*)\] ?\[([^\]]*)\]/,M7=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,U7=/\t/g,F7=/(^ *\||\| *$)/g,q7=/^ *:-+: *$/,z7=/^ *:-+ *$/,H7=/^ *-+: *$/,tm="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",V7=new RegExp(`^([*_])\\1${tm}\\1\\1(?!\\1)`),W7=new RegExp(`^([*_])${tm}\\1(?!\\1)`),G7=new RegExp(`^(==)${tm}\\1`),K7=new RegExp(`^(~~)${tm}\\1`),Q7=/^\\([^0-9A-Za-z\s])/,dy=/\\([^0-9A-Za-z\s])/g,Y7=/^([\s\S](?:(?!  |[0-9]\.)[^=*_~\-\n<`\\\[!])*)/,J7=/^\n+/,Z7=/^([ \t]*)/,X7=/\\([^\\])/g,e8=/(?:^|\n)( *)$/,Ub="(?:\\d+\\.)",Fb="(?:[*+-])";function Q0(t){return"( *)("+(t===1?Ub:Fb)+") +"}const Y0=Q0(1),J0=Q0(2);function Z0(t){return new RegExp("^"+(t===1?Y0:J0))}const t8=Z0(1),s8=Z0(2);function X0(t){return new RegExp("^"+(t===1?Y0:J0)+"[^\\n]*(?:\\n(?!\\1"+(t===1?Ub:Fb)+" )[^\\n]*)*(\\n|$)","gm")}const n8=X0(1),r8=X0(2);function ek(t){const s=t===1?Ub:Fb;return new RegExp("^( *)("+s+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+s+" (?!"+s+" ))\\n*|\\s*\\n*$)")}const tk=ek(1),sk=ek(2);function uy(t,s){const n=s===1,r=n?tk:sk,o=n?n8:r8,a=n?t8:s8;return{match:cc(function(i,c){const l=e8.exec(c.prevCapture);return l&&(c.list||!c.inline&&!c.simple)?r.exec(i=l[1]+i):null}),order:1,parse(i,c,l){const d=n?+i[2]:void 0,u=i[0].replace(_7,`
`).match(o);let h=!1;return{items:u.map(function(p,g){const _=a.exec(p)[0].length,x=new RegExp("^ {1,"+_+"}","gm"),j=p.replace(x,"").replace(a,""),b=g===u.length-1,f=j.indexOf(`

`)!==-1||b&&h;h=f;const y=l.inline,v=l.list;let w;l.list=!0,f?(l.inline=!1,w=Ad(j)+`

`):(l.inline=!0,w=Ad(j));const S=c(w,l);return l.inline=y,l.list=v,S}),ordered:n,start:d}},render:(i,c,l)=>t(i.ordered?"ol":"ul",{key:l.key,start:i.type===oe.orderedList?i.start:void 0},i.items.map(function(d,u){return t("li",{key:u},c(d,l))}))}}const o8=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),a8=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,nk=[F0,q0,z0,H0,W0,V0,K0,tk,sk],i8=[...nk,/^[^\n]+(?:  \n|\n{2,})/,df,G0,uf];function Ad(t){let s=t.length;for(;s>0&&t[s-1]<=" ";)s--;return t.slice(0,s)}function nl(t){return t.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function c8(t){return H7.test(t)?"right":q7.test(t)?"center":z7.test(t)?"left":null}function hy(t,s,n,r){const o=n.inTable;n.inTable=!0;let a=[[]],i="";function c(){if(!i)return;const l=a[a.length-1];l.push.apply(l,s(i,n)),i=""}return t.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((l,d,u)=>{l.trim()==="|"&&(c(),r)?d!==0&&d!==u.length-1&&a.push([]):i+=l}),c(),n.inTable=o,a}function l8(t,s,n){n.inline=!0;const r=t[2]?t[2].replace(F7,"").split("|").map(c8):[],o=t[3]?function(i,c,l){return i.trim().split(`
`).map(function(d){return hy(d,c,l,!0)})}(t[3],s,n):[],a=hy(t[1],s,n,!!o.length);return n.inline=!1,o.length?{align:r,cells:o,header:a,type:oe.table}:{children:a,type:oe.paragraph}}function py(t,s){return t.align[s]==null?{}:{textAlign:t.align[s]}}function cc(t){return t.inline=1,t}function Br(t){return cc(function(s,n){return n.inline?t.exec(s):null})}function Lr(t){return cc(function(s,n){return n.inline||n.simple?t.exec(s):null})}function Xn(t){return function(s,n){return n.inline||n.simple?null:t.exec(s)}}function rl(t){return cc(function(s){return t.exec(s)})}function d8(t,s){if(s.inline||s.simple)return null;let n="";t.split(`
`).every(o=>(o+=`
`,!nk.some(a=>a.test(o))&&(n+=o,!!o.trim())));const r=Ad(n);return r==""?null:[n,,r]}const u8=/(javascript|vbscript|data(?!:image)):/i;function h8(t){try{const s=decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"");if(u8.test(s))return null}catch{return null}return t}function my(t){return t.replace(X7,"$1")}function Bh(t,s,n){const r=n.inline||!1,o=n.simple||!1;n.inline=!0,n.simple=!0;const a=t(s,n);return n.inline=r,n.simple=o,a}function p8(t,s,n){const r=n.inline||!1,o=n.simple||!1;n.inline=!1,n.simple=!0;const a=t(s,n);return n.inline=r,n.simple=o,a}function m8(t,s,n){const r=n.inline||!1;n.inline=!1;const o=t(s,n);return n.inline=r,o}const ig=(t,s,n)=>({children:Bh(s,t[2],n)});function cg(){return{}}function lg(){return null}function g8(...t){return t.filter(Boolean).join(" ")}function dg(t,s,n){let r=t;const o=s.split(".");for(;o.length&&(r=r[o[0]],r!==void 0);)o.shift();return r||n}function _8(t="",s={}){function n(p,g,..._){const x=dg(s.overrides,`${p}.props`,{});return s.createElement(function(j,b){const f=dg(b,j);return f?typeof f=="function"||typeof f=="object"&&"render"in f?f:dg(b,`${j}.component`,j):j}(p,s.overrides),ua({},g,x,{className:g8(g==null?void 0:g.className,x.className)||void 0}),..._)}function r(p){p=p.replace(I7,"");let g=!1;s.forceInline?g=!0:s.forceBlock||(g=M7.test(p)===!1);const _=d(l(g?p:`${Ad(p).replace(J7,"")}

`,{inline:g}));for(;typeof _[_.length-1]=="string"&&!_[_.length-1].trim();)_.pop();if(s.wrapper===null)return _;const x=s.wrapper||(g?"span":"div");let j;if(_.length>1||s.forceWrapper)j=_;else{if(_.length===1)return j=_[0],typeof j=="string"?n("span",{key:"outer"},j):j;j=null}return s.createElement(x,{key:"outer"},j)}function o(p,g){const _=g.match(m7);return _?_.reduce(function(x,j){const b=j.indexOf("=");if(b!==-1){const f=function(S){return S.indexOf("-")!==-1&&S.match(N7)===null&&(S=S.replace(R7,function(I,N){return N.toUpperCase()})),S}(j.slice(0,b)).trim(),y=function(S){const I=S[0];return(I==='"'||I==="'")&&S.length>=2&&S[S.length-1]===I?S.slice(1,-1):S}(j.slice(b+1).trim()),v=cy[f]||f;if(v==="ref")return x;const w=x[v]=function(S,I,N,D){return I==="style"?function(U){const E=[];let K="",J=!1,B=!1,W="";if(!U)return E;for(let G=0;G<U.length;G++){const V=U[G];if(V!=='"'&&V!=="'"||J||(B?V===W&&(B=!1,W=""):(B=!0,W=V)),V==="("&&K.endsWith("url")?J=!0:V===")"&&J&&(J=!1),V!==";"||B||J)K+=V;else{const Se=K.trim();if(Se){const Ie=Se.indexOf(":");if(Ie>0){const St=Se.slice(0,Ie).trim(),ps=Se.slice(Ie+1).trim();E.push([St,ps])}}K=""}}const X=K.trim();if(X){const G=X.indexOf(":");if(G>0){const V=X.slice(0,G).trim(),Se=X.slice(G+1).trim();E.push([V,Se])}}return E}(N).reduce(function(U,[E,K]){return U[E.replace(/(-[a-z])/g,J=>J[1].toUpperCase())]=D(K,S,E),U},{}):p7.indexOf(I)!==-1?D(N,S,I):(N.match(A7)&&(N=N.slice(1,N.length-1)),N==="true"||N!=="false"&&N)}(p,f,y,s.sanitizer);typeof w=="string"&&(df.test(w)||uf.test(w))&&(x[v]=r(w.trim()))}else j!=="style"&&(x[cy[j]||j]=!0);return x},{}):null}s.overrides=s.overrides||{},s.sanitizer=s.sanitizer||h8,s.slugify=s.slugify||nl,s.namedCodesToUnicode=s.namedCodesToUnicode?ua({},ly,s.namedCodesToUnicode):ly,s.createElement=s.createElement||m.createElement;const a=[],i={},c={[oe.blockQuote]:{match:Xn(F0),order:1,parse(p,g,_){const[,x,j]=p[0].replace(f7,"").match(b7);return{alert:x,children:g(j,_)}},render(p,g,_){const x={key:_.key};return p.alert&&(x.className="markdown-alert-"+s.slugify(p.alert.toLowerCase(),nl),p.children.unshift({attrs:{},children:[{type:oe.text,text:p.alert}],noInnerParse:!0,type:oe.htmlBlock,tag:"header"})),n("blockquote",x,g(p.children,_))}},[oe.breakLine]:{match:rl(x7),order:1,parse:cg,render:(p,g,_)=>n("br",{key:_.key})},[oe.breakThematic]:{match:Xn(j7),order:1,parse:cg,render:(p,g,_)=>n("hr",{key:_.key})},[oe.codeBlock]:{match:Xn(z0),order:0,parse:p=>({lang:void 0,text:Ad(p[0].replace(/^ {4}/gm,"")).replace(dy,"$1")}),render:(p,g,_)=>n("pre",{key:_.key},n("code",ua({},p.attrs,{className:p.lang?`lang-${p.lang}`:""}),p.text))},[oe.codeFenced]:{match:Xn(q0),order:0,parse:p=>({attrs:o("code",p[3]||""),lang:p[2]||void 0,text:p[4],type:oe.codeBlock})},[oe.codeInline]:{match:Lr(y7),order:3,parse:p=>({text:p[2].replace(dy,"$1")}),render:(p,g,_)=>n("code",{key:_.key},p.text)},[oe.footnote]:{match:Xn(S7),order:0,parse:p=>(a.push({footnote:p[2],identifier:p[1]}),{}),render:lg},[oe.footnoteReference]:{match:Br(C7),order:1,parse:p=>({target:`#${s.slugify(p[1],nl)}`,text:p[1]}),render:(p,g,_)=>n("a",{key:_.key,href:s.sanitizer(p.target,"a","href")},n("sup",{key:_.key},p.text))},[oe.gfmTask]:{match:Br(P7),order:1,parse:p=>({completed:p[1].toLowerCase()==="x"}),render:(p,g,_)=>n("input",{checked:p.completed,key:_.key,readOnly:!0,type:"checkbox"})},[oe.heading]:{match:Xn(s.enforceAtxHeadings?V0:H0),order:1,parse:(p,g,_)=>({children:Bh(g,p[2],_),id:s.slugify(p[2],nl),level:p[1].length}),render:(p,g,_)=>n(`h${p.level}`,{id:p.id,key:_.key},g(p.children,_))},[oe.headingSetext]:{match:Xn(W0),order:0,parse:(p,g,_)=>({children:Bh(g,p[1],_),level:p[2]==="="?1:2,type:oe.heading})},[oe.htmlBlock]:{match:rl(df),order:1,parse(p,g,_){const[,x]=p[3].match(Z7),j=new RegExp(`^${x}`,"gm"),b=p[3].replace(j,""),f=(y=b,i8.some(N=>N.test(y))?m8:Bh);var y;const v=p[1].toLowerCase(),w=h7.indexOf(v)!==-1,S=(w?v:p[1]).trim(),I={attrs:o(S,p[2]),noInnerParse:w,tag:S};return _.inAnchor=_.inAnchor||v==="a",w?I.text=p[3]:I.children=f(g,b,_),_.inAnchor=!1,I},render:(p,g,_)=>n(p.tag,ua({key:_.key},p.attrs),p.text||(p.children?g(p.children,_):""))},[oe.htmlSelfClosing]:{match:rl(uf),order:1,parse(p){const g=p[1].trim();return{attrs:o(g,p[2]||""),tag:g}},render:(p,g,_)=>n(p.tag,ua({},p.attrs,{key:_.key}))},[oe.htmlComment]:{match:rl(G0),order:1,parse:()=>({}),render:lg},[oe.image]:{match:Lr(a8),order:1,parse:p=>({alt:p[1],target:my(p[2]),title:p[3]}),render:(p,g,_)=>n("img",{key:_.key,alt:p.alt||void 0,title:p.title||void 0,src:s.sanitizer(p.target,"img","src")})},[oe.link]:{match:Br(o8),order:3,parse:(p,g,_)=>({children:p8(g,p[1],_),target:my(p[2]),title:p[3]}),render:(p,g,_)=>n("a",{key:_.key,href:s.sanitizer(p.target,"a","href"),title:p.title},g(p.children,_))},[oe.linkAngleBraceStyleDetector]:{match:Br(O7),order:0,parse:p=>({children:[{text:p[1],type:oe.text}],target:p[1],type:oe.link})},[oe.linkBareUrlDetector]:{match:cc((p,g)=>g.inAnchor||s.disableAutoLink?null:Br(E7)(p,g)),order:0,parse:p=>({children:[{text:p[1],type:oe.text}],target:p[1],title:void 0,type:oe.link})},[oe.linkMailtoDetector]:{match:Br($7),order:0,parse(p){let g=p[1],_=p[1];return g7.test(_)||(_="mailto:"+_),{children:[{text:g.replace("mailto:",""),type:oe.text}],target:_,type:oe.link}}},[oe.orderedList]:uy(n,1),[oe.unorderedList]:uy(n,2),[oe.newlineCoalescer]:{match:Xn(v7),order:3,parse:cg,render:()=>`
`},[oe.paragraph]:{match:cc(d8),order:3,parse:ig,render:(p,g,_)=>n("p",{key:_.key},g(p.children,_))},[oe.ref]:{match:Br(B7),order:0,parse:p=>(i[p[1]]={target:p[2],title:p[4]},{}),render:lg},[oe.refImage]:{match:Lr(L7),order:0,parse:p=>({alt:p[1]||void 0,ref:p[2]}),render:(p,g,_)=>i[p.ref]?n("img",{key:_.key,alt:p.alt,src:s.sanitizer(i[p.ref].target,"img","src"),title:i[p.ref].title}):null},[oe.refLink]:{match:Br(D7),order:0,parse:(p,g,_)=>({children:g(p[1],_),fallbackChildren:p[0],ref:p[2]}),render:(p,g,_)=>i[p.ref]?n("a",{key:_.key,href:s.sanitizer(i[p.ref].target,"a","href"),title:i[p.ref].title},g(p.children,_)):n("span",{key:_.key},p.fallbackChildren)},[oe.table]:{match:Xn(K0),order:1,parse:l8,render(p,g,_){const x=p;return n("table",{key:_.key},n("thead",null,n("tr",null,x.header.map(function(j,b){return n("th",{key:b,style:py(x,b)},g(j,_))}))),n("tbody",null,x.cells.map(function(j,b){return n("tr",{key:b},j.map(function(f,y){return n("td",{key:y,style:py(x,y)},g(f,_))}))})))}},[oe.text]:{match:rl(Y7),order:4,parse:p=>({text:p[0].replace(T7,(g,_)=>s.namedCodesToUnicode[_]?s.namedCodesToUnicode[_]:g)}),render:p=>p.text},[oe.textBolded]:{match:Lr(V7),order:2,parse:(p,g,_)=>({children:g(p[2],_)}),render:(p,g,_)=>n("strong",{key:_.key},g(p.children,_))},[oe.textEmphasized]:{match:Lr(W7),order:3,parse:(p,g,_)=>({children:g(p[2],_)}),render:(p,g,_)=>n("em",{key:_.key},g(p.children,_))},[oe.textEscaped]:{match:Lr(Q7),order:1,parse:p=>({text:p[1],type:oe.text})},[oe.textMarked]:{match:Lr(G7),order:3,parse:ig,render:(p,g,_)=>n("mark",{key:_.key},g(p.children,_))},[oe.textStrikethroughed]:{match:Lr(K7),order:3,parse:ig,render:(p,g,_)=>n("del",{key:_.key},g(p.children,_))}};s.disableParsingRawHTML===!0&&(delete c[oe.htmlBlock],delete c[oe.htmlSelfClosing]);const l=function(p){let g=Object.keys(p);function _(x,j){let b,f,y=[],v="",w="";for(j.prevCapture=j.prevCapture||"";x;){let S=0;for(;S<g.length;){if(v=g[S],b=p[v],j.inline&&!b.match.inline){S++;continue}const I=b.match(x,j);if(I){w=I[0],j.prevCapture+=w,x=x.substring(w.length),f=b.parse(I,_,j),f.type==null&&(f.type=v),y.push(f);break}S++}}return j.prevCapture="",y}return g.sort(function(x,j){let b=p[x].order,f=p[j].order;return b!==f?b-f:x<j?-1:1}),function(x,j){return _(function(b){return b.replace(w7,`
`).replace(k7,"").replace(U7,"    ")}(x),j)}}(c),d=(u=function(p,g){return function(_,x,j){const b=p[_.type].render;return g?g(()=>b(_,x,j),_,x,j):b(_,x,j)}}(c,s.renderRule),function p(g,_={}){if(Array.isArray(g)){const x=_.key,j=[];let b=!1;for(let f=0;f<g.length;f++){_.key=f;const y=p(g[f],_),v=typeof y=="string";v&&b?j[j.length-1]+=y:y!==null&&j.push(y),b=v}return _.key=x,j}return u(g,p,_)});var u;const h=r(t);return a.length?n("div",null,h,n("footer",{key:"footer"},a.map(function(p){return n("div",{id:s.slugify(p.identifier,nl),key:p.identifier},p.identifier,d(l(p.footnote,{inline:!0})))}))):h}const f8=t=>{let{children:s="",options:n}=t,r=function(o,a){if(o==null)return{};var i,c,l={},d=Object.keys(o);for(c=0;c<d.length;c++)a.indexOf(i=d[c])>=0||(l[i]=o[i]);return l}(t,u7);return m.cloneElement(_8(s,n),r)},b8={LRNotice:"We have temporarily paused new enrollments in our Logical Replication Beta program. This pause is aimed at evaluating the feature's performance and incorporating feedback from our early adopters. Please stay tuned for updates, and thank you for your interest. We plan to reopen enrollment again soon."},x8="_root_7v7ia_1",j8="_title_7v7ia_19",y8="_subTitle_7v7ia_23",v8="_text_7v7ia_27",w8="_codeBlock_7v7ia_31",S8="_alert_7v7ia_35",C8="_img_7v7ia_39",k8="_tabs_7v7ia_43",es={root:x8,title:j8,subTitle:y8,text:v8,codeBlock:w8,alert:S8,img:C8,tabs:k8},Dr={component:()=>null},ug={bash:"text",sql:"sql",javascript:"javascript",ts:"javascript",toml:"toml",yaml:"yaml",text:"text",json:"json",graphql:"javascript",undefined:"text"},I8=t=>{var a;const s=JSON.parse((t==null?void 0:t.labels)||"[]").map((i,c)=>({label:i,value:c})),[n,r]=m.useState(0),o=i=>{r(i)};return s.length?e.jsxs(e.Fragment,{children:[e.jsx(pn,{options:s,value:n,onChange:o,className:es.tabs}),(a=t.children)==null?void 0:a.filter(i=>typeof i!="string").map((i,c)=>c!==n?null:i)]}):null},P8={h1:{component:z,props:{level:1,className:es.title}},h2:{component:z,props:{level:2,className:es.title}},h3:{component:z,props:{level:3,className:es.subTitle}},h4:{component:z,props:{level:4,className:es.subTitle}},h5:{component:z,props:{level:5,className:es.subTitle}},h6:{component:z,props:{level:6,className:es.subTitle}},p:{component:T,props:{className:es.text}},pre:{component:t=>{var r,o;const s=(r=t.children.props.className)==null?void 0:r.match(/lang-([a-z]*)\b/gm),n=(o=s==null?void 0:s.at(0))==null?void 0:o.replace("lang-","");return e.jsx(Tr,{className:es.codeBlock,mode:ug[n]||"text",children:t.children.props.children})}},code:{component:t=>{const s=t.children.split(`
`),n=s[0];return Object.keys(ug).includes(n)?(s.shift(),e.jsx(Tr,{className:es.codeBlock,mode:ug[n]||"text",children:s.join(`
`)})):e.jsx(ke,{children:t.children})}},video:{component:()=>null},a:{component:t=>{if(t.href.startsWith("#"))return t.children;const n=t.href.startsWith("/")?`${Wh}${t.href.slice(1)}`:t.href;return e.jsx(A,{openInNewTab:!0,href:n,children:t.children})}},img:{component:t=>{const s=`${Wh}${t.src.slice(1)}`;return e.jsx("img",{src:s,alt:t.alt,width:"100%",className:es.img})}},Admonition:{component:Q,props:{className:es.alert}},DetailIconCards:{component:({children:t})=>e.jsx("ul",{children:t.map(s=>e.jsx("li",{children:s},s.key))})},Tabs:{component:I8},TabItem:{component:({children:t})=>t},LRNotice:{component:Q,props:{className:es.alert,appearance:"warning",children:b8.LRNotice}},NeedHelp:Dr,YoutubeIframe:Dr,DefinitionList:Dr,CodeTabs:Dr,TechnologyNavigation:Dr,CommunityBanner:Dr,CTA:Dr,SignUp:Dr},rk=({md:t})=>e.jsx("div",{className:es.root,children:e.jsx(f8,{options:{overrides:P8},children:t})}),T8={error:"Sorry...something went wrong on our side and we can't respond at the moment."},N8="_root_1ee3v_1",A8={root:N8},ok=({isLastMessage:t})=>{const{trackUiInteraction:s}=k(),n=Jr(r=>r.regenerateLastAnswer);return e.jsxs("div",{className:A8.root,children:[e.jsx(T,{children:T8.error}),t&&e.jsx(kr,{iconName:"reset",iconSize:16,onClick:()=>{s("markprompt_get_help_regenerate_response_clicked"),n()}})]})},E8="_root_jmkys_1",$8="_content_jmkys_11",O8="_loadingDots_jmkys_19",R8="_dot_jmkys_27",Di={root:E8,content:$8,loadingDots:O8,dot:R8},B8=({state:t,isLastMessage:s})=>{switch(t){case"indeterminate":case"preload":return e.jsxs("div",{className:Di.loadingDots,children:[e.jsx("span",{className:Di.dot}),e.jsx("span",{className:Di.dot}),e.jsx("span",{className:Di.dot})]});case"cancelled":return e.jsx(ok,{isLastMessage:s});default:return null}},ad=({role:t,content:s,state:n,userImage:r,userFirstName:o,children:a,isLastMessage:i})=>{const c=t==="user";return e.jsxs("div",{className:Di.root,children:[e.jsx(Hd,{size:"m",image:c?r:e.jsx(L,{name:"neon",size:14}),name:c?o:void 0,isRounded:!0}),e.jsxs("div",{className:Di.content,children:[t==="assistant"&&e.jsx(B8,{state:n,isLastMessage:i}),s&&e.jsx(rk,{md:s.toString()}),a]})]})},Mi={title:{project:"What project are you referring to?",branch:"What branch are you referring to?"},orgLabel:"Select organization",projectLabel:"Select project",branchLabel:"Select branch",createTicketDescription:"You can contact support by opening a support ticket. Describe your issue in detail, select the appropriate severity level, and submit the ticket.",createTicketButton:"Create a support ticket"},L8="_root_29frr_1",D8="_selectTool_29frr_5",M8="_selectItem_29frr_11",U8="_createTicketTool_29frr_17",Ui={root:L8,selectTool:D8,selectItem:M8,createTicketTool:U8};var Sa=(t=>(t.AskForProject="askForProject",t.AskForBranch="askForBranch",t.CreateTicket="createTicket",t))(Sa||{});const gy=({saveContext:t,onToolSubmit:s,isDisabled:n,type:r})=>{const[o,a]=m.useState(),[i,c]=m.useState(),[l,d]=m.useState(),{data:u}=Nr(),{data:h}=rt(),p=Ar(h),{data:g}=wN(o==="personal_account"?void 0:o),_=m.useMemo(()=>{const w=(u==null?void 0:u.map(S=>({value:S.id,label:S.name})))??[];return p||w.push({value:"personal_account",label:"Personal account"}),w},[u,p]),x=(g==null?void 0:g.map(w=>({value:w.id,label:w.name})))??[],{branchOptions:j}=zf(i),b=({accountId:w,projectId:S,branchId:I})=>{const N=_.find(E=>E.value===w),D=x.find(E=>E.value===S),U=j.find(E=>E.value===I);t==null||t({account:N,project:D,branch:U})},f=w=>{w&&(a(String(w)),c(void 0),d(void 0))},y=w=>{w&&(c(String(w)),d(void 0),r==="project"&&(b({accountId:o,projectId:w}),s==null||s()))},v=w=>{w&&(d(String(w)),r==="branch"&&(b({accountId:o,projectId:i,branchId:w}),s==null||s()))};return m.useEffect(()=>{(_==null?void 0:_.length)===1&&a(_[0].value)},[_]),e.jsxs("div",{className:Ui.selectTool,children:[e.jsx(T,{children:Mi.title[r]}),(_==null?void 0:_.length)>1&&e.jsxs("div",{className:Ui.selectItem,children:[e.jsx(T,{children:Mi.orgLabel}),e.jsx(He,{value:o,options:_,onChange:f,disabled:n})]}),e.jsxs("div",{className:Ui.selectItem,children:[e.jsx(T,{children:Mi.projectLabel}),e.jsx(He,{"aria-label":"Select project",value:i,options:x,onChange:y,disabled:n||!o})]}),r==="branch"&&e.jsxs("div",{className:Ui.selectItem,children:[e.jsx(T,{children:Mi.branchLabel}),e.jsx(He,{"aria-label":"Select branch",value:l,options:j,onChange:v,disabled:n||!i})]})]})},F8=({openSupport:t,isDisabled:s,confirmationText:n})=>e.jsxs("div",{className:Ui.createTicketTool,children:[e.jsx(T,{children:n??Mi.createTicketDescription}),e.jsx(P,{appearance:"secondary",onClick:t,disabled:s,children:Mi.createTicketButton})]}),q8=t=>{var s;return t&&((s=JSON.parse(t))==null?void 0:s.confirmationText)},ak=({toolCalls:t,saveContext:s,onToolSubmit:n,openSupport:r,isLastMessage:o})=>t?t.map(({id:a,function:i})=>e.jsx("div",{className:Ui.root,children:(()=>{switch(i.name){case Sa.AskForProject:return e.jsx(gy,{type:"project",saveContext:s,onToolSubmit:n,isDisabled:!o});case Sa.AskForBranch:return e.jsx(gy,{type:"branch",saveContext:s,onToolSubmit:n,isDisabled:!o});case Sa.CreateTicket:return e.jsx(F8,{openSupport:r,isDisabled:!o,confirmationText:q8(i.arguments)});default:return e.jsx(ok,{isLastMessage:o})}})()},a)):null,z8=t=>({id:"markprompt-assistant-placeholder-message-id",role:"assistant",content:kn.placeholder(t==null?void 0:t.firstName),state:"done"}),ik=t=>({id:`markprompt-assistant-resolved-message-${t}`,role:"assistant",content:kn.feedbackResponse,state:"done"}),H8=({userData:t,threadId:s,threadMessages:n,isResolved:r})=>e.jsxs(e.Fragment,{children:[n.map(o=>o.role!=="tool"&&e.jsx(ad,{...o,userFirstName:t==null?void 0:t.firstName,userImage:t==null?void 0:t.image,children:o.role==="assistant"&&e.jsx(ak,{toolCalls:o.tool_calls})},o.id)),r&&e.jsx(ad,{...ik(s)})]}),V8=({isOpen:t,onRequestClose:s,openSupport:n,saveContext:r,clearContext:o})=>{const a=ee("markprompt_hide_create_ticket"),{trackUiInteraction:i}=k(),c=m.useRef(null),{data:l}=rt(),[d,u]=m.useState(""),[h,p]=m.useState(!1),[g,_]=xs(Me.MarkpromptFeedbackState,"resolvedByThreadId",{}),x=Jr(B=>B.messages),j=Jr(B=>B.messagesByThreadId),b=Jr(B=>B.submitChat),f=Jr(B=>B.submitToolCalls),y=Jr(B=>B.projectKey),{submitFeedback:v}=f6({projectKey:y}),w=Jr(B=>B.selectThread),S=Jr(B=>B.threadId),I=m.useRef(!!(S&&g[S])),N=()=>u(""),D=()=>{i("markprompt_get_help_ask_clicked"),I.current&&(w(void 0),I.current=!1),b([{role:"user",content:d.trim()}]),N()},U=B=>()=>{setTimeout(()=>f(B))},E=B=>{B.key==="Enter"&&(B.ctrlKey||B.metaKey)&&D()},K=B=>async W=>{try{switch(p(!0),W){case"positive":await v({vote:"1"},B),S&&_(X=>({...X,[S]:!0})),o(),I.current=!0;break;case"negative":await v({vote:"-1"},B),b([{role:"user",content:kn.feedbackNegative}]);break}}catch(X){const G=cs(X);tt(G)}finally{p(!1)}},J=m.useCallback(()=>{c.current&&c.current.scrollIntoView({behavior:"instant"})},[]);return m.useEffect(()=>{t&&(i("markprompt_get_help_opened"),J())},[t,J,i]),m.useEffect(()=>{x.length&&J()},[x,J]),e.jsxs(Vn,{zIndex:2,isOpen:t,"aria-label":kn.title,onRequestClose:()=>{i("markprompt_get_help_closed"),s()},size:"l",children:[e.jsxs(Wn,{title:kn.title,children:[e.jsxs("div",{className:Iu.content,children:[e.jsx(ad,{...z8(l)}),Object.entries(j).filter(([B])=>B!==S).sort(([,B],[,W])=>_t(B.lastUpdated).unix()-_t(W.lastUpdated).unix()).map(([B,{messages:W}])=>e.jsx(H8,{threadId:B,threadMessages:W,isResolved:!!g[B],userData:l},B)),x.map((B,W)=>B.role!=="tool"&&e.jsxs(ad,{...B,userFirstName:l==null?void 0:l.firstName,userImage:l==null?void 0:l.image,isLastMessage:x.length-1===W,children:[B.role==="assistant"&&B.state==="done"&&e.jsx(ak,{toolCalls:B.tool_calls,onToolSubmit:U(B),saveContext:r,openSupport:()=>{i("markprompt_get_help_create_ticket_clicked"),n(S)},isLastMessage:x.length-1===W}),B.role==="assistant"&&x.length-1===W&&B.state==="done"&&!B.tool_calls&&B.messageId&&S&&!g[S]&&e.jsx(a7,{isLoading:h,onFeedbackSubmit:K(B.messageId)})]},B.id)),S&&g[S]&&e.jsx(ad,{...ik(S)})]}),e.jsx("div",{ref:c,style:{height:1}})]}),e.jsx(E_,{children:e.jsxs("div",{className:Iu.prompt,children:[e.jsx(La,{value:d,onChange:B=>u(B.target.value),onKeyDown:E,placeholder:kn.promptPlaceholder,rows:5,autoFocus:!0}),e.jsxs("div",{className:Iu.promptActions,children:[!!d.length&&e.jsx(P,{appearance:"clear",onClick:()=>{i("markprompt_get_help_clear_clicked"),N()},children:kn.clear}),e.jsx(P,{onClick:D,disabled:!d.length,children:kn.ask})]})]})}),!a&&e.jsx(E_,{children:e.jsxs("div",{className:Iu.actions,children:[e.jsx(T,{appearance:"tertiary",size:"s",children:kn.footerInfo}),e.jsx(P,{appearance:"secondary",onClick:()=>{i("resources_menu_support_clicked"),n(S)},children:kn.createTicket})]})})]})},W8=({isOpen:t,onRequestClose:s})=>{var f,y,v,w,S,I,N,D,U;const{trackUiInteraction:n}=k(),r=Gw(),{isModalOpen:o,openModal:a,closeModal:i}=Ve(De.Support),{data:c}=rt(),{data:l}=g1(),d=l==null?void 0:l.subscription_type,u=d&&Xi[d],[h,p]=m.useState(),[g,_]=m.useState(),x=m.useCallback(()=>{p(void 0)},[]),j=m.useCallback(E=>{_(E),a()},[a]),b=m.useCallback(async(E,K)=>{var J;try{await fetch(`https://api.markprompt.com/threads/${E}`,{method:"POST",headers:{"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21"},body:JSON.stringify({projectKey:((J=r==null?void 0:r.markprompt)==null?void 0:J.projectKey)||"local",metadata:{caseNumber:K},strategy:"merge"})})}catch(B){tt(cs(B))}},[(f=r==null?void 0:r.markprompt)==null?void 0:f.projectKey]);return e.jsxs(e.Fragment,{children:[e.jsx(So,{isOpen:o,onRequestClose:()=>{n("support_form_dismissed"),i(),_(void 0)},defaultValues:{accountIdOption:h==null?void 0:h.account,projectIdOption:h==null?void 0:h.project,branchIdOption:h==null?void 0:h.branch,markpromptThreadId:g},onSuccess:m.useCallback(E=>{g&&b(g,E)},[g,b])}),e.jsx(n7,{projectKey:((y=r==null?void 0:r.markprompt)==null?void 0:y.projectKey)||"local",storeKey:c==null?void 0:c.id,chatOptions:{maxHistorySize:3,assistantId:((v=r==null?void 0:r.markprompt)==null?void 0:v.assistantId)||"local",toolChoice:"auto",tools:[{tool:{type:"function",function:{name:Sa.AskForProject}},call:()=>{var E;return Promise.resolve(`The projectId was provided, projectId: ${(E=h==null?void 0:h.project)==null?void 0:E.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:Sa.AskForBranch}},call:()=>{var E;return Promise.resolve(`The branchId was provided, branchId: ${(E=h==null?void 0:h.branch)==null?void 0:E.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:Sa.CreateTicket}},call:()=>Promise.resolve("Create support ticket modal is opened"),requireConfirmation:!0}],context:{accountId:(w=h==null?void 0:h.account)==null?void 0:w.value,accountName:(S=h==null?void 0:h.account)==null?void 0:S.label,projectId:(I=h==null?void 0:h.project)==null?void 0:I.value,projectName:(N=h==null?void 0:h.project)==null?void 0:N.label,branchId:(D=h==null?void 0:h.branch)==null?void 0:D.value,branchName:(U=h==null?void 0:h.branch)==null?void 0:U.label,billingPlan:u},threadMetadata:{userId:c==null?void 0:c.id},history:!1},children:e.jsx(V8,{isOpen:t,onRequestClose:s,openSupport:j,saveContext:p,clearContext:x})})]})},G8=()=>{const t=ee("markprompt_get_help"),{trackUiInteraction:s}=k(),n=Hf("support_agent"),r=m.useCallback(()=>{s("resources_menu_opened")},[s]),{isModalOpen:o,openModal:a,closeModal:i}=Ve(De.GetHelp),{isModalOpen:c,openModal:l,closeModal:d}=Ve(De.Support),{isModalOpen:u,openModal:h,closeModal:p}=Ve(De.Feedback),g=m.useMemo(()=>[{items:[{label:"Feedback",icon:"feedback",onClick:()=>{s("resources_menu_feedback_clicked"),h()}},t&&n?{label:"Get help",icon:"help",onClick:()=>{s("resources_menu_get_help_clicked"),a()}}:{label:"Support",icon:"help",onClick:()=>{s("resources_menu_support_clicked"),l()}},{label:"Docs",href:SN,openInNewTab:!0,icon:"docs",onClick:()=>{s("resources_menu_docs_clicked")}},{label:"API Reference",icon:"docs",href:CN,openInNewTab:!0,onClick:()=>{s("resources_menu_api_reference_clicked")}},{label:"Changelog",href:kN,openInNewTab:!0,icon:"release",onClick:()=>{s("resources_menu_changelog_clicked")}},{label:"Trust Center",href:IN,openInNewTab:!0,icon:"trust",onClick:()=>{s("resources_menu_trust_center_clicked")}},{label:"neon.com",href:"https://neon.com/home",openInNewTab:!0,icon:"neon_circle",onClick:()=>{s("resources_menu_open_homepage")}}]}],[h,l,a,s,t,n]);return e.jsxs(e.Fragment,{children:[u&&e.jsx(_1,{isOpen:!0,onRequestClose:()=>{s("feedback_form_dismissed"),p()},openSupport:()=>{p(),l()}}),c&&e.jsx(So,{isOpen:!0,onRequestClose:()=>{s("support_form_dismissed"),d()}}),t&&n&&e.jsx(W8,{isOpen:o,onRequestClose:i}),e.jsx(Dt,{sections:g,onOpen:r,placement:"bottom right",children:e.jsx(P,{appearance:"secondary","aria-label":"Resources menu",icon:"question"})})]})},K8=({projectId:t})=>{const{trackUiInteraction:s}=k();return e.jsx(P,{as:We,size:"s",appearance:"secondary",icon:"people",href:`${F(C.ProjectsItemSettings,{projectId:t})}#sharing`,onClick:()=>{s("header_project_share_button_clicked")},children:"Share"})},hg={description:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"Your account has been suspended."})," Update your payment information or contact support"]}),azurePortal:"Go to Azure portal",support:"Contact support"},Q8="_root_w4tyn_1",Y8="_icon_w4tyn_10",J8="_actions_w4tyn_14",pg={root:Q8,icon:Y8,actions:J8},Z8=()=>{const{trackUiInteraction:t}=k(),{isAzureOrg:s,isLoading:n}=Y(),{isSuspendedAccount:r,isFetching:o}=ae(),{isModalOpen:a,openModal:i,closeModal:c}=Ve(De.Support);return r&&!(n&&o)?e.jsxs(e.Fragment,{children:[e.jsx(So,{onRequestClose:()=>{t("support_form_dismissed"),c()},isOpen:a}),e.jsxs("div",{className:pg.root,children:[e.jsx(L,{name:"warning",size:20,className:pg.icon}),e.jsx(T,{children:hg.description}),e.jsxs("div",{className:pg.actions,children:[s&&e.jsx(P,{appearance:"primary",as:We,openInNewTab:!0,href:PN,onClick:()=>{t("suspended_account_banner_go_to_azure_clicked")},children:hg.azurePortal}),e.jsx(P,{appearance:"secondary",onClick:()=>{t("suspended_account_banner_support_clicked"),i()},children:hg.support})]})]})]}):null},X8=()=>{const t=Ne(),{orgId:s}=Y(),[n,r]=m.useState(!1),{trackUiInteraction:o}=k(),{isFreeSubscription:a,subscriptionType:i,isMarketplaceAccount:c,isSelfServedAccount:l}=ae(),{creditBalance:d}=Vp();if(!(a||l&&(i==="launch"||i==="scale")))return null;const h=()=>{if(o("global_upgrade_button_clicked",{is_marketplace_account:c}),c){const p=s?F(C.OrgBilling,{orgId:s}):C.UserBilling;return t.push(p)}r(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{onClick:h,appearance:a?"primary":"secondary",size:"s",children:["Upgrade"," ",(d==null?void 0:d.balance_cents)!==void 0&&d.balance_cents>0&&`($${TN(d.balance_cents/100,2)} Credit)`]}),e.jsx(Pt,{type:gt.Default,isOpen:n,onRequestClose:()=>{r(!1)}})]})},eH="_root_1kl2e_1",tH="_image_1kl2e_6",sH="_card_1kl2e_11",nH="_body_1kl2e_17",rH="_header_1kl2e_23",oH="_infoIcon_1kl2e_28",aH="_dismissButton_1kl2e_34",iH="_icon_1kl2e_38",cH="_content_1kl2e_42",xn={root:eH,image:tH,card:sH,body:nH,header:rH,infoIcon:oH,dismissButton:aH,icon:iH,content:cH},lH=({title:t,image:s,children:n,onDismiss:r})=>e.jsxs("div",{className:xn.root,children:[e.jsx("img",{src:s,alt:"","aria-hidden":!0,className:xn.image}),e.jsxs("div",{className:xn.card,children:[e.jsx("div",{className:xn.infoIcon,children:e.jsx(L,{name:"info_italic",size:16,className:xn.icon})}),e.jsxs("div",{className:xn.body,children:[e.jsx("div",{className:xn.header,children:t}),e.jsx("div",{className:xn.content,children:n})]}),r&&e.jsx("button",{type:"button",title:"Dismiss",className:xn.dismissButton,onClick:r,children:e.jsx(L,{name:"cross_small",size:20,className:xn.icon})})]})]}),dH="/assets/assets/slack_image-BAo_HRN4.png",uH="_footer_17f6w_1",hH={footer:uH},pH=({onDismiss:t})=>{const{trackUiInteraction:s}=k({mountEvent:"notifications_announcement_slack_app_shown"});return e.jsxs(lH,{title:"Track your Neon projects in Slack",image:dH,children:["Monitor your projects, track account and project usage, and invite users to your organization directly from Slack.",e.jsxs("div",{className:hH.footer,children:[e.jsx(P,{as:We,icon:"external_link",iconSide:"right",href:"https://neon.tech/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("notifications_announcement_slack_app_link_clicked")},children:"Add Neon App to Slack"}),e.jsx(P,{appearance:"secondary",onClick:()=>{s("notifications_announcement_slack_app_dismissed"),t()},children:"Dismiss"})]})]})},mH=({announcements:t,onAnnouncementDismiss:s,onMount:n,onUnmount:r})=>(m.useEffect(()=>(n(),r),[]),e.jsx(e.Fragment,{children:t.map(o=>{switch(o){case"slack_app":return e.jsx(pH,{onDismiss:()=>s(o)},o)}return null})})),ck=Me.NotificationAnnouncements;function ip(){let t;try{t=$t.get(ck)}catch{}return t??{seen:[],dismissed:[]}}function lk(t){try{$t.set(ck,t)}catch{}}function gH(t){const s=ip();lk({...s,seen:[...new Set([...s.seen,...t]).keys()]})}function _H(t){const s=ip(),n={...s,dismissed:[...new Set([...s.dismissed,t]).keys()]};return lk(n),n}function fH(){const{trackUiInteraction:t}=k(),[s,n]=m.useState(ip),r=Tf("growth_slack_app_announcement")==="notification",o=m.useMemo(()=>{const u=[];return r&&u.push("slack_app"),u.filter(h=>!s.dismissed.includes(h))},[r,s.dismissed]),a=u=>{n(_H(u))},i=()=>{gH(o)},c=()=>{n(u=>({...u,seen:ip().seen}))},l=o.filter(u=>!s.seen.includes(u)).length,d=l>0;return m.useEffect(()=>{d&&t("notifications_unread_badge_shown")},[t,d]),{unreadCount:l,announcements:o.length>0?e.jsx(mH,{announcements:o,onAnnouncementDismiss:a,onMount:i,onUnmount:c}):null}}const lc=R_.createApi({reducerPath:"notifications",baseQuery:Vf,endpoints:t=>({getNotifications:t.query({query:({projectId:s})=>q.getProjectNotifications(s)})})}),bH=Pp({name:"monitoringAlerts",initialState:{isLoading:!1,isOpen:!1,showModal:!1,selectedNotificationItem:null,isEndpointEditFormOpened:!1,notificationItems:[],showUpgradePlanModal:!1,isCleared:!1,prevNotificationCount:0},extraReducers:t=>{t.addMatcher(lc.endpoints.getNotifications.matchFulfilled,(s,{payload:n})=>{var o;s.prevNotificationCount||(s.prevNotificationCount=((o=n.data)==null?void 0:o.length)??0),n.data&&n.data.length>s.prevNotificationCount&&(s.isCleared=!1)}),t.addMatcher(lc.endpoints.getNotifications.matchRejected,(s,n)=>{let r;n.payload&&typeof n.payload=="object"&&"message"in n.payload&&typeof n.payload.message=="string"?r=n.payload.message:n.error&&(r=n.error.message),bT({message:`api call getNotifications failed: ${r||"getNotifications rejected"}`,level:"warning"})})},reducers:{setIsCleared:(t,{payload:s})=>{t.isCleared=s},setPrevNotificationCount:(t,{payload:s})=>{t.prevNotificationCount=s},setShowUpgradePlanModal:(t,{payload:s})=>{t.showUpgradePlanModal=s},setIsLoading:(t,{payload:s})=>{t.isLoading=s},setIsOpen:(t,{payload:s})=>{t.isOpen=s},setShowModal:(t,{payload:s})=>{t.showModal=s},setSelectedNotificationItem:(t,{payload:s})=>{t.selectedNotificationItem=s},setIsEndpointEditFormOpened:(t,{payload:s})=>{t.isEndpointEditFormOpened=s}}}),Ed=Tp(bH);function*xH(){try{const t=$t.get(Me.MonitoringAlertsState);if(t){const s=JSON.parse(t);yield Qf(Ed.actions.setIsCleared(!!(s!=null&&s.isCleared)))}}catch{$t.remove(Me.MonitoringAlertsState)}}function*jH(){yield lb(Ed.actionTypes,function*(){const s=yield Kf(Ed.selector);$t.set(Me.MonitoringAlertsState,JSON.stringify(s))})}function*yH(){yield Wf(xH),yield Gf(jH)}Ed.setSaga(yH);const Et=Ed,vH="_notificationCount_9q70g_1",wH="_notificationButton_custom_9q70g_5",SH="_notificationButton_info_9q70g_22",CH="_notificationButton_warning_9q70g_35",Pu={notificationCount:vH,notificationButton_custom:wH,notificationButton_info:SH,notificationButton_warning:CH},kH=({unreadAnnouncementsCount:t})=>{var g;const{projectId:s}=O(),{data:n}=lc.useGetNotificationsQuery({projectId:s}),{isOpen:r,isCleared:o}=vc(Et.selector),a=Ls(),{trackUiInteraction:i}=k(),c=((g=n==null?void 0:n.data)==null?void 0:g.length)??0,l=c>0&&!o,d=t>0,u=c+t,h=l||d;let p;return l?p="warning":d&&(p="info"),e.jsx(P,{className:M({[Pu.notificationButton_custom]:!!p,[Pu.notificationButton_info]:p==="info",[Pu.notificationButton_warning]:p==="warning"}),icon:"notification",iconSide:"left",onClick:()=>{i("monitoring_alerts_opened"),a(Et.actions.setIsOpen(!r))},appearance:"secondary","aria-label":"Open notification panel",children:h&&e.jsx("span",{className:Pu.notificationCount,children:u})})},IH="_notificationInfoContainer_pq4px_1",PH="_iconAndTextContainer_pq4px_9",TH="_notificationInfoTitle_pq4px_13",NH="_notificationStatBase_pq4px_19",AH="_notificationStat_info_pq4px_23",EH="_notificationStat_warning_pq4px_28",$H="_iconContainer_pq4px_33",OH="_infoIcon_pq4px_37",RH="_warningIcon_pq4px_41",BH="_arrayIcon_pq4px_45",jn={notificationInfoContainer:IH,iconAndTextContainer:PH,notificationInfoTitle:TH,notificationStatBase:NH,notificationStat_info:AH,notificationStat_warning:EH,iconContainer:$H,infoIcon:OH,warningIcon:RH,arrayIcon:BH},LH=t=>{switch(t){case"cpu":return"monitoring_alerts_notification_shown_cpu";case"connections":return"monitoring_alerts_notification_shown_connections";case"ram":return"monitoring_alerts_notification_shown_ram"}},DH=({item:t})=>{const s=Ls(),{trackUiInteraction:n}=k({mountEvent:{name:LH(t.metric),params:{formattedValue:t.formattedValue}}});return e.jsxs("button",{type:"button",className:jn.notificationInfoContainer,onClick:()=>{n("monitoring_alerts_notification_clicked",{type:t.metric,formattedValue:t.formattedValue}),s(Et.actions.setIsOpen(!1)),s(Et.actions.setSelectedNotificationItem(t)),s(Et.actions.setShowModal(!0))},children:[e.jsxs("div",{className:jn.iconAndTextContainer,children:[e.jsx("div",{className:jn.iconContainer,children:e.jsx(L,{className:M({[jn.infoIcon]:t.type==="info",[jn.warningIcon]:t.type==="warning"}),name:t.type==="info"?"info_italic":"warning",size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:jn.notificationInfoTitle,children:t.title}),e.jsx("p",{className:M(jn.notificationStatBase,{[jn.notificationStat_info]:t.type==="info",[jn.notificationStat_warning]:t.type==="warning"}),children:t.formattedValue})]})]}),e.jsx("div",{children:e.jsx(L,{className:jn.arrayIcon,name:"arrow_right",size:16})})]})},MH=t=>lc.useGetNotificationsQuery({projectId:t}),UH={empty:"No new notifications"},FH="_container_1wz2q_1",qH="_loaderContainer_1wz2q_5",zH="_empty_1wz2q_13",HH="_timeStampContainer_1wz2q_19",VH="_timeStampContent_1wz2q_26",ol={container:FH,loaderContainer:qH,empty:zH,timeStampContainer:HH,timeStampContent:VH};_t.extend(NN);const WH=({announcements:t})=>{var o;const{projectId:s}=wc(),{data:n,isLoading:r}=MH(s);return r?e.jsx("div",{children:e.jsx("div",{className:ol.loaderContainer,children:e.jsx(Bt,{size:20})})}):!(n!=null&&n.data)&&!t?e.jsx("div",{children:e.jsx("p",{className:ol.empty,children:UH.empty})}):e.jsxs("div",{className:ol.container,children:[(o=n==null?void 0:n.data)==null?void 0:o.map(a=>e.jsx(DH,{item:a},a.formattedValue)),t,(n==null?void 0:n.rw_endpoint_last_active_at)&&e.jsx("div",{className:ol.timeStampContainer,children:e.jsx("p",{className:ol.timeStampContent,children:`Last updated ${_t(new Date(n.rw_endpoint_last_active_at)).fromNow()}`})})]})},qb=t=>{switch(t){case 0:return"5 minutes (default)";case-1:return"never";default:{const{highestValue:s,highestUnit:n}=Np(t);return`${s} ${$s(n,s)}`}}};function dk(t){return!t||t<1?1:t}const GH="_root_10a4d_1",KH={root:GH},Qi=({icon:t,className:s,children:n})=>e.jsxs("div",{className:M(KH.root,s),children:[e.jsx(L,{name:t,size:16}),e.jsx("div",{children:n})]}),sm=()=>{const{limits:t}=Mt();return t==null?void 0:t.max_autoscaling_cu},zb=()=>{const{limits:t}=Mt();return t==null?void 0:t.max_fixed_size_cu},_y=Intl.NumberFormat("en-US"),ft={headers:{autoscaling:"Autoscaling",computeSize:"Compute size"},autoscaling:{fromTitle:"Scale from",toTitle:"Scale up to",minSelectLabel:"Autoscaling minimal value",maxSelectLabel:"Autoscaling maximum value",hint:"Configure the autoscaling range",warning:"Autoscaling range is invalid: (max-min)>8"},largeScaling:{scaleButton:"Autoscale",largeProvisionedButton:"Larger Computes",selectLabel:"Large provisioned CU value",hint:"Choose a fixed size for larger computes"},maxConnections:{message:(t,s,n)=>e.jsxs(e.Fragment,{children:["Connections limit: ",_y.format(t)," direct connections / ",_y.format(AN)," ","pooled connections."," ",e.jsx(Z,{appearance:"rich",content:n,children:s})]}),tooltip:t=>e.jsx("span",{className:t,children:"Learn more"}),tooltipHeader:"Connection pooling",tooltipBody:e.jsxs(e.Fragment,{children:["Use a pooled connection string for connection pooling. This adds the"," ",e.jsx(ke,{children:"-pooler"})," option to your endpoint ID."]}),tooltipLink:"Learn more"},upgradeForMore:"Upgrade for larger computes"},QH="_root_xg1vy_1",YH="_header_xg1vy_7",JH="_withHint_xg1vy_14",ZH="_values_xg1vy_20",XH="_value_xg1vy_20",eV="_title_xg1vy_31",tV="_cu_xg1vy_36",sV="_selectsWrap_xg1vy_41",nV="_selects_xg1vy_41",rV="_select_xg1vy_41",oV="_selectInput_xg1vy_56",aV="_toggleButton_xg1vy_62",iV="_tooltip_xg1vy_68",cV="_tooltipContent_xg1vy_72",lV="_tooltipBody_xg1vy_78",yt={root:QH,header:YH,withHint:JH,values:ZH,value:XH,title:eV,cu:tV,selectsWrap:sV,selects:nV,select:rV,selectInput:oV,toggleButton:aV,tooltip:iV,tooltipContent:cV,tooltipBody:lV},uk=m.memo(({value:t,onChange:s,maxValue:n,scale:r,disabled:o})=>{const a=Sm(r,n),i=Sm(r,t.min),c=Sm(r,t.max),l=c>a?a:c,d=i===l&&i-1<0?0:i,u=m.useCallback(g=>s({min:r[Math.min(...g)],max:r[Math.max(...g)]}),[s,r]),h=g=>{const _=r[Math.min(...g)],x=r[Math.max(...g)];return f1({min:_,max:x})},p=m.useCallback(g=>r[g],[r]);return e.jsx(EN,{left:d,right:l,disabled:o||a===0,min:0,max:a===0?r.length-1:a,onChange:u,formatMark:p,isValidRange:h})});uk.displayName="CPUUnitsSlider";const Hb=({autoscalingRange:t})=>e.jsx(Qi,{icon:"pooler",children:ft.maxConnections.message(b1(t),ft.maxConnections.tooltip(yt.tooltip),e.jsxs("div",{className:yt.tooltipContent,children:[e.jsx(z,{level:6,children:ft.maxConnections.tooltipHeader}),e.jsx("div",{className:yt.tooltipBody,children:ft.maxConnections.tooltipBody}),e.jsx(A,{openInNewTab:!0,href:x1,children:ft.maxConnections.tooltipLink})]}))}),hk=()=>{var o,a;const{trigger:t,formState:{isValid:s,errors:n}}=nt();m.useEffect(()=>{t("autoscaling")},[t,s]);const r=(a=(o=n.autoscaling)==null?void 0:o.min)==null?void 0:a.message;return e.jsxs(e.Fragment,{children:[!s&&n.autoscaling?e.jsx(T,{appearance:"warning",children:ft.autoscaling.warning}):null,r?e.jsx(T,{appearance:"error",children:r}):null]})},dV=()=>{const{control:t}=nt(),s=zb(),n=m.useMemo(()=>(s?ja.filter(o=>o<=s):ja).map(o=>({value:o,label:o1(o)})),[s]);return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:ft.largeScaling.hint}),e.jsx(me,{name:"largeProvisioned",control:t,render:({field:r})=>e.jsxs(e.Fragment,{children:[e.jsx(He,{...r,options:n,"aria-label":ft.largeScaling.selectLabel}),e.jsx(Hb,{autoscalingRange:{min:r.value,max:r.value}})]})})]})},uV=()=>{const{control:t,watch:s}=nt(),n=sm(),r=m.useMemo(()=>(n?xr.filter(a=>a<=n):xr).map(a=>({value:a,label:ON(a)})),[n]);return e.jsxs("div",{className:yt.selectsWrap,children:[e.jsx("span",{children:ft.autoscaling.hint}),e.jsxs("div",{className:yt.selects,children:[e.jsx(me,{name:"autoscaling.min",control:t,render:({field:o})=>e.jsx(R,{className:yt.select,label:ft.autoscaling.fromTitle,children:e.jsxs("div",{className:yt.selectInput,children:[e.jsx(He,{...o,options:r,disabled:o.disabled||!n,"aria-label":ft.autoscaling.minSelectLabel}),e.jsx("span",{className:yt.cu,children:Dn(o.value)})]})})}),e.jsx(me,{name:"autoscaling.max",control:t,render:({field:o})=>e.jsx(R,{className:yt.select,label:ft.autoscaling.toTitle,children:e.jsxs("div",{className:yt.selectInput,children:[e.jsx(He,{...o,options:r,"aria-label":ft.autoscaling.maxSelectLabel}),e.jsx("span",{className:yt.cu,children:Dn(o.value)})]})})})]}),e.jsx(hk,{}),e.jsx(Hb,{autoscalingRange:s("autoscaling")})]})},fy=({value:t,title:s})=>e.jsxs("div",{className:yt.value,children:[e.jsx("span",{className:yt.title,children:s}),e.jsx("span",{className:yt.cu,"data-qa":"autoscaling-slider-value",children:Dn(t)})]}),hV=()=>{const t=nt();return e.jsx(me,{name:"largeProvisionedEnabled",control:t.control,render:({field:s})=>e.jsxs(Da,{children:[e.jsx(as,{active:!s.value,onClick:()=>s.onChange(!1),children:ft.largeScaling.scaleButton}),e.jsxs(as,{active:s.value,onClick:()=>s.onChange(!0),disabled:s.disabled,className:yt.toggleButton,children:[ft.largeScaling.largeProvisionedButton," ",e.jsx(he,{appearance:"experimental",size:"m",children:"Beta"})]})]})})},pV=()=>{const{control:t}=nt(),s=sm();return e.jsx(me,{name:"autoscaling",control:t,render:({field:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:yt.withHint,children:[e.jsx("span",{children:ft.autoscaling.hint}),e.jsx(uk,{value:n.value,onChange:n.onChange,maxValue:s??xr[xr.length-1],disabled:!s,scale:xr})]}),e.jsxs("div",{className:yt.values,children:[e.jsx(fy,{value:n.value.min,title:ft.autoscaling.fromTitle}),e.jsx(fy,{value:n.value.max,title:ft.autoscaling.toTitle})]}),e.jsx(hk,{}),e.jsx(Hb,{autoscalingRange:n.value})]})})},by=()=>{const t=sm();return!t||t<=$N?e.jsx(pV,{}):e.jsx(uV,{})},mV=({upgradeable:t,warning:s})=>{const n=zb(),[r,o]=m.useState(!1),a=n&&ja.some(l=>l<=n),c=nt().watch("largeProvisionedEnabled");return e.jsxs("div",{className:yt.root,children:[e.jsxs("div",{className:yt.header,children:[e.jsx(z,{level:3,size:"h4",children:a?ft.headers.computeSize:ft.headers.autoscaling}),t?e.jsx(A,{onClick:()=>o(!0),children:ft.upgradeForMore}):null,e.jsx(Pt,{type:gt.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>o(!1)})]}),s,a?e.jsxs("div",{className:yt.withHint,children:[e.jsx(hV,{}),c?e.jsx(dV,{}):e.jsx(by,{})]}):e.jsx(by,{})]})},gV={value:Math.floor(j1/On[jr.Minutes]),unit:jr.Minutes},xy=[{label:"Seconds",value:jr.Seconds},{label:"Minutes",value:jr.Minutes},{label:"Hours",value:jr.Hours},{label:"Days",value:jr.Days}];function pk(t){if(!t||t<0)return gV;const{highestValue:s,highestUnit:n}=Np(t);return{value:s,unit:n}}function _V(t){return t.value*On[t.unit]}const gs={header:"Scale to zero",enable:"Scale to zero after",enableV2:`Scale to zero after ${xc(j1)} of inactivity`,never:"Never",coldStart:"Compute activation takes only a few hundred milliseconds.",alwaysActive:"The compute remains active at all times. It will only be restarted for scheduled updates.",unitLabel:"Scale to zero time unit",timeoutLabel:"Scale to zero timeout",autosuspendDisabled:t=>e.jsxs(e.Fragment,{children:["Scales to zero after ",e.jsx("strong",{children:"5 minutes"})," of inactivity."," ",t," to configure this setting."]}),autosuspendDisabledV2:e.jsxs(e.Fragment,{children:["Scales to zero after ",e.jsx("strong",{children:"5 minutes"})," of inactivity."]}),upgradeLinkText:"Upgrade your plan"},fV="_root_2ai5k_1",bV="_elements_2ai5k_7",xV="_inputs_2ai5k_13",jV="_valueInput_2ai5k_18",yV="_unitInput_2ai5k_22",al={root:fV,elements:bV,inputs:xV,valueInput:jV,unitInput:yV},vV=()=>{var o,a;const{trigger:t,formState:{isValid:s,errors:n}}=nt();m.useEffect(()=>{t("autosuspend")},[t,s]);const r=(a=(o=n.autosuspend)==null?void 0:o.value)==null?void 0:a.message;return e.jsx(e.Fragment,{children:r?e.jsx(T,{appearance:"error",children:r}):null})},wV=()=>{const{control:t,watch:s,trigger:n}=nt(),{trackUiInteraction:r}=k(),{subscriptionType:o}=ae(),a=Sc("edit_suspend_timeout"),i=ee("disallow_autosuspend_timeout_customization"),{limits:c}=Mt(),l=dk(c==null?void 0:c.min_autosuspend_seconds),[d,u]=m.useState(!1),h=s("autosuspend"),p=!i||o==="direct_sales"||h.enabled&&!(h.value===5&&h.unit==="minutes"),[g,_]=m.useState(p);return!g&&p&&_(!0),e.jsxs("div",{className:al.root,children:[e.jsx(z,{level:3,size:"h4",children:gs.header}),a?e.jsxs("div",{className:al.elements,children:[e.jsx(me,{name:"autosuspend.enabled",control:t,render:({field:x})=>e.jsx(hn,{isSelected:x.value,isDisabled:x.disabled,onChange:j=>{r(j?"compute_drawer_autosuspend_enabled":"compute_drawer_autosuspend_disabled"),x.onChange(j),n("autosuspend")},"aria-label":g?gs.enable:gs.enableV2,children:g?gs.enable:gs.enableV2})}),h.enabled?e.jsxs(e.Fragment,{children:[g&&e.jsxs("div",{className:al.inputs,children:[e.jsx(me,{name:"autosuspend.value",control:t,render:({field:x,fieldState:j})=>e.jsx(R,{error:!!j.error,"aria-label":gs.timeoutLabel,children:e.jsx(ne,{...x,onChange:b=>x.onChange(Number(b.target.value)),type:"number",className:al.valueInput})})}),e.jsx(me,{name:"autosuspend.unit",control:t,render:({field:x,fieldState:j})=>e.jsx(R,{error:!!j.error,"aria-label":gs.unitLabel,children:e.jsx(He,{...x,options:x.value!=="seconds"&&l>=60?xy.filter(({value:b})=>b!=="seconds"):xy,"aria-label":gs.unitLabel,className:al.unitInput})})})]}),e.jsx(vV,{}),e.jsx(Qi,{icon:"info",children:gs.coldStart})]}):e.jsx(Qi,{icon:"lightning",children:gs.alwaysActive})]}):e.jsxs(Qi,{icon:"pause",children:[i?gs.autosuspendDisabledV2:gs.autosuspendDisabled(e.jsx(A,{onClick:()=>u(!0),children:gs.upgradeLinkText})),e.jsx(Pt,{type:gt.ComputeSizeLimitReached,isOpen:d,onRequestClose:()=>u(!1)})]})]})},ns={createTitle:t=>{switch(t){case"read_only":return"Add read replica";case"read_write":return"Add primary compute"}},editTitle:t=>{switch(t){case"read_only":return"Edit read replica";case"read_write":return"Edit primary compute"}},buttons:{save:"Save",add:"Add",delete:"Delete",cancel:"Cancel",addButtonLimitMessage:"You reached the limit of computes."},loadingBranchWarning:"Please wait for a branch to load...",protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again.",vercelWarning:"Deleting the read-write compute on the root branch is not available for Vercel-managed projects.",autoscalingWarning:"Changing compute size settings will briefly interrupt database connections."},SV="_wrapper_t5o3s_1",CV="_form_t5o3s_7",kV="_divider_t5o3s_11",IV="_addSaveCancel_t5o3s_18",PV="_buttons_t5o3s_23",An={wrapper:SV,form:CV,divider:kV,addSaveCancel:IV,buttons:PV},Tu={errors:{minBiggerThanMax:"Minimum value should be less or equal to maximum value",suspendTimeToLow:({min:t})=>`The minimum setting is ${Ix(t)}.`,suspendTimeToHigh:({max:t})=>`The maximum setting is ${Ix(t)}.`,suspendTimeEmpty:"Auto suspend timeout can not be empty."}},TV=t=>Ah({largeProvisionedEnabled:Cd().optional(),autoscaling:Ah({min:an(),max:an()}).refine(({min:s,max:n})=>s<=n,{message:Tu.errors.minBiggerThanMax,path:["min"]}).refine(s=>f1(s)),largeProvisioned:an(),autosuspend:Ah({enabled:Cd(),value:an().gt(0,Tu.errors.suspendTimeEmpty),unit:wS([Fl("seconds"),Fl("minutes"),Fl("hours"),Fl("days")])}).refine(({enabled:s,value:n,unit:r})=>s?n>=Math.ceil(t/On[r]):!0,()=>({path:["value"],message:Tu.errors.suspendTimeToLow({min:t})})).refine(({enabled:s,value:n,unit:r})=>s?n<=Math.floor(Px/On[r]):!0,()=>({path:["value"],message:Tu.errors.suspendTimeToHigh({max:Px})})),name:dt().max(64).min(1).optional()}),mk=(t,s)=>s?t.autosuspend.enabled?{suspend_timeout_seconds:_V({...t.autosuspend,unit:t.autosuspend.unit})}:{suspend_timeout_seconds:-1}:{},gk=t=>t.largeProvisionedEnabled?{autoscaling_limit_min_cu:t.largeProvisioned,autoscaling_limit_max_cu:t.largeProvisioned}:{autoscaling_limit_min_cu:t.autoscaling.min,autoscaling_limit_max_cu:t.autoscaling.max},NV=(t,s)=>{const n=y1(s);return{provisioner:t.provisioner!==n?n:void 0}},_k=t=>t.name!=null?{name:t.name}:null,AV=(t,s,n)=>{const{trackUiInteraction:r}=k(),{getRegion:o}=Fa(),a=Sc("edit_suspend_timeout"),i=Lf({projectId:s.project_id},{onSuccess:n});return m.useCallback(c=>{r("compute_drawer_save_clicked"),i.mutate({endpointId:s.id,request:{endpoint:{...NV(s,o(t.platform_id,t.region_id)),...gk(c),...mk(c,a),..._k(c)}}})},[o,t.platform_id,t.region_id,r,i,s,a])},EV=(t,s,n)=>{var d;const{trackUiInteraction:r}=k(),{getRegion:o}=Fa(),a=hs({projectId:t.id,branchId:s}),i=Sc("edit_suspend_timeout"),c=RN({projectId:t.id},{onSuccess:n}),l=(d=a.data)!=null&&d.endpoints.some(dn)?"read_only":"read_write";return m.useCallback(u=>{r("compute_drawer_create_clicked"),c.mutate({request:{endpoint:{branch_id:s,type:l,provisioner:y1(o(t.platform_id,t.region_id)),...gk(u),...mk(u,i),..._k(u)}}})},[r,c,t.platform_id,t.region_id,s,l,o,i])},fk=(t,s)=>{const{trackUiInteraction:n}=k(),r=v1(),o=w1({projectId:t.project_id},{onSuccess:s});return m.useCallback(async()=>{n("compute_drawer_delete_clicked"),await r(t)&&o.mutate({endpointId:t.id})},[r,o,t,n])},$V=(t,s)=>({largeProvisionedEnabled:ja.includes(t.autoscaling_limit_min_cu),autoscaling:{min:xr.includes(t.autoscaling_limit_min_cu)?t.autoscaling_limit_min_cu:xr[0],max:xr.includes(t.autoscaling_limit_max_cu)?t.autoscaling_limit_max_cu:xr[0]},largeProvisioned:ja.includes(t.autoscaling_limit_min_cu)?t.autoscaling_limit_min_cu:ja[0],autosuspend:{enabled:s?t.suspend_timeout_seconds!==-1:!1,...pk(t.suspend_timeout_seconds)},name:t.name}),OV=t=>{const s=Sc("edit_suspend_timeout"),{subscriptionType:n}=ae(),r=ee("disallow_autosuspend_timeout_customization"),o=sm(),a=zb(),i=t.default_endpoint_settings,c=(i==null?void 0:i.autoscaling_limit_min_cu)??0,l=(i==null?void 0:i.autoscaling_limit_max_cu)??0,d=c===l?c:0,u=a?zi(d,ja[0],a):d,h=r&&n!=="direct_sales"?0:(i==null?void 0:i.suspend_timeout_seconds)??0;return{autoscaling:{min:o?zi(c,Tx,o):c,max:o?zi(l,Tx,o):l},largeProvisioned:u,largeProvisionedEnabled:u===d,autosuspend:{enabled:s&&h>=0,...pk(h)}}},bk=t=>{const{limits:s}=Mt(),n=dk(s==null?void 0:s.min_autosuspend_seconds),r=xe({defaultValues:t,resolver:Vd(TV(n))}),{trigger:o}=r;return m.useEffect(()=>{o()},[o]),r},RV=({children:t,onCancel:s,onRequestClose:n,...r})=>{var u,h;const{trackUiInteraction:o}=k(),a=bk(OV(r.project)),i=Mt(),c=ds({projectId:r.project.id}),l=i.isLoading?null:((u=i.limits)==null?void 0:u.max_read_only_endpoints)??-1;m.useEffect(()=>{var b;const p=((b=c.data)==null?void 0:b.endpoints)??[],g=p.filter(f=>f.branch_id===r.branchId),_=l===null||c.isLoading||p.filter(S1).length>=(l===-1?1/0:l),x=c.isLoading||g.some(dn),j=r.endpointType==="read_only"?_:x;j&&!a.formState.errors.root?a.setError("root",{type:"disabled",message:ns.buttons.addButtonLimitMessage}):!j&&a.formState.errors.root&&a.clearErrors("root")},[a,l,c.data,c.isLoading,r.branchId,r.endpointType]);const d=EV(r.project,r.branchId,n);return e.jsx(us,{...a,children:e.jsx("form",{onSubmit:a.handleSubmit(d),className:An.form,children:e.jsx(Wn,{title:ns.createTitle(r.endpointType),alwaysShowScrollbar:!0,footer:e.jsxs("div",{className:An.addSaveCancel,children:[e.jsx(P,{appearance:"secondary",onClick:()=>{o("compute_drawer_create_form_cancelled"),s()},children:ns.buttons.cancel}),e.jsx(Z,{content:((h=a.formState.errors.root)==null?void 0:h.message)??"-",disabled:!a.formState.errors.root,children:e.jsx("div",{children:e.jsx(_e,{children:ns.buttons.add})})})]}),children:e.jsxs("div",{className:An.wrapper,children:[e.jsxs(R,{id:"endpoint_name",children:[e.jsx(Ap,{children:"Name"}),e.jsx(ne,{placeholder:"Name your compute (Optional)",...a.register("name",{setValueAs:p=>p||void 0})})]}),e.jsx("div",{className:An.divider}),t]})})})})},BV=({children:t,onCancel:s,onRequestClose:n,...r})=>{const{trackUiInteraction:o}=k(),a=Sc("edit_suspend_timeout"),i=bk($V(r.endpoint,a)),c=AV(r.project,r.endpoint,()=>{n(),re("Endpoint is updated successfully!")}),l=fk(r.endpoint,n),{branchesById:d}=Ye(),u=d[r.endpoint.branch_id],{isVercelOrg:h}=Y(),p=u?u.protected?ns.protectedBranchWarning:h&&r.endpoint.type==="read_write"&&!u.parent_id?ns.vercelWarning:void 0:ns.loadingBranchWarning;return e.jsx(us,{...i,children:e.jsx("form",{onSubmit:i.handleSubmit(c),className:An.form,children:e.jsx(Wn,{title:ns.editTitle(r.endpoint.type),alwaysShowScrollbar:!0,footer:e.jsxs("div",{className:An.buttons,children:[e.jsx(Z,{content:p,disabled:!p,children:e.jsx("div",{children:e.jsx(P,{appearance:"error",onClick:l,disabled:!!p,children:ns.buttons.delete})})}),e.jsxs("div",{className:An.addSaveCancel,children:[e.jsx(P,{appearance:"secondary",onClick:()=>{o("compute_drawer_edit_form_cancelled"),s()},children:ns.buttons.cancel}),e.jsx(_e,{children:ns.buttons.save})]})]}),children:e.jsxs("div",{className:An.wrapper,children:[e.jsxs(R,{id:"endpoint_name",children:[e.jsx(Ap,{children:"Name"}),e.jsx(ne,{...i.register("name",{setValueAs:g=>g||void 0}),placeholder:r.endpoint.id})]}),e.jsx("div",{className:An.divider}),t]})})})})},qn=({isOpen:t=!1,drawerZIndex:s,onRequestClose:n,...r})=>{var c;const{trackUiInteraction:o}=k();m.useEffect(()=>{t&&o("compute_drawer_shown")},[t,o]);const a=r.mode==="edit"?e.jsx(Q,{appearance:"warning",children:ns.autoscalingWarning}):null,i=e.jsxs(e.Fragment,{children:[e.jsx(mV,{upgradeable:["launch","free_v2"].includes((c=r.project.owner)==null?void 0:c.subscription_type),warning:a}),e.jsx("div",{className:An.divider}),e.jsx(wV,{})]});return e.jsx(Vn,{isOpen:t,"aria-label":r.mode==="create"?ns.createTitle(r.endpointType):ns.editTitle(r.endpoint.type),onRequestClose:n,size:"m",zIndex:s,children:r.mode==="create"?e.jsx(RV,{...r,onCancel:n,onRequestClose:n,children:i}):e.jsx(BV,{...r,onCancel:n,onRequestClose:n,children:i})})},LV="_alertContainer_4fiod_1",DV="_alertTitle_4fiod_7",MV="_alertIcon_4fiod_11",UV="_subDescription_4fiod_16",FV="_solution_4fiod_20",Do={alertContainer:LV,alertTitle:DV,alertIcon:MV,subDescription:UV,solution:FV},jy={upgrade_plan:"Upgrade",upgrade_cu:"Edit compute"},qV=({content:t})=>{const s=Ne(),{selectedNotificationItem:n}=vc(Et.selector),r=Ls(),{trackUiInteraction:o}=k(),{billingUrl:a}=wo(),i=()=>{r(Et.actions.setShowModal(!1))},c=()=>{o("monitoring_alerts_notification_upgrade_clicked"),i(),r(Et.actions.setShowUpgradePlanModal(!0))},l=p=>{o("monitoring_alerts_notification_edit_compute_clicked"),i(),r(Et.actions.setIsEndpointEditFormOpened(p))};m.useEffect(()=>()=>{r(Et.actions.setShowModal(!1))},[r]);const d=m.useCallback(()=>{s.push(`${a}#usage`)},[s,a]),u=n&&n.action==="upgrade_cu"?jy.upgrade_cu:jy.upgrade_plan,h=t.action&&n&&(t==null?void 0:t.action[n.action]);return n?e.jsxs(e.Fragment,{children:[e.jsxs(be,{children:[e.jsxs("div",{className:Do.alertContainer,children:[e.jsx(L,{name:"info_italic",size:16,className:Do.alertIcon}),e.jsx(z,{level:2,size:"h5",className:Do.alertTitle,children:t.alertTitle})]}),e.jsx("p",{children:t.alertDescription(n==null?void 0:n.value)}),t.alertSubDescription&&e.jsx("p",{className:Do.subDescription,children:t.alertSubDescription(n.value)}),t.action&&e.jsx("p",{className:Do.subDescription,children:h}),t.tipsTitle&&t.tips&&e.jsxs("div",{className:Do.solution,children:[e.jsx(z,{level:2,size:"h5",className:Do.alertTitle,children:t.tipsTitle}),t.tips&&e.jsx("ol",{children:t.tips.map(p=>e.jsx("li",{children:p},p))})]})]}),e.jsxs(ge,{children:[e.jsx(P,{appearance:"secondary",size:"l",onClick:()=>{i(),d()},children:"Review Usage"}),e.jsx(P,{appearance:"primary",size:"l",onClick:()=>{n&&(n.action==="upgrade_plan"?c():l(!0))},children:u})]})]}):null},zV={connections:[{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of 112 concurrent connections provided by your Free Plan .25 vCPU compute size.",alertSubDescription:()=>"Upgrade to a paid plan to get more connections.",plans:["free_v2"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Upgrade to our Scale plan to get more connections.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["launch"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Contact Sales to ask about upgrading to Enterprise.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["scale"]}],ram:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade to a paid plan for larger compute sizes with more RAM"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade your plan for larger compute sizes with more RAM"],action:{upgrade_plan:"Upgrade to our Scale plan to get more RAM.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max RAM for your plan",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM"],action:{upgrade_plan:"Contact Sales to ask about upgrading to Enterprise.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["scale"]}],cpu:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Upgrade your plan to get more compute"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the max CU allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load","Upgrade your plan to get more compute"],action:{upgrade_plan:"Upgrade to our Scale plan to get more CU.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max CU for your plan",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load"],action:{upgrade_plan:"Contact Sales to ask about upgrading to Enterprise.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["scale"]}]},HV=()=>{const{data:t}=rt(),{selectedNotificationItem:s}=vc(Et.selector);return m.useMemo(()=>{if(!s||t===void 0)return;const n=zV[s.metric];return n==null?void 0:n.find(r=>r.plans.includes(t.plan))},[t,s])},VV=()=>{var g,_;const{showModal:t,showUpgradePlanModal:s,isEndpointEditFormOpened:n,selectedNotificationItem:r}=vc(Et.selector),o=Ls(),{project:a,projectId:i}=O(),{data:c}=lc.useGetNotificationsQuery({projectId:i}),l=ds({projectId:i}),d=HV(),u=()=>{o(Et.actions.setShowUpgradePlanModal(!1))},h=x=>{o(Et.actions.setIsEndpointEditFormOpened(x))},p=c?(_=(g=l.data)==null?void 0:g.endpoints)==null?void 0:_.find(x=>x.id===c.endpointId):void 0;return!r||!d||!c||!a?null:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{width:800,isOpen:t,onRequestClose:()=>{o(Et.actions.setShowModal(!1))},title:d.modalTile(r.value),children:e.jsx(qV,{content:d})}),s&&e.jsx(Pt,{type:gt.Default,isOpen:s,onRequestClose:()=>{u()}}),n&&p&&e.jsx(qn,{isOpen:!0,mode:"edit",project:a,endpoint:p,onRequestClose:()=>h(!1)})]})},WV="_menu_1gvpt_1",GV={menu:WV},KV=()=>{const{isOpen:t}=vc(Et.selector),s=Ls(),{unreadCount:n,announcements:r}=fH(),o=m.useRef(null),a=()=>{s(Et.actions.setIsOpen(!1))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:o,children:[e.jsx(kH,{unreadAnnouncementsCount:n}),e.jsx(VV,{})]}),e.jsx(Dd,{triggerRef:o,isOpen:t,placement:"bottom right",className:GV.menu,onOpenChange:a,children:e.jsx(WH,{announcements:r})})]})},QV=()=>{const{pathname:t}=Af(),{projectId:s}=wc(),n=ee("growth_monitoring_alerts"),r=t.startsWith(`/projects/${s}`);return!n||!r?null:e.jsx(KV,{})},yy={OK:{tooltip:"All Systems Operational",badge:"All ok"},INCIDENTS:{tooltip:"There are ongoing incidents",badge:"Incidents"},INCIDENT:{tooltip:"There is an ongoing incident",badge:"Incident"},MAINTENANCE:{tooltip:"Scheduled maintenance going on",badge:"Maintenance"}},YV="_container_y8x8c_1",JV="_dot_y8x8c_7",ZV="_ok_y8x8c_13",XV="_incidents_y8x8c_17",eW="_maintenance_y8x8c_21",il={container:YV,dot:JV,ok:ZV,incidents:XV,maintenance:eW},tW=({status:t})=>e.jsx(Z,{content:yy[t].tooltip,children:e.jsx("a",{href:BN,target:"_blank",rel:"noreferrer",children:e.jsx(he,{children:e.jsxs("div",{className:il.container,children:[e.jsx("p",{"data-qa":"system-status-text",className:M(il.dot,{[il.incidents]:t==="INCIDENTS"||t==="INCIDENT",[il.maintenance]:t==="MAINTENANCE",[il.ok]:t==="OK"})}),yy[t].badge]})})})}),sW=Rt({page_title:dt(),page_url:dt(),ongoing_incidents:va(Eh()),in_progress_maintenances:va(Eh()),scheduled_maintenances:va(Eh())}),nW=Rt({subpage:dt(),summary:sW}),rW=Rt({subpages:va(nW)}),mg={FETCH_ERROR:"Failed to fetch status",PARSE_ERROR:"Invalid data received from status API",UNKNOWN_ERROR:"An unknown error occurred while fetching status"},oW=t=>{const{subpages:s}=t,n=tL(s,o=>o.summary.ongoing_incidents.length),r=s.some(o=>o.summary.in_progress_maintenances.length>0);return n>1?"INCIDENTS":n===1?"INCIDENT":r?"MAINTENANCE":"OK"},aW=async()=>{try{const t=await fetch(LN);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json(),n=rW.safeParse(s);if(!n.success)throw new B_(n.error.errors);return oW(n.data)}catch(t){throw t instanceof B_?new Error(`${mg.PARSE_ERROR}: ${t.message}`):t instanceof Error?new Error(`${mg.FETCH_ERROR}: ${t.message}`):new Error(mg.UNKNOWN_ERROR)}},iW=()=>{const{data:t,error:s}=st({queryKey:["system-status"],queryFn:aW,staleTime:3e5});return m.useEffect(()=>{s&&Sr(s)},[s]),t?e.jsx(tW,{"data-qa":"system-status-badge",status:t}):null},cW="_header_1lg0k_1",lW="_quickNav_1lg0k_12",vy={header:cW,quickNav:lW},cp=m.memo(({projectId:t,isError:s})=>e.jsxs(e.Fragment,{children:[!s&&e.jsx($q,{}),e.jsxs("div",{className:vy.header,children:[s?e.jsx("div",{}):e.jsx(h0,{projectId:t}),e.jsxs("div",{className:vy.quickNav,children:[e.jsx(iW,{}),t&&e.jsx(K8,{projectId:t}),e.jsx(QV,{}),e.jsx(G8,{}),e.jsx(X8,{}),e.jsx(Eq,{})]})]}),!s&&e.jsx(Z8,{})]}));cp.displayName="LayoutHeader";const xk=m.memo(()=>{const{projectId:t,project:s,isLoading:n,error:r}=O();return e.jsx(cp,{projectId:t,isError:!n&&!s||!!r})});xk.displayName="ProjectHeader";const dW="_fields_u6tgv_1",uW={fields:dW},hW=({isOpen:t,onRequestClose:s})=>{var d,u,h,p;const{trackUiInteraction:n}=k(),{data:r}=rt(),{submitIntegrationSuggestionForm:o}=Ra(),a=zn({shouldUnregister:!0}),i=()=>{Te(e.jsx(Fe,{children:"Thank you for your request!"})),s()},c=()=>{Te(e.jsx(fc,{children:e.jsxs(e.Fragment,{children:["Request failed. Please try again or contact us at"," ",e.jsx(A,{openInNewTab:!0,href:`mailto:${Nx}`,children:Nx}),"."]})}),{...C1,toastId:"integration_suggestion_form_failed"})},l=g=>{if(r!==void 0)return o(r.email,g).then(i).catch(c)};return e.jsx(mc,{title:"Suggest integration",isOpen:t,onRequestClose:()=>{n("integration_suggestion_form_dismissed"),s()},children:e.jsx(us,{...a,children:e.jsxs(Lt,{id:"integration-request-form",onSubmit:a.handleSubmit(l),children:[e.jsxs(gc,{className:uW.fields,children:[e.jsx(R,{error:(u=(d=a.formState.errors)==null?void 0:d.title)==null?void 0:u.message,id:"title",label:"Integration name",children:e.jsx(ne,{autoFocus:!0,...a.register("title",{required:"This field is required"})})}),e.jsx(R,{error:(p=(h=a.formState.errors)==null?void 0:h.comment)==null?void 0:p.message,id:"comment",label:"Message",children:e.jsx(La,{...a.register("comment",{required:"This field is required"}),placeholder:"Share your specific use case. It helps us build for precisely what you need.",rows:6,"data-qa":"suggest_integration_comment_field"})})]}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{"data-qa":"suggest_new_integration_submit",onClick:()=>{n("integration_suggestion_form_submitted")},children:"Suggest integration"})]})]})})})},pW=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(!1),r=()=>n(!0),o=()=>n(!1);return e.jsxs(e.Fragment,{children:[e.jsx(P,{"data-qa":"suggest_new_integration",onClick:()=>{t("integrations_request_integration_popup_open"),r()},children:"Suggest an integration"}),e.jsx(hW,{isOpen:s,onRequestClose:o})]})},jk="/assets/assets/vercel-cover@2x-DxKeLbKt.webp",mW="/assets/assets/okta-cover-Ct_OfezU.webp",yk="/assets/assets/default-cover-Dx0vE_98.webp",vk="/assets/assets/default-cover@2x-D4GKlMww.webp",gW=Object.freeze(Object.defineProperty({__proto__:null,AirbyteCover:IO,CloudflareHyperdriveCover:PO,CloudflarePagesCover:TO,CloudflareWorkersCover:NO,ConfluentCover:AO,DefaultCover:yk,DefaultCover2x:vk,DenoCard:EO,DenoCover:$O,ExographCover:OO,FerretDBCover:RO,FivetranCover:BO,GithubCard:LO,GithubCover:L_,GrafbaseCover:DO,HasuraCover:MO,HerokuCard:UO,HerokuCover:FO,KoyebCover:qO,MaterializeCover:zO,NeosyncCover:HO,NetlifyCard:VO,NetlifyCover:WO,OktaCover:mW,OuterbaseCard:GO,OuterbaseCover:D_,PrismaCover:KO,RailwayCard:QO,RailwayCover:YO,RenderCard:JO,RenderCover:ZO,SequinCard:XO,SequinCover:eR,StepZenCover:tR,VercelCard:sR,VercelCover:SS,VercelCover2x:jk,WunderGraphCover:nR},Symbol.toStringTag,{value:"Module"})),_W="_root_1ygwd_1",fW="_header_1ygwd_9",wy={root:_W,header:fW},mt=({title:t,action:s,children:n,className:r})=>e.jsxs("div",{className:M(wy.root,r),children:[t&&e.jsxs("div",{className:wy.header,children:[e.jsx(z,{level:4,children:t}),s]}),n]}),gg={title:"Provide feedback",description:"Please provide feedback on your experience with this integration to help us improve it.",submit:"Submit feedback"},bW="_description_1wg2j_1",xW={description:bW},Mo={success:"Thanks for your feedback!",fail:e.jsxs(e.Fragment,{children:["Request failed. Please try again or contact us at"," ",e.jsx(A,{openInNewTab:!0,href:"mailto:feedback@neon.tech",appearance:"error",children:"feedback@neon.tech"}),"."]}),title:"Submit feedback",submit:"Send",messageLabel:"Message",messagePlaceholder:"Please share your feedback",formRequiredError:"This field is required"},jW=({isOpen:t,onRequestClose:s,subject:n})=>{var u;const{trackUiInteraction:r}=k(),{submitIntegrationFeedbackForm:o}=Ra(),{data:a}=rt(),i=zn({defaultValues:{message:""},shouldUnregister:!0}),c=()=>{Te(e.jsx(Fe,{children:Mo.success})),s()},l=()=>{Te(e.jsx(fc,{children:Mo.fail}),{...C1,toastId:"integration_feedback_form_failed"})},d=h=>{if(a!==void 0)return o(h,a.email,n).then(c).catch(l)};return e.jsx(mc,{title:Mo.title,isOpen:t,onRequestClose:()=>{r("integration_feedback_dismissed"),s()},children:e.jsx(us,{...i,children:e.jsxs(Lt,{onSubmit:i.handleSubmit(d),children:[e.jsx(gc,{children:e.jsx(R,{error:(u=i.formState.errors.message)==null?void 0:u.message,label:Mo.messageLabel,children:e.jsx(La,{rows:6,placeholder:Mo.messagePlaceholder,...i.register("message",{required:{value:!0,message:Mo.formRequiredError}})})})}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{onClick:()=>{r("integration_feedback_submitted")},children:Mo.submit})]})]})})})},Vb=({subject:t,className:s})=>{const{trackUiInteraction:n}=k(),[r,o]=m.useState(!1),a=()=>o(!0),i=()=>o(!1);return e.jsxs(mt,{title:gg.title,className:s,children:[e.jsx(jW,{subject:t,isOpen:r,onRequestClose:i}),e.jsx("div",{className:xW.description,children:gg.description}),e.jsx(P,{appearance:"secondary",onClick:()=>{n("integration_feedback_clicked"),a()},children:gg.submit})]})},yW="_root_1cbeo_1",vW={root:yW},Wb=()=>e.jsxs("div",{className:vW.root,children:[e.jsx($,{height:20,width:250}),e.jsx($,{height:40}),e.jsx($,{height:280}),e.jsx($,{height:80}),e.jsx($,{height:20,width:150}),e.jsx($,{height:20,width:300}),e.jsx($,{height:36,width:190}),e.jsx($,{height:20,width:150}),e.jsx($,{height:40}),e.jsx($,{height:36,width:190})]}),wW="_body_qv4yl_1",SW="_bodyWithFooter_qv4yl_5",CW="_feedback_qv4yl_9",kW="_header_qv4yl_13",Nu={body:wW,bodyWithFooter:SW,feedback:CW,header:kW},Io=({isOpen:t,onRequestClose:s,title:n,subtitle:r,beta:o,iconName:a,coverImage:i={x1:yk,x2:vk},isLoading:c=!1,hideFeedback:l=!1,"aria-label":d,size:u="m",action:h,children:p,footer:g})=>e.jsx(Vn,{isOpen:t,"aria-label":d,size:u,onRequestClose:s,children:e.jsx(K2,{title:o?e.jsxs("div",{className:Nu.header,children:[n," ",e.jsx(he,{appearance:"experimental",size:"m",children:"Beta"})]}):n,subtitle:r,icon:a,coverImage:i,action:h,footer:g,children:e.jsx("div",{className:M(Nu.body,{[Nu.bodyWithFooter]:!!g}),children:c?e.jsx(Wb,{}):e.jsxs(e.Fragment,{children:[p,!l&&e.jsx(Vb,{className:Nu.feedback,subject:n})]})})})}),IW="_title_16r18_1",PW={title:IW},wk=({title:t})=>e.jsx("h4",{className:PW.title,children:t}),TW=t=>{const s=m.useMemo(()=>`${DN}${t}.md`,[t]),n=m.useCallback(()=>fetch(s).then(a=>{if(a.ok)return a.text()}),[s]),{isLoading:r,data:o}=ES(n);return{isLoading:r,documentationMd:o}},NW=({docId:t})=>{const{documentationMd:s,isLoading:n}=TW(t);return n?e.jsx(Wb,{}):s?e.jsx(rk,{md:s}):e.jsxs(Q,{appearance:"warning",children:["Could not fetch the docs. Go to"," ",e.jsx(A,{openInNewTab:!0,href:`${k1}${t}`,children:"Docs page"}),"."]})},AW=({name:t,logoImage:s,coverImage:n,docId:r,isOpen:o,onRequestClose:a,nameSuffix:i,openedAnalyticsEventName:c})=>{const{trackUiInteraction:l}=k();return e.jsx(Io,{"aria-label":`${t} ${i??""}`,title:`${t} ${i??""}`,onRequestClose:a,isOpen:o,iconName:s,coverImage:n?{x1:n,x2:n}:void 0,hideFeedback:!0,size:"l",action:e.jsx(A,{openInNewTab:!0,href:`${k1}${r}`,icon:"external_link",onClick:()=>{l(c)},children:"Open in docs"}),children:e.jsx(NW,{docId:r})})},EW=({integration:{id:t,name:s,logoImage:n,coverImage:r,docId:o}})=>{const{trackUiInteraction:a}=k(),{openDrawer:i,openedDrawerId:c,closeDrawer:l}=ko();return o?e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>{a("integrations_page_read_documentation_button_clicked",{additionalInfo:s}),i(t)},appearance:"secondary",children:"Read"}),e.jsx(AW,{openedAnalyticsEventName:"integration_documentation_full_docs_clicked",nameSuffix:"integration",name:s,logoImage:n,coverImage:r,docId:o,isOpen:c===t,onRequestClose:()=>{a("integrations_page_read_documentation_panel_closed",{additionalInfo:s}),l()}})]}):null},Uo={addButton:"Add",manageButton:"Manage",comingSoonOrganizations:"Coming soon to organizations",upgradeButton:"Upgrade plan to add",manageNeonSubscription:"Manage Neon subscription",enableBilling:"Enable in Billing",unavailable:"Unavailable"},Sk=({integration:t,disabled:s})=>{const{orgId:n,org:r,isVercelOrg:o}=Y(),{trackUiInteraction:a}=k(),{openDrawer:i}=ko(),[c,l]=m.useState(!1),{availableAddons:d}=Ip();if(r&&o&&t.id===vr.Vercel)return e.jsx(P,{as:"a",appearance:"secondary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${n}`,children:Uo.manageNeonSubscription});if(r&&t.isUnsupportedForOrgs)return e.jsx(he,{children:Uo.comingSoonOrganizations});if(s)return t.id==="datadog"&&d.add_on_monitoring_integration?e.jsx(P,{as:We,href:I1({orgId:n,section:"addons"}),appearance:"secondary",children:Uo.enableBilling}):t.upgradeType?e.jsxs(e.Fragment,{children:[e.jsx(P,{appearance:"secondary",size:"s",onClick:()=>l(!0),children:Uo.upgradeButton}),e.jsx(Pt,{type:t.upgradeType,isOpen:c,onRequestClose:()=>l(!1)})]}):e.jsx(P,{appearance:"secondary",disabled:!0,children:Uo.unavailable});const{drawerButtons:u}=t;return u?t.isAdded?e.jsx(P,{appearance:"secondary","data-qa":`manage_${t.id}_integration`,onClick:()=>{a(u.manageAnalyticsId),i(t.id)},children:Uo.manageButton}):e.jsx(P,{appearance:"secondary","data-qa":`add_${t.id}_integration`,onClick:()=>{a(u.addAnalyticsId),i(t.id)},children:Uo.addButton}):e.jsx(EW,{integration:t})},$W="_branchName_b9vqd_1",OW={branchName:$W},Ck=({name:t})=>{const s=m.useRef(null),[n,r]=m.useState();return m.useEffect(()=>{if(s.current){const{scrollWidth:o,offsetWidth:a}=s.current;r(o>a)}},[s]),e.jsx(Z,{content:t,disabled:!n,placement:"top",children:e.jsx("span",{ref:s,className:OW.branchName,children:t})})},RW="_placeholder_6wk7j_1",BW={placeholder:RW},LW=()=>e.jsxs("div",{className:BW.placeholder,children:[e.jsx($,{height:60}),e.jsx($,{height:20,width:200}),e.jsx($,{height:48}),e.jsx($,{height:20,width:250}),e.jsx($,{height:280})]}),DW="_prodBranch_13fvc_1",MW={prodBranch:DW},UW=({name:t})=>e.jsxs("div",{className:MW.prodBranch,children:[e.jsx(Ck,{name:t}),e.jsx(he,{size:"m",children:"default"})]}),FW="_card_gk6g4_1",qW={card:FW},Rs={delete:{dialogTitle:"Delete the branch?",alert:t=>e.jsxs(e.Fragment,{children:["This will permanently delete the branch ",e.jsx("code",{children:t}),". Are you sure you want proceed?"]}),confirmButton:"Delete"},deleteObsolete:{dialogTitle:"Delete all obsolete branches?",alert:"This will permanently delete all obsolete branches. Are you sure you want to proceed?",confirmButton:"Delete"},deleteShown:{dialogTitle:"Delete the branches shown in the list?",alert:"This will permanently delete all the branches shown in the list. Are you sure you want to proceed?",confirmButton:"Delete"},deletePreview:{dialogTitle:"Delete all preview branches?",alert:"This will permanently delete all preview branches. Are you sure you want to proceed?",confirmButton:"Delete"}},zW=()=>{const{confirm:t}=Oe();return m.useCallback(s=>t({header:Rs.delete.dialogTitle,appearance:"error",confirmButtonText:Rs.delete.confirmButton,text:e.jsx(Q,{appearance:"error",children:Rs.delete.alert(s)})}),[t])},HW=()=>{const{confirm:t}=Oe();return m.useCallback(()=>t({header:Rs.deletePreview.dialogTitle,text:e.jsx(Q,{appearance:"error",children:Rs.deletePreview.alert}),confirmButtonText:Rs.deletePreview.confirmButton,appearance:"error"}),[t])},VW=()=>{const{confirm:t}=Oe();return m.useCallback(()=>t({header:Rs.deleteObsolete.dialogTitle,text:e.jsx(Q,{appearance:"error",children:Rs.deleteObsolete.alert}),confirmButtonText:Rs.deleteObsolete.confirmButton,appearance:"error"}),[t])},WW=()=>{const{confirm:t}=Oe();return m.useCallback(()=>t({header:Rs.deleteShown.dialogTitle,text:e.jsx(Q,{appearance:"error",children:Rs.deleteShown.alert}),confirmButtonText:Rs.deleteShown.confirmButton,appearance:"error"}),[t])},nm=()=>{const t=Sc("metrics_export");return{datadog:!t,opentelemetry:!t}},GW=()=>({datadog:gt.ExportMetrics,opentelemetry:gt.ExportMetrics}),Gb=()=>({opentelemetry:!ee("otel_integration_no_beta_badge")}),Jt=t=>["integrations",t],Yd=()=>{const{projectId:t}=O();return st({queryKey:Jt(t),queryFn:async()=>{var a;const[s,n]=await Promise.all([q.listUserAvailableApplications({project_id:t}),q.getProjectMonitoringIntegrations(t).catch(()=>({data:{integrations:[]}}))]),r=(a=n==null?void 0:n.data.integrations)==null?void 0:a.reduce((i,{status:c,config:l})=>{switch(l.type){case"debug":return i;case"datadog":return{...i,datadog:{site:l.site,status:c,logs:l.logs,metrics:l.metrics}};case"opentelemetry":return{...i,opentelemetry:{status:c,connection:l.connection,telemetry:l.telemetry,resource:l.resource}}}return i},{});return{...s==null?void 0:s.data.applications.filter(i=>i.active).reduce((i,c)=>c.client_type==="vercel"?c.vercel?{...i,vercel:c.vercel}:i:c.client_type==="UNKNOWN"?i:{...i,[c.client_type]:{}},{}),...r}}})},Ca=t=>["integrations_by_project",t],kk=({enabled:t=!0})=>{const{orgId:s}=Y(),n=c1(s);return st({queryKey:Ca(s),queryFn:()=>q.listProjects({limit:200,org_id:s}),select:({data:r})=>r.integrations??r.applications,enabled:t&&!n})},Au="vercel-configuration",Oc=()=>{const{orgId:t,isLoading:s}=Y(),n=ie(),{data:r,isError:o,isPending:a}=st({queryKey:[Au,t],queryFn:()=>q.getVercelConfiguration({org_id:t}),select:b=>b.data,retry:!1,enabled:!s}),i=m.useMemo(()=>!!(!o&&(r!=null&&r.configuration)),[r,o]),c=m.useMemo(()=>{var b;return(b=r==null?void 0:r.configuration)==null?void 0:b.configuration_id},[r]),l=m.useMemo(()=>{var b,f;return(f=(b=r==null?void 0:r.configuration)==null?void 0:b.projects)==null?void 0:f.map(y=>({id:y.id,name:y.name,url:y.url,neon_project_id:y.neon_project_id,neon_project_name:y.neon_project_name}))},[r]),{mutateAsync:d,isPending:u}=de({mutationFn:()=>q.deleteVercelConfiguration({org_id:t}),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Au,t]}),await n.invalidateQueries({queryKey:Ca(t)})}}),[h]=pb(),{mutateAsync:p,isPending:g}=de({mutationFn:async b=>{const f=await h({projectId:b.projectId,branchId:b.branchId,role:b.role.value},!0).unwrap();return await q.connectVercelProject(b.projectId,{configuration_id:b.configurationId,vercel_project_id:b.vercelProjectId,role_name:b.role.value,database_name:b.database.value,password:f,create_dev_branch:!0,auto_delete_obsolete_branches:!0}),b},onSuccess:async b=>{await n.invalidateQueries({queryKey:[Au]}),await n.invalidateQueries({queryKey:Ca(b.orgId)}),await n.invalidateQueries({queryKey:Jt(b.projectId)})}}),{mutateAsync:_,isPending:x}=de({mutationFn:async b=>q.unlinkProjectFromVercelIntegrations(b),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Au,t]}),await n.invalidateQueries({queryKey:Ca(t)})}}),j=m.useMemo(()=>(l==null?void 0:l.filter(b=>b.neon_project_id).map(b=>b.id))??[],[l]);return{isConfigured:i,isLoading:a||s,configurationId:c,projects:l,connectedVercelProjectIds:j,connectProjectAsync:p,isConnecting:g,removeIntegration:d,isRemoving:u,disconnectProject:_,isDisconnecting:x}},Kb=t=>{const{orgId:s,isLoading:n}=Y(),{isOrgAdmin:r}=wt(),{isCollaborator:o,isLoading:a}=Cc(t),i=n||a,c=s===void 0&&!o;return{isAllowedToInstall:m.useMemo(()=>!i&&(c||r),[i,c,r]),isCollaborator:o,isLoading:i}},Rc=({projectId:t})=>["getProjectVercelBranches",t],Ik=({projectId:t})=>{const s=st({queryKey:Rc({projectId:t}),queryFn:async()=>(await q.getProjectVercelBranches(t)).data});return m.useEffect(()=>{s.error&&H(s.error)},[s.error]),s},Pk=({projectId:t})=>["deleteProjectVercelBranches",t],KW=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:Pk({projectId:t}),mutationFn:async()=>(await q.deleteProjectVercelBranches(t)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Rc({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},Tk=({projectId:t})=>["triggerDeleteObsoletePreviewBranches",t],QW=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:Tk({projectId:t}),mutationFn:async()=>(await q.triggerDeleteObsoletePreviewBranches(t)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Rc({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},Nk=({projectId:t})=>["deleteProjectBranches",t],YW=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:Nk({projectId:t}),mutationFn:async a=>(await q.deleteProjectBranches(t,a)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Rc({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},JW=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:["deleteProjectBranch",t],mutationFn:async({branchId:a})=>(await q.deleteProjectBranch(t,a)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Rc({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},ZW=({projectId:t})=>["getProjectVercelSettings",t],XW=({projectId:t})=>st({queryKey:ZW({projectId:t}),queryFn:async()=>(await q.getProjectVercelSettings(t)).data}),eG=({projectId:t},{onError:s,...n}={})=>de({mutationKey:["setProjectVercelSettings",t],mutationFn:async r=>(await q.setProjectVercelSettings(t,r)).data,onError:(r,...o)=>{H(r),s==null||s(r,...o)},...n}),tG=({projectId:t})=>["getProjectVercelVars",t],sG=({projectId:t})=>st({queryKey:tG({projectId:t}),queryFn:async()=>(await q.getProjectVercelVars(t)).data}),nG=({projectId:t},{onSuccess:s,...n}={})=>{const r=ie();return de({mutationKey:["setProjectVercelVars",t],mutationFn:async o=>(await q.setProjectVercelVars(t,o)).data,onSuccess:(...o)=>{r.invalidateQueries({queryKey:Rc({projectId:t})}),s==null||s(...o)},...n})},zl={obsolete:"obsolete",createdDateTooltip:"Branch create date",obsoleteTooltip:e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Obsolete branches no longer have"}),e.jsx("div",{children:"related git branches."})]}),linkMore:t=>`${t} more`,branchDeleted:"The branch has been deleted."},rG="_branch_x7a33_1",oG="_branchContent_x7a33_9",aG="_branchRow_x7a33_16",_g={branch:rG,branchContent:oG,branchRow:aG},iG=({projectId:t,branch:s,shouldDisplayObsoleteBadge:n=!1})=>{const{trackUiInteraction:r}=k(),o=Nm({filters:{mutationKey:Pk({projectId:t}),status:"pending"}}).length!==0,a=Nm({filters:{mutationKey:Tk({projectId:t}),status:"pending"}}).length!==0,i=Nm({filters:{mutationKey:Nk({projectId:t}),status:"pending"}}).some(h=>{var p;return(p=h.variables)==null?void 0:p.branch_ids.includes(s.id)}),c=zW(),l=JW({projectId:t},{onSuccess:()=>re(zl.branchDeleted,{containerId:ya.Drawer})}),d=m.useCallback(async()=>{if(r("vercel_integration_delete_branch_clicked"),!await c(s.name)){r("vercel_integration_delete_branch_dismissed");return}r("vercel_integration_delete_branch_confirmed"),l.mutate({branchId:s.id})},[r,c,s.name,s.id,l]),u=!s.hasGitBranch;return e.jsxs("div",{className:_g.branch,"data-qa":"vercel-preview-branch",role:"listitem","aria-label":s.name,children:[e.jsxs("div",{className:_g.branchContent,children:[e.jsx(Ck,{name:s.name}),e.jsxs("div",{className:_g.branchRow,children:[e.jsx(Z,{content:zl.createdDateTooltip,children:e.jsx("span",{children:le(s.created_at,ve.Date)})}),n&&u&&e.jsx(Z,{content:zl.obsoleteTooltip,children:e.jsx(he,{size:"m",children:zl.obsolete})})]})]}),e.jsx(kr,{iconName:"trash",iconSize:20,appearance:"error",disabled:l.isPending||o||a&&u||i,onClick:d})]})},cG="_linkMore_c3m6v_1",lG={linkMore:cG},dG=({linkMoreCount:t})=>{const{projectId:s}=O();return e.jsxs(A,{className:lG.linkMore,href:F(C.ProjectsItemBranches,{projectId:s}),children:[e.jsx("div",{children:zl.linkMore(t)}),e.jsx(L,{name:"arrow_right",size:20})]})},uG=({projectId:t,branches:s,showObsoleteBadge:n=!1,maxShownBranches:r})=>{const o=s.slice(0,r);return e.jsxs("div",{className:qW.card,role:"list","aria-label":"preview branches",children:[o.map(a=>e.jsx(iG,{projectId:t,branch:a,shouldDisplayObsoleteBadge:n},a.id)),s.length>r&&e.jsx(dG,{linkMoreCount:s.length-r})]})},hG="_root_hxy9h_1",pG="_featured_hxy9h_10",mG="_background_hxy9h_14",gG="_card_hxy9h_23",_G="_header_hxy9h_42",fG="_description_hxy9h_48",hi={root:hG,featured:pG,background:mG,card:gG,header:_G,description:fG},bG=({integration:t,featured:s,beta:n,disabled:r})=>e.jsxs("div",{role:"listitem","aria-label":t.name,className:M(hi.root,{[hi.featured]:s}),children:[t.cardImage&&e.jsx("div",{className:hi.background,style:{backgroundImage:`url("${t.cardImage}")`}}),e.jsxs("div",{className:hi.card,children:[e.jsxs("div",{className:hi.header,children:[e.jsx(L,{name:t.logoImage,size:32}),e.jsx(wk,{title:t.name}),n&&e.jsx(he,{appearance:"experimental",size:"m",children:"Beta"})]}),e.jsx(T,{className:hi.description,children:t.description}),e.jsx(Sk,{integration:t,disabled:r})]})]}),xG="_root_sa3qa_1",jG="_logoWrapper_sa3qa_12",yG="_description_sa3qa_19",vG="_status_sa3qa_28",wG="_buttons_sa3qa_36",cl={root:xG,logoWrapper:jG,description:yG,status:vG,buttons:wG},SG=({integration:t,actionButton:s,status:n})=>{const r=wa[t.categoryId];return e.jsxs("div",{className:cl.root,role:"listitem","aria-label":t.name,children:[e.jsx("div",{className:cl.logoWrapper,children:e.jsx(L,{name:t.logoImage,size:32})}),e.jsxs("div",{className:cl.description,children:[e.jsx(wk,{title:t.name}),e.jsx(T,{children:r})]}),n&&e.jsxs("div",{className:cl.status,children:[e.jsx(T,{children:"Status"}),e.jsx(Yf,{appearance:n.appearance,size:"s",label:n.label,pending:(n==null?void 0:n.appearance)==="loading"})]}),e.jsx("div",{className:cl.buttons,children:s??e.jsx(Sk,{integration:t})})]})},CG="_section_1wv1q_1",kG="_title_1wv1q_5",IG="_cards_1wv1q_9",er={section:CG,title:kG,cards:IG},PG=()=>e.jsxs("div",{children:[e.jsxs("div",{className:er.section,children:[e.jsx($,{className:er.title,height:25,width:120}),e.jsxs("div",{className:er.cards,children:[e.jsx($,{height:64,width:284}),e.jsx($,{height:64,width:284}),e.jsx($,{height:64,width:284}),e.jsx($,{height:64,width:284})]})]}),e.jsxs("div",{className:er.section,children:[e.jsx($,{className:er.title,height:25,width:120}),e.jsxs("div",{className:er.cards,children:[e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284})]})]}),e.jsxs("div",{className:er.section,children:[e.jsx($,{className:er.title,height:25,width:130}),e.jsxs("div",{className:er.cards,children:[e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284}),e.jsx($,{height:328,width:284})]})]})]}),Ak=()=>{const t=Yd(),s=nm(),n=GW();return m.useMemo(()=>Object.entries(rR).sort(([,r],[,o])=>r.name.localeCompare(o.name)).reduce((r,[o,a])=>{var l;const i=!!((l=t.data)!=null&&l[o]),c={...a,isAdded:i,upgradeType:n[o]};return c.isAdded&&(r[ho.Added]=[...r[ho.Added],c]),c.isFeatured&&(r[ho.Featured]=[...r[ho.Featured],c]),r[c.categoryId]=[...r[c.categoryId],{...c,disabled:!!s[o]}],r},Object.fromEntries(Object.keys(wa).map(r=>[r,[]]))),[s,t.data,n])},hf=t=>[`${t}-github-integration`],$r=()=>{const t=ie(),{orgId:s,isLoading:n}=Y(),{data:r,isError:o,isPending:a}=st({queryKey:["github-app",s],queryFn:()=>q.getGitHubInstallation({org_id:s}),retry:!1,enabled:!n}),i=m.useMemo(()=>!!(!o&&(r!=null&&r.data.installation_id)),[r,o]),c=m.useMemo(()=>r==null?void 0:r.data.repositories,[r]),l=m.useMemo(()=>r==null?void 0:r.data.installation_id,[r]),{mutateAsync:d,isPending:u}=de({mutationFn:()=>q.deleteGitHubInstallation({org_id:s}),onSuccess:async()=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:Ca(s)})}}),{mutateAsync:h,isPending:p}=de({mutationFn:({projectId:x,repositoryId:j})=>q.createGitHubAppProject(x,{repository_id:j}),onSuccess:async(x,{projectId:j})=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:Jt(j)}),await t.invalidateQueries({queryKey:Ca(s)}),await t.invalidateQueries({queryKey:hf(j)})}}),{mutateAsync:g,isPending:_}=de({mutationFn:({projectId:x})=>q.deleteProjectGitHubIntegration(x),onSuccess:async(x,{projectId:j})=>{await t.invalidateQueries({queryKey:["github-app",s]}),await t.invalidateQueries({queryKey:Jt(j)}),await t.invalidateQueries({queryKey:Ca(s)}),await t.invalidateQueries({queryKey:hf(j)})}});return{isInstalled:i,repositories:c,isLoading:a||n,removeApp:d,isRemoving:u,installationId:l,connectRepository:h,isConnecting:p,disconnectRepository:g,isDisconnecting:_}},Ek=t=>{const{data:s,isError:n,isPending:r}=st({queryKey:hf(t),queryFn:()=>q.getGitHubAppProject(t),select:l=>l.data,retry:!1}),o=m.useMemo(()=>s&&!n?s.current_repository:"",[s,n]),a=m.useMemo(()=>s&&!n?s.current_owner:"",[s,n]),i=m.useMemo(()=>s&&!n?`${s.current_owner}/${s.current_repository}`:"",[s,n]),c=m.useMemo(()=>s&&!n&&s.current_repository_id,[s,n]);return{connectedRepositoryName:o,connectedRepositoryOwnerUsername:a,connectedRepositoryFullName:i,connectedRepositoryId:c,isLoading:r}},$k=()=>{const{projectId:t}=O();return Ek(t)},rm=t=>{const{org:s,isLoading:n}=Y(),{isOrgAdmin:r,isLoading:o}=wt(),{isCollaborator:a,isLoading:i}=Cc(t),c=n||i||o;return c?{canManageIntegration:!1,isLoading:c}:a?{canManageIntegration:!1,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},TG="_root_16yr6_1",NG="_root_darkTheme_16yr6_8",Sy={root:TG,root_darkTheme:NG},om=({width:t,height:s,children:n})=>{const r=vo();return e.jsx("div",{className:M(Sy.root,{[Sy.root_darkTheme]:r===cn.Dark}),style:{width:`${t}px`,height:`${s}px`},children:n})},AG="_root_ud9pv_1",EG="_accent_ud9pv_13",$G="_ghost_ud9pv_17",fg={root:AG,accent:EG,ghost:$G},Le=({width:t="fit-content",height:s="fit-content",appearance:n="default",children:r,className:o,position:a,level:i=1})=>{const[c,l]=a;return e.jsx("div",{className:M(fg.root,o,{[fg.accent]:n==="accent",[fg.ghost]:n==="ghost"}),style:{width:typeof t=="string"?t:`${t}px`,height:typeof s=="string"?s:`${s}px`,top:`${c}px`,left:`${l}px`,zIndex:i},children:r})},OG=t=>m.createElement("svg",{width:17,height:49,viewBox:"0 0 17 49",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M16.4513 44.8315C16.9106 44.5822 17.0808 44.0079 16.8315 43.5487L12.7693 36.0653C12.5201 35.6061 11.9457 35.4359 11.4865 35.6851C11.0273 35.9344 10.8571 36.5088 11.1064 36.968L14.7172 43.6199L8.06528 47.2307C7.60606 47.4799 7.43587 48.0543 7.68514 48.5135C7.93442 48.9727 8.50876 49.1429 8.96798 48.8936L16.4513 44.8315ZM16.8315 5.45135C17.0808 4.99213 16.9106 4.41779 16.4513 4.16851L8.96798 0.106365C8.50876 -0.142906 7.93442 0.0272866 7.68514 0.486504C7.43587 0.945721 7.60606 1.52007 8.06528 1.76934L14.7172 5.38013L11.1064 12.032C10.8571 12.4912 11.0273 13.0656 11.4865 13.3149C11.9457 13.5641 12.5201 13.3939 12.7693 12.9347L16.8315 5.45135ZM16 44C16.2688 43.0929 16.2691 43.093 16.2694 43.0931C16.2695 43.0931 16.2697 43.0932 16.2698 43.0932C16.2698 43.0932 16.2697 43.0932 16.2694 43.0931C16.2686 43.0928 16.267 43.0924 16.2645 43.0916C16.2596 43.0901 16.2511 43.0875 16.2392 43.0838C16.2154 43.0763 16.178 43.0644 16.1278 43.0479C16.0276 43.0149 15.8766 42.9633 15.6822 42.8917C15.2932 42.7486 14.7313 42.5258 14.0542 42.2119C12.6977 41.5831 10.8918 40.5942 9.09019 39.1562C5.49776 36.2889 1.94609 31.6634 1.94609 24.5L0.053911 24.5C0.0539108 32.3917 4.00224 37.5162 7.90981 40.6351C9.85818 42.1902 11.8023 43.2536 13.2583 43.9286C13.9875 44.2666 14.5974 44.5088 15.0287 44.6675C15.2445 44.7469 15.4158 44.8055 15.5352 44.8449C15.595 44.8646 15.6418 44.8795 15.6748 44.8898C15.6912 44.895 15.7043 44.899 15.7137 44.9018C15.7184 44.9033 15.7223 44.9044 15.7252 44.9053C15.7266 44.9057 15.7279 44.9061 15.7289 44.9064C15.7294 44.9066 15.73 44.9067 15.7302 44.9068C15.7307 44.907 15.7312 44.9071 16 44ZM1.94609 24.5C1.94609 17.3366 5.49776 12.7111 9.09019 9.84376C10.8918 8.40576 12.6977 7.41694 14.0542 6.78808C14.7313 6.47418 15.2932 6.25143 15.6822 6.10827C15.8766 6.03672 16.0276 5.98514 16.1278 5.95208C16.178 5.93556 16.2154 5.92367 16.2392 5.91623C16.2511 5.91251 16.2596 5.9099 16.2645 5.90839C16.267 5.90763 16.2686 5.90715 16.2694 5.90694C16.2697 5.90683 16.2698 5.90679 16.2698 5.90681C16.2697 5.90683 16.2695 5.9069 16.2694 5.90691C16.2691 5.90699 16.2688 5.9071 16 5C15.7312 4.0929 15.7307 4.09304 15.7302 4.09319C15.73 4.09327 15.7294 4.09344 15.7289 4.09359C15.7279 4.09389 15.7266 4.09426 15.7252 4.0947C15.7223 4.09557 15.7184 4.09673 15.7137 4.09816C15.7043 4.10104 15.6912 4.10504 15.6748 4.11019C15.6418 4.12049 15.595 4.1354 15.5352 4.1551C15.4158 4.1945 15.2445 4.25313 15.0287 4.33252C14.5974 4.49124 13.9875 4.73337 13.2583 5.07141C11.8023 5.74644 9.85818 6.80978 7.90981 8.36489C4.00224 11.4838 0.0539111 16.6083 0.053911 24.5L1.94609 24.5Z",fill:"currentColor"})),Qb=t=>m.createElement("svg",{width:78,height:12,viewBox:"0 0 78 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.5926 0.4907L77.5509 5.44907C77.8552 5.75334 77.8552 6.24666 77.5509 6.55093L72.5926 11.5093C72.2883 11.8136 71.795 11.8136 71.4907 11.5093C71.1864 11.205 71.1864 10.7117 71.4907 10.4074L75.119 6.77913H1.00002C0.569716 6.77913 0.220886 6.4303 0.220886 6C0.220886 5.56969 0.569716 5.22086 1.00002 5.22086H75.119L71.4907 1.59256C71.1864 1.28829 71.1864 0.79497 71.4907 0.4907C71.795 0.186429 72.2883 0.186429 72.5926 0.4907Z",fill:"currentColor"})),Eu=t=>m.createElement("svg",{width:19,height:14,viewBox:"0 0 19 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M18.669 7.66899C19.0385 7.29952 19.0385 6.70048 18.669 6.33101L12.6481 0.310139C12.2786 -0.0593324 11.6796 -0.0593324 11.3101 0.310139C10.9407 0.679609 10.9407 1.27864 11.3101 1.64811L16.662 7L11.3101 12.3519C10.9407 12.7214 10.9407 13.3204 11.3101 13.6899C11.6796 14.0593 12.2786 14.0593 12.6481 13.6899L18.669 7.66899ZM1 6.05391C0.477489 6.05391 0.0539112 6.47749 0.0539112 7C0.0539112 7.52251 0.477489 7.94609 1 7.94609V6.05391ZM18 6.05391L1 6.05391V7.94609L18 7.94609V6.05391Z",fill:"currentColor"})),RG=t=>m.createElement("svg",{width:22,height:56,viewBox:"0 0 22 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M1.5 1L15 0.999999C18.3137 0.999999 21 3.68629 21 7L21 49C21 52.3137 18.3137 55 15 55L1.5 55",stroke:"currentColor",strokeWidth:1.55826,strokeLinecap:"round"})),BG=t=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M16.0714 29.8823C14.6651 29.8823 13.2717 29.4694 12.1751 28.6566L6.6273 24.5152C5.1565 23.4185 4.00824 21.122 4.00824 19.3028V9.70391C4.00824 7.71704 5.46614 5.60114 7.3369 4.90445L13.7749 2.49181C15.0522 2.01445 17.0648 2.01445 18.3421 2.49181L24.7801 4.90445C26.6509 5.60114 28.1088 7.71704 28.1088 9.70391V19.2899C28.1088 21.122 26.9605 23.4056 25.4897 24.5023L19.9419 28.6437C18.8711 29.4694 17.4777 29.8823 16.0714 29.8823ZM14.4587 4.31097L8.0207 6.7236C6.92404 7.13646 5.95641 8.52985 5.95641 9.71681V19.3028C5.95641 20.5285 6.82083 22.2444 7.78846 22.9669L13.3362 27.1084C14.8199 28.218 17.3229 28.218 18.8195 27.1084L24.3673 22.9669C25.3478 22.2315 26.1993 20.5285 26.1993 19.3028V9.70391C26.1993 8.52985 25.2317 7.13646 24.135 6.7107L17.697 4.29806C16.8197 3.98842 15.3231 3.98842 14.4587 4.31097Z",fill:"currentColor"}),m.createElement("path",{d:"M14.3426 18.877C14.0975 18.877 13.8524 18.7867 13.6588 18.5932L11.5816 16.516C11.2075 16.1418 11.2075 15.5226 11.5816 15.1484C11.9558 14.7743 12.5751 14.7743 12.9492 15.1484L14.3426 16.5418L19.2066 11.6778C19.5807 11.3037 20.2 11.3037 20.5742 11.6778C20.9483 12.052 20.9483 12.6713 20.5742 13.0454L15.0264 18.5932C14.8329 18.7867 14.5878 18.877 14.3426 18.877Z",fill:"currentColor"})),LG="_flex_x26u2_1",DG="_green_x26u2_7",MG="_gray_x26u2_11",$u={flex:LG,green:DG,gray:MG},UG=()=>e.jsxs(om,{width:652,height:157,children:[e.jsxs(Le,{className:$u.flex,width:222,height:36,position:[61,43],children:[e.jsx(L,{name:"github",size:20}),"New Pull Request"]}),e.jsx(Le,{appearance:"ghost",position:[35,284],children:e.jsx(he,{size:"s",children:"Github action"})}),e.jsx(Le,{appearance:"ghost",position:[79,297],className:$u.gray,children:e.jsx(Qb,{})}),e.jsxs(Le,{className:$u.flex,width:222,height:36,appearance:"accent",position:[61,406],children:[e.jsx(L,{name:"neon_mono",size:20,className:$u.green}),"New Neon branch"]})]}),FG="_flex_x26u2_1",qG="_green_x26u2_7",zG="_gray_x26u2_11",Ou={flex:FG,green:qG,gray:zG},HG=()=>e.jsxs(om,{width:672,height:157,children:[e.jsxs(Le,{className:Ou.flex,width:219,height:36,position:[61,41],appearance:"accent",children:[e.jsx(L,{name:"neon_mono",size:20,className:Ou.green}),"Project"]}),e.jsx(Le,{appearance:"ghost",position:[32,250],children:e.jsx(he,{size:"s",children:"Neon Project ID + API KEY"})}),e.jsx(Le,{appearance:"ghost",position:[79,297],className:Ou.gray,children:e.jsx(Qb,{})}),e.jsxs(Le,{className:Ou.flex,width:219,height:36,position:[61,403],children:[e.jsx(L,{name:"github",size:20}),"Repository"]})]}),VG="_flex_1vp8t_1",WG="_green_1vp8t_7",GG="_hint_1vp8t_11",KG="_actionElement_1vp8t_15",QG="_rotate_1vp8t_24",Wt={flex:VG,green:WG,hint:GG,actionElement:KG,rotate:QG},Ok=()=>e.jsxs(om,{width:652,height:157,children:[e.jsx(Le,{position:[24,67],appearance:"ghost",className:Wt.hint,children:"Add Github App"}),e.jsx(Le,{position:[85,42],appearance:"ghost",children:e.jsx(L,{name:"neon_mono",size:28})}),e.jsx(Le,{position:[90,85],appearance:"ghost",className:M(Wt.rotate,Wt.green),children:e.jsx(Eu,{})}),e.jsx(Le,{position:[81,100],appearance:"ghost",level:2,className:Wt.green,children:e.jsx(BG,{})}),e.jsx(Le,{position:[90,128],appearance:"ghost",className:Wt.green,children:e.jsx(Eu,{})}),e.jsx(Le,{position:[82,155],appearance:"ghost",children:e.jsx(L,{name:"github",size:28})}),e.jsx(Le,{position:[24,308],appearance:"ghost",className:Wt.hint,children:"Connect"}),e.jsx(Le,{position:[72,233],appearance:"ghost",className:Wt.green,children:e.jsx(OG,{})}),e.jsxs(Le,{className:Wt.flex,width:162,height:36,position:[58,253],children:[e.jsx(L,{name:"neon_mono",size:20}),"Project"]}),e.jsxs(Le,{className:Wt.flex,width:162,height:36,position:[97,253],children:[e.jsx(L,{name:"github",size:20}),"Repository"]}),e.jsx(Le,{position:[24,495],appearance:"ghost",className:Wt.hint,children:"Add Github Actions"}),e.jsxs(Le,{className:Wt.actionElement,width:55,height:73,position:[59,457],children:[e.jsx(L,{name:"github",size:20}),"PR"]}),e.jsx(Le,{position:[88,501],appearance:"ghost",level:2,className:Wt.green,children:e.jsx(Eu,{})}),e.jsxs(Le,{className:Wt.actionElement,width:55,height:73,position:[59,523],children:[e.jsx(L,{name:"github",size:20}),"Action"]}),e.jsx(Le,{position:[88,567],appearance:"ghost",level:2,className:Wt.green,children:e.jsx(Eu,{})}),e.jsxs(Le,{className:Wt.actionElement,width:55,height:73,position:[59,589],appearance:"accent",children:[e.jsx(L,{name:"neon_mono",size:20}),"Branch"]})]}),YG="_flex_1y6h1_1",JG="_gray_1y6h1_7",ZG="_deploymentElement_1y6h1_11",XG="_dots_1y6h1_16",eK="_dot_1y6h1_16",tr={flex:YG,gray:JG,deploymentElement:ZG,dots:XG,dot:eK},Rk=()=>e.jsxs(om,{width:652,height:157,children:[e.jsxs(Le,{className:tr.flex,width:216,height:36,position:[33,44],children:[e.jsx(L,{name:"github",size:20}),"Code branch"]}),e.jsxs(Le,{className:tr.flex,width:216,height:36,position:[87,44],children:[e.jsx(L,{name:"neon_mono",size:20}),"Data branch"]}),e.jsx(Le,{appearance:"ghost",position:[51,259],className:tr.gray,children:e.jsx(RG,{})}),e.jsx(Le,{appearance:"ghost",position:[74,279],className:tr.gray,children:e.jsx(Qb,{})}),e.jsxs(Le,{width:190,height:106,position:[26,423],appearance:"accent",className:tr.deploymentElement,children:[e.jsxs("div",{className:tr.dots,children:[e.jsx("div",{className:tr.dot}),e.jsx("div",{className:tr.dot}),e.jsx("div",{className:tr.dot})]}),"Preview deployment with dedicated database"]})]}),Hs={connectedTitle:"Your project is connected",connectedDescription:t=>e.jsxs(e.Fragment,{children:["We created a"," ",e.jsx(A,{href:t?`${F(C.OrgSettings,{orgId:t})}#api-keys`:`${C.UserSettings}#api-keys`,children:"Neon API key"})," ","for your project and added the following secrets and variables to your GitHub repository:"]}),actionTitle:"Setting up your GitHub Actions workflow",addActionTitle:"Add the GitHub Actions workflow to your repo",addActionDescription:e.jsxs(e.Fragment,{children:[e.jsxs("ul",{children:[e.jsxs("li",{children:["In your GitHub repository, create a ",e.jsx(ke,{children:".yml"})," file in your",e.jsx(ke,{children:".github/workflows"})," directory; for example:"," ",e.jsx(ke,{children:"neon_workflow.yml"}),"."]}),e.jsxs("li",{children:["Copy the following YAML contents into your"," ",e.jsx(ke,{children:"neon_workflow.yml"})," file."]}),e.jsx("li",{children:"Commit your changes."})]}),e.jsx("br",{}),e.jsxs("p",{children:["The GitHub Actions workflow creates a new database branch with each pull request, which you can view on the ",e.jsx("b",{children:"Branches"})," page in the Neon Console. When you close the pull request, the branch is deleted."]})]}),nextStepsTitle:"Next steps",nextStepsDescription:"For more about integrating and building workflows with GitHub Actions, please refer to the",guide:"Neon GitHub integration guide",apiKey:"NEON_API_KEY",projectId:"NEON_PROJECT_ID",code:`name: Create/Delete Branch for Pull Request

on:
  pull_request:
    types:
      - opened
      - reopened
      - synchronize
      - closed

concurrency:
  group: \${{ github.workflow }}-\${{ github.ref }}

jobs:
  setup:
    name: Setup
    outputs:
      branch: \${{ steps.branch_name.outputs.current_branch }}
    runs-on: ubuntu-latest
    steps:
      - name: Get branch name
        id: branch_name
        uses: tj-actions/branch-names@v8

  create_neon_branch:
    name: Create Neon Branch
    outputs:
      db_url: \${{ steps.create_neon_branch_encode.outputs.db_url }}
      db_url_with_pooler: \${{ steps.create_neon_branch_encode.outputs.db_url_with_pooler }}
    needs: setup
    if: |
      github.event_name == 'pull_request' && (
      github.event.action == 'synchronize'
      || github.event.action == 'opened'
      || github.event.action == 'reopened')
    runs-on: ubuntu-latest
    steps:
      - name: Create Neon Branch
        id: create_neon_branch
        uses: neondatabase/create-branch-action@v5
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch_name: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}

# The step above creates a new Neon branch.
# You may want to do something with the new branch, such as run migrations, run tests
# on it, or send the connection details to a hosting platform environment.
# The branch DATABASE_URL is available to you via:
# "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}".
# It's important you don't log the DATABASE_URL as output as it contains a username and
# password for your database.
# For example, you can uncomment the lines below to run a database migration command:
#      - name: Run Migrations
#        run: npm run db:migrate
#        env:
#          # to use pooled connection
#          DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}"
#          # OR to use unpooled connection
#          # DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url }}"

# Following the step above, which runs database migrations, you may want to check
# for schema changes in your database. We recommend using the following action to
# post a comment to your pull request with the schema diff. For this action to work,
# you also need to give permissions to the workflow job to be able to post comments
# and read your repository contents. Add the following permissions to the workflow job:
#
# permissions:
#   contents: read
#   pull-requests: write
#
# You can also check out https://github.com/neondatabase/schema-diff-action for more
# information on how to use the schema diff action.
# You can uncomment the lines below to enable the schema diff action.
#      - name: Post Schema Diff Comment to PR
#        uses: neondatabase/schema-diff-action@v1
#        with:
#          project_id: \${{ vars.NEON_PROJECT_ID }}
#          compare_branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
#          api_key: \${{ secrets.NEON_API_KEY }}

  delete_neon_branch:
    name: Delete Neon Branch
    needs: setup
    if: github.event_name == 'pull_request' && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - name: Delete Neon Branch
        uses: neondatabase/delete-branch-action@v3
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}`},tK="_section_f3i6c_1",sK="_connectedDescription_f3i6c_7",nK="_repoBadge_f3i6c_16",rK="_description_f3i6c_25",oK="_codeBlock_f3i6c_41",Fo={section:tK,connectedDescription:sK,repoBadge:nK,description:rK,codeBlock:oK},aK=()=>{const{trackUiInteraction:t}=k(),{connectedRepositoryFullName:s}=$k(),{orgId:n}=Y();return e.jsxs(e.Fragment,{children:[s&&e.jsx(mt,{title:Hs.connectedTitle,children:e.jsxs("div",{className:Fo.section,children:[e.jsx(A,{className:Fo.repoBadge,icon:"external_link",iconSize:"s",href:`https://github.com/${s}`,openInNewTab:!0,onClick:()=>{t("github_integration_repository_link_clicked")},children:s}),e.jsxs("div",{className:Fo.connectedDescription,children:[e.jsx(T,{children:Hs.connectedDescription(n)}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(A,{openInNewTab:!0,href:`https://github.com/${s}/settings/secrets/actions`,onClick:()=>{t("github_integration_github_secrets_link_clicked")},children:Hs.apiKey})}),e.jsx("li",{children:e.jsx(A,{openInNewTab:!0,href:`https://github.com/${s}/settings/variables/actions`,onClick:()=>{t("github_integration_github_variables_link_clicked")},children:Hs.projectId})})]})]})]})}),e.jsx(mt,{title:Hs.actionTitle,children:e.jsxs("div",{className:Fo.section,children:[e.jsx(UG,{}),e.jsxs("div",{className:Fo.description,children:[e.jsx(z,{level:5,children:Hs.addActionTitle}),e.jsx(T,{children:Hs.addActionDescription})]}),e.jsx(Tr,{collapsedHeight:109,className:Fo.codeBlock,copy:{onCopy:()=>{t("github_integration_workflow_action_copied")}},onExpandClick:()=>{t("github_integration_workflow_action_expand_clicked")},mode:"yaml",children:Hs.code}),e.jsxs("div",{className:Fo.description,children:[e.jsx(z,{level:5,children:Hs.nextStepsTitle}),e.jsxs(T,{children:[Hs.nextStepsDescription," ",e.jsx(A,{href:"https://neon.tech/docs/guides/neon-github-app",openInNewTab:!0,onClick:()=>{t("github_integration_docs_guide_link_clicked")},children:Hs.guide}),"."]})]})]})}),e.jsx(Vb,{subject:"GitHub"})]})},sr={alert:"The GitHub App is installed.",title:"Connect your Neon project to a GitHub repository",connect:"Connect",label:"Select a repository to connect to this Neon project:",success:"The GitHub repo was successfully connected",required:"This field is required.",infoTitle:"Don't see your repository?",info:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You might need to authorize access to the repository in GitHub."}),e.jsxs("ul",{children:[e.jsxs("li",{children:["In GitHub, go to Profile ","->"," Settings ","->"," Applications ","->"," ","Installed GitHub Apps."]}),e.jsxs("li",{children:["Select Neon Postgres ","->"," Configure."]}),e.jsx("li",{children:"Grant access to the repository you want to connect, then Save."})]})]}),disabledTooltip:"This repository has already been connected to a Neon project"},iK="_alert_1lhe8_1",cK="_section_1lhe8_5",lK="_fieldWithButton_1lhe8_11",dK="_info_1lhe8_16",Ru={alert:iK,section:cK,fieldWithButton:lK,info:dK},uK=()=>{var d,u;const{trackUiInteraction:t}=k(),{projectId:s}=O(),{connectRepository:n,isConnecting:r,repositories:o}=$r(),a=m.useMemo(()=>(o==null?void 0:o.map(({id:h=0,name:p="",installed:g=!1})=>({value:h,label:p,disabled:g,disabledTooltip:sr.disabledTooltip})))??[],[o]),i=xe({defaultValues:{repositoryId:a.length===1?(d=a[0])==null?void 0:d.value:void 0}}),{formState:{errors:c}}=i,l=async h=>{try{const{repositoryId:p}=h;await n({projectId:s,repositoryId:p}),re(sr.success)}catch(p){H(p)}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{appearance:"success",className:Ru.alert,children:sr.alert}),e.jsx(mt,{title:sr.title,children:e.jsxs("div",{className:Ru.section,children:[e.jsx(HG,{}),e.jsx(It,{providerProps:i,onSubmit:l,children:e.jsx(R,{label:sr.label,error:(u=c.repositoryId)==null?void 0:u.message,children:e.jsxs("div",{className:Ru.fieldWithButton,children:[e.jsx(me,{name:"repositoryId",rules:{required:{value:!0,message:sr.required}},control:i.control,render:({field:{onChange:h,...p}})=>e.jsx(He,{options:a,filterable:!0,disabled:r,onChange:g=>{t("github_integration_repository_selector_repository_selected"),h(g)},...p})}),e.jsx(P,{type:"submit",size:"l",loading:r,disabled:r,onClick:()=>{t("github_integration_repository_selector_repository_submitted")},children:sr.connect})]})})}),e.jsxs("div",{className:Ru.info,children:[e.jsx(z,{level:5,children:sr.infoTitle}),e.jsx(T,{children:sr.info})]})]})})]})},qo={title:"Disconnect integration",description:t=>e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Disconnecting the integration performs the following actions for this Neon project:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Removes the ",e.jsx(ke,{children:"NEON_PROJECT_ID"})," variable from the connected GitHub repository"]}),e.jsx("li",{children:"Removes the Neon API key created by the integration from your Neon account"}),e.jsxs("li",{children:["Removes the ",e.jsx(ke,{children:"NEON_API_KEY"})," variable from the connected GitHub repository"]})]}),e.jsx("br",{}),e.jsxs("p",{children:["If you want to uninstall the integration from your Neon account entirely, you can do so from the ",e.jsx("b",{children:"Integrations"})," page in Neon"," ",e.jsx(A,{href:t?`${F(C.OrgIntegrations,{orgId:t})}#github`:`${C.UserIntegrations}#github`,children:"Account settings"}),"."]})]}),disconnect:"Disconnect",success:"The integration was successfully removed",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButton:"Disconnect"},hK="_description_d31pk_1",pK={description:hK},mK=({onRequestClose:t})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Oe(),{projectId:r}=O(),{isDisconnecting:o,disconnectRepository:a}=$r(),{orgId:i}=Y(),c=()=>{t(),re(qo.success)},l=async()=>{try{if(!await n({header:qo.confirmTitle,text:qo.confirmText,confirmButtonText:qo.confirmButton,appearance:"error"})){s("github_integration_disconnect_dismissed");return}s("github_integration_disconnect_confirmed"),await a({projectId:r}),c()}catch(d){H(d)}};return e.jsxs(mt,{title:qo.title,children:[e.jsx(T,{className:pK.description,children:qo.description(i)}),e.jsx(P,{"data-qa":"github_integration_remove",appearance:"secondary",loading:o,disabled:o,onClick:async()=>{s("github_integration_disconnect_clicked"),await l()},children:qo.disconnect})]})},bg={title:"GitHub integration",success:"GitHub App was successfully installed"},gK="_buttonWrapper_nih2t_1",_K={buttonWrapper:gK},fK=t=>t===cn.Dark?cn.Light:cn.Dark,Bk=({projectId:t,size:s="s",label:n,openInNewTab:r=!1,disabled:o=!1,tooltip:a,withIcon:i=!1,"data-qa":c,onClick:l,appearance:d="primary"})=>{const{token:u}=Ep(),h=vo(),{orgId:p}=Y(),g=m.useMemo(()=>{const _=new URLSearchParams;return t&&_.append("project_id",encodeURIComponent(t)),p&&_.append("org_id",encodeURIComponent(p)),_.size>0?`?${_}`:""},[p,t]);return e.jsx(Lt,{action:`${$p}/integrations/github/auth${g}`,target:r?"_blank":"_self",method:"POST",children:e.jsx(Z,{content:a,disabled:!o,children:e.jsxs("div",{className:_K.buttonWrapper,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:u}),e.jsx(P,{"data-qa":c,type:"submit",size:s,onClick:l,disabled:o,icon:i?"github":void 0,iconTheme:d==="primary"?fK(h):h,appearance:d,children:n})]})})})},ll={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),e.jsx("br",{}),e.jsxs("ul",{children:[e.jsx("li",{children:"Installing the GitHub app and authorizing it."}),e.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),e.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),e.jsx("br",{}),e.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},bK="_section_1amah_1",xg={section:bK},xK=()=>{const{trackUiInteraction:t}=k(),{isLoading:s}=Y(),{projectId:n}=O(),{canManageIntegration:r,isLoading:o}=rm(n),{isCollaborator:a,isLoading:i}=Cc(n);return s||o||i?e.jsxs("div",{className:xg.section,children:[e.jsx($,{height:285}),e.jsx($,{height:445}),e.jsx($,{height:108})]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{title:ll.previewTitle,children:e.jsxs("div",{className:xg.section,children:[e.jsx(T,{children:ll.previewDescription}),e.jsx(Rk,{})]})}),e.jsx(mt,{title:ll.settingTitle,children:e.jsxs("div",{className:xg.section,children:[e.jsx(T,{children:ll.settingDescription}),e.jsx(Ok,{}),e.jsx(Bk,{label:ll.installButton,projectId:n,disabled:!r,tooltip:a?jo.installIntegrationOnSharedProjectNotAllowed:jo.installIntegrationNotAllowed,onClick:()=>{t("github_integration_configure_clicked")},openInNewTab:!0})]})}),e.jsx(Vb,{subject:"GitHub"})]})},Bu=[{label:"Actions",value:"actions","data-qa":"github_integration_actions_tab"},{label:"Disconnect",value:"disconnect","data-qa":"github_integration_disconnect_tab"}],jK=({onRequestClose:t})=>{const{trackUiInteraction:s}=k(),{connectedRepositoryId:n,isLoading:r}=$k(),[o,a]=m.useState(Bu[0].value),i=c=>{c==="actions"?s("github_integration_actions_tab_clicked"):c==="disconnect"&&s("github_integration_disconnect_tab_clicked"),a(c)};return r?e.jsx(Wb,{}):n?e.jsxs(e.Fragment,{children:[e.jsx(pn,{options:Bu,value:o,onChange:i}),e.jsxs("div",{children:[o===Bu[0].value&&e.jsx(aK,{}),o===Bu[1].value&&e.jsx(mK,{onRequestClose:t})]})]}):e.jsx(uK,{})},yK=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=k(),{openedDrawerId:r,openDrawer:o,closeDrawer:a}=ko(),{isInstalled:i,isLoading:c}=$r(),{projectId:l}=O(),{isCollaborator:d,isLoading:u}=Cc(l),h=c||u,p=()=>{n(s?"github_integration_configured_settings_closed":"github_integration_available_settings_closed"),a()};return m.useEffect(()=>{window.location.hash==="#github_success"&&(window.history.replaceState(null,""," "),Te(e.jsx(Fe,{children:bg.success})),o(vr.GitHub))},[o]),e.jsx(Io,{"aria-label":bg.title,title:bg.title,isOpen:r===vr.GitHub,onRequestClose:p,iconName:"github",hideFeedback:!0,coverImage:{x1:L_,x2:L_},size:"l",isLoading:h,children:s||i&&!d?e.jsx(jK,{onRequestClose:p}):e.jsx(xK,{})})},am={integrationDescription:"Instant database branching with every Preview Deployment",projectConnectedWithSuccess:"Project connected with success"},jg={title:"Next steps",description:"To see the integration in action, ",linkText:"follow these steps"},vK="_section_2fiav_1",wK="_item_2fiav_7",Cy={section:vK,item:wK},Yb=()=>e.jsxs("div",{className:Cy.section,children:[e.jsx(z,{level:5,children:jg.title}),e.jsxs("div",{className:Cy.item,children:[e.jsx(L,{name:"rocket",size:20}),e.jsxs(T,{children:[jg.description,e.jsx(A,{href:MN,openInNewTab:!0,children:jg.linkText})]})]})]}),SK="_alert_rpcoa_1",CK="_autodelete_rpcoa_5",kK="_automationAlert_rpcoa_9",yg={alert:SK,autodelete:CK,automationAlert:kK},Xs={title:"Delete",obsolete:"obsolete",deleteObsolete:"Delete obsolete branches",deleteShown:"Delete the branches shown in this list",deleteAll:"Delete all preview branches",obsoleteBranchesDeleted:"Obsolete branches have been deleted.",shownBranchesDeleted:"The branches have been deleted.",allPreviewBranchesDeleted:"All preview branches have been deleted."},IK="_deleteDropdownItem_ltch6_1",PK="_dropDownIcon_ltch6_5",TK="_deleteDropdownBadge_ltch6_9",Hl={deleteDropdownItem:IK,dropDownIcon:PK,deleteDropdownBadge:TK},NK=({ref:t,shown:s,...n})=>e.jsxs(A,{appearance:"error",ref:t,...n,children:[Xs.title,e.jsx(L,{name:"chevron_down",className:Hl.dropDownIcon,size:16})]}),AK=({projectId:t,shownBranches:s})=>{const{trackUiInteraction:n}=k(),r=KW({projectId:t},{onSuccess:()=>Te(e.jsx(Fe,{children:Xs.allPreviewBranchesDeleted}),{containerId:ya.Drawer})}),o=HW(),a=m.useCallback(async()=>{if(!await o()){n("vercel_integration_delete_preview_branches_dismissed");return}n("vercel_integration_delete_preview_branches_confirmed"),r.mutate()},[o,r,n]),i=QW({projectId:t},{onSuccess:()=>Te(e.jsx(Fe,{children:Xs.obsoleteBranchesDeleted}),{containerId:ya.Drawer})}),c=VW(),l=m.useCallback(async()=>{if(!await c()){n("vercel_integration_delete_obsolete_branches_dismissed");return}n("vercel_integration_delete_obsolete_branches_confirmed"),i.mutate()},[c,i,n]),d=YW({projectId:t},{onSuccess:()=>Te(e.jsx(Fe,{children:Xs.shownBranchesDeleted}),{containerId:ya.Drawer})}),u=WW(),h=m.useCallback(async()=>{if(!await u()){n("vercel_integration_delete_shown_branches_dismissed");return}n("vercel_integration_delete_shown_branches_confirmed"),d.mutate({branch_ids:s.map(g=>g.id)})},[u,d,s,n]);return e.jsxs(Jf,{triggerElement:NK,disabledPortal:!0,children:[e.jsxs(_o,{onClick:()=>{n("vercel_integration_delete_obsolete_branches_clicked"),l()},"aria-label":Xs.deleteObsolete,className:Hl.deleteDropdownItem,children:[Xs.deleteObsolete,e.jsx(he,{size:"m",appearance:"default",className:Hl.deleteDropdownBadge,children:Xs.obsolete})]}),e.jsx(_o,{iconName:"trash_shown",onClick:()=>{n("vercel_integration_delete_shown_branches_clicked"),h()},"aria-label":Xs.deleteShown,className:Hl.deleteDropdownItem,children:Xs.deleteShown}),e.jsx(_o,{iconName:"trash_all",onClick:()=>{n("vercel_integration_delete_preview_branches_clicked"),a()},"aria-label":Xs.deleteAll,className:Hl.deleteDropdownItem,children:Xs.deleteAll})]})},EK=()=>{const{projectId:t,project:s}=O(),n=s==null?void 0:s.store_passwords,r=Ik({projectId:t}),o=m.useMemo(()=>{var g;return((g=r.data)==null?void 0:g.branches)??[]},[r.data]),a=XW({projectId:t}),[i,c]=m.useState(void 0);m.useEffect(()=>{i===void 0&&a.data&&c(a.data.auto_delete_obsolete_branches)},[i,a.data]);const l=o.find(g=>g.default),d=o.filter(g=>!g.default),u=d.slice(0,Bx),h=eG({projectId:t},{onMutate:g=>{c(g.auto_delete_obsolete_branches)},onSuccess:(g,_)=>{const x=_.auto_delete_obsolete_branches?_n.autoDeleteEnabled:_n.autoDeleteDisabled;Te(e.jsx(Fe,{children:x}),{containerId:ya.Drawer})},onError:(g,_)=>{c(!_.auto_delete_obsolete_branches)}}),p=m.useCallback(()=>{h.mutate({auto_delete_obsolete_branches:!i})},[i,h]);return r.isLoading?e.jsx(LW,{}):e.jsxs(e.Fragment,{children:[!n&&e.jsx(Up,{integrationName:"Vercel",messageType:Fp.RemovalInstruction}),l&&e.jsx(T,{children:_n.info(F(C.ProjectsItemBranchesItem,{projectId:t,branchId:l.id}))}),n&&e.jsxs(e.Fragment,{children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:yg.alert,children:_n.alert}),e.jsx(mt,{title:_n.prodBranch,children:e.jsx(UW,{name:l.name})})]}),!!d.length&&e.jsx(mt,{title:_n.previewBranches,action:e.jsx(AK,{shownBranches:u,projectId:t}),children:e.jsx(uG,{projectId:t,branches:d,showObsoleteBadge:!0,maxShownBranches:Bx})}),e.jsxs(mt,{title:_n.automationWorkflows,children:[a.isError&&e.jsx(Q,{className:yg.automationAlert,appearance:"error",children:_n.automationWorkflowsError}),e.jsx(T,{children:_n.autoDelete}),e.jsx("div",{className:yg.autodelete,children:e.jsx(hn,{wrap:!0,isSelected:i,onChange:p,isDisabled:h.isPending||a.isError||a.isLoading,children:_n.autoDeleteSwitch})})]})]})]})},pi={roleLabel:"Role",databaseLabel:"Database",connectedBadge:"Connected",vercelProjectLabel:"Vercel project",selectProjectPlaceholder:"Select project"},$K="_form_1dg4g_1",OK="_neonRow_1dg4g_7",RK="_vercelRow_1dg4g_17",BK="_vercelProjectField_1dg4g_23",Lu={form:$K,neonRow:OK,vercelRow:RK,vercelProjectField:BK},LK=()=>{const{projectId:t}=O(),{projects:s,connectedVercelProjectIds:n,configurationId:r,isLoading:o,connectProjectAsync:a,isConnecting:i}=Oc(),c=m.useMemo(()=>(s==null?void 0:s.map(f=>({value:f.id,label:f.name,disabled:n==null?void 0:n.includes(f.id),suffix:(n==null?void 0:n.includes(f.id))&&e.jsx(he,{appearance:"warning",children:pi.connectedBadge})})))??[],[n,s]),l=xe(),{control:d,formState:u,register:h}=l,{branches:p,isLoading:g}=zf(t),_=m.useMemo(()=>{var f;return(f=p==null?void 0:p.find(y=>y.default))==null?void 0:f.id},[p]),x=o||g,{orgId:j}=Y(),b=m.useCallback(async f=>{if(!_||!r)return;const y={...f,configurationId:r,projectId:t,branchId:_};j&&(y.orgId=j);try{await a(y),l.reset(),re(am.projectConnectedWithSuccess)}catch(v){H(v)}},[r,a,_,l,t,j]);return e.jsxs(It,{providerProps:l,onSubmit:b,className:Lu.form,children:[e.jsxs("div",{className:Lu.neonRow,children:[e.jsx(R,{label:pi.databaseLabel,children:e.jsx(me,{name:"database",control:d,rules:{required:!0},render:({field:f})=>e.jsx($S,{projectId:t,branchId:_,value:f.value,canCreateDatabase:!1,size:"s",disabled:!_||x||i,onChange:y=>f.onChange(y)})})}),e.jsx(R,{label:pi.roleLabel,children:e.jsx(me,{name:"role",control:d,rules:{required:!0},render:({field:f})=>e.jsx(OS,{projectId:t,branchId:_,value:f.value,canCreateRole:!1,size:"s",disabled:!_||x||i,onChange:y=>f.onChange(y)})})})]}),e.jsxs("div",{className:Lu.vercelRow,children:[e.jsx(R,{label:pi.vercelProjectLabel,className:Lu.vercelProjectField,children:e.jsx(me,{name:"vercelProjectId",control:d,render:({field:{onChange:f,...y}})=>e.jsx(He,{options:c,placeholder:pi.selectProjectPlaceholder,size:"s","aria-label":pi.vercelProjectLabel,...h("vercelProjectId",{required:!0}),onChange:v=>{f(v)},...y})})}),e.jsx(_e,{disabled:x||!u.isValid,loading:i,children:i?"Connecting...":"Connect"})]})]})},Lk={installVercelButton:"Install from Vercel Marketplace"},ky={title:"Key Benefits",list:["Effectively preview changes before merging them into production","Enable your team to work independently on isolated database branches","When you push changes to your repository, the integration automatically creates a Neon branch for your preview deployment"]},DK="_section_wddls_1",MK={section:DK},Dk=()=>e.jsxs("div",{className:MK.section,children:[e.jsx(z,{level:5,children:ky.title}),e.jsx("ul",{children:ky.list.map(t=>e.jsxs("li",{children:[e.jsx("div",{children:e.jsx(L,{name:"check_flat",size:16})}),t]},t))})]}),UK=t=>t===cn.Dark?cn.Light:cn.Dark,Jb=({label:t,deniedMessage:s,size:n="l",onClick:r,withIcon:o=!1,loading:a,appearance:i="primary",className:c})=>{const l=vo();return e.jsx(e.Fragment,{children:e.jsx(Z,{content:s,placement:"bottom",disabled:a||!s,children:e.jsx("span",{children:e.jsx(P,{type:"submit",size:n,icon:o?"vercel":void 0,iconTheme:i==="primary"?UK(l):l,appearance:i,onClick:r,disabled:!!s,className:c,loading:a,children:t})})})})},FK="_form_1pkcv_1",qK={form:FK},zK=()=>{const{trackUiInteraction:t}=k(),{projectId:s}=O(),{orgId:n}=Y(),{token:r}=Ep(),{isAllowedToInstall:o,isCollaborator:a,isLoading:i}=Kb(s);let c;o||(c=a?jo.installIntegrationOnSharedProjectNotAllowed:jo.installIntegrationNotAllowed);const l=n?`?org_id=${n}`:"",d=`${$p}/projects/${s}/integrations/vercel${l}`;return e.jsxs(e.Fragment,{children:[e.jsxs(Lt,{action:d,target:"_blank",method:"POST",className:qK.form,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:r}),n&&e.jsx("input",{type:"hidden",name:"org_id",value:n}),e.jsx(Jb,{label:Lk.installVercelButton,deniedMessage:c,loading:i,withIcon:!0,onClick:()=>{t("vercel_account_integration_install_clicked")}})]}),e.jsx(yr,{}),e.jsx(Dk,{})]})},HK="_text_dkj31_1",VK="_varsList_dkj31_5",WK="_varsListItem_dkj31_11",GK="_varsListLabel_dkj31_15",KK="_noteOverridden_dkj31_20",QK="_buttons_dkj31_24",YK="_fields_dkj31_29",JK="_field_dkj31_29",Vs={text:HK,varsList:VK,varsListItem:WK,varsListLabel:GK,noteOverridden:KK,buttons:QK,fields:YK,field:JK},ZK=["DATABASE_URL","PGHOST","PGDATABASE","PGUSER","PGPASSWORD"],XK=()=>{var j;const{projectId:t,project:s}=O(),n=Ik({projectId:t}),r=m.useMemo(()=>{var b,f;return(f=(b=n.data)==null?void 0:b.branches)==null?void 0:f.find(y=>y.default)},[n.data]),{data:{selectOptions:o}}=UN({projectId:t,branchId:r==null?void 0:r.id}),{data:{selectOptions:a}}=Ud({projectId:t,branchId:r==null?void 0:r.id}),i=sG({projectId:t}),[c,l]=m.useState(i.data??{});m.useEffect(()=>{l(i.data??{})},[i.data]);const d=m.useMemo(()=>Ax([c])!==Ax([i.data??{}]),[c,i.data]),u=m.useCallback(b=>{l(f=>f.vars===void 0?f:{...f,vars:BE(f.vars,y=>y.name===b,y=>({...y,value:!y.value}))})},[]),h=nG({projectId:t},{onSuccess:()=>{Te(e.jsx(Fe,{children:"Vercel environment variables saved. Changes will apply to future deployments."}),{containerId:ya.Drawer})},onError:b=>{const f=`We couldn't save changes: ${FN(b)}`;Te(e.jsx(fc,{children:f}))}}),p=m.useCallback(()=>{c.vars!==void 0&&h.mutate(c)},[c,h]),g=m.useCallback(()=>{l(i.data??{})},[i.data]),{trackUiInteraction:_}=k(),x=s==null?void 0:s.store_passwords;return e.jsx(e.Fragment,{children:x?e.jsxs(e.Fragment,{children:[e.jsxs(mt,{title:"Vercel environment variables",children:[e.jsx("div",{className:Vs.text,children:"Select the environment variables you need in your Vercel deployments."}),i.status==="error"?e.jsx(Q,{appearance:"error",children:"Could not get Vercel environment variables settings"}):i.status==="pending"?e.jsx("ul",{className:Vs.varsList,children:ZK.map(b=>e.jsx("li",{className:Vs.varsListItem,children:e.jsx($,{height:24,width:`${b.length}em`})},b))}):e.jsx(e.Fragment,{children:e.jsx("ul",{className:Vs.varsList,children:(j=c.vars)==null?void 0:j.map(b=>e.jsx("li",{className:Vs.varsListItem,children:e.jsx(Ir,{checked:b.value,labelClassName:Vs.varsListLabel,onChange:()=>u(b.name),disabled:h.isPending,children:b.name})},b.name))})})]}),e.jsxs(mt,{title:"Default database and role",children:[e.jsx(T,{children:"Choose the database and role for every new branch created for Vercel Preview Deployments."}),e.jsxs("div",{className:Vs.fields,children:[e.jsx(R,{label:"Database",className:Vs.field,children:e.jsx(Pa,{options:a,"data-qa":"vercel-database-select",value:a.find(({value:b})=>b===c.database),onChange:b=>{b&&l(f=>({...f,database:b.value}))}})}),e.jsx(R,{label:"Role",className:Vs.field,children:e.jsx(Pa,{options:o,"data-qa":"vercel-role-select",value:o.find(({value:b})=>b===c.role),onChange:b=>{b&&l(f=>({...f,role:b.value}))}})})]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{appearance:"warning",className:Vs.noteOverridden,children:"Existing variables with the same names will be overridden in Vercel."}),e.jsxs("div",{className:Vs.buttons,children:[e.jsx(P,{"data-qa":"vercel_env_vars_cancel",appearance:"secondary",onClick:()=>{_("vercel_integration_env_vars_cancel_edit"),g()},disabled:h.isPending,children:"Cancel"}),e.jsx(P,{"data-qa":"vercel_env_vars_cancel",appearance:"primary",onClick:()=>{_("vercel_integration_env_vars_send_update"),p()},disabled:h.isPending,children:"Save changes"})]})]})]}):e.jsx(Up,{integrationName:"Vercel",messageType:Fp.RemovalInstruction})})},Du={title:"Remove connection",text:e.jsxs(e.Fragment,{children:["Removing this connection stops the automatic setting of environment variables only. It does not remove the integration itself. To fully remove the integration, you need to do so from Vercel project"," ",e.jsx(A,{href:oR,openInNewTab:!0,children:"Settings"}),"."]}),button:"Disconnect",success:"The integration was successfully disconnected"},eQ="_text_1764z_1",tQ={text:eQ},sQ=({onRemoveSuccess:t})=>{const{trackUiInteraction:s}=k(),{projectId:n}=O(),{disconnectProject:r}=Oc(),o=Yd(),{confirm:a}=Oe(),i=()=>{Te(e.jsx(Fe,{children:Du.success})),t()},c=async()=>{if(s("vercel_integration_revoke_click"),!await a({header:"Do you want to remove the connection?",text:e.jsx(Q,{appearance:"error",children:"This will remove the connection with the Neon database. Are you sure you want proceed?"}),confirmButtonText:"Remove connection",appearance:"error"})){s("vercel_integration_revoke_cancelled");return}s("vercel_integration_revoke_confirmed");try{await r(n),i(),await o.refetch()}catch(d){H(d)}};return e.jsxs(mt,{title:Du.title,children:[e.jsx("div",{className:tQ.text,children:Du.text}),e.jsx(P,{"data-qa":"vercel_disconnect",appearance:"secondary",onClick:c,children:Du.button})]})},Iy={title:"Vercel integration"},nQ="_body_ug3sz_1",rQ={body:nQ},oQ=({onRemoveSuccess:t})=>{const[s,n]=m.useState(Hc[0].value),r=o=>{n(o)};return e.jsxs(e.Fragment,{children:[e.jsx(pn,{options:Hc,value:s,onChange:r}),s===Hc[0].value&&e.jsx(EK,{}),s===Hc[1].value&&e.jsx(XK,{}),s===Hc[2].value&&e.jsx(sQ,{onRemoveSuccess:t})]})},Mk=({isOpen:t,onRequestClose:s,onRemoveSuccess:n,isInstalled:r=!1,isConfigured:o=!1,projectName:a})=>{const{project:i,isLoading:c}=O(),l=i==null?void 0:i.store_passwords;return e.jsx(Io,{"aria-label":Iy.title,title:Iy.title,subtitle:a,isOpen:t,onRequestClose:s,iconName:"vercel",coverImage:{x1:SS,x2:jk},children:o?e.jsx(oQ,{onRemoveSuccess:n}):e.jsxs("div",{className:rQ.body,children:[e.jsx(z,{level:3,size:"h4",children:am.integrationDescription}),!c&&!l&&e.jsx(Up,{integrationName:"Vercel",messageType:Fp.SelectionPromptFull}),!c&&r&&e.jsx(LK,{}),!c&&!r&&e.jsx(zK,{}),e.jsx(yr,{}),e.jsx(Yb,{}),e.jsx(yr,{})]})})},aQ=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=k(),{isConfigured:r}=Oc(),{openedDrawerId:o,closeDrawer:a}=ko();return e.jsx(Mk,{isOpen:o===vr.Vercel,onRequestClose:()=>{n(s?"vercel_integration_configured_settings_close":"vercel_integration_available_settings_close"),a()},onRemoveSuccess:()=>{a()},isInstalled:r,isConfigured:s})},iQ=({isOpen:t,onRequestClose:s,onRemoveSuccess:n})=>{const{project:r}=O();return e.jsx(Mk,{isOpen:t,onRequestClose:s,onRemoveSuccess:n,isConfigured:!!r,projectName:r==null?void 0:r.name})},Zb=({projectId:t})=>["getOuterbaseProject",t],Uk=({projectId:t})=>st({queryKey:Zb({projectId:t}),queryFn:async()=>(await q.getOuterbaseProject(t)).data}),Fk=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:["deleteProjectOuterbaseIntegration",t],mutationFn:async()=>(await q.deleteProjectOuterbaseIntegration(t)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Zb({projectId:t})}),o.invalidateQueries({queryKey:Jt(t)}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},cQ=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:["updateOuterbaseWorkspace",t],mutationFn:async a=>(await q.updateOuterbaseWorkspace(t,a)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:Zb({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},mi={descriptionTitle:"Integration details",description:e.jsxs(e.Fragment,{children:["Use"," ",e.jsxs(A,{openInNewTab:!0,href:"https://app.outerbase.com",children:["Outerbase"," "]}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),howToAddTitle:"How to add",howToAdd:e.jsxs(e.Fragment,{children:["Connect your existing Outerbase account or"," ",e.jsxs(A,{openInNewTab:!0,href:"https://app.outerbase.com/signup/",children:["create a new one"," "]}),"before adding the integration."]}),button:"Add Outerbase",maxBasesExceededAlert:"Unable to add integration. The Outerbase free plan is limited to 1 base. Visit Outerbase for details."},lQ="_text_6f26y_1",dQ="_alert_6f26y_5",Py={text:lQ,alert:dQ},uQ=({isMaxBasesExceeded:t})=>{const{trackUiInteraction:s}=k(),{projectId:n,project:r}=O(),o=r==null?void 0:r.store_passwords,{token:a}=Ep();return e.jsxs(e.Fragment,{children:[e.jsx(mt,{title:mi.descriptionTitle,children:mi.description}),o?e.jsxs(mt,{title:mi.howToAddTitle,children:[e.jsx("div",{className:Py.text,children:mi.howToAdd}),t&&e.jsx(Q,{appearance:"error",className:Py.alert,children:mi.maxBasesExceededAlert}),e.jsxs(Lt,{action:`${$p}/projects/${n}/applications/outerbase/auth`,children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:a}),e.jsx(P,{"data-qa":"outerbase_sign_in",type:"submit",onClick:()=>s("outerbase_integration_sign_in_clicked"),children:mi.button})]})]}):e.jsx(Up,{integrationName:"Outerbase",messageType:Fp.SelectionPromptFull})]})},qk=()=>{const{confirm:t}=Oe();return m.useCallback(()=>t({header:"Do you want to remove the integration?",text:e.jsx(Q,{appearance:"error",children:"This will remove the connection with Neon. Are you sure you want to proceed?"}),confirmButtonText:"Remove integration",appearance:"error"}),[t])},zo={manageTitle:"Manage data",manageHint:t=>e.jsxs(e.Fragment,{children:["Use ",e.jsx(A,{href:t,children:"Outerbase "}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),manageButton:"Open this project in Outerbase",removalTitle:"Remove integration",removalHint:"Removing the integration will terminate all current connections.",removalButton:"Disconnect",success:"The integration was successfully disconnected"},hQ="_text_10hm2_1",pQ="_button_10hm2_5",vg={text:hQ,button:pQ},mQ=({projectId:t})=>{const{trackUiInteraction:s}=k(),n=Uk({projectId:t}),{current_workspace_id:r,base_id:o}=n.data??{},a="https://app.outerbase.com",i=r&&o?`${a}/${r}/${o}`:a,{closeDrawer:c}=ko(),l=Fk({projectId:t},{onSuccess:()=>{c(),re(zo.success)}}),d=qk(),u=m.useCallback(async()=>{if(!await d()){s("outerbase_integration_remove_dismissed");return}s("outerbase_integration_remove_confirmed"),l.mutate()},[l,d,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(mt,{title:zo.manageTitle,children:[e.jsx("div",{className:vg.text,children:zo.manageHint(i)}),e.jsx(P,{as:"a",href:i,appearance:"primary",className:vg.button,children:zo.manageButton})]}),e.jsxs(mt,{title:zo.removalTitle,children:[e.jsx("div",{className:vg.text,children:zo.removalHint}),e.jsx(P,{"data-qa":"outerbase_integraion_remove",appearance:"secondary",onClick:()=>{s("outerbase_integration_remove_clicked"),u()},children:zo.removalButton})]})]})},wg={title:"Outerbase integration",success:"Outerbase integration was successfully added."},gi={title:"Select Outerbase workspace",fieldLabel:"Outerbase workspace",saveButton:"Save",cancelButton:"Cancel and disconnect",onSave:"The selected Outerbase workspace has been set.",onCancel:"The integration has been removed."},gQ="_buttons_o7uz2_1",_Q={buttons:gQ},fQ=({workspaces:t,projectId:s})=>{const{trackUiInteraction:n}=k(),[r,o]=m.useState(null),a=m.useMemo(()=>t.map(({id:p,name:g})=>p&&g?{value:p,label:g}:null).filter(pS),[t]),i=p=>{o(p)},c=cQ({projectId:s},{onSuccess:()=>re(gi.onSave,{containerId:ya.Drawer})}),l=m.useCallback(()=>{r!=null&&r.value&&c.mutate({workspace_id:r.value})},[r==null?void 0:r.value,c]),d=Fk({projectId:s},{onSuccess:()=>re(gi.onCancel)}),u=qk(),h=async()=>{if(o(null),!await u()){n("outerbase_integration_remove_dismissed");return}n("outerbase_integration_remove_confirmed"),d.mutate()};return e.jsxs(mt,{title:gi.title,children:[e.jsx(R,{label:gi.fieldLabel,id:"workspace-select",children:e.jsx(Pa,{options:a,value:r,onChange:i,disabled:c.isPending})}),e.jsxs("div",{className:_Q.buttons,children:[e.jsx(P,{appearance:"secondary",onClick:h,children:gi.cancelButton}),e.jsx(P,{onClick:l,disabled:r===null||c.isPending,children:gi.saveButton})]})]})},bQ="_placeholder_1bbyz_1",xQ="_buttons_1bbyz_8",Ty={placeholder:bQ,buttons:xQ},jQ=()=>e.jsxs("div",{className:Ty.placeholder,children:[e.jsx($,{height:24,width:186}),e.jsx($,{height:20}),e.jsx($,{height:34}),e.jsx($,{height:40}),e.jsx($,{height:48,width:260,className:Ty.buttons})]}),yQ=({projectId:t})=>{const s=Uk({projectId:t}),{current_workspace_id:n,workspaces:r}=s.data??{};return s.isLoading?e.jsx(jQ,{}):n?e.jsx(mQ,{projectId:t}):e.jsx(fQ,{workspaces:r||[],projectId:t})},vQ=({configuration:t})=>{const s=!!t,{trackUiInteraction:n}=k(),{projectId:r}=O(),{openedDrawerId:o,openDrawer:a,closeDrawer:i}=ko(),[c,l]=m.useState(!1),d=()=>{n(s?"outerbase_integration_configured_settings_closed":"outerbase_integration_available_settings_closed"),i()};return m.useEffect(()=>{const u=decodeURIComponent(window.location.hash);u==="#outerbase_success"&&(window.history.replaceState(null,""," "),re(wg.success),a(vr.Outerbase)),u.startsWith("#outerbase_error")&&u.split("?")[1]==="max_bases_exceeded"&&(window.history.replaceState(null,""," "),l(!0),a(vr.Outerbase))},[a,l]),e.jsx(Io,{"aria-label":wg.title,title:wg.title,isOpen:o===vr.Outerbase,onRequestClose:d,iconName:"outerbase",coverImage:{x1:D_,x2:D_},children:s?e.jsx(yQ,{projectId:r}):e.jsx(uQ,{isMaxBasesExceeded:c})})},wQ=()=>{Object.values(gW).forEach(t=>{const s=new Image;s.src=t})},SQ="_root_114l6_1",CQ="_title_114l6_11",Ny={root:SQ,title:CQ},dl={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),e.jsx("br",{}),e.jsxs("ul",{children:[e.jsx("li",{children:"Installing the GitHub app and authorizing it."}),e.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),e.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),e.jsx("br",{}),e.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},kQ="_section_gme4m_1",IQ="_description_gme4m_7",Sg={section:kQ,description:IQ},PQ=()=>{const{trackUiInteraction:t}=k(),{canManageIntegration:s}=rm();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Sg.section,children:[e.jsx(z,{level:3,children:dl.previewTitle}),e.jsx(T,{children:dl.previewDescription}),e.jsx(Rk,{})]}),e.jsxs("div",{className:Sg.section,children:[e.jsx(z,{level:3,children:dl.settingTitle}),e.jsx(T,{className:Sg.description,children:dl.settingDescription}),e.jsx(Ok,{})]}),e.jsx(Bk,{label:dl.installButton,onClick:()=>{t("github_account_integration_install_clicked")},disabled:!s,tooltip:jo.installIntegrationNotAllowed})]})},TQ=(t,s)=>{const[n,r]=m.useState(!1),{trackUiInteraction:o}=k(),a=m.useCallback((c={})=>{r(!0),o(t,c)},[t,o]),i=m.useCallback((c={})=>{r(!1),o(s,c)},[s,o]);return[n,a,i]},NQ=t=>t.split("/").at(0),AQ="_root_n29va_1",EQ="_name_n29va_7",Ay={root:AQ,name:EQ},zk=({repositoryFullName:t,analyticAction:s,showAvatar:n=!1})=>{const{trackUiInteraction:r}=k();return e.jsx(A,{href:`https://github.com/${t}`,openInNewTab:!0,onClick:()=>{r(s)},children:e.jsxs("div",{className:Ay.root,children:[n&&e.jsx(Hd,{size:"s",image:`https://avatars.githubusercontent.com/${NQ(t)}`}),e.jsx("span",{className:Ay.name,children:t})]})})},Vl={title:"Accessible repositories",openSettingsButton:"Open GitHub Settings",moreButton:t=>`+ ${t} more`,modalTitle:"All accessible GitHub repositories",dismiss:"Dismiss"},$Q="_root_1chur_1",OQ="_repoList_1chur_8",Hk={root:$Q,repoList:OQ},Cg=4,Vk=({repositories:t})=>e.jsx("div",{className:Hk.repoList,children:t.map(({id:s,full_name:n})=>n&&e.jsx(zk,{repositoryFullName:n,showAvatar:!0,analyticAction:"github_account_integration_accessible_repositories_repository_link_clicked"},s))}),RQ=({isOpen:t,onRequestClose:s,title:n,repositories:r})=>e.jsxs(Qe,{isOpen:t,onRequestClose:s,title:n,width:500,children:[e.jsx(be,{children:e.jsx(Vk,{repositories:r})}),e.jsx(ge,{children:e.jsx(P,{size:"s",onClick:s,children:Vl.dismiss})})]}),BQ=()=>{const{trackUiInteraction:t}=k(),{repositories:s,installationId:n}=$r(),[r,o,a]=TQ("github_account_integration_accessible_repositories_modal_opened","github_account_integration_accessible_repositories_modal_closed"),{canManageIntegration:i}=rm();return s!=null&&s.length?e.jsxs(e.Fragment,{children:[e.jsx(RQ,{isOpen:r,onRequestClose:a,title:Vl.modalTitle,repositories:s}),e.jsxs("div",{className:Hk.root,children:[e.jsx(z,{level:4,children:Vl.title}),e.jsx(Vk,{repositories:s.slice(0,Cg)}),s.length>Cg&&e.jsx(A,{onClick:o,children:Vl.moreButton(s.length-Cg)}),e.jsx(Z,{content:jo.manageIntegrationNotAllowed,disabled:i,children:e.jsx("div",{children:e.jsx(P,{as:We,appearance:"secondary",size:"s",href:`https://github.com/settings/installations/${n}`,openInNewTab:!0,disabled:!i,onClick:()=>{t("github_account_integration_accessible_repositories_settings_link_clicked")},children:Vl.openSettingsButton})})})]})]}):null},LQ="_root_lgwiu_1",DQ="_title_lgwiu_12",MQ="_repository_lgwiu_18",UQ="_repositoryLabel_lgwiu_25",Mu={root:LQ,title:DQ,repository:MQ,repositoryLabel:UQ},Ri={repository:"Repository",project:"Project",disconnectButton:"Disconnect",success:"The GitHub repository was successfully disconnected",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButtonText:"Disconnect"},FQ=({onDisconnect:t,disabled:s=!1,tooltip:n})=>{const{trackUiInteraction:r}=k(),{confirm:o}=Oe(),[a,i]=m.useState(!1),c=async()=>{try{if(!await o({header:Ri.confirmTitle,text:Ri.confirmText,appearance:"error",confirmButtonText:Ri.confirmButtonText})){r("github_account_integration_connected_project_disconnect_dismissed");return}r("github_account_integration_connected_project_disconnect_confirmed"),i(!0),await t(),re(Ri.success)}catch(l){H(l)}finally{i(!1)}};return e.jsx(Z,{content:n,disabled:!s,children:e.jsx("span",{children:e.jsx(P,{appearance:"secondary",size:"s",disabled:a||s,onClick:async()=>{r("github_account_integration_connected_project_disconnect_clicked"),await c()},children:Ri.disconnectButton})})})},qQ=({projectId:t,projectName:s,onDisconnect:n})=>{const{connectedRepositoryFullName:r,isLoading:o}=Ek(t);return o?null:e.jsxs("div",{className:Mu.root,children:[e.jsx(z,{level:5,className:Mu.title,children:s}),e.jsxs("div",{className:Mu.repository,children:[e.jsx("div",{className:Mu.repositoryLabel,children:Ri.repository}),r&&e.jsx(zk,{analyticAction:"github_account_integration_connected_project_repository_link_clicked",repositoryFullName:r})]}),e.jsx(FQ,{onDisconnect:n(t)})]})},zQ="_root_srlr5_1",HQ={root:zQ},VQ=({connectedProjectsId:t})=>{const{disconnectRepository:s}=$r(),{data:n}=vs(),r=m.useMemo(()=>(n==null?void 0:n.filter(({id:a})=>t.includes(a)).map(({id:a,name:i})=>({projectId:a,projectName:i})))||[],[n,t]),o=a=>async()=>{await s({projectId:a})};return r.length?e.jsx("div",{className:HQ.root,children:r.map(({projectId:a,projectName:i})=>e.jsx(qQ,{projectName:i,projectId:a,onDisconnect:o},a))}):null},Ws={title:t=>`Connect ${t?"another ":""}project`,success:"The GitHub repository was successfully connected",projectLabel:"Neon project",repositoryLabel:"GitHub repository",required:"This field is required.",connectButton:"Connect",disabledProjectTooltip:"This project is already connected",disabledRepoTooltip:"This repository is already connected",connectedBadge:"Connected"},WQ="_root_1rm1v_1",GQ="_connectForm_1rm1v_7",KQ="_connectFormButton_1rm1v_13",kg={root:WQ,connectForm:GQ,connectFormButton:KQ},QQ=({connectedProjectsId:t})=>{var g,_;const{trackUiInteraction:s}=k(),{data:n}=vs(),{repositories:r,connectRepository:o,isConnecting:a}=$r(),i=m.useMemo(()=>(r==null?void 0:r.map(({id:x=0,name:j="",installed:b=!1})=>({value:x,label:j,disabled:b,disabledTooltip:Ws.disabledRepoTooltip,suffix:b&&e.jsx(he,{appearance:"warning",children:Ws.connectedBadge})})))??[],[r]),c=m.useMemo(()=>(n==null?void 0:n.map(({id:x,name:j})=>({value:x,label:j,disabled:t.includes(x),disabledTooltip:Ws.disabledProjectTooltip,suffix:t.includes(x)&&e.jsx(he,{appearance:"warning",children:Ws.connectedBadge})})))??[],[n,t]),l=xe(),{formState:{errors:d},setValue:u}=l,h=()=>{u("projectId",void 0),u("repositoryId",void 0),re(Ws.success)},p=async x=>{try{const{projectId:j,repositoryId:b}=x;if(!(j&&b))return;await o({projectId:j,repositoryId:b}),h()}catch(j){H(j)}};return e.jsxs("div",{className:kg.root,children:[e.jsx(z,{level:4,children:Ws.title(!!t.length)}),e.jsxs(It,{providerProps:l,onSubmit:p,formBodyClassName:kg.connectForm,children:[e.jsx(R,{label:Ws.projectLabel,error:(g=d.projectId)==null?void 0:g.message,children:e.jsx(me,{name:"projectId",rules:{required:{value:!0,message:Ws.required}},control:l.control,render:({field:{onChange:x,...j}})=>e.jsx(He,{options:c,filterable:!0,disabled:a,onChange:b=>{s("github_account_integration_connect_project_project_selected"),x(b)},...j})})}),e.jsx(R,{label:Ws.repositoryLabel,error:(_=d.repositoryId)==null?void 0:_.message,children:e.jsx(me,{name:"repositoryId",rules:{required:{value:!0,message:Ws.required}},control:l.control,render:({field:{onChange:x,...j}})=>e.jsx(He,{options:i,filterable:!0,disabled:a,onChange:b=>{s("github_account_integration_connect_project_repository_selected"),x(b)},...j})})}),e.jsx("div",{className:kg.connectFormButton,children:e.jsx(_e,{size:"l",loading:a,onClick:()=>{s("github_account_integration_connect_project_clicked")},children:Ws.connectButton})})]})]})},Ho={title:"Remove integration",description:"Removing the integration from this account will also disconnect it from all projects.",removeButton:"Remove",confirmationTitle:"Remove GitHub app?",confirmationDescription:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"GitHub app is globally configured for each Neon account."}),e.jsx("p",{children:"When GitHub app is removed all integrated workflows across all projects will be disconnected, API keys and secrets will be removed and configured workflows will stop working."})]}),confirmButton:"Remove GitHub app",success:"The GitHub app was uninstalled"},YQ="_root_1ghmn_1",JQ={root:YQ},ZQ=()=>{const{trackUiInteraction:t}=k(),{confirm:s}=Oe(),{removeApp:n,isRemoving:r}=$r(),o=async()=>{try{if(!await s({appearance:"error",header:Ho.confirmationTitle,text:Ho.confirmationDescription,confirmButtonText:Ho.confirmButton})){t("github_account_integration_remove_dismissed");return}t("github_account_integration_remove_confirmed"),await n(void 0),re(Ho.success)}catch(a){H(a)}};return e.jsxs("div",{className:JQ.root,children:[e.jsx(z,{level:4,children:Ho.title}),e.jsx(T,{children:Ho.description}),e.jsx(P,{appearance:"error",size:"s",loading:r,onClick:async()=>{t("github_account_integration_remove_clicked"),await o()},children:Ho.removeButton})]})},XQ=()=>{const{data:t,isLoading:s}=kk({enabled:!0}),n=Object.entries(t||{}).filter(([,o])=>o.includes("github")).map(([o])=>o),{canManageIntegration:r}=rm();return s?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx(VQ,{connectedProjectsId:n}),e.jsx(QQ,{connectedProjectsId:n}),e.jsx(BQ,{}),r&&e.jsx(ZQ,{})]})},Wk=({headingId:t})=>{const{isInstalled:s,isLoading:n}=$r();return n?e.jsx(pe,{}):e.jsxs("div",{className:Ny.root,children:[e.jsx(z,{id:t,level:2,className:Ny.title,children:"GitHub"}),s?e.jsx(XQ,{}):e.jsx(PQ,{})]})},Gk=(t,s,n,r)=>{m.useEffect(()=>{if(!n)return;const o=setInterval(t,s);return()=>clearInterval(o)},[n,s,...r])},eY=({onSuccess:t})=>{const{projectId:s}=O(),{trackUiInteraction:n}=k(),r=ie(),[o,a]=m.useState(!1);return Gk(async()=>{const i=Jt(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,o,[s]),de({mutationFn:({apiKey:i,site:c,metrics:l,logs:d})=>q.addProjectDatadogIntegration(s,{api_key:i,site:c,metrics:l,logs:d}),onMutate:()=>n("datadog_integration_connect"),onError:i=>H(i),onSuccess:(i,c)=>{r.setQueryData(Jt(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs}})),a(!0),t()}})},tY=({onSuccess:t})=>{const{trackUiInteraction:s}=k(),{projectId:n}=O(),r=ie();return de({mutationFn:()=>q.deleteProjectDatadogIntegration(n),onMutate:()=>s("datadog_integration_disconnect"),onError:o=>H(o),onSuccess:()=>{r.setQueryData(Jt(n),o=>o&&{...o,datadog:void 0}),t()}})},sY=({onSuccess:t})=>{const{projectId:s}=O(),{trackUiInteraction:n}=k(),r=ie(),[o,a]=m.useState(!1);return Gk(async()=>{const i=Jt(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,o,[s]),de({mutationFn:({metrics:i,logs:c})=>q.updateProjectDatadogIntegration(s,{metrics:i,logs:c}),onMutate:()=>n("datadog_integration_update"),onError:i=>H(i),onSuccess:(i,c)=>{r.setQueryData(Jt(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs}})),a(!0),t()}})},nY=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},Kk=t=>({appearance:nY(t),label:Nt.badge.label(t)}),rY="_statusWrapper_101ri_1",oY="_section_101ri_9",aY="_footer_101ri_15",iY="_footerGroup_101ri_23",Uu={statusWrapper:rY,section:oY,footer:aY,footerGroup:iY},cY=({projectId:t,configuration:s,onRequestClose:n,...r})=>{var x,j;const o=ds({projectId:t}),a=(x=o==null?void 0:o.data)==null?void 0:x.endpoints.some(b=>b.current_state!=="active"),i=xe({defaultValues:{site:s.site,apiKey:"",metrics:s.metrics,logs:s.logs}}),c=tY({onSuccess:n}),l=sY({onSuccess:n}),{confirm:d}=Oe(),u=m.useCallback(()=>{d({header:Nt.disconnectConfirmationTitle,text:Nt.disconnectConfirmationDescription,confirmButtonText:Nt.disconnectButton}).then(b=>b?c.mutate():null)},[d,c]),h=m.useCallback(b=>l.mutate(b),[l]),p=c.isPending||l.isPending,g=CS(i),_=Kk(s.status);return e.jsx(Io,{footer:e.jsxs("div",{className:Uu.footer,children:[e.jsx(P,{appearance:"secondary",onClick:u,disabled:p,loading:p,children:Nt.disconnectButton}),e.jsxs("div",{className:Uu.footerGroup,children:[e.jsx(P,{appearance:"secondary",onClick:n,children:Nt.cancelButton}),e.jsx(P,{appearance:"primary",disabled:g||p,onClick:()=>i.handleSubmit(h)(),children:Nt.confirmButton})]})]}),onRequestClose:n,...r,children:e.jsxs(mt,{className:Uu.section,children:[e.jsx(T,{children:Nt.form.intro}),a&&e.jsx(Q,{appearance:"warning",children:Nt.inactiveComputesWarning}),e.jsxs("div",{className:Uu.statusWrapper,children:[e.jsx(R,{label:Nt.form.site.label,children:((j=kS.find(b=>b.site===s.site))==null?void 0:j.name)??"unknown"}),e.jsx(R,{label:Nt.form.apiKey.label,children:Nt.form.apiKey.configured}),e.jsx(R,{label:Nt.badge.statusLabel,children:e.jsx(Yf,{appearance:_.appearance,size:"s",label:_.label,pending:_.appearance==="loading"})})]}),e.jsx(IS,{form:i,onSubmit:h,projectId:t,disabled:p,apiKeyConfigured:!0})]})})},lY="_section_179oe_1",dY={section:lY},uY=({onRequestClose:t,projectId:s,...n})=>{const r=xe({defaultValues:{site:kS[0].site,apiKey:"",metrics:!0,logs:!0}}),o=eY({onSuccess:t}),a=m.useCallback(c=>o.mutate(c),[o]),i=CS(r);return e.jsx(Io,{footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{appearance:"secondary",onClick:t,children:Nt.cancelButton}),e.jsx(P,{onClick:()=>r.handleSubmit(a)(),disabled:i,loading:o.status==="pending",children:Nt.confirmButton})]}),onRequestClose:t,...n,children:e.jsxs(mt,{className:dY.section,children:[e.jsx(T,{children:Nt.form.intro}),e.jsx(IS,{form:r,onSubmit:a,projectId:s})]})})},hY=({configuration:t,projectId:s})=>{const n=Gb().datadog,{openedDrawerId:r,closeDrawer:o}=ko(),{trackUiInteraction:a}=k(),i=m.useCallback(()=>{a(t?"datadog_integration_configured_settings_close":"datadog_integration_available_settings_close"),o()},[o,t,a]),c=r===vr.Datadog,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":Nt.label,title:Nt.title,iconName:"datadog"};return t?e.jsx(cY,{...l,projectId:s,configuration:t}):e.jsx(uY,{...l,projectId:s})},we={cancelButton:"Cancel",disconnectButton:"Disconnect",confirmButton:"Save",label:"OpenTelemetry Integration",title:"OpenTelemetry",disconnectConfirmationTitle:"Confirm",disconnectConfirmationDescription:"Are you sure you want to disconnect OpenTelemetry integration?",badge:{statusLabel:"Status",status:t=>e.jsxs(e.Fragment,{children:["Status: ",t]}),label:t=>{switch(t){case"disabled":return"Disabled";case"error":return"Error";case"pending":return"Pending";case"running":return"Active"}}},inactiveComputesWarning:"There are inactive computes on the project, no data for them will be visible on your OpenTelemetry backend until they are activated.",form:{intro:"Send metrics and events from your Neon project to your OpenTelemetry backend.",export:{header:"Telemetry to export",metrics:"Metrics",logs:"Postgres logs",atLeastOneRequired:"At least one export option must be selected."},connection:{header:"Connection",grpc:{label:"GRPC"},http:{label:"HTTP"},endpoint:{label:"Endpoint",placeholder:"Enter your endpoint"},configured:"Configured",authHeader:"Authentication"},telemetry:{endpointOverride:{description:"Override endpoints",metrics:"Metrics endpoint",metricsPlaceholder:"Enter your metrics endpoint",logs:"Logs endpoint",logsPlaceholder:"Enter your logs endpoint"}},resource:{header:"Resource attributes",key:"service.name",value:"Enter value (Optional)"}}},pY=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},mY=t=>({appearance:pY(t),label:we.badge.label(t)}),gY="_statusWrapper_begfg_1",_Y="_section_begfg_9",fY="_footer_begfg_15",bY="_footerGroup_begfg_21",Fu={statusWrapper:gY,section:_Y,footer:fY,footerGroup:bY};function lp(t){return{connection:{protocol:t.connection.protocol,endpoint:t.connection.endpoint,authentication:{bearer_token:t.connection.authentication.bearerToken?{token:t.connection.authentication.bearerToken}:void 0,basic:t.connection.authentication.basic?{username:t.connection.authentication.basic.username,password:t.connection.authentication.basic.password}:void 0,api_key:t.connection.authentication.apiKey?{key:t.connection.authentication.apiKey}:void 0}},telemetry:{types:[...t.telemetry.types.metrics_enabled?["metrics"]:[],...t.telemetry.types.logs_enabled?["logs"]:[]],metrics_endpoint_override:(t.telemetry.metrics_endpoint_override??"").length>0?t.telemetry.metrics_endpoint_override:void 0,logs_endpoint_override:(t.telemetry.logs_endpoint_override??"").length>0?t.telemetry.logs_endpoint_override:void 0},resource:t.resourceAttributes?{attributes:t.resourceAttributes}:{}}}const Qk=(t,s,n,r)=>{m.useEffect(()=>{if(!n)return;const o=setInterval(t,s);return()=>clearInterval(o)},[n,s,...r])},xY=({onSuccess:t})=>{const{projectId:s}=O(),{trackUiInteraction:n}=k(),r=ie(),[o,a]=m.useState(!1);return Qk(async()=>{const i=Jt(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,o,[s]),de({mutationFn:i=>{const{connection:c,telemetry:l,resource:d}=lp(i);return q.addProjectOpentelemetryIntegration(s,{connection:c,telemetry:l,resource:d,skip_validation:!0})},onMutate:()=>n("opentelemetry_integration_connect"),onError:i=>H(i),onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=lp(c);r.setQueryData(Jt(s),h=>({...h,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending"}})),a(!0),t()}})},jY=({onSuccess:t})=>{const{trackUiInteraction:s}=k(),{projectId:n}=O(),r=ie();return de({mutationFn:()=>q.deleteProjectOpentelemetryIntegration(n),onMutate:()=>s("opentelemetry_integration_disconnect"),onError:o=>H(o),onSuccess:()=>{r.setQueryData(Jt(n),o=>o&&{...o,opentelemetry:void 0}),t()}})},yY=({onSuccess:t})=>{const{projectId:s}=O(),{trackUiInteraction:n}=k(),r=ie(),[o,a]=m.useState(!1);return Qk(async()=>{const i=Jt(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,o,[s]),de({mutationFn:i=>{const{telemetry:c,resource:l}=lp(i);return q.updateProjectOpentelemetryIntegration(s,{telemetry:c,resource:l,skip_validation:!0})},onMutate:()=>n("opentelemetry_integration_update"),onError:i=>H(i),onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=lp(c);r.setQueryData(Jt(s),h=>({...h,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending"}})),a(!0),t()}})},Gt={header:"Authentication",bearer:{header:"Bearer",label:"Bearer Token",tokenPlaceholder:"Enter your bearer token",description:"Use a short-lived token typically issued by an identity provider. Best for secure, time-bounded access."},basic:{header:"Basic",usernameLabel:"Username",usernamePlaceholder:"Enter your username",passwordLabel:"Password",passwordPlaceholder:"Enter your password",description:"Authenticate with a username and password. Mostly used for legacy systems and internal tools."},apiKey:{header:"API Key",label:"API Key",keyPlaceholder:"Enter your API key",description:"Use a static key tied to your account or project. Simple to manage, but less secure if exposed."}},vY="_message_1jb8g_1",Ig={message:vY},wY=()=>{const{control:t,watch:s,register:n}=nt(),r=s("connection.authentication"),o=(r==null?void 0:r.bearerToken)!==void 0,a=(r==null?void 0:r.apiKey)!==void 0,i=(r==null?void 0:r.basic)!==void 0;return e.jsxs(e.Fragment,{children:[e.jsx(z,{level:5,children:Gt.header}),e.jsx(me,{name:"connection.authentication",control:t,render:({field:c})=>e.jsxs(Da,{children:[e.jsx(as,{active:o,onClick:()=>c.onChange({bearerToken:c.value.bearerToken||""}),children:Gt.bearer.header}),e.jsx(as,{active:i,onClick:()=>{var l,d;return c.onChange({basic:{username:((l=c.value.basic)==null?void 0:l.username)||"",password:((d=c.value.basic)==null?void 0:d.password)||""}})},children:Gt.basic.header}),e.jsx(as,{active:a,onClick:()=>c.onChange({apiKey:c.value.apiKey||""}),children:Gt.apiKey.header})]})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ig.message,children:Gt.bearer.description}),e.jsx(R,{label:Gt.bearer.label,children:e.jsx(ne,{...n("connection.authentication.bearerToken",{required:!0}),type:"password",placeholder:Gt.bearer.tokenPlaceholder})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ig.message,children:Gt.basic.description}),e.jsx(R,{label:Gt.basic.usernameLabel,children:e.jsx(ne,{...n("connection.authentication.basic.username",{required:!0}),placeholder:Gt.basic.usernamePlaceholder})}),e.jsx(R,{label:Gt.basic.passwordLabel,children:e.jsx(ne,{...n("connection.authentication.basic.password",{required:!0}),type:"password",placeholder:Gt.basic.passwordPlaceholder})})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ig.message,children:Gt.apiKey.description}),e.jsx(R,{label:Gt.apiKey.label,children:e.jsx(ne,{...n("connection.authentication.apiKey",{required:!0}),type:"password",placeholder:Gt.apiKey.keyPlaceholder})})]})]})},SY=()=>{const{control:t,register:s}=nt();return e.jsxs(e.Fragment,{children:[e.jsx(z,{level:5,children:we.form.connection.header}),e.jsx(me,{name:"connection.protocol",control:t,render:({field:n})=>e.jsxs(Da,{children:[e.jsx(as,{active:n.value==="grpc",onClick:()=>n.onChange("grpc"),children:we.form.connection.grpc.label}),e.jsx(as,{active:n.value==="http",onClick:()=>n.onChange("http"),children:we.form.connection.http.label})]})}),e.jsx(R,{label:we.form.connection.endpoint.label,children:e.jsx(ne,{...s("connection.endpoint",{required:!0}),placeholder:we.form.connection.endpoint.placeholder})})]})},CY=()=>{const{setValue:t,watch:s,register:n,getValues:r}=nt(),o=s("telemetry.metrics_endpoint_override"),a=s("telemetry.logs_endpoint_override"),[i,c]=m.useState(!!(o||a)),l=()=>{c(d=>(d&&(t("telemetry.metrics_endpoint_override",void 0),t("telemetry.logs_endpoint_override",void 0)),!d))};return e.jsxs(e.Fragment,{children:[e.jsx(hn,{isSelected:i,onChange:l,children:we.form.telemetry.endpointOverride.description}),i&&e.jsxs(e.Fragment,{children:[e.jsx(R,{label:we.form.telemetry.endpointOverride.metrics,children:e.jsx(ne,{...n("telemetry.metrics_endpoint_override"),placeholder:we.form.telemetry.endpointOverride.metricsPlaceholder,defaultValue:r("telemetry.metrics_endpoint_override")??""})}),e.jsx(R,{label:we.form.telemetry.endpointOverride.logs,children:e.jsx(ne,{...n("telemetry.logs_endpoint_override"),placeholder:we.form.telemetry.endpointOverride.logsPlaceholder,defaultValue:r("telemetry.logs_endpoint_override")??""})})]})]})},kY="_section_cv3g8_1",IY="_divider_cv3g8_7",_i={section:kY,divider:IY},PY=()=>{const{control:t}=nt();return e.jsxs(e.Fragment,{children:[e.jsx(z,{level:5,children:we.form.resource.header}),e.jsx(me,{name:"resourceAttributes",control:t,render:({field:{value:s={},onChange:n,...r}})=>e.jsxs(Sd,{fullWidth:!1,children:[e.jsx(R,{children:e.jsx(ne,{...r,placeholder:we.form.resource.key,disabled:!0})}),e.jsx(R,{children:e.jsx(ne,{...r,placeholder:we.form.resource.value,onChange:o=>{const a=o.target.value;n(a?{[we.form.resource.key]:a}:void 0)},defaultValue:(s==null?void 0:s[we.form.resource.key])??""})})]})})]})},TY="_checkboxLabel_ugzm3_1",NY="_checkboxGroup_ugzm3_5",Pg={checkboxLabel:TY,checkboxGroup:NY},AY=()=>{const{control:t,trigger:s}=nt();return e.jsxs(e.Fragment,{children:[e.jsx(z,{level:5,children:we.form.export.header}),e.jsx(me,{name:"telemetry.types",control:t,rules:{validate:n=>!n.metrics_enabled&&!n.logs_enabled?we.form.export.atLeastOneRequired:!0},render:({fieldState:n})=>e.jsxs("div",{className:Pg.checkboxGroup,children:[e.jsx(me,{name:"telemetry.types.metrics_enabled",control:t,render:({field:r})=>{var o;return e.jsx(R,{error:!!((o=n.error)!=null&&o.message),children:e.jsx(Ir,{...r,value:"metrics",checked:r.value,labelClassName:Pg.checkboxLabel,onChange:a=>{r.onChange(a.target.checked),s("telemetry.types")},children:we.form.export.metrics})})}}),e.jsx(me,{name:"telemetry.types.logs_enabled",control:t,render:({field:r})=>{var o;return e.jsx(R,{error:(o=n.error)==null?void 0:o.message,children:e.jsxs(Ir,{...r,value:"logs",checked:r.value,labelClassName:Pg.checkboxLabel,onChange:a=>{r.onChange(a.target.checked),s("telemetry.types")},children:[we.form.export.logs," ",e.jsx(he,{appearance:"experimental",size:"m",margin:"left",children:"Beta"})]})})}})]})})]})},Yk=({form:t,projectId:s,onSubmit:n,otelConfigured:r=!1})=>{var l,d;const a=((l=ds({projectId:s}).data)==null?void 0:l.endpoints.filter(u=>u.compute_release_version&&Number(u.compute_release_version)<8320))??[],{branchesById:i}=Zf({projectId:s}),c=t.watch("telemetry");return e.jsxs(Lt,{onSubmit:t.handleSubmit(n),id:"opentelemetry-form",gaps:!0,children:[e.jsx("div",{className:_i.section,children:e.jsx(AY,{})}),e.jsx("div",{className:_i.divider}),!r&&e.jsx("div",{className:_i.section,children:e.jsx(SY,{})}),e.jsx("div",{className:_i.section,children:e.jsx(CY,{})}),!r&&e.jsx("div",{className:_i.section,children:e.jsx(wY,{})}),e.jsx("div",{className:_i.section,children:e.jsx(PY,{})}),a.length>0&&((d=c==null?void 0:c.types)==null?void 0:d.logs_enabled)&&e.jsx(aR,{outdatedComputes:a,branchesById:i})]})},EY=({projectId:t,configuration:s,onRequestClose:n,...r})=>{var _,x;const o=ds({projectId:t}),a=(_=o==null?void 0:o.data)==null?void 0:_.endpoints.some(j=>j.current_state!=="active"),i=xe({defaultValues:{connection:{protocol:s.connection.protocol,endpoint:s.connection.endpoint,authentication:{}},telemetry:{types:{metrics_enabled:s.telemetry.types.includes("metrics"),logs_enabled:s.telemetry.types.includes("logs")},metrics_endpoint_override:s.telemetry.metrics_endpoint_override,logs_endpoint_override:s.telemetry.logs_endpoint_override},resourceAttributes:(x=s.resource)==null?void 0:x.attributes}}),c=jY({onSuccess:n}),l=yY({onSuccess:n}),{confirm:d}=Oe(),u=m.useCallback(()=>{d({header:we.disconnectConfirmationTitle,text:we.disconnectConfirmationDescription,confirmButtonText:we.disconnectButton}).then(j=>j?c.mutate():null)},[d,c]),h=m.useCallback(j=>{l.mutate(j)},[l]),p=c.isPending||l.isPending,g=mY(s.status);return e.jsx(us,{...i,children:e.jsx(Io,{footer:e.jsxs("div",{className:Fu.footer,children:[e.jsx(P,{appearance:"secondary",onClick:u,disabled:p,loading:p,children:we.disconnectButton}),e.jsxs("div",{className:Fu.footerGroup,children:[e.jsx(P,{appearance:"secondary",onClick:n,children:we.cancelButton}),e.jsx(_e,{appearance:"primary",disabled:p||!i.formState.isValid,formId:"opentelemetry-form",children:we.confirmButton})]})]}),onRequestClose:n,...r,children:e.jsxs(mt,{className:Fu.section,children:[e.jsx(T,{children:we.form.intro}),a&&e.jsx(Q,{appearance:"warning",children:we.inactiveComputesWarning}),e.jsxs("div",{className:Fu.statusWrapper,children:[e.jsx(sc,{appearance:"secondary",content:s.connection.endpoint,maxWidth:200}),e.jsx(R,{label:we.form.connection.authHeader,children:we.form.connection.configured}),e.jsx(R,{label:we.badge.statusLabel,children:e.jsx(Yf,{appearance:g.appearance,size:"s",label:g.label,pending:g.appearance==="loading"})})]}),e.jsx(Yk,{form:i,onSubmit:h,projectId:t,otelConfigured:!0})]})})})},$Y="_section_179oe_1",OY={section:$Y},RY=({onRequestClose:t,projectId:s,...n})=>{const r=xe({defaultValues:{connection:{protocol:"http",endpoint:"",authentication:{bearerToken:""}},telemetry:{types:{metrics_enabled:!0,logs_enabled:!0}}}}),o=xY({onSuccess:t}),a=m.useCallback(async i=>{await o.mutateAsync(i)},[o]);return e.jsx(us,{...r,children:e.jsx(Io,{footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{appearance:"secondary",onClick:t,children:we.cancelButton}),e.jsx(_e,{appearance:"primary",disabled:!r.formState.isValid,formId:"opentelemetry-form",children:we.confirmButton})]}),onRequestClose:t,...n,children:e.jsxs(mt,{className:OY.section,children:[e.jsx(T,{children:we.form.intro}),e.jsx(Yk,{form:r,onSubmit:a,projectId:s})]})})})},BY=({projectId:t,configuration:s})=>{const n=Gb().opentelemetry,{openedDrawerId:r,closeDrawer:o}=ko(),{trackUiInteraction:a}=k(),i=m.useCallback(()=>{a(s?"opentelemetry_integration_configured_settings_close":"opentelemetry_integration_available_settings_close"),o()},[o,s,a]),c=r===vr.Opentelemetry,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":we.label,title:we.title,iconName:"opentelemetry"};return s?e.jsx(EY,{...l,projectId:t,configuration:s}):e.jsx(RY,{...l,projectId:t})},LY=()=>{const{trackUiInteraction:t}=k(),{orgId:s}=Y(),{token:n}=Ep(),{isAllowedToInstall:r,isLoading:o}=Kb(),a=s?`?org_id=${s}`:"",i=`${$p}/integrations/vercel${a}`;return e.jsxs(e.Fragment,{children:[e.jsxs(Lt,{action:i,target:"_blank",method:"post",children:[e.jsx("input",{type:"hidden",name:"authenticity_token",value:n}),e.jsx(Jb,{label:Lk.installVercelButton,deniedMessage:r?void 0:jo.installIntegrationNotAllowed,loading:o,withIcon:!0,onClick:()=>{t("vercel_account_integration_install_clicked")}})]}),e.jsx(yr,{}),e.jsx(Dk,{}),e.jsx(yr,{}),e.jsx(Yb,{})]})},DY={title:"Vercel"},MY="_root_124ip_1",UY="_header_124ip_11",FY="_title_124ip_17",Tg={root:MY,header:UY,title:FY},fi={title:"Vercel integrations",neonProjectHeader:"Neon project",vercelProjectHeader:"Vercel project",openSettingsButton:"Open settings"},qY="_card_27vjq_1",zY="_column_27vjq_11",Ng={card:qY,column:zY},HY=({projects:t,onSettingsOpen:s})=>{if(t.length<=3)return t.map(r=>e.jsxs("div",{className:Ng.card,"data-qa":"project-card",children:[e.jsxs("div",{className:Ng.column,children:[e.jsx(T,{appearance:"secondary",children:fi.neonProjectHeader}),e.jsx(A,{href:F(jR.ProjectsItem,{projectId:r.neon_project_id}),appearance:"primary",children:r.neon_project_name})]}),e.jsxs("div",{className:Ng.column,children:[e.jsx(T,{appearance:"secondary",children:fi.vercelProjectHeader}),r.url?e.jsx(A,{href:r.url,appearance:"primary",openInNewTab:!0,children:r.name}):e.jsxs(T,{children:[" ",r.name]})]}),e.jsx(P,{size:"s",appearance:"secondary",onClick:()=>s(r),children:fi.openSettingsButton})]},r.id));const n=[{id:"neon_project_name",header:fi.neonProjectHeader,enableSorting:!0,rowHeader:!0,accessorKey:"neon_project_name"},{id:"vercel_project_name",header:fi.vercelProjectHeader,enableSorting:!0,accessorKey:"name"},{id:"settings",size:62,render:r=>e.jsx(Zt,{iconName:"edit","data-qa":"open-settings",onClick:()=>s(r)})}];return e.jsx(mn,{columns:n,getRowId:r=>r.id,isLoading:!1,rows:t,"aria-label":fi.title,defaultSorting:{column:"neon_project_name",direction:"ascending"}})},Ps={neonProjectLabel:"Neon project",vercelProjectLabel:"Vercel project",roleLabel:"Role",databaseLabel:"Database",selectProjectPlaceholder:"Select project",connectedBadge:"Connected",connectButton:"Connect",connectingButton:"Connecting..."},VY="_form_1u48e_1",WY="_neonSection_1u48e_6",GY="_roleAndDatabaseRow_1u48e_16",KY="_vercelSection_1u48e_26",QY="_compareIcon_1u48e_33",YY="_vercelProjectField_1u48e_39",JY="_connectButton_1u48e_43",Vo={form:VY,neonSection:WY,roleAndDatabaseRow:GY,vercelSection:KY,compareIcon:QY,vercelProjectField:YY,connectButton:JY},ZY=({configurationId:t,projects:s,vercelProjects:n})=>{const r=m.useMemo(()=>n.map(w=>w.neon_project_id).filter(pS),[n]),o=m.useMemo(()=>s.map(w=>({value:w.id,label:w.name,disabled:r.includes(w.id),suffix:r.includes(w.id)&&e.jsx(he,{appearance:"warning",children:Ps.connectedBadge})})),[r,s]),{connectedVercelProjectIds:a,connectProjectAsync:i,isLoading:c,isConnecting:l}=Oc(),d=m.useMemo(()=>n.map(w=>({value:w.id,label:w.name,disabled:a.includes(w.id),suffix:a.includes(w.id)&&e.jsx(he,{appearance:"warning",children:Ps.connectedBadge})})),[a,n]),u=xe({defaultValues:{neonProjectId:""}}),{control:h,watch:p,formState:g,register:_}=u,x=p("neonProjectId"),{branches:j,isLoading:b}=zf(x),f=m.useMemo(()=>{var w;return(w=j==null?void 0:j.find(S=>S.default))==null?void 0:w.id},[j]),y=m.useMemo(()=>c||b,[c,b]),v=m.useCallback(async w=>{if(f)try{await i({...w,configurationId:t,projectId:w.neonProjectId,branchId:f}),u.reset(),re(am.projectConnectedWithSuccess)}catch(S){H(S)}},[t,i,f,u]);return e.jsxs(It,{providerProps:u,onSubmit:v,className:Vo.form,children:[e.jsxs("div",{className:Vo.neonSection,children:[e.jsx(R,{label:Ps.neonProjectLabel,children:e.jsx(me,{name:"neonProjectId",control:h,render:({field:{onChange:w,...S}})=>e.jsx(He,{options:o,placeholder:Ps.selectProjectPlaceholder,size:"s","aria-label":Ps.neonProjectLabel,disabled:l,..._("neonProjectId",{required:!0}),onChange:I=>{w(I)},...S})})}),x&&e.jsxs("div",{className:Vo.roleAndDatabaseRow,children:[e.jsx(R,{label:Ps.databaseLabel,children:e.jsx(me,{name:"database",control:h,rules:{required:!0},render:({field:w})=>e.jsx($S,{projectId:x,branchId:f,value:w.value,canCreateDatabase:!1,size:"s","data-qa":"database-select",disabled:!f||y||l,onChange:S=>w.onChange(S)})})}),e.jsx(R,{label:Ps.roleLabel,children:e.jsx(me,{name:"role",control:h,rules:{required:!0},render:({field:w})=>e.jsx(OS,{projectId:x,branchId:f,value:w.value,canCreateRole:!1,size:"s","data-qa":"role-select",disabled:!f||y||l,onChange:S=>w.onChange(S)})})})]})]}),e.jsxs("div",{className:Vo.vercelSection,children:[e.jsx("div",{className:Vo.compareIcon,children:e.jsx(L,{name:"compare",size:20})}),e.jsx(R,{label:Ps.vercelProjectLabel,className:Vo.vercelProjectField,children:e.jsx(me,{name:"vercelProjectId",control:h,render:({field:{onChange:w,...S}})=>e.jsx(He,{options:d,placeholder:Ps.selectProjectPlaceholder,size:"s","aria-label":Ps.vercelProjectLabel,disabled:l,..._("vercelProjectId",{required:!0}),onChange:I=>{w(I)},...S})})}),e.jsx("div",{className:Vo.connectButton,children:e.jsx(_e,{disabled:y||!g.isValid,loading:l,children:l?Ps.connectingButton:Ps.connectButton})})]})]})},Gs={connectedProjectsTitle:"Connected projects",connectAnotherProjectTitle:"Connect another project",removeIntegrationTitle:"Remove integration",removeIntegrationDescription:"Removing the integration from this account will also disconnect it from all projects.",removeIntegrationButton:"Remove",confirmRemoveIntegrationTitle:"Remove Vercel integration?",confirmRemoveIntegrationDescription:{common:"Vercel is globally configured for Neon account.",personal:"When the Vercel integration is removed, all Neon projects on this account connected to Vercel counterparts will be disconnected.",org:"When the Vercel integration is removed, all Neon projects on this organization connected to Vercel counterparts will be disconnected."},confirmRemoveIntegrationButton:"Remove Vercel integration",removeIntegrationSuccess:"The Vercel integration was removed"},XY="_projectsSection_1hd1s_1",eJ="_removeIntegrationSection_1hd1s_7",tJ="_removeIntegrationHeader_1hd1s_13",qu={projectsSection:XY,removeIntegrationSection:eJ,removeIntegrationHeader:tJ},sJ=({configurationId:t,projects:s})=>{const{projects:n,removeIntegration:r,isRemoving:o}=Oc(),{confirm:a}=Oe(),{orgId:i}=Y(),{isAllowedToInstall:c,isLoading:l}=Kb(),d=s&&s.length>0,u=n&&n.length>0,h=n==null?void 0:n.filter(j=>j.neon_project_id),p=h&&h.length>0,g=m.useCallback(async()=>{try{if(!await a({appearance:"error",header:Gs.confirmRemoveIntegrationTitle,text:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:Gs.confirmRemoveIntegrationDescription.common}),e.jsx("p",{children:i?Gs.confirmRemoveIntegrationDescription.org:Gs.confirmRemoveIntegrationDescription.personal})]}),confirmButtonText:Gs.confirmRemoveIntegrationButton}))return;await r(),re(Gs.removeIntegrationSuccess)}catch(j){H(j)}},[a,i,r]),[_,x]=m.useState();return e.jsxs(e.Fragment,{children:[_&&e.jsx(Xf,{projectId:_.neon_project_id,children:e.jsx(iQ,{isOpen:!0,onRequestClose:()=>x(void 0),onRemoveSuccess:()=>{x(void 0)}})}),p&&e.jsxs("section",{className:qu.projectsSection,children:[e.jsx(z,{level:5,children:Gs.connectedProjectsTitle}),e.jsx(HY,{projects:h,onSettingsOpen:x})]}),d&&u&&e.jsxs("div",{className:qu.projectsSection,children:[e.jsx(z,{level:3,children:Gs.connectAnotherProjectTitle}),e.jsx(ZY,{configurationId:t,projects:s,vercelProjects:n})]}),e.jsx(Yb,{}),e.jsxs("section",{className:qu.removeIntegrationSection,children:[e.jsxs("div",{className:qu.removeIntegrationHeader,children:[e.jsx(z,{level:5,children:Gs.removeIntegrationTitle}),e.jsx(T,{children:Gs.removeIntegrationDescription})]}),e.jsx("div",{children:e.jsx(Jb,{size:"s",appearance:"error",label:Gs.removeIntegrationButton,deniedMessage:c?void 0:jo.removeIntegrationNotAllowed,onClick:g,loading:l||o})})]})]})},Jk=({headingId:t})=>{const{isConfigured:s,configurationId:n,isLoading:r}=Oc(),{data:o,isLoading:a}=vs();return r||a?e.jsx(pe,{}):e.jsxs("div",{className:Tg.root,children:[e.jsxs("div",{className:Tg.header,children:[e.jsx(z,{id:t,level:2,className:Tg.title,children:DY.title}),e.jsx(z,{level:3,size:"h4",children:am.integrationDescription})]}),s&&n?e.jsx(sJ,{configurationId:n,projects:o}):e.jsx(LY,{})]})},im=m.forwardRef(({onChange:t,projectId:s,...n},r)=>{const{trackUiInteraction:o}=k(),{project:a}=O(),{branch:i}=ut(),c=hs({projectId:s,branchId:(i==null?void 0:i.id)??""}),l=m.useMemo(()=>{var u;return[...((u=c.data)==null?void 0:u.endpoints)??[]].sort(eb)},[c.data]),d=m.useCallback((u,h)=>{h||o("endpoint_select_value_changed"),t(u,h)},[t,o]);return!i||!a?null:e.jsx(tb,{ref:r,...n,onChange:d,endpoints:l,loading:c.isLoading})});im.displayName="EndpointSelect";const Lh="database",Bc=()=>Ma(Lh),nJ="endpointId",cm=()=>Ma(nJ),Ag={refresh:"Refresh",database:"Database",compute:"Compute"},rJ="_container_65vuw_1",oJ="_group_65vuw_7",aJ="_select_65vuw_13",ul={container:rJ,group:oJ,select:aJ},iJ=()=>{const{selectOptions:t}=un(),[s,n]=Bc(),{branch:r}=ut();return{databaseOption:m.useMemo(()=>t.find(a=>a.value===s&&a.database.branch_id===(r==null?void 0:r.id)),[s,t,r==null?void 0:r.id]),setDatabaseName:n}},Zk=({onRefresh:t,refreshDisabled:s,children:n})=>{const{projectId:r}=O(),{databaseOption:o,setDatabaseName:a}=iJ(),[i,c]=cm();return e.jsxs("div",{className:ul.container,children:[e.jsxs("div",{className:ul.group,children:[e.jsx(R,{label:Ag.compute,children:e.jsx(im,{size:"s",projectId:r,className:ul.select,endpointId:i??void 0,onChange:l=>c(l==null?void 0:l.id),disabled:!i})}),e.jsx(R,{label:Ag.database,children:e.jsx(fb,{size:"s",className:ul.select,value:o,canCreateDatabase:!1,onChange:l=>a(l==null?void 0:l.value),disabled:!o})})]}),e.jsxs("div",{className:ul.group,children:[n,e.jsx(P,{appearance:"secondary",icon:"reset",onClick:t,disabled:s,children:Ag.refresh})]})]})},Xk=()=>{const{projectId:t}=O(),s=ds({projectId:t}),[n]=cm(),r=m.useMemo(()=>{var o;return(o=s.data)==null?void 0:o.endpoints.find(a=>a.id===n)},[s.data,n]);return(r==null?void 0:r.current_state)==="active"&&(r==null?void 0:r.pending_state)===void 0},id={empty:"No active queries",ariaLabel:"Active queries",columnPID:"PID",columnQuery:"Query",columnDuration:"Duration"},cJ="_container_jqwgm_1",lJ="_placeholder_jqwgm_7",Ey={container:cJ,placeholder:lJ};function Ha(){const[t]=Bc(),{selectOptions:s}=un();return m.useMemo(()=>{if(s.length)return s.find(n=>n.database.name===t)??s[0]},[s,t])}const dJ=(t,s)=>t.appendConnectionString?[...t.key,s]:t.key;function lm({connectionParams:t,querySystemPostgres:s}={}){var x;const{projectId:n,project:r}=O(),{data:o}=Ud({branchId:t==null?void 0:t.branchId,projectId:n}),a=ds({projectId:n}),i=m.useMemo(()=>{var j;return((j=a.data)==null?void 0:j.endpoints)??[]},[a.data]),[c]=cm(),l=i.find(j=>t!=null&&t.branchId?j.branch_id===t.branchId:c?j.id===c:j.type==="read_write");let d=(x=Ha())==null?void 0:x.database;t!=null&&t.dbName&&(d=o.list.find(j=>j.name===t.dbName));const u=r!=null&&r.store_passwords?d==null?void 0:d.owner_name:Fd,h=s?"postgres":d==null?void 0:d.name,p=$_(l,t==null?void 0:t.poolerEnabled),{data:g}=LE({projectId:n,branchId:(l==null?void 0:l.branch_id)??"",role:u??""});return m.useMemo(()=>!p||!u||!h||!g?null:Zl({host:p,role:u,database:h,password:g,maskPassword:t==null?void 0:t.maskPassword}),[h,p,g,u,t==null?void 0:t.maskPassword])}function Lc({queryKey:t,query:s,zodSchema:n,options:r,querySystemPostgres:o,connectionParams:a}){const i=lm({connectionParams:a,querySystemPostgres:o}),c=m.useMemo(()=>dJ(t,i||""),[i,t]),l=((r==null?void 0:r.enabled)!=null?r.enabled:!0)&&i!==null;return st({retry:!1,queryKey:c,queryFn:async()=>{const u=await Dp(i)(s);return n?va(n).parse(u):u},...r,enabled:l})}function uJ({query:t,options:s,connectionParams:n}){const r=lm({connectionParams:n});return de({mutationFn:async()=>{if(!r)throw new Error("Missing connection data");return await Dp(r)(t)},...s})}const hJ=Rt({pid:an(),duration:_b.number().transform(t=>parseFloat(t.toFixed(1))),query:dt()}),eI="useActiveQueries",pf="duration",tI="descending",sI={column:pf,direction:tI},pJ=t=>{const s=new Set(["pid","duration"]),n=t.column??pf,r=(s.has(n)?n:pf).toString(),o=(t.direction??tI)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:o}},mJ=(t,s=sI)=>{const n=Ha(),{sortKey:r,sortDirection:o}=pJ(s),{data:a,isPending:i,refetch:c,error:l}=Lc({queryKey:{key:[eI,r,o],appendConnectionString:!0},query:`
SELECT
       pid,
       EXTRACT(EPOCH FROM (now() - pg_stat_activity.query_start)) * 1000 AS duration,
       query
  FROM pg_stat_activity
 WHERE state = 'active'
   AND pid <> pg_backend_pid()
   AND datid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
   ORDER BY ${r} ${o}
   LIMIT 100;`,zodSchema:hJ,options:{enabled:t&&!!(n!=null&&n.database.name)}});return{queries:a,isPending:i,refetch:c,error:l}},gJ=()=>{const t=ie(),s=lm();return de({mutationFn:async n=>{if(!s)throw new Error("Missing connection data");return Dp(s)(`SELECT pg_terminate_backend(${n})`)},onSuccess:()=>t.invalidateQueries({queryKey:[eI]})})},_J={title:"Cancel query"},fJ=()=>{const{isPending:t,mutate:s,error:n}=gJ(),{trackUiInteraction:r}=k();return m.useEffect(()=>{n&&H(n)},[n]),m.useCallback(o=>[{label:_J.title,onClick:()=>{r("monitoring_page_active_queries_cancel_query_clicked",{cancelled_after_ms:o.duration}),s(o.pid)},disabled:t,icon:"cross_small"}],[t,r,s])},bJ=[{accessorKey:"pid",header:id.columnPID,rowHeader:!0,enableSorting:!0,size:80,render:t=>t.pid},{accessorKey:"duration",header:id.columnDuration,enableSorting:!0,size:120,render:t=>Gh({total_duration_ms:t.duration})},{accessorKey:"query",header:id.columnQuery,render:t=>e.jsx("code",{children:t.query})}],xJ=()=>{const t=Xk(),s=fJ(),[n,r]=m.useState(sI),{queries:o,isPending:a,refetch:i,error:c}=mJ(t,n);m.useEffect(()=>{c&&H(c)},[c]);const{trackUiInteraction:l}=k(),d=m.useCallback(p=>{!p.column||!p.direction||(l("monitoring_page_active_queries_order_changed",{column:p.column,direction:p.direction}),r(p))},[l]),u=m.useCallback(()=>{l("monitoring_page_active_queries_refresh_clicked"),i()},[l,i]),h=!t||!(o!=null&&o.length);return e.jsxs("div",{className:Ey.container,children:[e.jsx(Zk,{onRefresh:u,refreshDisabled:a}),h?e.jsx("div",{className:Ey.placeholder,children:e.jsx(Wd,{title:id.empty})}):e.jsx(mn,{columns:bJ,rows:o,sorting:n,onSortingChange:d,"aria-label":id.ariaLabel,isLoading:a,rowActions:s})]})},jJ=()=>{const{project:t}=O();return t?e.jsx(xJ,{}):e.jsx(pe,{})},ha={ariaLabel:"Past Queries",emptyText:"No past queries",columnQuery:"Query",columnAverageTime:"Average time",columnTotalTime:"Total time",columnRole:"Role",columnCalls:"Calls"},yJ="_container_jqwgm_1",vJ="_placeholder_jqwgm_7",$y={container:yJ,placeholder:vJ},wJ=Rt({userid:an(),role_name:dt(),query:dt(),calls:_b.number(),total_min:an(),avg_ms:an()}),mf="total_min",nI="descending",rI={column:mf,direction:nI},SJ=t=>{const s=new Set(["total_min","calls","avg_ms"]),n=t.column??mf,r=(s.has(n)?n:mf).toString(),o=(t.direction??nI)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:o}},CJ=(t,s=rI)=>{const n=Ha(),{sortKey:r,sortDirection:o}=SJ(s),{data:a,isPending:i,error:c,refetch:l}=Lc({queryKey:{key:["usePastQueries",r,o,(n==null?void 0:n.database.name)??""],appendConnectionString:!0},query:`
      SELECT
        s.userid,
        r.rolname AS role_name,
        s.query,
        s.calls,
        (s.total_exec_time / 1000 / 60) AS total_min,
        s.mean_exec_time AS avg_ms
      FROM pg_stat_statements s
      JOIN pg_roles r ON s.userid = r.oid
      WHERE s.dbid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
        AND r.rolname != 'cloud_admin'
      ORDER BY ${r} ${o}
      LIMIT 100
    ;`,zodSchema:wJ,options:{enabled:!!(n!=null&&n.database.name)},querySystemPostgres:!0});return{queries:m.useMemo(()=>(a||[]).map(u=>({...u,key:`${u.userid}_${u.query}`})),[a]),isPending:i,error:c,refetch:l}};function Oy(t,s){return parseFloat(t.toFixed(s))}const kJ=[{accessorKey:"role_name",header:ha.columnRole,rowHeader:!0,size:85,render:t=>t.role_name},{accessorKey:"calls",header:ha.columnCalls,size:50,enableSorting:!0,render:t=>t.calls},{accessorKey:"avg_ms",header:ha.columnAverageTime,size:140,enableSorting:!0,render:t=>Gh({total_duration_ms:Oy(t.avg_ms,1)})},{accessorKey:"total_min",header:ha.columnTotalTime,size:140,enableSorting:!0,render:t=>Gh({total_duration_ms:Oy(t.total_min*60*1e3,1)})},{accessorKey:"query",header:ha.columnQuery,render:t=>e.jsx("code",{children:t.query})}],IJ=()=>{const[t,s]=m.useState(rI),n=Xk(),{queries:r,isPending:o,error:a,refetch:i}=CJ(!0,t);m.useEffect(()=>{a&&H(a)},[a]);const{trackUiInteraction:c}=k(),l=m.useCallback(u=>{!u.column||!u.direction||(c("monitoring_page_query_history_order_changed",{column:u.column,direction:u.direction}),s(u))},[c]),d=m.useCallback(()=>{c("monitoring_page_query_history_refresh_clicked"),i()},[c,i]);return e.jsxs("div",{className:$y.container,children:[e.jsx(Zk,{onRefresh:d,refreshDisabled:o}),!n&&e.jsx(pe,{}),n&&!o&&r.length===0&&e.jsx("div",{className:$y.placeholder,children:e.jsx(Wd,{title:ha.emptyText})}),n&&(o||r.length>0)&&e.jsx(mn,{columns:kJ,rows:r,isLoading:o,"aria-label":ha.ariaLabel,sorting:t,onSortingChange:l})]})},PJ=()=>{const{project:t}=O();return t?e.jsx(IJ,{}):e.jsx(pe,{})},TJ="_container_wonxm_1",NJ="_poster_wonxm_7",AJ="_content_wonxm_13",EJ="_buttons_wonxm_22",zu={container:TJ,poster:NJ,content:AJ,buttons:EJ},oI=t=>{const{org:s,isLoading:n}=Y(),{isOrgAdmin:r,isLoading:o}=wt(),{isCollaborator:a,isLoading:i}=Cc(t),c=n||i||o;return c?{canManageIntegration:!1,isLoading:c}:a?{canManageIntegration:!1,isCollaborator:!0,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},Fi={installNeonAuthOnSharedProjectNotAllowed:"You cannot install Neon Auth on shared projects. Contact the Project Admin for help.",manageNeonAuthOnSharedProjectNotAllowed:"You cannot manage Neon Auth on shared projects. Contact the Project Admin for help.",installNeonAuthNotAllowed:"You need additional permissions to install Neon Auth. Contact your Organization Admin for help.",manageNeonAuthNotAllowed:"You need additional permissions to manage Neon Auth. Contact your Organization Admin for help.",getInstallNeonAuthReason:({isLoading:t,canManageIntegration:s,isCollaborator:n})=>{if(!(t||s))return n?Fi.installNeonAuthOnSharedProjectNotAllowed:Fi.installNeonAuthNotAllowed},getManageNeonAuthReason:({isLoading:t,canManageIntegration:s,isCollaborator:n})=>{if(!(t||s))return n?Fi.manageNeonAuthOnSharedProjectNotAllowed:Fi.manageNeonAuthNotAllowed}},aI=2*sb,$J=100,Jd="neon_auth",iI="users_sync",dm=`${Jd}.${iI}`,OJ=[`schema "${Jd}" already exists`,"Failed to create the schema"],RJ=t=>t.includes(`relation "${dm}" does not exist`),Ry=t=>OJ.some(s=>t.includes(s)),BJ=["id","name","email","raw_json","updated_at","created_at","deleted_at"],LJ=Rt({id:dt(),raw_json:Rt({}).passthrough(),name:dt().nullable(),email:dt().email().nullable(),created_at:Hi().nullable(),updated_at:Hi().nullable(),deleted_at:Hi().nullable()}),DJ=Rt({count:an()}),Ea={recentUsers:t=>["getRecentUsers",t],usersCount:t=>["getAllUsersCount",t]},MJ=()=>{const{projectId:t}=O(),{data:s}=Po(t),n=s==null?void 0:s[0];return Lc({queryKey:{key:Ea.recentUsers(t),appendConnectionString:!1},query:`SELECT ${BJ.join(", ")}
     FROM ${dm}
     WHERE deleted_at IS NULL
     ORDER BY created_at DESC
     LIMIT ${$J}`,zodSchema:LJ,options:{enabled:!!n,staleTime:aI},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},UJ=()=>{const{projectId:t}=O(),{data:s}=Po(t),n=s==null?void 0:s[0];return Lc({queryKey:{key:Ea.usersCount(t),appendConnectionString:!1},query:`SELECT COUNT(id)::integer as "count"
     FROM ${dm}
     WHERE deleted_at IS NULL
`,zodSchema:DJ,options:{enabled:!!n,staleTime:aI},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},FJ=()=>{const t=ie(),{projectId:s}=O(),{data:n}=Po(s),r=n==null?void 0:n[0];return uJ({query:`DROP SCHEMA IF EXISTS ${Jd} CASCADE;`,options:{onSuccess:()=>{t.removeQueries({queryKey:Ea.usersCount(s),exact:!0}),t.removeQueries({queryKey:Ea.recentUsers(s),exact:!0})}},connectionParams:{branchId:r==null?void 0:r.branch_id,dbName:r==null?void 0:r.db_name}})},$a={all:t=>["identityIntegrations",t],authProviderKeys:({projectId:t,authProvider:s})=>["authProviderKeys",t,s]},Po=(t,s)=>st({...s,queryKey:$a.all(t),queryFn:async()=>{var r;const n=await q.listNeonAuthIntegrations(t);return(r=s==null?void 0:s.onSuccess)==null||r.call(s),n.data.data}}),qJ=t=>{const s=ie();return de({mutationFn:async({identityProvider:n})=>(await q.deleteNeonAuthIntegration(t,n.value)).data,onSuccess:()=>{s.invalidateQueries({queryKey:$a.all(t)})}})},zJ=()=>{const t=ie();return de({mutationFn:async s=>(await q.createNeonAuthIntegration(s)).data,onSuccess:(s,n)=>{t.invalidateQueries({queryKey:$a.all(n.project_id)})}})},HJ=({projectId:t,authProvider:s})=>{const n=ie();return st({retry:!1,queryKey:$a.authProviderKeys({projectId:t,authProvider:s}),queryFn:()=>n.getQueryData($a.authProviderKeys({projectId:t,authProvider:s})),enabled:!1})},cI=()=>{const t=ie();return de({mutationFn:async s=>(await q.createNeonAuthProviderSdkKeys(s)).data,onSuccess:(s,n)=>{t.setQueryData($a.authProviderKeys({projectId:n.project_id,authProvider:n.auth_provider}),s)}})},VJ=t=>de({mutationFn:async()=>(await q.syncAuthKeysVercel(t,{})).data}),WJ=()=>{const t=ie(),{projectId:s}=O();return de({mutationFn:async n=>(await q.transferNeonAuthProviderProject(n)).data,onSuccess:()=>{t.invalidateQueries({queryKey:$a.all(s)})}})},GJ=()=>{const t=ie();return de({mutationFn:async s=>(await q.createNeonAuthNewUser(s)).data,onSuccess:(s,n)=>{t.invalidateQueries({queryKey:Ea.recentUsers(n.project_id)}),t.invalidateQueries({queryKey:Ea.usersCount(n.project_id)})}})},By=`The ${Jd} schema already exists in your database. Please drop it before setting up the Neon Auth integration.`,KJ=t=>{const{mutate:s,isPending:n}=zJ(),{refetch:r}=Po(t),{trackUiInteraction:o}=k(),{defaultBranch:a}=Ye(),[i]=Bc(),{mutate:c}=cI(),{data:l}=Ud({branchId:a==null?void 0:a.id,projectId:t});let d;a&&(d=l.list.find(p=>p.name===i),d||(d=l.list.find(p=>p.branch_id===a.id)));const u=m.useCallback(p=>{if(!a||!d)return;o("neon_identity_empty_state_connect_provider_clicked",{provider:p,provisioningMode:"MANUAL"});const g=BR();g.onmessage=x=>{if(!LR(x))return;const j={autoClose:3e3},{data:b}=x.data;if(b.status==="error"){let{errorMessage:f}=b;Ry(f)&&(f=By),tt(ec(f),j),o("neon_identity_integration_added_error_callback",{provider:p,provisioningMode:"MANUAL"})}else o("neon_identity_integration_added_success_callback",{provider:p,provisioningMode:"MANUAL"}),r(),c({project_id:t,auth_provider:p}),DR()};const _={project_id:t,auth_provider:p,database_name:d.name,role_name:d.owner_name,branch_id:a.id};MS({url:RR.init(_)})},[r,a,d,t,o,c]),h=m.useCallback(p=>{!a||!d||(o("neon_identity_empty_state_connect_provider_clicked",{provider:p,provisioningMode:"AUTO"}),s({project_id:t,auth_provider:p,database_name:d.name,branch_id:a.id},{onSuccess:()=>{o("neon_identity_integration_added_success_callback",{provider:p,provisioningMode:"AUTO"}),c({project_id:t,auth_provider:p})},onError:g=>{const x=cs(g,"Failed to provision Stack Auth");o("neon_identity_integration_added_error_callback",{provider:p,provisioningMode:"AUTO"}),Ry(x)?tt(By,{autoClose:3e3}):tt(ec(x),{autoClose:3e3})}}))},[s,a,d,t,o,c]);return{isPending:n,autoProvisionNeonAuth:h,manualProvisionNeonAuth:u}},QJ="_wrapper_ha4fg_1",YJ="_buttons_ha4fg_6",Ly={wrapper:QJ,buttons:YJ},JJ=!1,ZJ=()=>{const{projectId:t}=O(),{canManageIntegration:s,isCollaborator:n,isLoading:r}=oI(t),{autoProvisionNeonAuth:o,manualProvisionNeonAuth:a,isPending:i}=KJ(t),c=!s,l=i||r,d=JJ,u=Fi.getInstallNeonAuthReason({isLoading:l,canManageIntegration:s,isCollaborator:n});return e.jsxs("div",{className:Ly.buttons,children:[e.jsx(Z,{content:u,disabled:!c,children:e.jsx("div",{className:Ly.wrapper,children:e.jsx(P,{appearance:"primary",size:"s",onClick:()=>o("stack"),disabled:c,loading:l,children:"Enable Neon Auth"})})}),e.jsxs("div",{children:[c||l?null:e.jsxs(T,{size:"s",children:["Using Stack Auth already?"," ",e.jsx(A,{onClick:()=>a("stack"),children:"Connect your project"})]}),d]})]})},XJ="/assets/assets/neon-auth-dark-BVavWW27.svg",eZ="/assets/assets/neon-auth-light-CuR4ekLV.svg",tZ=()=>{const s=vo()===cn.Dark?XJ:eZ;return e.jsxs("div",{className:zu.container,children:[e.jsx("img",{className:zu.poster,src:s,alt:"Neon Auth"}),e.jsxs("div",{className:zu.content,children:[e.jsx(z,{level:2,children:"Your app’s users, in your Neon database"}),e.jsx(T,{align:"center",children:"Embed ready-made auth UI components into your app in minutes. User data lives directly in your Neon database, no syncing required."})]}),e.jsx("div",{className:zu.buttons,children:e.jsx(ZJ,{})})]})},sZ="_beforeStartInstructions_1plpi_1",nZ={beforeStartInstructions:sZ},rZ=({authorizationProvider:t})=>e.jsxs("div",{className:nZ.beforeStartInstructions,children:[e.jsx(z,{level:3,size:"h4",children:"Before you start"}),e.jsxs(et,{children:["Set up a basic JS/TS project"," ",e.jsxs(ze,{children:["using ",t.label]})," ","or by following one of our"," ",e.jsx(A,{openInNewTab:!0,icon:"external_link",iconSize:"s",href:"https://github.com/orgs/neondatabase-labs/repositories?type=source&q=authorize",children:"official templates"}),"."]})]}),oZ="_installDriverInstructions_1ltzo_1",aZ={installDriverInstructions:oZ},Eg=[{value:"npm",label:"npm",content:"npm install @neondatabase/serverless"},{value:"yarn",label:"yarn",content:"yarn add @neondatabase/serverless"},{value:"pnpm",label:"pnpm",content:"pnpm install @neondatabase/serverless"},{value:"bun",label:"bun",content:"bun install @neondatabase/serverless"},{value:"jsr",label:"JSR",content:"npx jsr add @neon/serverless"}],iZ=({authProviderName:t})=>{var o;const[s,n]=m.useState(Eg[0].value),r=(o=Eg.find(a=>a.value===s))==null?void 0:o.content;return e.jsxs("div",{className:aZ.installDriverInstructions,children:[e.jsxs("div",{children:[e.jsxs(et,{children:[e.jsx(ze,{children:"Neon's Serverless Driver"})," ","makes it very convenient to manage the access control between your database requests and your ",t," users."]}),e.jsx("br",{}),e.jsxs(et,{children:["To integrate your application with Neon RLS,"," ",e.jsx(ze,{children:"install the driver"})," into your project:"]})]}),e.jsxs("div",{children:[e.jsx(pn,{variant:"contained",options:Eg,value:s,onChange:n}),e.jsx(Un,{variant:"contained",children:r})]}),e.jsx("div",{children:e.jsxs(et,{children:[" ","To learn more about the driver, check out the"," ",e.jsx(A,{openInNewTab:!0,icon:"external_link",iconSize:"s",href:"https://github.com/neondatabase/serverless",children:"Github Repo"}),"."]})})]})},cZ="_snippet_q8uhj_1",lZ="_fitHeight_q8uhj_6",dZ="_expandHeight_q8uhj_10",$g={snippet:cZ,fitHeight:lZ,expandHeight:dZ},um=({snippetOption:t,height:s="static",onReveal:n,onCopy:r})=>{const[o,a]=m.useState(t.tabs[0]),{tabs:i}=t,{fetchPassword:c}=Ic(),{project:l}=O(),{list:d}=Ua(),[u]=Bc(),{list:h}=un();let p=h.find(v=>v.name===u);p||(p=h[0]);const g=p==null?void 0:p.owner_name,_=d.find(v=>v.name===g)??d[0];t.tabs.includes(o)||a(t.tabs[0]);function x(){const v=t.tabs.find(w=>w.value===o.value);return(v==null?void 0:v.codeSnippet)??""}const j=m.useCallback(v=>{const w=i.find(S=>S.value===v);a(w)},[i]),b=Kw(async()=>{if(!_||!p)return"";let v="";if(l&&l.store_passwords)try{v=await c(l.id,_)??""}catch(w){H(w)}return o.codeSnippet.replace(DE,v)}),f=l!=null&&l.store_passwords&&o.hasSecrets?{getUnmaskedValue:b,onReveal:n}:void 0,y={getUnmaskedValue:b,onCopy:r};return e.jsxs("div",{children:[e.jsx(pn,{variant:"contained",options:i,value:o.value,onChange:j}),e.jsx(Tr,{className:M($g.snippet,{[$g.fitHeight]:s==="fit",[$g.expandHeight]:s==="expand"}),variant:"contained",mode:o.language,scrollable:!0,reveal:f,copy:y,children:x()})]})},Rn="authenticated",cd="anonymous",uZ="_rlsInstructions_1l4il_1",hZ="_snippetType_1l4il_7",Dy={rlsInstructions:uZ,snippetType:hZ},pZ={label:"Row-Level Security",tabs:[{value:"rls",label:"row-level-security.sql",codeSnippet:`-- 1st enable row level security for your table
ALTER TABLE todos ENABLE ROW LEVEL SECURITY;

-- 2nd create policies for your table
CREATE POLICY "Individuals can create todos." ON todos FOR INSERT
TO ${Rn}
WITH CHECK ((select auth.user_id()) = user_id);

CREATE POLICY "Individuals can view their own todos. " ON todos FOR SELECT
TO ${Rn}
USING ((select auth.user_id()) = user_id);

CREATE POLICY "Individuals can update their own todos." ON todos FOR UPDATE
TO ${Rn}
USING ((select auth.user_id()) = user_id)
WITH CHECK ((select auth.user_id()) = user_id);

CREATE POLICY "Individuals can delete their own todos." ON todos FOR DELETE
TO ${Rn}
USING ((select auth.user_id()) = user_id);`,language:"sql"},{value:"schema",label:"todos-schema.sql",codeSnippet:`-- schema for TODOs table
CREATE TABLE todos (
  id bigint generated by default as identity primary key,
  user_id text not null default (auth.user_id()),
  task text check (char_length(task) > 0),
  is_complete boolean default false,
  inserted_at timestamptz not null default now()
);
  `,language:"sql"}]},mZ={label:"Drizzle",tabs:[{value:"drizzle-rls-policies",label:"drizzle-rls-policies.ts",codeSnippet:`
import { pgPolicy, pgTable } from 'drizzle-orm/pg-core';

// full schema definition in drizzle-schema.ts
export const todos = pgTable(
  'todos',
  {...},
  (t) => ({
    p1: pgPolicy("create todos", {
      for: "insert",
      to: "authenticated",
      withCheck: sql\`(select auth.user_id() = user_id)\`,
    }),

    p2: pgPolicy("view todos", {
      for: "select",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),

    p3: pgPolicy("update todos", {
      for: "update",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),

    p4: pgPolicy("delete todos", {
      for: "delete",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),
  }),
);
`,language:"javascript"},{value:"drizzle-schema",label:"drizzle-schema.ts",codeSnippet:`
import { InferSelectModel, sql } from 'drizzle-orm';
import { bigint, boolean, pgPolicy, pgTable, text, timestamp } from 'drizzle-orm/pg-core';

export const todos = pgTable(
  'todos',
  {
    id: bigint('id', { mode: 'bigint' })
      .primaryKey()
      .generatedByDefaultAsIdentity(),
    userId: text('user_id')
      .notNull()
      .default(sql\`(auth.user_id())\`),
    task: text('task').notNull(),
    isComplete: boolean('is_complete').notNull().default(false),
    insertedAt: timestamp('inserted_at', { withTimezone: true })
      .defaultNow()
      .notNull(),
  },
  (t) => ({
    p1: pgPolicy("create todos", {
      for: "insert",
      to: "authenticated",
      withCheck: sql\`(select auth.user_id() = user_id)\`,
    }),

    p2: pgPolicy("view todos", {
      for: "select",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),

    p3: pgPolicy("update todos", {
      for: "update",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),

    p4: pgPolicy("delete todos", {
      for: "delete",
      to: "authenticated",
      using: sql\`(select auth.user_id() = user_id)\`,
    }),
  }),
);

export type Todo = InferSelectModel<typeof todos>;
`,language:"javascript"}]},gZ=[{label:"SQL",value:"sql"},{label:"Drizzle",value:"drizzle"}],_Z={sql:pZ,drizzle:mZ},fZ=()=>{const[t,s]=m.useState("sql"),n=_Z[t];return e.jsxs("div",{className:Dy.rlsInstructions,children:[e.jsxs("div",{children:[e.jsxs(et,{children:["Neon RLS uses injected"," ",e.jsx(ze,{children:"auth metadata"})," to enforce Row-Level Security policies."]}),e.jsx("br",{}),e.jsxs(et,{children:["Start by applying these policies to your database. Below is an example schema and policy setup using"," ",e.jsx(ze,{children:"SQL"})," or"," ",e.jsx(ze,{children:"Drizzle"}),"."]})]}),e.jsxs("div",{children:[e.jsx(He,{className:Dy.snippetType,"aria-label":"RLS snippet type",options:gZ,value:t,onChange:r=>{s(r)}}),e.jsx(um,{snippetOption:n,height:"expand"})]})]})},bZ="_roleInstructions_1clc7_1",xZ="_instructionDisabled_1clc7_7",jZ="_roleInstructionsHeader_1clc7_13",yZ="_hintParagraph_1clc7_20",vZ="_roleInstructionParagraph_1clc7_25",Mr={roleInstructions:bZ,instructionDisabled:xZ,roleInstructionsHeader:jZ,hintParagraph:yZ,roleInstructionParagraph:vZ},wZ="pg_session_jwt",Og={installExtension:{snippet:`CREATE EXTENSION IF NOT EXISTS ${wZ};`},grantPrivileges:{snippet:`-- For existing tables
GRANT SELECT, UPDATE, INSERT, DELETE ON ALL TABLES
  IN SCHEMA public
  to ${Rn};

GRANT SELECT, UPDATE, INSERT, DELETE ON ALL TABLES
  IN SCHEMA public
  to ${cd};

-- For future tables
ALTER DEFAULT PRIVILEGES
  IN SCHEMA public
  GRANT SELECT, UPDATE, INSERT, DELETE ON TABLES
  TO ${Rn};

ALTER DEFAULT PRIVILEGES
  IN SCHEMA public
  GRANT SELECT, UPDATE, INSERT, DELETE ON TABLES
  TO ${cd};

-- Grant USAGE on "public" schema
GRANT USAGE ON SCHEMA public TO ${Rn};
GRANT USAGE ON SCHEMA public TO ${cd};`}},SZ=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState({installExtension:"idle",grantPrivileges:"idle"}),{actions:{onChangeDatabase:r,onChangeEndpointId:o,runQuery:a}}=Us(),{projectId:i}=O(),c=ds({projectId:i}),l=m.useMemo(()=>{var p;return((p=c.data)==null?void 0:p.endpoints)??[]},[c.data]),d=Ba(l),u=Ha();m.useEffect(()=>{d&&u&&(o(d.id),r(u))},[d,r,o,u]);const h=async p=>{n(g=>({...g,[p]:"pending"}));try{await a({query:Og[p].snippet}),n(g=>({...g,[p]:"success"}))}catch{n(g=>({...g,[p]:"idle"}))}};return e.jsx("div",{className:Mr.roleInstructions,children:e.jsxs("div",{children:[e.jsxs(et,{children:["To finish the Neon Authorization integration, all you need to do is to",e.jsxs(ze,{children:[" ","run the following SQL commands:"]})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsxs("div",{className:Mr.roleInstructionsHeader,children:[e.jsxs("div",{className:Mr.hintParagraph,children:[e.jsxs(et,{className:Mr.roleInstructionParagraph,children:["Install the extension in the"," ",e.jsx(dp,{children:u==null?void 0:u.label})," ","database:"]}),e.jsx(Ot,{children:"This extension is responsible for injecting the auth metadata into your database."})]}),s.installExtension==="success"?e.jsxs(ze,{children:["Extension installed"," ",e.jsx(L,{name:"check_circle_inverted2",size:16})]}):e.jsx(P,{appearance:"secondary",size:"s",loading:s.installExtension==="pending",icon:"play",onClick:()=>{t("neon_authorize_quick_start_query_add_extension_run"),h("installExtension")},children:"Run"})]}),e.jsx(Tr,{variant:"default",mode:"sql",children:Og.installExtension.snippet})]}),e.jsx("br",{}),e.jsxs("div",{className:M({[Mr.instructionDisabled]:s.installExtension!=="success"}),children:[e.jsxs("div",{className:Mr.roleInstructionsHeader,children:[e.jsxs("div",{className:Mr.hintParagraph,children:[e.jsxs(et,{className:Mr.roleInstructionParagraph,children:["Grant privileges to the roles in the"," ",e.jsx(dp,{children:u==null?void 0:u.label})," ","database:"]}),e.jsxs(Ot,{children:["To use Neon RLS, you must utilize one of the passwordless roles that we created for you.",e.jsx("br",{})," ",e.jsx("br",{}),"This command will grant those roles the necessary privileges to interact with your database."]})]}),s.grantPrivileges==="success"?e.jsxs(ze,{children:["Privileges granted"," ",e.jsx(L,{name:"check_circle_inverted2",size:16})]}):e.jsx(P,{appearance:"secondary",size:"s",loading:s.grantPrivileges==="pending",icon:"play",onClick:()=>{t("neon_authorize_quick_start_query_grants_run"),h("grantPrivileges")},children:"Run"})]}),e.jsx(Tr,{variant:"default",mode:"sql",children:Og.grantPrivileges.snippet})]})]})})},CZ=()=>e.jsx(mS,{children:e.jsx(SZ,{})}),kZ=()=>{const t=Ha();return e.jsxs(et,{children:["Feel free to ",e.jsx(ze,{children:"skip this step"})," ","if you have already performed this configuration for this project and this database (",e.jsx(ke,{children:t==null?void 0:t.label}),")."]})},Hu={nextJs:{server:(t,s)=>`'use server';
  
import { neon } from '@neondatabase/serverless';
${t}
  
export async function TodoList() {
    const sql = neon(process.env.DATABASE_AUTHENTICATED_URL!, {
        authToken: async () => {
            ${s}
            if (!token) {
                throw new Error('No token');
            }
            return token;
        },
    });
  
    // WHERE filter is optional because of RLS.
    // But we send it anyway for performance reasons.
    const todos = await 
        sql('select * from todos where user_id = auth.user_id()');
  
    return (
        <ul>
            {todos.map((todo) => (
                <li key={todo.id}>{todo.task}</li>
            ))}
        </ul>
    );
}`,client:(t,s)=>`'use client';
  
import type { Todo } from '@/app/schema';
import { neon } from '@neondatabase/serverless';
${t}
import { useEffect, useState } from 'react';
  
const getDb = (token: string) =>
    neon(process.env.NEXT_PUBLIC_DATABASE_AUTHENTICATED_URL!, {
        authToken: token,
    });
  
export function TodoList() {
    const { getToken } = useAuth();
    const [todos, setTodos] = useState<Array<Todo>>();
  
    useEffect(() => {
        async function loadTodos() {
            ${s}
  
            if (!authToken) {
                return;
            }
  
            const sql = getDb(authToken);
  
            // WHERE filter is optional because of RLS.
            // But we send it anyway for performance reasons.
            const todosResponse = await
                sql('select * from todos where user_id = auth.user_id()');
  
            setTodos(todosResponse as Array<Todo>);
          }
  
        loadTodos();
    }, [getToken]);
  
    return (
        <ul>
            {todos?.map((todo) => (
                <li key={todo.id}>
                    {todo.task}
                </li>
            ))}
        </ul>
    );
}
  `}},IZ="_setupEnvVarsInstructions_25to8_1",PZ="_paragraphHint_25to8_7",My={setupEnvVarsInstructions:IZ,paragraphHint:PZ},lI=()=>{var c;const{projectId:t}=O(),s=ds({projectId:t}),n=Ba(((c=s.data)==null?void 0:c.endpoints)??[]),r=Ha(),o=(r==null?void 0:r.database.owner_name)??"",a=(r==null?void 0:r.database.name)??"",i={host:(n==null?void 0:n.host)??"",database:a??""};return{anonymous:Zl({...i,role:cd}),authenticated:Zl({...i,role:Rn}),owner:Zl({...i,role:o,maskPassword:!0})}},TZ=()=>{const t=lI(),s={label:"Env Variables",tabs:[{value:"env",label:".env",codeSnippet:`# Database owner connection string
DATABASE_URL='${t.owner}'

# Neon "${Rn}" role connection string
DATABASE_AUTHENTICATED_URL='${t.authenticated}'`,language:"nix",hasSecrets:!0}]};return e.jsx(um,{snippetOption:s,height:"fit"})},NZ=()=>e.jsxs("div",{className:My.setupEnvVarsInstructions,children:[e.jsxs("div",{className:My.paragraphHint,children:[e.jsxs(et,{children:["Copy the following"," ",e.jsx(ze,{children:"connection strings"})," into your ",e.jsx(dp,{children:".env"})," file."," "]}),e.jsxs(Ot,{children:["Neon has generated this"," ",e.jsx(ze,{children:"passwordless connection string"})," ","that you should use to establish an authenticated connection to your database."]})]}),e.jsx("div",{children:e.jsx(TZ,{})}),e.jsx("div",{children:e.jsxs(et,{children:["These connection strings can also be retrieved from the"," ",e.jsx(ze,{children:"Console dashboard."})," "]})})]}),AZ="_runQueryInstructions_xvcbv_1",EZ="_frameworkType_xvcbv_7",dI={runQueryInstructions:AZ,frameworkType:EZ};function $Z(t,s){return t==="clerk"?{server:Hu[s].server("import { auth } from '@clerk/nextjs/server';","const token = await auth().getToken();"),client:Hu[s].client("import { useAuth } from '@clerk/nextjs';","const authToken = await getToken();")}:{server:Hu[s].server(`// adapt this according to your auth provider Docs
import { auth } from 'your-auth-provider';`,`// adapt this according to your auth provider Docs
            const token = await auth().getToken();`),client:Hu[s].client(`// adapt this according to your auth provider Docs
import { useAuth } from '@clerk/nextjs';`,`// adapt this according to your auth provider Docs
            const authToken = await getToken();`)}}const OZ=({authorizationProvider:t})=>{const s=lI(),[n,r]=m.useState("nextJs"),o=$Z(t.value,n),a={label:"Next.js",tabs:[{value:"server",label:"server-component.tsx",codeSnippet:o.server,language:"tsx"},{value:"client",label:"client-component.tsx",codeSnippet:o.client,language:"tsx"},{value:"env",label:".env",codeSnippet:`# used for database migrations
DATABASE_URL='${s.owner}'

# used for server side fetching
DATABASE_AUTHENTICATED_URL='${s.authenticated}'

# used for client side fetching
NEXT_PUBLIC_DATABASE_AUTHENTICATED_URL='${s.authenticated}'
`,language:"nix",hasSecrets:!0}]},i=[{label:"Next.js",value:"nextJs"}],c={nextJs:a};return e.jsxs(e.Fragment,{children:[e.jsx(He,{className:dI.frameworkType,"aria-label":"Technology type",options:i,value:n,onChange:l=>{r(l)}}),e.jsx(um,{height:"expand",snippetOption:c[n]})]})},RZ=({authorizationProvider:t})=>e.jsxs("div",{className:dI.runQueryInstructions,children:[e.jsx("div",{children:e.jsxs(et,{children:["Run a query using the Neon Serverless Driver along with your application's"," ",e.jsx(ze,{children:"access token."}),e.jsx("br",{}),"This will work seamlessly on both the"," ",e.jsx(ze,{children:"client"})," and"," ",e.jsx(ze,{children:"server side"}),"."]})}),e.jsx("div",{children:e.jsx(OZ,{authorizationProvider:t})}),e.jsx("div",{children:e.jsxs(et,{children:["🔐 Just like that, you can now run any arbitrary queries against a"," ",e.jsx(ze,{children:"fully secured database schema"}),"."]})})]}),BZ="_verticalSteps_16am3_1",LZ="_step_16am3_11",DZ="_stepTitle_16am3_21",MZ="_stepHeader_16am3_25",UZ="_stepCounter_16am3_31",FZ="_stepContent_16am3_60",qZ="_stepTitleContainer_16am3_65",zZ="_hint_16am3_71",Ur={verticalSteps:BZ,step:LZ,stepTitle:DZ,stepHeader:MZ,stepCounter:UZ,stepContent:FZ,stepTitleContainer:qZ,hint:zZ},HZ={required:"Required",optional:"Optional"},VZ=({steps:t})=>e.jsx("div",{className:Ur.verticalSteps,children:t.map(s=>{let n=null;return s.requirementStatus&&(n=e.jsxs(he,{children:[HZ[s.requirementStatus.status],s.requirementStatus.hint&&e.jsx(Ot,{className:Ur.hint,children:s.requirementStatus.hint})]})),e.jsxs("div",{className:Ur.step,children:[e.jsxs("div",{className:Ur.stepHeader,children:[e.jsx("div",{className:Ur.stepCounter}),e.jsxs("div",{className:Ur.stepTitleContainer,children:[e.jsx(z,{level:4,size:"h3",className:Ur.stepTitle,children:s.title}),n]})]}),e.jsx("div",{className:Ur.stepContent,children:s.content})]},s.id)})}),WZ="_authorizeDrawerContent_yk5vo_1",GZ="_instructionsText_yk5vo_8",KZ="_instructionsHighlight_yk5vo_13",QZ="_instructionsCodeSpan_yk5vo_17",hm={authorizeDrawerContent:WZ,instructionsText:GZ,instructionsHighlight:KZ,instructionsCodeSpan:QZ},YZ=(t,s)=>[{id:"roles",title:"Set up Extension and Roles Privileges",requirementStatus:s==="info"?{status:"optional",hint:e.jsx(kZ,{})}:{status:"required"},content:e.jsx(CZ,{})},{id:"RLS",title:"Set up Row-Level Security",content:e.jsx(fZ,{})},{id:"install-neon-driver",title:"Install the Neon Serverless Driver",content:e.jsx(iZ,{authProviderName:t.label})},{id:"env-variables",title:"Set up Environment Variables",content:e.jsx(NZ,{})},{id:"run-query",title:"Run your first Authenticated Query",content:e.jsx(RZ,{authorizationProvider:t})}],et=({children:t,className:s})=>e.jsx("p",{className:M(hm.instructionsText,s),children:t}),ze=({children:t,className:s})=>e.jsx("b",{className:M(hm.instructionsHighlight,s),children:t}),dp=({children:t,className:s})=>e.jsx(ke,{className:M(hm.instructionsCodeSpan,s),children:t}),JZ=({openReason:t,authorizationProvider:s,onCloseDrawer:n})=>e.jsx(Vn,{isOpen:!0,size:"l","aria-label":"Neon RLS integration instructions",onRequestClose:n,children:e.jsx(Wn,{title:`Set up ${s.label} with Neon RLS`,subtitle:e.jsxs(et,{children:["Follow the steps bellow to get started."," ",e.jsx(A,{openInNewTab:!0,href:P1,icon:"external_link",children:"Open in docs"})]}),children:e.jsxs("div",{className:hm.authorizeDrawerContent,children:[e.jsx(rZ,{authorizationProvider:s}),e.jsx(z,{level:3,size:"h2",children:"Next Steps"}),e.jsx(VZ,{steps:YZ(s,t)})]})})}),ZZ="_container_w78ct_1",XZ="_jsonContainer_w78ct_14",eX="_section_w78ct_20",tX="_sectionContent_w78ct_27",sX="_fieldContainer_w78ct_33",nX="_labelContainer_w78ct_38",rX="_label_w78ct_38",oX="_arrayContainer_w78ct_50",aX="_numberContainer_w78ct_55",iX="_stringContainer_w78ct_56",cX="_collapsibleCard_w78ct_62",lX="_trueIcon_w78ct_67",dX="_booleanBadge_w78ct_71",bs={container:ZZ,jsonContainer:XZ,section:eX,sectionContent:tX,fieldContainer:sX,labelContainer:nX,label:rX,arrayContainer:oX,numberContainer:aX,stringContainer:iX,collapsibleCard:cX,trueIcon:lX,booleanBadge:dX};function Uy(t){const s=_t(Number(t));return s.isValid()?le(s.toDate()):null}const uI=({value:t})=>{if(typeof t=="boolean"){let s;return t?s="check_circle_inverted2":s="clear",e.jsxs(he,{className:bs.booleanBadge,children:[e.jsx("span",{className:M({[bs.trueIcon]:t}),children:e.jsx(L,{name:s,size:16,title:t.toString()})}),e.jsx(T,{size:"s",children:t.toString()})]})}if(typeof t=="string"){if(URL.canParse(t))return e.jsx(A,{openInNewTab:!0,icon:"external_link",iconSize:"s",href:t,children:t});const n=Uy(t);return e.jsxs(et,{className:bs.stringContainer,children:[e.jsx("span",{children:t}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{children:n})]})]})}if(typeof t=="number"){const s=Uy(t);return e.jsxs(et,{className:bs.numberContainer,children:[e.jsx("span",{children:t}),s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{children:s})]})]})}return Array.isArray(t)?t.length===0?e.jsx("span",{children:"—"}):e.jsx("div",{className:bs.arrayContainer,children:t.map((s,n)=>{if(s==null)return null;let r=s;return typeof s=="object"&&(r=JSON.stringify(s)),e.jsx("div",{children:e.jsx(uI,{value:r})},n)})}):e.jsx("span",{children:String(t)})},uX=({label:t,value:s})=>s==null?null:e.jsxs("div",{className:bs.fieldContainer,children:[e.jsx("div",{className:bs.labelContainer,children:e.jsx(T,{size:"s",className:bs.label,children:eL(t)})}),e.jsx(uI,{value:s})]}),hI=({data:t})=>t==null?null:e.jsx("div",{className:bs.jsonContainer,children:Object.entries(t).map(([s,n])=>{if(n===null)return null;const r=n&&typeof n=="object"&&!Array.isArray(n);return e.jsx("div",{className:bs.section,children:e.jsx("div",{className:bs.sectionContent,children:r?e.jsx(xb,{className:bs.collapsibleCard,header:e.jsxs(ze,{children:[ec(s)," (",Object.keys(n).length,")"]}),appearance:"secondary",initiallyCollapsed:!1,children:e.jsx(hI,{data:n})}):e.jsx(uX,{label:s,value:n})})},s)})}),hX=({userRawJson:t})=>e.jsx("div",{className:bs.container,children:e.jsx(hI,{data:t})}),pX="_drawerLayout_mrwrj_1",mX="_mainContent_mrwrj_9",gX="_stickyInfo_mrwrj_13",_X="_contentSection_mrwrj_23",fX="_rawJson_mrwrj_29",bX="_userInfoRow_mrwrj_39",Fr={drawerLayout:pX,mainContent:mX,stickyInfo:gX,contentSection:_X,rawJson:fX,userInfoRow:bX},xX=({providerUser:t,identityProviderOption:s,onCloseDrawer:n})=>{const{trackUiInteraction:r}=k(),[o,a]=m.useState("summary"),i=()=>{if(t.id.length<=10)return t.id;const c=t.id.slice(0,8),l=t.id.slice(-8);return`${c}...${l}`};return e.jsx(Vn,{isOpen:!0,size:"l","aria-label":"Neon RLS integration instructions",onRequestClose:n,children:e.jsx(Wn,{title:"User Details",subtitle:e.jsxs(et,{children:["View all the user details provided by"," ",e.jsx(ze,{children:s.label}),"."]}),children:e.jsxs("div",{className:Fr.drawerLayout,children:[e.jsx("div",{className:Fr.mainContent,children:o==="summary"?e.jsxs("div",{className:Fr.contentSection,children:[e.jsx(ze,{children:"General Info"}),e.jsx(hX,{userRawJson:t.raw_json})]}):e.jsxs("div",{className:Fr.contentSection,children:[e.jsx(ze,{children:"Raw JSON"}),e.jsx("pre",{className:Fr.rawJson,children:JSON.stringify(t.raw_json,null,2)})]})}),e.jsxs("div",{className:Fr.stickyInfo,children:[e.jsxs(Da,{children:[e.jsx(as,{active:o==="summary",onClick:()=>{r("neon_identity_user_details_summary_toggle_clicked"),a("summary")},children:"Summary"}),e.jsx(as,{active:o==="raw_json",onClick:()=>{r("neon_identity_user_details_raw_json_toggle_clicked"),a("raw_json")},children:"Raw JSON"})]}),e.jsxs("div",{children:[e.jsx(ze,{children:"User ID"}),e.jsxs("div",{className:Fr.userInfoRow,children:[e.jsx(et,{children:e.jsx("span",{title:t.id,children:i()})}),e.jsx(bo,{text:t.id,onClick:()=>r("neon_identity_user_details_userID_copied")})]})]}),e.jsx(yr,{}),e.jsxs("div",{children:[e.jsx(ze,{children:"Email"}),e.jsxs("div",{className:Fr.userInfoRow,children:[e.jsx(et,{children:t.email}),e.jsx(bo,{text:t.email??"",onClick:()=>r("neon_identity_user_details_email_copied")})]})]}),e.jsx(yr,{}),e.jsxs("div",{children:[e.jsx(ze,{children:"Joined date"}),e.jsx(et,{children:t.created_at?le(t.created_at,ve.Date):"—"})]}),e.jsx(yr,{}),e.jsxs("div",{children:[e.jsx(ze,{children:"Last updated"}),e.jsx(et,{children:t.updated_at?le(t.updated_at,ve.Date):"—"})]})]})]})})})},jX=({identityIntegration:t})=>{var l;const s=UJ(),{projectId:n}=O(),{trackUiInteraction:r}=k(),o={database:t.db_name,schema:Jd,table:iI},a=new URLSearchParams(o),i=(l=s.data)==null?void 0:l[0].count,c=i?`View all ${i} users`:"View all users";return e.jsx(A,{onClick:()=>r("neon_identity_users_sync_table_clicked"),href:`${F(C.ProjectsItemDrizzle,{projectId:n,branchId:t.branch_id})}?${a.toString()}`,children:c})},yX=Rt({email:dt().email(),name:dt().optional().transform(t=>(t==null?void 0:t.trim())||void 0)}),pI=({authProvider:t,appearance:s})=>{var u,h;const{projectId:n}=O(),{mutateAsync:r,isPending:o}=GJ(),[a,i]=m.useState(!1),c=zn({defaultValues:{email:"",name:void 0},resolver:Vd(yX)});function l(){i(!1),c.reset()}const d=Kw(async p=>{try{await r({project_id:n,auth_provider:t.value,email:p.email,name:p.name}),l()}catch(g){tt(`Failed to create user: ${cs(g)}`)}});return e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>{i(!0)},appearance:s,children:"Create user"}),e.jsxs(ws,{modalProps:{title:"Create user",isOpen:a,onRequestClose:l},providerProps:c,onSubmit:d,children:[e.jsx(be,{children:e.jsxs(Df,{children:[e.jsx(R,{label:"Email",error:(u=c.formState.errors.email)==null?void 0:u.message,children:e.jsx(ne,{required:!0,placeholder:"email@example.com",...c.register("email")})}),e.jsx(R,{label:"Name",error:(h=c.formState.errors.name)==null?void 0:h.message,children:e.jsx(ne,{placeholder:"Name (optional)",...c.register("name")})})]})}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{loading:o,children:"Create"})]})]})]})},Rg={emptyStateTitle:"Ready for your first users",setupButtonText:"Setup instructions",noUsersText:t=>`Integrate ${t} into your application to get started`},vX="_emptyTable_1vhp8_1",wX="_emptyTableActions_1vhp8_13",SX="_dashboardUsersWrapper_1vhp8_19",CX="_userNameColumn_1vhp8_25",kX="_usersTableTitle_1vhp8_31",IX="_usersTableHeader_1vhp8_36",PX="_usersTableActions_1vhp8_42",ka={emptyTable:vX,emptyTableActions:wX,dashboardUsersWrapper:SX,userNameColumn:CX,usersTableTitle:kX,usersTableHeader:IX,usersTableActions:PX},TX=[{header:"User",accessorKey:"user",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0,render:t=>e.jsxs("div",{className:ka.userNameColumn,children:[t.name,e.jsx(T,{appearance:"tertiary",children:t.email})]})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.updated_at?le(t.updated_at):"—"})},{header:"Joined",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.created_at?le(t.created_at):"—"})}],NX=({authProvider:t})=>e.jsxs("div",{className:ka.emptyTable,children:[e.jsx(L,{name:"people",size:16}),e.jsx(T,{appearance:"primary",size:"l",children:Rg.emptyStateTitle}),e.jsx(T,{appearance:"secondary",children:Rg.noUsersText(t.label)}),e.jsxs("div",{className:ka.emptyTableActions,children:[e.jsx(pI,{authProvider:t,appearance:"secondary"}),e.jsx(P,{as:We,href:T1,openInNewTab:!0,appearance:"primary",size:"s",icon:"external_link",children:Rg.setupButtonText})]})]}),AX=({identityIntegration:t,identityProviderOption:s})=>e.jsxs("div",{className:ka.usersTableHeader,children:[e.jsx("div",{className:ka.usersTableTitle,children:e.jsx(T,{children:"Recent sign ups"})}),e.jsxs("div",{className:ka.usersTableActions,children:[e.jsx(jX,{identityIntegration:t}),e.jsx(pI,{authProvider:s,appearance:"secondary"})]})]}),EX=({identityIntegration:t})=>{var d,u,h,p;const{trackUiInteraction:s}=k(),n=Hp(t==null?void 0:t.auth_provider),r=MJ(),[o,a]=m.useState(void 0),{projectId:i}=O(),l=(d=ie().getQueryState(Ea.recentUsers(i)))==null?void 0:d.error;if((u=r.error)!=null&&u.message||l!=null&&l.message){const g=((h=r.error)==null?void 0:h.message)??(l==null?void 0:l.message)??"";return RJ(g)?e.jsx(is,{title:e.jsx(T,{children:"Your sync table is missing"}),subtitle:e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Your"," ",e.jsx(dp,{children:dm})," ","table is missing. User data cannot be synced from your auth provider."]}),e.jsx("br",{}),e.jsxs(T,{children:[e.jsxs(ze,{children:["Remove the Neon Auth"," "]})," ","integration and set it up again to fix this."]})]})}):e.jsx(is,{title:"Error fetching users data",subtitle:g,actions:e.jsx(P,{loading:r.isRefetching,onClick:()=>r.refetch(),children:"Retry"})})}return e.jsx("div",{className:ka.dashboardUsersWrapper,children:!t||((p=r.data)==null?void 0:p.length)===0?e.jsx(NX,{authProvider:n}):e.jsxs(e.Fragment,{children:[e.jsx(AX,{identityIntegration:t,identityProviderOption:n}),e.jsx(mn,{columns:TX,rows:r.data??[],"aria-label":"Auth Provider Users",isLoading:r.isLoading,defaultSorting:{column:"created_at",direction:"descending"},onRowClick:g=>{s("neon_identity_user_row_clicked"),a(g)},pageSize:20}),o&&e.jsx(xX,{providerUser:o,identityProviderOption:n,onCloseDrawer:()=>a(void 0)})]})})},$X=({variables:t,connectionString:s})=>({label:"Next.js",tabs:[{value:"nextjs",label:"Next.js",codeSnippet:`# Neon Auth environment variables for Next.js
NEXT_PUBLIC_STACK_PROJECT_ID='${t.auth_provider_project_id}'
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"react",label:"React",codeSnippet:`# Neon Auth environment variables for React (Vite)
VITE_STACK_PROJECT_ID='${t.auth_provider_project_id}'
VITE_STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"js",label:"JavaScript",codeSnippet:`# Neon Auth environment variables for JavaScript/Node
STACK_PROJECT_ID='${t.auth_provider_project_id}'
STACK_PUBLISHABLE_CLIENT_KEY='${t.pub_client_key}'
STACK_SECRET_SERVER_KEY='${t.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0}]}),OX=({envVariables:t,identityIntegration:s})=>{const{trackUiInteraction:n}=k(),r=lm({connectionParams:{branchId:s.branch_id,dbName:s.db_name,maskPassword:!0,poolerEnabled:!0}}),o=$X({variables:t,connectionString:r});return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Select your framework from the tabs below and copy the environment variables to ",e.jsx(ke,{children:".env"})," or"," ",e.jsx(ke,{children:".env.local"}),"file:"]}),e.jsx(um,{snippetOption:o,height:"fit",onCopy:()=>{n("neon_identity_env_vars_copied")},onReveal:()=>{n("neon_identity_env_vars_revealed")}}),e.jsxs(T,{children:["Learn to setup your application and to use these environment variables on"," ",e.jsx(A,{href:T1,openInNewTab:!0,icon:"external_link",children:"Neon Auth documentation"})]})]})},RX="_container_1d2hu_1",BX="_emptyState_1d2hu_7",Fy={container:RX,emptyState:BX},LX="_buttons_jrhgo_1",DX={buttons:LX},MX=({identityProviderOption:t,permission:s})=>{const{projectId:n}=O(),{trackUiInteraction:r}=k(),{mutateAsync:o,isPending:a}=cI(),{mutateAsync:i,isPending:c}=VJ(n),{isVercelOrg:l}=Y(),d=async()=>{r("neon_identity_generate_keys_clicked");try{await o({project_id:n,auth_provider:t.value})}catch(p){const g=cs(p);tt(`Failed to generate SDK keys: ${g}`,{autoClose:3e3})}},u=async()=>{r("neon_identity_sync_keys_vercel_clicked");try{await i(),re("Successfully synced keys to Vercel.")}catch(p){const g=cs(p);tt(`Failed to sync SDK keys to vercel: ${g}`)}};let h=null;return l&&(h=e.jsx(P,{onClick:u,loading:c,appearance:"secondary",disabled:!s.canManageIntegration,children:"Sync Keys to Vercel"})),e.jsx(Z,{disabled:!s.canManageIntegration,content:s.reason,children:e.jsxs("div",{className:DX.buttons,children:[e.jsx(P,{onClick:d,loading:a,appearance:"secondary",disabled:!s.canManageIntegration,children:"Generate keys"}),h]})})},UX=({authProvider:t,permission:s,identityIntegration:n})=>{const{projectId:r}=O(),{data:o}=HJ({projectId:r,authProvider:t.value});return!o?e.jsxs("div",{className:Fy.container,children:[e.jsx(T,{appearance:"primary",children:"Generate your environment variables and copy them to your app’s codebase."}),e.jsxs("div",{className:Fy.emptyState,children:[e.jsx(MX,{permission:s,identityProviderOption:t}),e.jsxs(T,{appearance:"secondary",children:[e.jsx(ze,{children:"Save your keys"}),". You can only view them once."]})]})]}):e.jsx(OX,{envVariables:o,identityIntegration:n})},Xb=t=>["authDomains",t],FX=t=>st({queryKey:Xb(t),queryFn:async()=>(await q.listNeonAuthRedirectUriWhitelistDomains(t)).data.domains}),qX=t=>{const s=ie();return de({mutationFn:async({domain:n,authProvider:r})=>(await q.addNeonAuthDomainToRedirectUriWhitelist(t,{domain:n,auth_provider:r})).data,onSuccess:()=>{s.invalidateQueries({queryKey:Xb(t)})}})},zX=t=>{const s=ie();return de({mutationFn:async({domain:n,authProvider:r})=>(await q.deleteNeonAuthDomainFromRedirectUriWhitelist(t,{auth_provider:r,domains:[{domain:n}]})).data,onSuccess:()=>{s.invalidateQueries({queryKey:Xb(t)})}})},HX="_container_1r7di_1",VX="_formWrapper_1r7di_9",WX="_buttonWrapper_1r7di_15",GX="_formField_1r7di_20",Dh={container:HX,formWrapper:VX,buttonWrapper:WX,formField:GX},KX="_container_rxemb_1",QX="_list_rxemb_6",YX="_item_rxemb_16",Yi={container:KX,list:QX,item:YX},JX=({authProvider:t,domains:s,canRemoveDomains:n,isLoading:r})=>{const{projectId:o}=O(),{confirm:a}=Oe(),{mutateAsync:i}=zX(o),c=m.useCallback(async l=>{if(await a({header:"Remove domain?",appearance:"error",confirmButtonText:"Remove",text:e.jsxs(T,{children:["Are you sure you want to remove ",e.jsx("strong",{children:l})," from the trusted list? Your project will no longer be able to redirect to this domain."]})}))try{await i({domain:l,authProvider:t.value}),re(e.jsxs(T,{children:[e.jsx("strong",{children:l})," removed from trusted list"]}))}catch(u){H(u)}},[i,t,a]);return!r&&s.length===0?null:r?e.jsx($,{height:12,width:100}):e.jsxs("div",{className:Yi.container,children:[e.jsx(z,{level:5,children:"Your trusted domains"}),e.jsx("ul",{className:Yi.list,children:s.map(l=>e.jsxs("li",{className:Yi.item,children:[e.jsx("span",{children:l.domain}),n&&e.jsx(kr,{iconName:"trash",iconSize:16,appearance:"error",onClick:()=>c(l.domain)})]},l.domain))})]})},ZX=Rt({domain:dt().url()}),XX=({authProvider:t,permission:s})=>{var c;const{projectId:n}=O(),{mutateAsync:r,isPending:o}=qX(n),a=xe({resolver:Vd(ZX),defaultValues:{domain:""}}),i=m.useCallback(async l=>{try{await r({domain:l.domain,authProvider:t.value}),a.reset()}catch(d){const u=cs(d);H(u)}},[r,t,a]);return e.jsx(It,{gaps:!0,providerProps:a,onSubmit:i,children:e.jsxs("div",{className:Dh.formWrapper,children:[e.jsx(R,{label:"Add new domain",className:Dh.formField,error:(c=a.formState.errors.domain)==null?void 0:c.message,children:e.jsx(ne,{disabled:o||!s.canManageIntegration,placeholder:"Add new domain (e.g. https://www.example.com)",...a.register("domain",{onBlur:()=>a.clearErrors(),required:{value:!0,message:"This field is required"}})})}),e.jsx("div",{className:Dh.buttonWrapper,children:e.jsx(Z,{content:s.reason,disabled:s.canManageIntegration,children:e.jsx("div",{children:e.jsx(_e,{appearance:"secondary",loading:o,disabled:o||!s.canManageIntegration,children:"Add domain"})})})})]})})},eee=({authProvider:t,permission:s})=>{const{projectId:n}=O(),{data:r,isLoading:o}=FX(n);return e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"Domains"}),e.jsxs("div",{className:Dh.container,children:[e.jsx(T,{children:"Enter trusted domains for authentication redirects (e.g., SSO). Your app will only redirect to domains on this list. All others will be blocked."}),e.jsx(JX,{authProvider:t,isLoading:o,canRemoveDomains:s.canManageIntegration,domains:r??[]}),e.jsx(XX,{authProvider:t,permission:s})]})]})},tee="_buttonWrapper_j7eh5_1",ex={buttonWrapper:tee},see=2e3,nee=1e4,ree=({identityIntegration:t,permission:s})=>{const{projectId:n}=O(),{trackUiInteraction:r}=k(),o=Hp(t.auth_provider),a=m.useRef(0),{mutateAsync:i,isPending:c}=WJ(),l=m.useRef(null),d=m.useRef(t.owned_by);m.useEffect(()=>{if(d.current==="user")return;d.current==="neon"&&t.owned_by==="user"&&(r("neon_identity_transfer_ownership_confirmed",{provider:o.value}),re(`The ${o.label} project has been transferred to your account!`)),d.current=t.owned_by},[t.owned_by,o.label,o.value,r]),Po(n,{onSuccess:()=>{a.current+=1},refetchInterval:()=>l.current===null?!1:Math.min(see*(a.current+1),nee)});const u=m.useCallback(async()=>{try{const p=await i({project_id:n,auth_provider:o.value});r("neon_identity_transfer_ownership_clicked"),l.current=MS({url:p.url})}catch(p){const g=cs(p);tt(`Failed to transfer ownership: ${g}`)}},[n,o.value,i,r]),h=t.owned_by==="neon";return e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"Project ownership"}),e.jsx(T,{children:h?"Neon currently manages this project for you. To customize settings, you can transfer it to Stack Auth and manage it there.":"This project is now managed in Stack Auth. Open the Stack Auth dashboard to customize settings."}),e.jsx("div",{className:ex.buttonWrapper,children:e.jsx(Z,{content:s.reason,disabled:s.canManageIntegration,children:e.jsx("div",{children:h?e.jsx(P,{onClick:u,icon:"connect_with",loading:c,disabled:c||!s.canManageIntegration,appearance:"error",children:"Claim project"}):e.jsx(P,{as:We,href:o.urls.overview(t.auth_provider_project_id),onClick:()=>r("neon_identity_user_view_in_provider_clicked"),openInNewTab:!0,iconSide:"right",icon:"external_link",appearance:"secondary",children:"View in Stack Auth"})})})})]})},oee=({handleClose:t,identityProvider:s})=>{const{trackUiInteraction:n}=k(),{projectId:r}=O(),o=qJ(r),a=FJ(),[i,c]=m.useState(!0),l=async()=>{const d={autoClose:3e3};try{await o.mutateAsync({identityProvider:s}),i?(await a.mutateAsync(),n("neon_identity_remove_provider_confirmed",{optedToClearData:!0})):n("neon_identity_remove_provider_confirmed",{optedToClearData:!1}),re("Removed the integration successfully",d)}catch(u){const h=cs(u);tt(`Failed to remove the integration: ${h}`,d)}};return e.jsx(qN,{header:"Remove Neon Auth integration",onConfirm:l,confirmButtonText:"Remove",appearance:"error",onClose:t,text:e.jsxs(e.Fragment,{children:[e.jsx(Q,{appearance:"warning",children:"Are you sure you want to remove this integration?"}),e.jsxs(mb,{defaultChecked:i,onChange:()=>c(d=>!d),children:["Clear all data associated with this integration",e.jsx(Ot,{children:"By checking this, you will permanently remove all data and related database objects linked to this integration."})]})]})})},aee=({authProvider:t,permission:s})=>{const[n,r]=m.useState(!1);return e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"Disable Auth"}),e.jsx(T,{children:"Disabling Neon Auth will delete all users and data associated with this integration."}),n&&e.jsx(oee,{identityProvider:t,handleClose:()=>r(!1)}),e.jsx("div",{className:ex.buttonWrapper,children:e.jsx(Z,{content:s.reason,disabled:s.canManageIntegration,children:e.jsx("div",{children:e.jsx(P,{appearance:"error",disabled:!s.canManageIntegration,onClick:()=>r(!0),children:"Disable Auth"})})})})]})},pm=t=>["neon_auth","oauthProviders",t],iee=t=>st({queryKey:pm(t),queryFn:async()=>(await q.listNeonAuthOauthProviders(t)).data.providers}),cee=t=>{const s=ie();return de({mutationFn:async({oauthProvider:n})=>(await q.addNeonAuthOauthProvider(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:pm(t)})}})},lee=t=>{const s=ie();return de({mutationFn:async({oauthProviderId:n,oauthProvider:r})=>(await q.updateNeonAuthOauthProvider(t,n,r)).data,onSuccess:()=>{s.invalidateQueries({queryKey:pm(t)})}})},dee=t=>{const s=ie();return de({mutationFn:async n=>(await q.deleteNeonAuthOauthProvider(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:pm(t)})}})},uee="_providersGrid_d0fao_1",hee="_providerTile_d0fao_9",pee="_footer_d0fao_30",mee="_actions_d0fao_34",up={providersGrid:uee,providerTile:hee,footer:pee,actions:mee},mI={google:{id:"google",label:"Google",icon:"google",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/google",docsLink:{label:"Get Google OAuth 2.0 credentials",url:"https://developers.google.com/identity/protocols/oauth2"}},github:{id:"github",label:"GitHub",icon:"github",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/github",docsLink:{label:"Create a GitHub OAuth App",url:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app"}},microsoft:{id:"microsoft",label:"Microsoft",icon:"microsoftv2",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/microsoft",docsLink:{label:"Register your app with Microsoft Entra ID",url:"https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow"}}},gee=To.object({id:To.enum(["google","github","microsoft"]),providerType:To.enum(["standard","shared"]),client_id:To.string().optional(),client_secret:To.string().optional()}).superRefine((t,s)=>{t.providerType!=="shared"&&(t.client_id||s.addIssue({code:To.ZodIssueCode.custom,path:["client_id"],message:"Client ID is required"}),t.client_secret||s.addIssue({code:To.ZodIssueCode.custom,path:["client_secret"],message:"Client Secret is required"}))}),gI=({onRequestClose:t,onSuccess:s,projectId:n,oauthProvider:r,existingProvider:o})=>{const{mutateAsync:a,isPending:i}=cee(n),{mutateAsync:c,isPending:l}=lee(n),{trackUiInteraction:d}=k(),u=xe({resolver:Vd(gee),defaultValues:{id:r.id,providerType:(o==null?void 0:o.type)??"standard",client_id:o==null?void 0:o.client_id,client_secret:o==null?void 0:o.client_secret}}),h=m.useCallback(async x=>{try{d("neon_identity_oauth_provider_add_clicked",{id:x.id,providerType:x.providerType});const j=x.providerType==="shared"?{}:{client_id:x.client_id,client_secret:x.client_secret};await a({oauthProvider:{id:x.id,...j}}),re(`${r.label} OAuth provider added successfully`),t(),s()}catch(j){const b=cs(j);tt(b)}},[a,r.label,t,s,d]),p=m.useCallback(async x=>{try{d("neon_identity_oauth_provider_add_clicked",{id:x.id,providerType:x.providerType});const j=x.providerType==="shared"?{}:{client_id:x.client_id,client_secret:x.client_secret};await c({oauthProviderId:r.id,oauthProvider:j}),re(`${r.label} OAuth provider updated successfully`),t(),s()}catch(j){const b=cs(j);tt(b)}},[c,r,t,s,d]),g=m.useCallback(async x=>{o?await p(x):await h(x)},[o,p,h]),_=u.watch("providerType");return e.jsxs(ws,{modalProps:{title:`${r.label} OAuth Provider`,isOpen:!0,onRequestClose:t,width:600},providerProps:u,onSubmit:g,children:[e.jsxs(be,{gaps:!0,children:[e.jsx(me,{control:u.control,name:"providerType",render:({field:x})=>e.jsx(hn,{"aria-label":"provider type",isSelected:x.value==="shared",onChange:j=>{x.onChange(j?"shared":"standard"),u.clearErrors()},children:"Shared Keys"})}),_==="shared"?e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Shared keys are created by the Stack Auth team for development. It helps you get started, but will show a Stack Auth logo and name on the OAuth screen."}),e.jsx(Q,{appearance:"warning",children:e.jsx(T,{children:"Shared keys should never be used in production."})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:["Create a ",r.label," OAuth app and set the callback url to: ",e.jsx("br",{}),e.jsx(ke,{children:r.redirect_uri})]}),e.jsx(me,{control:u.control,name:"client_id",render:({field:x})=>{var j;return e.jsx(R,{label:"Client ID",error:(j=u.formState.errors.client_id)==null?void 0:j.message,children:e.jsx(ne,{...x,value:x.value??"",placeholder:"Client ID"})})}}),e.jsx(me,{control:u.control,name:"client_secret",render:({field:x})=>{var j;return e.jsx(R,{label:"Client Secret",error:(j=u.formState.errors.client_secret)==null?void 0:j.message,children:e.jsx(ne,{...x,value:x.value??"",placeholder:"Client Secret"})})}})]})]}),e.jsxs(ge,{className:up.footer,children:[e.jsx("div",{children:r.docsLink&&_==="standard"&&e.jsx(A,{openInNewTab:!0,icon:"external_link",href:r.docsLink.url,children:r.docsLink.label})}),e.jsxs("div",{className:up.actions,children:[e.jsx(_e,{disabled:!u.formState.isValid||i||l,loading:i||l,onClick:()=>u.handleSubmit(g),children:o?"Update":"Add"}),e.jsx(ls,{appearance:"secondary",children:"Cancel"})]})]})]})},_ee=({isOpen:t,projectId:s,onRequestClose:n,availableProviders:r=[]})=>{const[o,a]=m.useState();return e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{isOpen:t,onRequestClose:n,title:"Add OAuth Provider",width:600,children:[e.jsxs(be,{children:[e.jsx(T,{children:"Choose an OAuth provider to add to your authentication configuration."}),e.jsx("div",{className:up.providersGrid,children:r.map(i=>e.jsxs("button",{type:"button",className:up.providerTile,onClick:()=>a(i),children:[e.jsx(L,{name:i.icon,size:32}),e.jsx(T,{children:i.label})]},i.id))})]}),e.jsx(ge,{children:e.jsx(ls,{appearance:"secondary",children:"Cancel"})})]}),o&&e.jsx(gI,{projectId:s,onSuccess:n,onRequestClose:()=>a(void 0),oauthProvider:o})]})},fee="_container_1qzbn_1",bee="_provider_1qzbn_7",xee="_removeProvider_1qzbn_13",gf={container:fee,provider:bee,removeProvider:xee},jee=({projectId:t,oauthProvider:s})=>{const n=mI[s.id],[r,o]=m.useState(!1),{confirm:a}=Oe(),{trackUiInteraction:i}=k(),{mutateAsync:c,isPending:l}=dee(t),d=m.useCallback(async()=>{if(i("neon_identity_oauth_provider_remove_clicked",{id:s.id}),await a({header:`Remove ${n.label} OAuth provider?`,text:e.jsxs(Q,{appearance:"error",children:["Removing this provider will prevent users from signing in with"," ",n.label,", including existing users who have used it before. They might not be able to log in anymore. Are you sure you want to remove it?"]}),confirmButtonText:"Remove",appearance:"error"}))try{i("neon_identity_oauth_provider_remove_confirmed",{id:s.id}),await c(s.id),re(`${n.label} OAuth provider removed successfully`)}catch(p){const g=cs(p);tt(g)}else i("neon_identity_oauth_provider_remove_dismissed",{id:s.id})},[a,c,s.id,n.label,i]),u=m.useMemo(()=>[{items:[{label:"Configure",onClick:()=>o(!0)},{label:`Remove ${n.label}`,itemTextClassName:gf.removeProvider,onClick:d}]}],[n.label,d]);return e.jsxs("div",{className:Yi.item,children:[r&&e.jsx(gI,{projectId:t,oauthProvider:n,existingProvider:s,onRequestClose:()=>o(!1),onSuccess:()=>{}}),e.jsxs("span",{className:gf.provider,children:[e.jsx(L,{name:n.icon,size:24}),e.jsxs(T,{children:[n.label,s.type==="shared"&&e.jsx(he,{size:"s",margin:"left",children:"Shared keys"})]})]}),e.jsx(Dt,{sections:u,placement:"bottom end",children:e.jsx(Zt,{isDisabled:l})})]})},yee=({permission:t})=>{const{projectId:s}=O(),{data:n,isLoading:r}=iee(s),[o,a]=m.useState(!1),i=m.useMemo(()=>Object.entries(mI).filter(([c])=>!(n!=null&&n.some(l=>l.id===c))).map(([,c])=>c),[n]);return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"OAuth Providers"}),e.jsxs(Pe,{className:gf.container,children:[e.jsx(T,{children:"Select the OAuth sign-in methods you want available in your app"}),r?e.jsxs(e.Fragment,{children:[e.jsx($,{height:12,width:100}),e.jsx($,{height:12,width:100}),e.jsx($,{height:12,width:100})]}):e.jsx("div",{className:Yi.container,children:e.jsx("ul",{className:Yi.list,children:n==null?void 0:n.map(c=>e.jsx(jee,{projectId:s,oauthProvider:c},c.id))})})]}),i.length>0&&e.jsx(Ss,{children:e.jsx("div",{className:ex.buttonWrapper,children:e.jsx(Z,{content:t.reason,disabled:t.canManageIntegration,children:e.jsx(P,{onClick:()=>a(!0),appearance:"secondary",disabled:!t.canManageIntegration,children:"Add OAuth Provider"})})})})]}),i.length>0&&e.jsx(_ee,{projectId:s,isOpen:o,onRequestClose:()=>a(!1),availableProviders:i})]})},vee=({identityIntegration:t})=>e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"Project Info"}),e.jsxs(Pe,{children:[e.jsx(R,{label:"Stack Auth Project ID",children:e.jsx(Un,{children:t.auth_provider_project_id})}),e.jsx(R,{label:"JWKS URL",children:e.jsx(Un,{hideOverflow:!0,children:t.jwks_url})})]})]}),wee=({identityIntegration:t})=>{const{projectId:s}=O(),{canManageIntegration:n,isCollaborator:r,isLoading:o}=oI(s),a=Hp(t==null?void 0:t.auth_provider),i=m.useMemo(()=>({canManageIntegration:n,reason:Fi.getManageNeonAuthReason({isLoading:o,canManageIntegration:n,isCollaborator:r})}),[n,r,o]);return e.jsxs(e.Fragment,{children:[e.jsx(vee,{identityIntegration:t}),e.jsxs(Ae,{children:[e.jsx(fe,{level:3,children:"Environment variables"}),e.jsx(UX,{permission:i,authProvider:a,identityIntegration:t})]}),e.jsx(eee,{authProvider:a,permission:i}),e.jsx(yee,{permission:i}),e.jsx(ree,{identityIntegration:t,permission:i}),e.jsx(aee,{authProvider:a,permission:i})]})},See="_dashboard_94ntd_1",Cee="_dashboardTabs_94ntd_7",kee="_tabsContainer_94ntd_12",Bg={dashboard:See,dashboardTabs:Cee,tabsContainer:kee},Iee=2*sb,Pee=10,_I="neon_auth",Tee="teams_sync",Nee="team_memberships_sync",Aee=`${_I}.${Tee}`,Eee=`${_I}.${Nee}`,$ee=Rt({id:dt(),raw_json:Rt({}).passthrough(),name:dt().nullable(),created_at:Hi().nullable(),updated_at:Hi().nullable(),user_count:an().int().nonnegative()}),Oee={teams:t=>["getTeams",t]},Ree=()=>{const{projectId:t}=O(),{data:s}=Po(t),n=s==null?void 0:s[0];return Lc({queryKey:{key:Oee.teams(t),appendConnectionString:!1},query:`SELECT
        teams.id as id,
        teams.name as name,
        teams.created_at as created_at,
        teams.updated_at as updated_at,
        teams.raw_json as raw_json,
        COUNT(members.user_id)::integer as user_count
     FROM
        ${Aee} teams
     LEFT JOIN
        ${Eee} members
        ON teams.id = members.team_id
        AND members.deleted_at IS NULL
    WHERE
      teams.deleted_at IS NULL
    GROUP BY
      teams.id,
      teams.name,
      teams.created_at,
      teams.updated_at
     ORDER BY teams.created_at DESC
     LIMIT ${Pee}`,zodSchema:$ee,options:{enabled:!!n,staleTime:Iee},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},Bee=[{header:"Team",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0},{header:"Members",accessorKey:"user_count",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric"},{header:"Created At",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.created_at?le(t.created_at):"—"})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:t=>e.jsx(e.Fragment,{children:t.updated_at?le(t.updated_at):"—"})}],Lee=()=>{var s;const t=Ree();if((s=t.error)!=null&&s.message){const n=cs(t.error);return e.jsx(is,{title:"Error fetching users data",subtitle:n,actions:e.jsx(P,{loading:t.isRefetching,onClick:()=>t.refetch(),children:"Retry"})})}return e.jsx(mn,{columns:Bee,rows:t.data??[],"aria-label":"Auth Provider Teams",isLoading:t.isLoading,defaultSorting:{column:"created_at",direction:"descending"}})};Rt({tab:yS(["users","teams","configuration"]).optional().catch(void 0)});const Dee=()=>{const t="tab",[s,n]=Ma(t);return{currentTab:s??"users",setCurrentTab:n}},Mee=[{label:"Users",value:"users"},{label:"Teams",value:"teams"},{label:"Configuration",value:"configuration"}],Uee=({authIntegration:t})=>{const s=!!t,{currentTab:n,setCurrentTab:r}=Dee(),o=ee("neon_auth_teams_sync"),a=m.useMemo(()=>Mee.filter(i=>i.value==="teams"?o:s?!0:i.value!=="configuration"),[o,s]);return e.jsxs("div",{className:Bg.dashboard,children:[e.jsx(pn,{options:a,value:n,onChange:i=>r(i),className:Bg.dashboardTabs}),e.jsxs("div",{className:Bg.tabsContainer,children:[n==="users"&&e.jsx(EX,{identityIntegration:t}),n==="teams"&&e.jsx(Lee,{}),n==="configuration"&&s&&e.jsx(wee,{identityIntegration:t})]})]})},qy={buttonLabel:"Contact support",modalTitle:"Report a problem"},fI=({subject:t,description:s})=>{const[n,r]=m.useState(!1),o=m.useCallback(()=>r(!0),[r]),a=m.useCallback(()=>r(!1),[r]);return e.jsxs(e.Fragment,{children:[e.jsx(So,{onRequestClose:a,isOpen:n,title:qy.modalTitle,defaultValues:{subject:t,description:s}}),e.jsx(P,{appearance:"secondary",onClick:o,children:qy.buttonLabel})]})},Fee="_identityTitle_176qq_1",qee="_pageHeaderSubtitle_176qq_7",zee="_pageHeaderSubtitleEmptyState_176qq_13",Hee="_errorActionsWrapper_176qq_19",Vu={identityTitle:Fee,pageHeaderSubtitle:qee,pageHeaderSubtitleEmptyState:zee,errorActionsWrapper:Hee},Vee=()=>{const{projectId:t}=O(),{data:s,isPending:n,error:r,refetch:o}=Po(t);if(n||!s)return e.jsx(pe,{});if(r)return e.jsx(is,{title:"Failed to load Neon Auth integrations.",subtitle:r.message,actions:e.jsxs("div",{className:Vu.errorActionsWrapper,children:[e.jsx(fI,{subject:"Failed to load Neon Auth integrations",description:`The following error occurred when opening the Neon Auth integrations page: ${r.message}`}),e.jsx(P,{size:"s",onClick:()=>o(),children:"Retry"})]})});if(!(s!=null&&s.length))return e.jsx(tZ,{});const a=s[0],i=_t(a.created_at).fromNow(),c=Hp(a.auth_provider);return e.jsxs(e.Fragment,{children:[e.jsx(Nc,{title:e.jsxs("span",{className:Vu.identityTitle,children:["Auth ",e.jsx(he,{appearance:"experimental",children:"Beta"})]}),subtitle:e.jsxs(T,{appearance:"secondary",className:M(Vu.pageHeaderSubtitle,Vu.pageHeaderSubtitleEmptyState),children:["Connected to ",c.label," ",i,e.jsxs(Ot,{size:"l",children:["This Neon project was connected to ",c.label," ","on ",le(a.created_at),"."]})]})}),e.jsx("section",{children:e.jsx(Uee,{authIntegration:a})})]})},Wee="_root_1u3cy_1",Gee={root:Wee},Kee=()=>e.jsxs("div",{className:Gee.root,children:[e.jsx(Wk,{headingId:"github"}),e.jsx(Jk,{headingId:"vercel"})]}),Qee="_django_1jdvk_1",Yee="_go_1jdvk_5",Jee="_java_1jdvk_9",Zee="_neonServerless_1jdvk_13",Xee="_nextJs_1jdvk_17",ete="_nodeJs_1jdvk_21",tte="_postgres_1jdvk_25",ste="_parameters_1jdvk_29",nte="_prisma_1jdvk_33",rte="_sqlAlchemy_1jdvk_37",ote="_nestJs_1jdvk_41",ate="_dotNet_1jdvk_45",Ts={django:Qee,go:Yee,java:Jee,neonServerless:Zee,nextJs:Xee,nodeJs:ete,postgres:tte,parameters:ste,prisma:nte,sqlAlchemy:rte,nestJs:ote,dotNet:ate},zy=[{snippedType:se.ConnectionString,icon:Ts.postgres,title:"Postgres"},{snippedType:se.ParametersOnly,icon:Ts.parameters,title:"Parameters only"},{snippedType:se.Serverless,icon:Ts.neonServerless,title:"NeonDriver"},{snippedType:se.NextJS,icon:Ts.nextJs,title:"NextJS"},{snippedType:se.PrismaJS,icon:Ts.prisma,title:"Prisma"},{snippedType:se.NodeJS,icon:Ts.nodeJs,title:"Node.js"},{snippedType:se.DotNet,icon:Ts.dotNet,title:".NET"},{snippedType:se.Django,icon:Ts.django,title:"Django"},{snippedType:se.Java,icon:Ts.java,title:"Java"},{snippedType:se.Go,icon:Ts.go,title:"Go"},{snippedType:se.NestJS,icon:Ts.nestJs,title:"NestJS"},{snippedType:se.SQLAlchemy,icon:Ts.sqlAlchemy,title:"SQLA"}];function ite(){document.dispatchEvent(new CustomEvent("OPButtonAdded"))}function cte(t){const s=["none","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","one-time-code","organization","street-address","address-line1","address-line2","address-line3","address-level1","address-level2","address-level3","address-level4","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"];if(!t.fields){console.error("Missing 'fields' array in save request.");return}t.fields.forEach(c=>{c.autocomplete?s.find(l=>l===c.autocomplete)||console.error(`String '${c.autocomplete}' is an invalid input. Autocomplete type must be one of the following: ${s.join(", ")}.`):console.error("Fields array is missing 'autocomplete' designation.")});const r=new TextEncoder().encode(JSON.stringify(t)),o=r.length,a=[];for(let c=0;c<o;c++)a[c]=String.fromCharCode(r[c]);const i=a.join("");return btoa(i)}const lte=()=>dte().crypto.getRandomValues(new Uint32Array(1))[0].toString(36);function dte(){if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}class ute extends HTMLElement{constructor(){super(),this.internalId=lte(),this.errorMessages=[],this.ctaUrls={en:"https://1password.com/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",es:"https://1password.com/es/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",de:"https://1password.com/de/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",fr:"https://1password.com/fr/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",it:"https://1password.com/it/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ja:"https://1password.com/jp/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ko:"https://1password.com/ko/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",pt:"https://1password.com/pt/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ru:"https://1password.com/ru/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-CN":"https://1password.com/zh-cn/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-TW":"https://1password.com/zh-tw/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password"},document.addEventListener("OPButtonEvent",s=>{const n=s.detail;n.buttonId===this.internalId&&(n.error?this._setModalContent(this._localize(n.header),n.body,!0,!0):this._setModalContent(this._localize(n.header),n.body,!0))})}_loadFonts(){if(document.querySelector('style[data-description="onepassword-font-faces"]'))return;const n=`@font-face {
      font-display: swap;
      font-family: "Inter";
      font-style: normal;
      font-weight: 400 600;
      src: url(./src/fonts/Inter-roman.var.woff2) format("woff2");
    }`,r=document.createElement("style");r.dataset.description="onepassword-font-faces",r.appendChild(document.createTextNode(n)),document.head.appendChild(r)}_infoIconSvg(s){switch(s){case"dark":return'<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM8 6C8.55229 6 9 5.55228 9 5C9 4.44772 8.55229 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z" fill="#85BEFF"/>';default:return'<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM9 5C9 5.55228 8.55229 6 8 6C7.44772 6 7 5.55228 7 5C7 4.44772 7.44772 4 8 4C8.55229 4 9 4.44772 9 5Z" fill="#0364D3"/>'}}_findSupportedLocaleCode(s){if(s){const r=["de","en","es","fr","it","ja","ko","pt","ru","zh-CN","zh-TW"].find(o=>s.startsWith(o));if(r)return r}return"en"}_validateAttributes(s,n,r){if(this.hasAttribute(n)){const a=this.getAttribute(n);if(!s.find(i=>i===a)){const i=`"${a}" is an invalid input. ${n} can only be one of the following: ${s.join(", ")}.`;return this.errorMessages.push(i),console.error(i),r}return a}return r}get lang(){const s=this.getAttribute("lang");return s&&this._findSupportedLocaleCode(s)?this._findSupportedLocaleCode(s):navigator.language&&this._findSupportedLocaleCode(navigator.language)?this._findSupportedLocaleCode(navigator.language):"en"}set lang(s){this.setAttribute("lang",s)}get class(){const s=["black","white"];return this._validateAttributes(s,"class",null)}set class(s){this.setAttribute("class",s??"")}get value(){return this.getAttribute("value")}set value(s){this.setAttribute("value",s??"")}get data_onepassword_type(){const s=["login","credit-card","api-key"];return this._validateAttributes(s,"data-onepassword-type",null)}set data_onepassword_type(s){this.setAttribute("data_onepassword_type",s??"")}get modal_position(){return"top"}set modal_position(s){this.setAttribute("modal_position",s)}get visible(){return this.hasAttribute("visible")}set visible(s){s?this.setAttribute("visible",""):this.removeAttribute("visible")}get color_mode(){const s=["light","dark"];return this._validateAttributes(s,"data-theme","light")}set color_mode(s){this.setAttribute("color_mode",s)}get hide_call_to_action(){return this.hasAttribute("hide_call_to_action")}set hide_call_to_action(s){s?this.setAttribute("hide_call_to_action",""):this.removeAttribute("hide_call_to_action")}get padding(){const s=["compact","normal","none"];return this._validateAttributes(s,"padding","normal")}set padding(s){this.setAttribute("padding",s)}static get observedAttributes(){return["visible","modal_position","color_mode","hide_call_to_action","padding"]}attributeChangedCallback(s,n,r){var o,a,i,c,l,d;if(this.shadowRoot&&n!==r)switch(s){case"visible":case"hide_call_to_action":typeof r=="string"?(o=this.shadowRoot.querySelector(".wrapper"))===null||o===void 0||o.setAttribute(s,r):(a=this.shadowRoot.querySelector(".wrapper"))===null||a===void 0||a.removeAttribute("visible");break;case"modal_position":(i=this.shadowRoot.querySelector(".wrapper"))===null||i===void 0||i.setAttribute(s,r);break;case"color_mode":(c=this.shadowRoot.querySelector(".wrapper"))===null||c===void 0||c.setAttribute(s,r);case"padding":(l=this.shadowRoot.querySelector(".wrapper"))===null||l===void 0||l.setAttribute(s,r);break;case"modal_position":(d=this.shadowRoot.querySelector(".wrapper"))===null||d===void 0||d.setAttribute(s,r);break}}_localize(s){return s}_elementGenerator(s,n,r,o){const a=document.createElement(s);return a.innerHTML=n,a.setAttribute("aria-hidden",r.toString()),o&&a.setAttribute("class",o),a}_setModalContent(s,n,r,o){var a,i,c,l;const d=(a=this.shadowRoot)===null||a===void 0?void 0:a.querySelector("#op-modal-header"),u=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector("#op-modal-body");d.innerText=s,u.innerText="";const h=[];n.forEach(g=>{if(g.url){if(g.url){const _=this._elementGenerator("a",`${g.text} `,!0);_.setAttribute("href",g.url),_.setAttribute("tabindex","3"),_.setAttribute("target","_blank"),_.setAttribute("rel","noopener noreferrer"),u.appendChild(_)}}else{const _=document.createTextNode(g.text);u.appendChild(_)}h.push(g.text)});const p=h.join(" ");r&&this.setAttribute("hide_call_to_action",""),d.appendChild(this._elementGenerator("span",p,!1,"sr-only")),o&&(((c=this.shadowRoot)===null||c===void 0?void 0:c.querySelector(".onepasswordSaveBtn")).setAttribute("title",p),this.setAttribute("visible",""),((l=this.shadowRoot)===null||l===void 0?void 0:l.querySelector("#onepassword-modal")).focus())}_toggleInfoModal(){var s,n,r,o;const a=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-modal"),i=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector("#close-icon"),c=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-info-icon"),l=(o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector(".main");document.body.addEventListener("click",d=>{d.target!==this&&this.removeAttribute("visible")}),l==null||l.addEventListener("click",d=>{const u=d.target;this.hasAttribute("visible")&&!(a!=null&&a.contains(u))&&!(c!=null&&c.contains(u))&&this.removeAttribute("visible")}),i==null||i.addEventListener("click",d=>{this.removeAttribute("visible")}),i==null||i.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this.removeAttribute("visible"),c==null||c.focus())}),c==null||c.addEventListener("click",d=>{this._positionModal(),this.setAttribute("visible",""),a==null||a.focus()}),c==null||c.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this._positionModal(),this.setAttribute("visible",""),a==null||a.focus())})}_positionModal(){var s,n,r,o;const a=(n=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-info-icon"))===null||n===void 0?void 0:n.getBoundingClientRect();if(!this.visible){const i=(o=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-modal"))===null||o===void 0?void 0:o.getBoundingClientRect();if(i&&a){const c=i.y+i.height;i.y<0||c<0||a.y<140?this.setAttribute("modal_position","bottom"):this.setAttribute("modal_position","top")}}}_focusTrap(s,n,r,o){var a;const i=(a=this.shadowRoot)===null||a===void 0?void 0:a.activeElement;i===o&&n==="next"?(s.preventDefault(),r.focus()):i===r&&n==="back"&&(s.preventDefault(),o.focus())}_focusListener(s){var n,r,o;const a=(r=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector(".wrapper"))===null||r===void 0?void 0:r.hasAttribute("visible");if(s.key!=="Tab"||!a)return;const i=(o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector("#onepassword-modal"),c=this.hasAttribute("hide_call_to_action"),l=i.querySelector("#op-modal-cta");let d=l;const u=i.querySelector("#close-icon");c&&(this.errorMessages.length?this.errorMessages.length&&(d=i.querySelector("a")?i.querySelector("a"):u):(l.removeAttribute("tabindex"),d=u)),s.shiftKey?this._focusTrap(s,"back",d,u):this._focusTrap(s,"next",d,u)}connectedCallback(){this._render(),this._toggleInfoModal(),this.addEventListener("keydown",this._focusListener)}disconnectedCallback(){this.removeEventListener("keydown",this._focusListener)}_render(){const s=document.createElement("div");s.innerHTML=`
      <style>

      span, h3, p {
        font-family: "-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Noto Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }
      h3 {
        font-weight: 600;
        font-size: 0.875rem;
      }
      .wrapper {
        flex-direction: column;
        justify-content: space-between;
        position: relative;
      }
      #onepassword-modal {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 16px;
        width: 299px;
        min-height: 94px;
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0px 5px 10px 1px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        opacity: 0;
        visibility: hidden;
        transition: visibility 0s linear 0.1s, opacity 0.3s ease;
        position: absolute;
        text-align: left;
        z-index: 10;
      }
      [hide_call_to_action] #onepassword-modal {
        min-height: 50px;
      }
      [hide_call_to_action] #op-modal-cta {
        display: none;
      }
      [modal_position="top"] #onepassword-modal {
        bottom: 64px;
      }
      [modal_position="bottom"] #onepassword-modal {
        top: 64px;
      }
      [visible] #onepassword-modal {
        visibility: visible;
        opacity: 1;
        transition-delay: 0s;
      }
      #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      [data-theme="dark"] #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 50%), 0px 0px 0px 3px rgb(0 119 255 / 50%);
      }
      [visible] a:focus {
        border-radius: 4px;
        box-shadow: 0px 0px 0px 2px rgb(0 119 255 / 30%), 0px 0px 0px 2px rgb(0 119 255 / 30%);
        outline: none;
      }
      #header {
        width: 100%;
        height: 18px;
        left: 0px;
        top: 0px;
        line-height: 130%;
        color: #000000;
        flex: none;
        order: 0;
        flex-grow: 0;
        margin: 0px 0px;
      }
      #close-icon {
        width: 18px;
        height: 18px;
        border-radius: 24px;
        margin: -4px -4px 0 0;
        order: 1;
      }
      #close-icon:active {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:active path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #close-icon:focus {
        border: 2px solid rgba(0, 119, 255, 0.35);
        background: transparent;
        margin-top: -5px;
      }
      #close-icon:hover {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:hover path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #message {
        font-size: 0.8125rem;
        color: #000;
        order: 1;
        width: 100%;
        align-items: flex-start;
        display: flex;
        flex-grow: 1;
        flex-direction: column;
        min-height: calc(100% - 34px);
        padding: 4px 0 0 0;
      }
      #message div:first-child {
        flex-grow: 1;
        align-items: flex-start;
        margin: 0 0 4px 0;
        width: 100%;
      }
      #message a {
        color: #0472ec;
        text-decoration-color: #0472ec;
        padding: 1px;
      }
      #message a:hover {
        color: #0a2d4d;
        text-decoration-color: #0a2d4d;
      }
      #message p {
        margin: 0;
        width: 100%;
        letter-spacing: -0.015em;
      }
      .iconButton {
        cursor: pointer;
        padding: 0;
        background: transparent;
        border: none;
      }
      .iconButton:hover {
        background: rgba(0, 119, 255, 0.15);
        border-radius: 24px;
        outline: none;
      }
      [data-theme="dark"] .iconButton:hover {
        background: rgba(0, 119, 255, 0.5);
      }
      .iconButton:focus {
        border-radius: 24px;
        background: rgba(0, 119, 255, 0.3);
        outline: none;
      }
      [data-theme="dark"] .iconButton:focus {
        background: rgba(0, 119, 255, 0.5);
      }
      [data-theme="light"] .iconButton:focus circle {
        fill: #FFFFFF;
      }
      [data-theme="dark"] #onepassword-info-icon:focus path {
        fill: #FFFFFF;
      }
      #onepassword-icon {
        width: 24px;
        min-width: 24px;
      }
      [data-theme="dark"] [disabled] #onepassword-icon path {
        fill: #bbbbbb;
      }
      #onepassword-info-icon {
        display: inline-flex;
        padding: 4px;
        margin-right: 4px;
      }
      [padding="none"] .main {
        padding: 0px 0;
      }
      [padding="compact"] .main {
        padding: 16px 0;
      }
      .main {
        padding: 24px 0;
      }
      div {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .onepasswordSaveBtn {
        display: flex;
        flex-direction: row;
        align-items: center;
        cursor: pointer;
        margin-right: 5px;
        user-select: none;
        /* 163px equivalent */
        min-width: 10.1875rem;
        /* 165px equivalent */
        max-width: 10.3125rem;
        font-size: 0.83125rem;
      }
      .onepasswordSaveBtn:focus {
        border-radius: 8px;
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      .label {
          width: 100%;
          text-align: center;
          color: #fff;
          flex: auto;
          order: 1;
          flex-grow: 0;
          padding: 3px 0px 3px 3px;
          word-break: break-word;
          align-self: center;
          line-height: 1em;
          letter-spacing: -0.1px;
          font-weight: 500;
      }
      .onepasswordSaveBtn {
        padding-bottom: 2px;
        width: auto;
        min-height: 32px;
        left: 0px;
        top: 0px;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.3);
        background: linear-gradient(141.91deg, #0572EC 10.24%, rgba(3, 100, 211, 0.42) 81.93%), #0364D3;
      }
      .onepasswordSaveBtn:hover:enabled {
        background: #0567D5;
      }
      .onepasswordSaveBtn:active:enabled {
        background: #0450A6;
      }
      .black.onepasswordSaveBtn {
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: #333333;
      }
      .black.onepasswordSaveBtn:hover:enabled {
        background: #1A1A1A;
      }
      [data-theme="dark"] .black.onepasswordSaveBtn:hover:enabled {
        background: #2d2d2d;
      }
      .black.onepasswordSaveBtn:active:enabled {
        background: #000000;
      }
      .white.onepasswordSaveBtn {
        background: #F7F7F7;
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn:hover:enabled {
        border: 1px solid rgba(0, 119, 255, 0.6);
        background: #F5FAFF;
      }
      [data-theme="dark"] .white.onepasswordSaveBtn:hover:enabled {
        background: #e7f3ff;
      }
      .white.onepasswordSaveBtn:active:enabled {
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn .label {
        color: #262626;
      }
      .white.onepasswordSaveBtn:enabled #onepassword-icon circle {
        fill: #0572EC;
      }
      .onepasswordSaveBtn:disabled {
        background: rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-sizing: border-box;
        border-radius: 8px;
        cursor: not-allowed;
      }
      [data-theme="dark"] .onepasswordSaveBtn:disabled {
        background: #aaaaaa;
      }
      .onepasswordSaveBtn:disabled .label {
        color: rgba(0, 0, 0, 0.5);
      }
      .onepasswordSaveBtn:disabled svg circle {
        fill: rgb(68 68 68 / 20%);
      }

      /* #a11y */
      .sr-only:not(:focus):not(:active) {
        clip: rect(0 0 0 0);
        clip-path: inset(100%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }


      </style>

      <div class="wrapper" modal_position=${this.modal_position} data-theme=${this.color_mode} padding=${this.padding}>
        <div id="onepassword-modal" tabindex="2" role="dialog">
        <div id="header">
          <h3 id="op-modal-header">${this._localize("What's 1Password")}<span aria-hidden="false" class="sr-only">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</span></h3>
            <button id="close-icon" class="iconButton" tabindex="4">
              <svg aria-hidden="true" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 2.83056L2.46898 0.299538C2.0696 -0.0998459 1.42207 -0.0998459 1.02269 0.299538L0.299538 1.02269C-0.0998459 1.42207 -0.0998459 2.0696 0.299538 2.46898L2.83056 5L0.299538 7.53102C-0.0998456 7.9304 -0.0998459 8.57793 0.299538 8.97731L1.02269 9.70046C1.42207 10.0998 2.0696 10.0998 2.46898 9.70046L5 7.16944L7.53102 9.70046C7.9304 10.0998 8.57793 10.0998 8.97731 9.70046L9.70046 8.97731C10.0998 8.57793 10.0998 7.9304 9.70046 7.53102L7.16944 5L9.70046 2.46898C10.0998 2.0696 10.0998 1.42207 9.70046 1.02269L8.97731 0.299538C8.57793 -0.0998459 7.9304 -0.0998459 7.53102 0.299538L5 2.83056Z" fill="black" fill-opacity="0.55"/>
              </svg>
              <span aria-hidden="false" class="sr-only">${this._localize("Close this modal")}</span>
            </button>
          </div>
          <div id="message" aria-hidden="true">
            <div><p id="op-modal-body">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</p></div>
          <div><p><a id="op-modal-cta" tabindex="3" href=${this.ctaUrls[this.lang]} target="_blank" rel="noopener noreferrer">${this._localize("Sign up for free")}</a></p></div>
          </div>
        </div>

        <div class="main">
          <button
            class="${this.class?this.class:""} onepasswordSaveBtn"
            tabindex="1"
            disabled
            data-onepassword-save-button
            data-onepassword-save-request
            value=${this.value}
            data-onepassword-type=${this.data_onepassword_type}
            id=${this.internalId}
            >
            <svg id="onepassword-icon" aria-hidden="true" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12.5" r="10"></circle>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.5C6.94409 21.5 2.84547 17.4707 2.84547 12.5C2.84547 7.52943 6.94409 3.5 12 3.5C17.0559 3.5 21.1545 7.52943 21.1545 12.5C21.1545 17.4707 17.0559 21.5 12 21.5ZM19.4906 12.5009C19.4906 8.43408 16.1371 5.13724 12.0005 5.13724C7.8639 5.13724 4.51044 8.43408 4.51044 12.5009C4.51044 16.5678 7.8639 19.8645 12.0005 19.8645C16.1371 19.8645 19.4906 16.5678 19.4906 12.5009Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M17.493 12.5369C17.493 9.51835 15.0338 7.10065 12.0372 7.10065C8.96681 7.10065 6.5076 9.51835 6.5076 12.5369C6.5076 15.4831 8.96681 17.9006 12.0372 17.9006C15.0338 17.9006 17.493 15.4831 17.493 12.5369ZM13.3321 9.04622C13.3321 8.78466 13.142 8.57262 12.9076 8.57262H11.0934C10.859 8.57262 10.6689 8.78466 10.6689 9.04622V10.8016C10.6689 10.8853 10.6988 10.9656 10.7518 11.0248L11.0171 11.3208C11.1276 11.4441 11.1276 11.644 11.0171 11.7673L10.7518 12.0633C10.6988 12.1225 10.6689 12.2028 10.6689 12.2866V15.9536C10.6689 16.2151 10.859 16.4272 11.0934 16.4272H12.9076C13.142 16.4272 13.3321 16.2151 13.3321 15.9536V14.1982C13.3321 14.1145 13.3023 14.0342 13.2492 13.975L12.9839 13.679C12.8734 13.5557 12.8734 13.3558 12.9839 13.2325L13.2492 12.9365C13.3023 12.8773 13.3321 12.7969 13.3321 12.7132V9.04622Z" fill="white"/>
            </svg>

            <span class="label">${this._localize("Save in 1Password")}</span>
          </button>

          <button id="onepassword-info-icon" class="iconButton" tabindex="1">
            <svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="8" cy="8" r="7"></circle>
              ${this._infoIconSvg(this.color_mode)}
            </svg>
            <span aria-hidden="false" class="sr-only">${this._localize("Click to learn more about 1Password")}</span>
          </button>

        </div>

      </div>
    `,this.attachShadow({mode:"open"}).appendChild(s)}}const hte="customElements"in window;hte&&customElements.define("onepassword-save-button",ute);const pte="_hidden_16oif_1",mte={hidden:pte},gte=(t,s,n)=>{const{fetchPassword:r}=Ic(),{database:o,endpoint:a,role:i,poolerEnabled:c,roleAuthMode:l}=t;return m.useCallback(async()=>{if(!i||!n||!o||!s)return;let d="";if(s.store_passwords)try{d=await r(s.id,i)??""}catch(p){H(p)}const u=G_("_connstring",{database:o,endpoint:a,role:i,password:d,storePasswords:s.store_passwords,poolerEnabled:c,roleAuthMode:l}),h={title:s.name,fields:[{autocomplete:"current-password",value:u},{autocomplete:"none",value:`Database: ${o.name}`},{autocomplete:"none",value:`Branch: ${n.name}`}]};return cte(h)},[n,o,a,r,c,s,i,l])},bI=t=>{var s,n,r;return(r=(n=(s=t.current)==null?void 0:s.querySelector("onepassword-save-button"))==null?void 0:n.shadowRoot)==null?void 0:r.querySelector("button[data-onepassword-save-button]")},_te=()=>{var t,s,n;(n=(s=(t=document.querySelector("onepassword-save-button"))==null?void 0:t.shadowRoot)==null?void 0:s.getElementById("onepassword-info-icon"))==null||n.remove()},fte=t=>{const[s,n]=m.useState(!0);return m.useEffect(()=>{const r=bI(t);if(!r)return;const o=new MutationObserver(()=>{n(r.getAttribute("disabled")!=null)});return o.observe(r,{attributes:!0,attributeFilter:["disabled"]}),ite(),()=>{o.disconnect()}},[t]),s},bte=({value:t})=>{const{trackUiInteraction:s}=k(),n=m.useRef(null),r=vo(),o=fte(n);m.useEffect(()=>{var i;(i=bI(n))==null||i.setAttribute("value",t)},[t]),m.useLayoutEffect(_te);const a=m.useCallback(()=>s("save_to_one_password_clicked"),[s]);return e.jsx("div",{ref:n,className:M({[mte.hidden]:o}),onClick:a,children:e.jsx("onepassword-save-button",{"data-onepassword-type":"login",value:t,"data-theme":r,class:"black",padding:"none"})})},xte=({connectionData:t,project:s,branch:n})=>{const[r,o]=m.useState(),a=gte(t,s,n);return m.useEffect(()=>{a().then(o).catch(()=>o(void 0))},[a]),r?e.jsx(bte,{value:r}):void 0},jte="_root_jdgrz_1",yte="_snippet_jdgrz_11",hp={root:jte,snippet:yte},xI=({className:t,branch:s,project:n,snippet:r,connectionData:o,noActions:a,imperativeActionsRef:i,onReveal:c,onCopy:l})=>{const[d,u]=m.useState(r.tabs[0]),{fetchPassword:h}=Ic(),{database:p,endpoint:g,role:_,poolerEnabled:x,roleAuthMode:j}=o,{tabs:b}=r;r.tabs.includes(d)||u(r.tabs[0]);const f=m.useCallback(S=>{const I=b.find(N=>N.value===S);u(I)},[b]),y=vd(async()=>{if(!_||!s||!p)return"";let S="";if(n&&n.store_passwords)try{S=await h(n.id,_)??""}catch(I){H(I)}return G_(d.template,{database:p,endpoint:g,role:_,password:S,storePasswords:n==null?void 0:n.store_passwords,poolerEnabled:x,roleAuthMode:j})}),w=j!=="passwordless"&&(n!=null&&n.store_passwords)&&d.hasSecrets?{getUnmaskedValue:y,onReveal:c}:void 0;return e.jsxs("div",{className:M(hp.root,t),"data-qa":"connection_snipet_block",children:[b.length>1&&e.jsx(pn,{variant:"contained",options:b,value:d.value,onChange:f}),e.jsx(Tr,{className:hp.snippet,variant:b.length>1?"contained":"default",mode:d.language,"data-qa":"connection_snippet_code_block",scrollable:!0,copy:{getUnmaskedValue:y,onCopy:l},reveal:w,noActions:a,imperativeActionsRef:i,actionBarItems:e.jsx(xte,{connectionData:o,project:n,branch:s}),children:G_(d.template,o)})]})},vte=()=>e.jsx("div",{className:hp.root,children:e.jsx(Un,{copy:!1,className:hp.snippet,"aria-disabled":!0,children:"Loading..."})}),wte="_root_1rxs2_1",Ste="_list_1rxs2_7",Cte="_switchButton_1rxs2_16",kte="_switchButton_active_1rxs2_29",Ite="_icon_1rxs2_34",hl={root:wte,list:Ste,switchButton:Cte,switchButton_active:kte,icon:Ite},Pte=({snippets:t,className:s,activeSnippetType:n,setActiveSnippetType:r})=>e.jsx("div",{className:M(hl.root,s),children:e.jsx("div",{className:M(hl.list),children:t.map(({snippedType:o,icon:a,title:i})=>e.jsx(Mn,{checked:o===n,wide:!0,circle:({checked:c})=>e.jsxs("p",{className:M(hl.switchButton,{[hl.switchButton_active]:c}),children:[e.jsx("span",{className:M(hl.icon,a)}),i]}),onChange:()=>r(o)},o))})}),Tte="_content_167dn_1",Nte="_snippetsContainer_167dn_7",Ate="_verticalSnippets_167dn_12",Ete="_codeBlock_verticalLayout_167dn_16",$te="_footer_167dn_21",pl={content:Tte,snippetsContainer:Nte,verticalSnippets:Ate,codeBlock_verticalLayout:Ete,footer:$te},Ote=({project:t,role:s,database:n,branch:r,endpoint:o})=>{const{trackUiInteraction:a}=k({mountEvent:"create_project_success_modal_shown"}),[i,c]=m.useState(!1),l=yR(1500,()=>{c(!1)},{leading:!1,trailing:!0,actionOnUnmount:"nothing"}),d=m.useRef(null),[u,h]=m.useState(zy[0].snippedType),p={database:n,endpoint:o,role:s,poolerEnabled:!0,storePasswords:t==null?void 0:t.store_passwords};return e.jsxs(e.Fragment,{children:[e.jsxs(be,{className:pl.content,children:[e.jsx(T,{children:"Choose your preferred connection method:"}),e.jsxs("div",{className:pl.snippetsContainer,children:[e.jsx(Pte,{snippets:zy,className:pl.verticalSnippets,activeSnippetType:u,setActiveSnippetType:g=>{h(g),a("create_project_success_modal_snippet_clicked",{snippet:g})}}),p?e.jsx(xI,{className:pl.codeBlock_verticalLayout,project:t,snippet:Cb[u],branch:r,connectionData:p,noActions:!0,imperativeActionsRef:d,onCopy:()=>{a("create_project_success_modal_snippet_copied",{snippet:u})}}):e.jsx(vte,{})]})]}),e.jsxs("div",{className:pl.footer,children:[e.jsxs(jb,{children:["View our"," ",e.jsx(A,{href:"https://neon.tech/docs/get-started-with-neon/frameworks",openInNewTab:!0,children:"frameworks"})," ","and"," ",e.jsx(A,{href:"https://neon.tech/docs/get-started-with-neon/languages",openInNewTab:!0,children:"languages"})," ","quick start guides."]}),e.jsx(P,{icon:i?"check":void 0,iconSide:"right",size:"l",onClick:async()=>{await d.current.triggerCopy(),c(!0),l.cancel(),l()},children:i?"Copied":"Copy code"})]})]})},Rte=({data:t,isOpen:s,onRequestClose:n})=>{const{trackUiInteraction:r}=k(),{project:o,branch:a}=t,{database:i,role:c,endpoint:l}=N1(t);return!c||!i||!a||!l?null:e.jsx(Qe,{isOpen:s,width:740,title:"Your database is live","data-qa":"create_project_success",onRequestClose:()=>{n&&(n(),r("create_project_success_modal_dismissed"))},children:e.jsx(Ote,{project:o,role:c,database:i,branch:a,endpoint:l})})},jI=t=>{const{trackUiInteraction:s}=k(),n=Ls(),r=wp(i=>_E(i,t)),o=(r==null?void 0:r.connectionType)??"pooler",a=m.useCallback(i=>{n(oS.actions.updateProjectSettings({projectId:t,settings:{connectionType:i}})),s("connection_details_pooler_changed")},[n,t,s]);return{connectionType:o,setConnectionType:a}},Bte="_connectionBlockHeader_14e8z_1",Lte="_select_14e8z_11",Hy={connectionBlockHeader:Bte,select:Lte},tx=({children:t,branchId:s,appearance:n,drawerZIndex:r,onClick:o,...a})=>{var w;const{project:i,projectId:c}=O(),[l,d]=m.useState(!1),u=RS({projectId:c}),h=qp({projectId:c}),{trackUiInteraction:p}=k(),g=m.useCallback(()=>{p("create_endpoint_button_clicked"),o==null||o(),d(!0)},[o,p]),x=(w=hs({projectId:c,branchId:s??""}).data)==null?void 0:w.endpoints.some(dn),j=Jn(m.useMemo(()=>s?{shared:{projects:[c],branches:[s]}}:null,[s,c]));if(u.isLoading||h.isLoading||!i)return null;const b=[u.isLimitExceeded?u.message:null,h.isLimitExceeded&&x?h.message:null,j].filter(Boolean).join(`
`),f=b.length>0,y={...a,disabled:f,onClick:g,children:t};let v;return n==="link"?v=e.jsx(A,{...y,disabled:!!j||y.disabled}):v=e.jsx(P,{...y,appearance:n,disabled:!!j||y.disabled}),e.jsxs(e.Fragment,{children:[l&&s&&e.jsx(qn,{isOpen:l,onRequestClose:()=>d(!1),mode:"create",project:i,branchId:s,endpointType:x?"read_only":"read_write",drawerZIndex:r}),e.jsx(Z,{content:b,disabled:!f,children:e.jsx("div",{style:{display:"inline-block"},children:v})})]})},Dte="_noCompute_pociv_1",Mte="_noComputeText_pociv_8",Vy={noCompute:Dte,noComputeText:Mte},Ute=({branchId:t})=>e.jsx("div",{className:Vy.noCompute,children:e.jsxs("div",{className:Vy.noComputeText,children:[e.jsx(tx,{appearance:"link",branchId:t,drawerZIndex:110,children:"Add compute"}),e.jsx("span",{children:"to connect to this branch"})]})}),Wu={label:"Connection pooling",hint:{title:"Supports up to 10,000 concurrent connections",description:t=>e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Uses PgBouncer to pool connections, which is recommended for most use cases."}),e.jsxs("p",{children:["Use a direct connection for ",e.jsx(ke,{children:"pg_dump"}),", session-dependent features, or schema migrations."]}),e.jsxs("p",{children:["The connection limit without pooling is"," ",e.jsx(ke,{children:t??"-"}),"."]})]}),learnMore:"Learn more"}},Fte="_wrapper_1o67u_1",qte="_tooltip_1o67u_7",Wy={wrapper:Fte,tooltip:qte},zte=({projectId:t,endpoint:s,disabled:n})=>{const{connectionType:r,setConnectionType:o}=jI(t),a=s&&b1({min:s.autoscaling_limit_min_cu,max:s.autoscaling_limit_max_cu});return e.jsxs("div",{className:Wy.wrapper,children:[e.jsx(hn,{isSelected:r==="pooler",onChange:i=>o(i?"pooler":"direct"),isDisabled:n,children:Wu.label}),e.jsx(Ot,{icon:"info_italic",size:"l",tooltipAppearance:"rich",children:e.jsxs("div",{className:Wy.tooltip,children:[e.jsx(z,{level:6,children:Wu.hint.title}),e.jsx("div",{children:Wu.hint.description(a)}),e.jsx(A,{href:x1,openInNewTab:!0,children:Wu.hint.learnMore})]})})]})},yI=({branch:t,endpoint:s,role:n,database:r})=>{const{trackUiInteraction:o}=k(),{project:a,projectId:i}=O(),{checkRoleIsPasswordless:c}=Ic(),[l,d]=xs(Me.ConnectionSnippetFormat,"authMode","password"),u=e5(l),[h,p]=xs(Me.ConnectionSnippetFormat,"default",u[0]),g=m.useRef(n);u.map(f=>f.value).includes(h.value)||p(u[0]),(a==null?void 0:a.store_passwords)&&n&&n!==g.current&&(c(i,n).then(f=>{d(f?"passwordless":"password")}),g.current=n);const{connectionType:x}=jI(i),j=x==="pooler",b=m.useCallback(f=>{o("code_samples_sample_type_clicked",{snippet:f.value}),p(f)},[o,p]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Hy.connectionBlockHeader,children:[e.jsx("div",{children:e.jsx(Pa,{"data-qa":"connection-snippet-format-select",containerClassName:Hy.select,appearance:"secondary",options:u,value:h,onChange:f=>{f&&b(f)},noSearch:!0})}),e.jsx(zte,{projectId:i,endpoint:s,disabled:!s||h.value==="prismajs"})]}),t&&s?e.jsx(xI,{project:a,snippet:h,branch:t,connectionData:{database:r,endpoint:s,poolerEnabled:j,role:n,storePasswords:a==null?void 0:a.store_passwords,roleAuthMode:l},onCopy:()=>{o("connection_details_connstring_copied",{snippet:h==null?void 0:h.value})},onReveal:()=>{o("connection_details_connstring_revealed",{snippet:h==null?void 0:h.value})}}):e.jsx(Ute,{branchId:t==null?void 0:t.id})]})},Hte="_alert_11n0x_1",Vte="_footer_11n0x_5",Gy={alert:Hte,footer:Vte},Wte=({data:t,onRequestClose:s,...n})=>{const{branch:r}=t,{database:o,role:a,endpoint:i}=N1(t);return!a||!o||!r||!i?null:e.jsxs(Qe,{...n,onRequestClose:s,title:"Connection details for your new branch","data-qa":"create_branch_success",maxWidth:770,children:[e.jsxs(be,{children:[e.jsxs(Q,{appearance:"success",className:Gy.alert,children:["The ",e.jsx("b",{children:t.branch.name})," branch was created successfully. Use the endpoint details below to connect to your branch."]}),e.jsx(yI,{branch:r,endpoint:i,role:a,database:o})]}),e.jsxs(ge,{children:[e.jsx(jb,{className:Gy.footer,children:e.jsxs("div",{children:["Manage users and passwords on the"," ",e.jsx(A,{href:F(te.ProjectsItemRoles,{projectId:r.project_id}),children:"Roles"})," ","page. For more information, see"," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/manage/branches#connect-to-a-branch",children:"Connect to a branch"}),"."]})}),e.jsx(ls,{"data-qa":"connection_details_modal_close_button"})]})]})},Gte="_buttonContainer_1besf_1",Kte={buttonContainer:Gte},Qte=({data:t,...s})=>{const{role:n}=t,{trackUiInteraction:r}=k(),{project:o}=O(),a=m.useMemo(()=>{if(!n)return"";const i=`PGUSER=${n.name}
PGPASSWORD=${n.password}`,c=new Blob([i],{type:""});return window.URL.createObjectURL(c)},[n]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(a),[a]),!n||!o?null:e.jsx(Qe,{...s,"data-qa":"created_role_modal",title:"Role created!",children:e.jsxs(be,{children:[e.jsxs(T,{children:["Role ",e.jsx(ke,{children:n.name})," was successfully created. Copy the password or download the .env file.",!o.store_passwords&&e.jsxs(e.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),e.jsx("br",{}),e.jsx("br",{}),"Password:"]}),e.jsx("br",{}),e.jsx(Un,{copy:{getUnmaskedValue:()=>Promise.resolve(n.password??""),onCopy:()=>r("role_created_popup_copy_password_clicked")},reveal:{getUnmaskedValue:()=>Promise.resolve(n.password??"")},"data-qa":"role_password",children:"*******"}),e.jsx("br",{}),a&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Download the .env file to save the user's password."}),e.jsx("br",{}),e.jsx("div",{className:Kte.buttonContainer,children:e.jsx(P,{as:"a",target:"_blank",href:a,download:".env",size:"l",onClick:()=>r("role_created_popup_download_credentials_clicked"),children:"Download .env"})})]})]})})},sx=t=>{const s=Tf("growth_onboarding_experience"),{projectData:n,branchData:r,roleData:o,setProjectData:a,setBranchData:i,setRoleData:c}=m.useContext(p1),l=m.useCallback(()=>{if(t==="project"){a();return}t==="branch"&&i(),t==="role"&&c()},[t,a,i,c]),d=m.useMemo(()=>t==="project"&&n?s!=="control"&&s!=="connection_modal_and_get_started"?null:e.jsx(Rte,{data:n,isOpen:!0,onRequestClose:l}):t==="role"&&o?e.jsx(Qte,{data:o,isOpen:!!o,onRequestClose:l}):t==="branch"&&r?e.jsx(Wte,{data:r,isOpen:!!r,onRequestClose:l}):null,[t,n,o,r,s,l]);return m.useEffect(()=>l,[t,l]),d},_f="branchId",Yte=()=>Ma(_f),nx=(t,{projectId:s,branchId:n,queryString:r})=>{const o=new URLSearchParams(r);n&&(t.includes(":branchId")?o.delete(_f):o.set(_f,n));const a=o.size>0?`?${o.toString()}`:"";return`${F(t,{projectId:s,branchId:n})}${a}`},Jte="_root_ukmys_1",Zte="_trigger_ukmys_19",Xte="_selectedValue_ukmys_31",ese="_dropdownIcon_ukmys_42",tse="_dropdownIcon_hidden_ukmys_48",sse="_popover_ukmys_53",nse="_searchInput_ukmys_65",rse="_list_ukmys_74",ose="_section_ukmys_82",ase="_item_ukmys_95",ise="_label_ukmys_123",cse="_check_ukmys_129",Ns={root:Jte,trigger:Zte,selectedValue:Xte,dropdownIcon:ese,dropdownIcon_hidden:tse,popover:sse,searchInput:nse,list:rse,section:ose,item:ase,label:ise,check:cse},lse=()=>{const{trackUiInteraction:t}=k(),{branch:s,setBranch:n}=ut(),{branches:r,branchesById:o}=Ye(),{params:a,path:i}=yc(),{contains:c}=Ef({sensitivity:"base"}),{isCollapsed:l}=ME(),d=!!a.branchId;return e.jsx(Z,{placement:"right",delay:100,content:s?`Branch: ${s.name}`:"Branch",disabled:!l,children:e.jsxs(zN,{"aria-label":"Branch",className:Ns.root,selectedKey:s==null?void 0:s.id,onOpenChange:u=>{u&&t("global_nav_branch_menu_open")},onSelectionChange:u=>{if(!u)return;const h=o[u];t("global_nav_branch_menu_change"),!d&&h&&n(h)},children:[e.jsxs(Ld,{className:Ns.trigger,children:[e.jsx(L,{size:16,name:"branch"}),e.jsx(HN,{className:Ns.selectedValue}),e.jsx(L,{size:16,name:"select",className:M(Ns.dropdownIcon,{[Ns.dropdownIcon_hidden]:l})})]}),e.jsx(Dd,{className:Ns.popover,children:e.jsxs($f,{filter:c,children:[e.jsx(Of,{autoFocus:!0,"aria-label":"Search branches",children:e.jsx(vp,{placeholder:"Search for a branch...",className:Ns.searchInput})}),e.jsx(VN,{className:Ns.list,children:e.jsxs(WN,{className:Ns.section,children:[e.jsx(Rf,{children:"Branches"}),e.jsx(yp,{items:r,children:u=>e.jsx(GN,{id:u.id,textValue:u.name,className:Ns.item,href:d?F(i,{...a,branchId:u.id}):void 0,children:({isSelected:h})=>e.jsxs(e.Fragment,{children:[e.jsx(Bf,{slot:"label",className:Ns.label,children:u.name}),h&&e.jsx(L,{name:"check",size:16,className:Ns.check})]})},u.id)})]})})]})})]})})},vI=(t,s,n)=>{if(!t||!s)return;let r="";if(n.has(Lh)){const o=new URLSearchParams;o.set(Lh,n.get(Lh)),r=`?${o.toString()}`}return`${F(C.ProjectsItemDrizzle,{projectId:t,branchId:s})}${r}`};function Zd(t,s){return s.map(n=>({...n,analyticsEvent:void 0,onClick:r=>{var o;t(n.analyticsEvent),(o=n.onClick)==null||o.call(n,r)}}))}function dse(){const{trackUiInteraction:t}=k();return m.useMemo(()=>({label:"Account",items:Zd(t,[{title:"Projects",icon:"project",href:C.ProjectsList,analyticsEvent:"global_nav_projects_list_clicked"},{title:"Billing",icon:"billing",href:C.UserBilling,analyticsEvent:"global_nav_billing_clicked"},{title:"Integrations",icon:"integrations",href:C.UserIntegrations,analyticsEvent:"global_nav_integrations_clicked"},{title:"Settings",icon:"settings",href:C.UserSettings,analyticsEvent:"global_nav_account_settings_clicked"}])}),[t])}function use(){const{trackUiInteraction:t}=k(),{orgId:s,isVercelOrg:n}=Y();return m.useMemo(()=>s&&{label:"Organization",items:Zd(t,[{title:"Projects",icon:"project",exact:!0,href:F(C.OrgProjectsList,{orgId:s}),analyticsEvent:"global_nav_org_projects_list_clicked"},{title:"People",icon:"team",href:F(C.OrgPeople,{orgId:s}),analyticsEvent:"global_nav_org_members_clicked"},{title:"Billing",icon:"billing",exact:!0,href:F(C.OrgBilling,{orgId:s}),analyticsEvent:"global_nav_org_billing_clicked"},{title:"Integrations",icon:"integrations",href:F(C.OrgIntegrations,{orgId:s}),analyticsEvent:"global_nav_org_integrations_clicked"},{title:"Settings",icon:"settings",exact:!0,href:F(C.OrgSettings,{orgId:s}),analyticsEvent:"global_nav_org_settings_clicked"}]).filter(r=>r.title!=="Integrations"||!n)},[s,t,n])}function hse({projectId:t,branchId:s}){const{trackUiInteraction:n}=k(),r=ee("identity"),{search:o}=jc();return m.useMemo(()=>{if(t)return{label:"Project",items:Zd(n,vt([{title:"Dashboard",icon:"overview",href:nx(C.ProjectsItem,{projectId:t,branchId:s,queryString:o}),exact:!0,analyticsEvent:"project_nav_dashboard_clicked"},{title:"Branches",icon:"branch",href:F(C.ProjectsItemBranches,{projectId:t}),exact:!0,analyticsEvent:"project_nav_branches_clicked"},{title:"Integrations",icon:"integrations",href:F(C.ProjectsItemIntegrations,{projectId:t}),analyticsEvent:"project_nav_integrations_link_clicked"},r&&{title:"Auth",icon:"access",href:F(C.ProjectsItemIdentity,{projectId:t}),analyticsEvent:"project_nav_identity_link_clicked"},{title:"Settings",icon:"settings",href:F(C.ProjectsItemSettings,{projectId:t}),analyticsEvent:"project_nav_settings_clicked"}]))}},[t,n,s,o,r])}function pse({projectId:t,branchId:s}){const{trackUiInteraction:n}=k(),r=ee("disable_drizzle_studio"),o=ee("snapshot_system"),{search:a}=jc(),i=m.useMemo(()=>new URLSearchParams(a),[a]),c=m.useMemo(()=>vI(t,s,i),[t,s,i]);return m.useMemo(()=>{if(!(!t||!s))return{label:"Branch",prefix:e.jsx(lse,{}),items:Zd(n,vt([{title:"Overview",icon:"overview",href:F(C.ProjectsItemBranchesItem,{projectId:t,branchId:i.get("branchId")??s}),exact:!0,analyticsEvent:"project_nav_branch_overview_clicked"},{title:"Monitoring",icon:"graph",href:F(C.ProjectsItemBranchesItemMonitoring,{projectId:t,branchId:s}),analyticsEvent:"project_nav_monitoring_clicked"},{title:"SQL Editor",icon:"editor",href:nx(C.ProjectsItemBranchesSQLEditor,{projectId:t,branchId:s,queryString:a}),analyticsEvent:"project_nav_sql_editor_clicked"},{title:"Tables",icon:"table",href:c,disabled:r,hint:r?"The Tables page was temporarily disabled. We are working on bringing it back soon.":void 0,analyticsEvent:"project_nav_drizzle_studio_clicked"},{title:o?"Backup & Restore":"Restore",icon:"restore",href:F(C.ProjectsItemBranchesRestore,{projectId:t,branchId:s}),analyticsEvent:"project_nav_restore_clicked"}]))}},[t,s,n,i,c,r,o,a])}function mse({openFeedback:t}){const{trackUiInteraction:s}=k();return m.useMemo(()=>({items:Zd(s,[{title:"Feedback",icon:"feedback",analyticsEvent:"feedback_link_clicked",onClick:t}])}),[s,t])}function gse({projectId:t,branchId:s}){const n=dse(),r=use(),o=hse({projectId:t,branchId:s}),a=pse({projectId:t,branchId:s});return m.useMemo(()=>vt([!t&&(r||n),o,a]),[t,r,n,o,a])}const _se=()=>{var x;const{params:t}=yc(),s=ee("nav_update_collapsible_sidebar"),{trackUiInteraction:n}=k(),{projectId:r}=t,o=KN(),{isModalOpen:a,openModal:i,closeModal:c}=Ve(De.Support),{isModalOpen:l,openModal:d,closeModal:u}=Ve(De.Feedback),h=gse({projectId:r,branchId:(x=o==null?void 0:o.branch)==null?void 0:x.id}),[p,g]=xs(Me.Sidebar,"isCollapsed",!1),_=mse({openFeedback:d});return e.jsxs(e.Fragment,{children:[l&&e.jsx(_1,{isOpen:!0,onRequestClose:()=>{n("feedback_form_dismissed"),u()},openSupport:()=>{u(),i()}}),a&&e.jsx(So,{isOpen:!0,onRequestClose:()=>{n("support_form_dismissed"),c()}}),e.jsx(UE,{menu:h,isCollapsible:s,isCollapsed:p,onCollapseStateChange:g,footer:_})]})},dc=m.memo(({isError:t=!1,showSidebarFn:s=!0,userIsOrgBased:n=!1,...r})=>{const o=typeof s=="function"?s(n):s;return e.jsx(FE,{...r,...o?{}:{contentWidth:"l"},sidebar:!t&&o&&e.jsx(_se,{})})});dc.displayName="ConsoleLayout";const Mh=()=>e.jsx(dc,{children:e.jsx(is,{preset:404})}),fse="_root_1e0nt_1",bse="_icon_1e0nt_10",xse="_codeBlock_1e0nt_15",jse="_command_1e0nt_28",yse="_codePrefix_1e0nt_33",ml={root:fse,icon:bse,codeBlock:xse,command:jse,codePrefix:yse},vse=()=>{const{trackUiInteraction:t}=k(),{psqlConnectHost:s}=mE(),n=`psql -h ${s}`;return s?e.jsxs("div",{className:ml.root,children:[e.jsx(L,{className:ml.icon,name:"info",size:20}),"Passwordless connect with psql:",e.jsxs("div",{className:ml.codeBlock,children:[e.jsxs("span",{className:ml.command,children:[e.jsx("span",{className:ml.codePrefix,children:"$"}),n]}),e.jsx(bo,{text:n,onCopy:()=>t("psql_connect_banner_command_copied")})]})]}):(xT("Psql connect host hasn't set"),null)},Lg={noPastInvoices:"There are no past invoices",viewPastInvoices:"View past invoices"},wse="_disabledBtn_1aaln_1",Sse={disabledBtn:wse},cr={noInvoices:"For now just enjoy Neon! Your very first invoice will be due on",reference:"Reference",due:"Due",issued:"Issued",total:"Total",actionsLabel:"Actions for an invoice",download:"Download",requestSubject:{paid:"Request refund",issued:"Request credit note"}},Cse="_root_1rtm9_1",kse="_item_1rtm9_8",Ise="_bill_1rtm9_14",Pse="_statusRoot_1rtm9_21",Tse="_statusIssued_1rtm9_30",Nse="_statusPaid_1rtm9_37",Es={root:Cse,item:kse,bill:Ise,statusRoot:Pse,statusIssued:Tse,statusPaid:Nse},Dg=()=>e.jsxs(ln,{className:Es.root,children:[e.jsxs("div",{className:Es.item,children:[e.jsx($,{width:50,height:20}),e.jsx($,{width:150,height:20})]}),e.jsxs("div",{className:Es.item,children:[e.jsx($,{width:30,height:20}),e.jsx($,{width:150,height:20})]}),e.jsxs("div",{className:Es.item,children:[e.jsx($,{width:70,height:20}),e.jsx($,{width:150,height:20})]}),e.jsxs("div",{className:Es.item,children:[e.jsx($,{width:40,height:20}),e.jsx($,{width:150,height:20})]}),e.jsxs("div",{className:Es.bill,children:[e.jsx($,{width:50,height:20}),e.jsx($,{width:20,height:20})]})]}),Ase=()=>e.jsx(ln,{children:e.jsx(Vt,{children:`${cr.noInvoices} ${_t().add(1,"month").date(1).utc().format(ve.Date)}`})}),Gu=({label:t,value:s="-"})=>e.jsxs("div",{className:Es.item,children:[e.jsx(Vt,{children:t}),e.jsx(Vt,{appearance:"secondary",children:s})]}),Ese=({invoice_number:t,due_date:s,status:n,pdf_url:r,issued_at:o,total:a,currency:i})=>{const c=ee("refund_request"),{trackUiInteraction:l}=k(),[d,u]=m.useState(!1),h=()=>u(!1),p=m.useMemo(()=>[{items:[{label:cr.download,href:r,onClick(){l("billing_invoice_download_clicked")}},Number(a)&&{label:cr.requestSubject[n],onClick(){l("billing_invoice_refund_request_clicked"),u(!0)}}].filter(_=>!!_)}],[r,a,n,l]),g=`Invoice: ${t}, Issued: ${le(o,ve.Date)} Total: ${a} ${i}`;return e.jsxs(e.Fragment,{children:[e.jsx($M,{isOpen:d,chargeInfo:g,onRequestClose:h,invoiceId:t,amount:Number(a),requestSubject:cr.requestSubject[n],invoiceStatus:n}),e.jsxs(ln,{className:Es.root,role:"listitem",children:[e.jsx(Gu,{label:cr.issued,value:le(o,ve.Date)}),e.jsx(Gu,{label:cr.due,value:s&&le(s,ve.Date)}),e.jsx(Gu,{label:cr.reference,value:t}),e.jsx(Gu,{label:cr.total,value:`${a} ${i}`}),e.jsxs("div",{className:Es.bill,children:[e.jsx("div",{className:M(Es.statusRoot,{[Es.statusIssued]:n==="issued",[Es.statusPaid]:n==="paid"}),children:n}),c?e.jsx(Dt,{sections:p,children:e.jsx(Zt,{"aria-label":cr.actionsLabel})}):e.jsx(A,{icon:"download",href:r,download:!0})]})]})]})},$se="_cards_eoxag_1",Ky={cards:$se},Ose=({invoices:t,isLoading:s=!1})=>s?e.jsxs("div",{className:Ky.cards,children:[e.jsx(Dg,{}),e.jsx(Dg,{}),e.jsx(Dg,{})]}):t!=null&&t.length?e.jsx("div",{className:Ky.cards,role:"list",children:t.map(({invoice_id:n,...r})=>e.jsx(Ese,{...r},n))}):e.jsx(Ase,{}),Qy={drawerTitle:"Past invoices"},Rse="_drawerContent_1b3du_1",Bse={drawerContent:Rse},Lse=({isDrawerOpen:t,close:s,invoices:n,isInvoicesLoading:r})=>e.jsx(Vn,{isOpen:t,"aria-label":Qy.drawerTitle,onRequestClose:s,size:"l",children:e.jsx(Wn,{title:Qy.drawerTitle,children:e.jsx("div",{className:Bse.drawerContent,children:e.jsx(Ose,{invoices:n,isLoading:r})})})}),Yy=()=>{const{trackUiInteraction:t}=k(),{subscriptionType:s}=ae(),[n,r]=m.useState(!1),{invoices:o,isInvoicesLoading:a}=lF();return iF(s)?e.jsxs(e.Fragment,{children:[!a&&!(o!=null&&o.length)?e.jsx(Z,{content:Lg.noPastInvoices,children:e.jsx("div",{"data-qa":"past_invoices_button",children:e.jsx(P,{appearance:"secondary",disabled:!0,className:Sse.disabledBtn,children:Lg.viewPastInvoices})})}):e.jsx(P,{loading:a,onClick:()=>{t("billing_invoices_drawer_open"),r(!0)},appearance:"secondary",disabled:!o,children:Lg.viewPastInvoices}),e.jsx(Lse,{isDrawerOpen:n,close:()=>r(!1),invoices:o,isInvoicesLoading:a})]}):null},Dse="_root_wmqqq_1",Mse={root:Dse},Use=m.lazy(async()=>({default:(await Cr(()=>import("./Globe-4Vn8cRN0.js"),__vite__mapDeps([3,4,2,1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))).Globe})),wI=({globeClassName:t,adjustHeight:s})=>{const{watch:n}=nt(),r=uR(),o=n("platformId"),a=n("regionId"),i=m.useMemo(()=>r.find(d=>d.id===o),[r,o]),c=m.useMemo(()=>i&&i.regions.find(d=>d.id===a),[i,a]),l=m.useMemo(()=>c&&c.geo_coordinates?{id:c.id,label:c.name,position:c.geo_coordinates}:void 0,[c]);return e.jsx("div",{className:Mse.root,children:e.jsx(m.Suspense,{children:e.jsx(Use,{marker:l,globeClassName:t,adjustHeight:s})})})},Jy={createProject:"Create project",continue:"Continue"},Fse="_root_withGlobe_fi5bt_1",qse="_root_withoutGlobe_fi5bt_6",zse="_contentColumn_fi5bt_12",Hse="_asideColumn_fi5bt_17",Ku={root_withGlobe:Fse,root_withoutGlobe:qse,contentColumn:zse,asideColumn:Hse},Vse="_layout_bgv3f_3",Wse="_page_bgv3f_17",Gse="_withGlobe_bgv3f_25",Kse="_footer_bgv3f_26",Qse="_content_bgv3f_34",Yse="_footerContent_bgv3f_51",bi={layout:Vse,page:Wse,withGlobe:Gse,footer:Kse,content:Qse,footerContent:Yse},Jse="_root_1ynem_1",Zse="_step_1ynem_6",Xse="_step_active_1ynem_14",Mg={root:Jse,step:Zse,step_active:Xse},ene=({currentStepIndex:t,totalSteps:s})=>e.jsx("div",{className:Mg.root,children:br(s).map(n=>e.jsx("span",{className:M(Mg.step,{[Mg.step_active]:n<=t})},n))}),tne=({form:t,stepper:s,isShowGlobe:n,actions:r,contentRef:o,contentClassName:a,maxFooterWidth:i,"data-qa":c,onSubmit:l,children:d})=>e.jsx(us,{...t,children:e.jsxs("form",{className:M(bi.layout,{[bi.withGlobe]:n}),autoComplete:"off","data-qa":c,style:i?{"--js-max-footer-width":`${i}px`}:void 0,onSubmit:l,children:[e.jsx("div",{className:bi.page,children:e.jsx("div",{ref:o,className:M(a,bi.content),children:d})}),r&&e.jsx("div",{className:bi.footer,children:e.jsxs("div",{className:bi.footerContent,children:[e.jsx("div",{children:r}),n&&s.totalSteps>=2&&e.jsx(ene,{currentStepIndex:s.currentStepIndex,totalSteps:s.totalSteps})]})})]})}),sne="_header_1hhxl_1",nne="_separator_1hhxl_9",Zy={header:sne,separator:nne},SI=({title:t,headingLevel:s,hideLogo:n=!1})=>{const r=m.useRef(null);return m.useEffect(()=>{const o=r.current;o&&o.getBoundingClientRect().y<15&&o.scrollIntoView()},[]),e.jsxs("div",{ref:r,className:Zy.header,children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx(L,{name:"neon",size:26}),e.jsx("span",{className:Zy.separator,children:"/"})]}),e.jsx(z,{level:s,size:"h2",children:t})]})},rne="_formContainer_dl2mm_1",one="_formContent_dl2mm_6",Xy={formContainer:rne,formContent:one},ane=({title:t,headingLevel:s})=>e.jsxs("div",{className:Xy.formContainer,children:[e.jsx(SI,{title:t,headingLevel:s}),e.jsx("div",{className:Xy.formContent,children:e.jsx(TS,{})})]});function ev(t){return t.map(s=>({value:s.replace(/\s+/,"_").toLowerCase(),label:s}))}const ct={title:"Tell us about your database",workload:"I want a database for",workloadOptions:[{label:"Production",value:"production"},{label:"Staging & testing",value:"staging"},{label:"Local development",value:"local_dev"},{label:"Other",value:"other"}],estimatedDatabaseSize:"Expected storage needs",estimatedDatabaseSizeOptions:ev(["Not sure","1 GB","5 GB","10 GB","50 GB","100 GB","1 TB+"]),expectedDailyUsage:"Anticipated activity level",expectedDailyUsageOptions:ev(["Not sure","Light","Moderate","Heavy"]),dataImport:"Planning to import existing data?",dataImportOptions:{yes:"Yes",no:"No"},dataImportHelp:e.jsxs(e.Fragment,{children:["Follow our"," ",e.jsx(A,{href:"https://neon.tech/docs/import/migrate-intro",openInNewTab:!0,icon:"external_link",children:"migration guides"})," "]}),fieldError:"Field validation error"},ine="_formContainer_csn79_1",cne="_formContent_csn79_6",lne="_fieldLabel_csn79_13",dne="_workloadCheckboxList_csn79_18",une="_checkboxLabel_csn79_25",hne="_sliderField_csn79_30",pne="_radioGroupContainer_csn79_39",mne="_alertWrapper_csn79_45",As={formContainer:ine,formContent:cne,fieldLabel:lne,workloadCheckboxList:dne,checkboxLabel:une,sliderField:hne,radioGroupContainer:pne,alertWrapper:mne};function gne(){return{workload:{production:!1,staging:!1,local_dev:!1,other:!1},estimatedDatabaseSize:ct.estimatedDatabaseSizeOptions[1].value,expectedDailyUsage:ct.expectedDailyUsageOptions[1].value,dataImport:!1}}const _ne=({headingLevel:t})=>{k({mountEvent:"onboarding_survey_step_shown"});const{control:s,formState:{isSubmitting:n}}=nt();return e.jsxs("div",{className:As.formContainer,"data-qa":"create_project_survey_step",children:[e.jsx(SI,{title:ct.title,headingLevel:t}),e.jsxs("div",{className:As.formContent,children:[e.jsx(me,{name:"survey.workload",control:s,render:({field:r,fieldState:o})=>e.jsx(R,{label:ct.workload,labelClassName:As.fieldLabel,error:o.error&&ct.fieldError,children:e.jsx("div",{className:As.workloadCheckboxList,children:ct.workloadOptions.map(({value:a,label:i})=>e.jsx(mb,{checked:r.value[a],disabled:n,onChange:c=>{r.onChange({...r.value,[a]:c})},children:e.jsx("span",{className:As.checkboxLabel,children:i})},a))})})}),e.jsx(me,{name:"survey.estimatedDatabaseSize",control:s,rules:{required:!0},render:({field:r,fieldState:o})=>{const a=ct.estimatedDatabaseSizeOptions.findIndex(({value:i})=>i===r.value);return e.jsx(R,{label:ct.estimatedDatabaseSize,error:o.error&&ct.fieldError,className:As.sliderField,labelClassName:As.fieldLabel,children:e.jsx(z_,{value:a,disabled:n,min:0,max:ct.estimatedDatabaseSizeOptions.length-1,size:"l",appearance:"neon",formatMark:i=>ct.estimatedDatabaseSizeOptions[i].label,onChange:i=>{r.onChange(ct.estimatedDatabaseSizeOptions[i].value)}})})}}),e.jsx(me,{name:"survey.expectedDailyUsage",control:s,rules:{required:!0},render:({field:r,fieldState:o})=>{const a=ct.expectedDailyUsageOptions.findIndex(({value:i})=>i===r.value);return e.jsx(R,{label:ct.expectedDailyUsage,error:o.error&&ct.fieldError,className:As.sliderField,labelClassName:As.fieldLabel,children:e.jsx(z_,{value:a,disabled:n,min:0,max:ct.expectedDailyUsageOptions.length-1,size:"l",appearance:"neon",formatMark:i=>ct.expectedDailyUsageOptions[i].label,onChange:i=>{r.onChange(ct.expectedDailyUsageOptions[i].value)}})})}}),e.jsx(me,{name:"survey.dataImport",control:s,render:({field:r,fieldState:o})=>e.jsxs(R,{label:ct.dataImport,error:o.error&&ct.fieldError,labelClassName:As.fieldLabel,children:[e.jsxs("div",{className:As.radioGroupContainer,children:[e.jsx(Mn,{name:r.name,value:"yes",disabled:n,checked:r.value,onChange:()=>{r.onChange(!0)},children:ct.dataImportOptions.yes}),e.jsx(Mn,{name:r.name,value:"no",checked:!r.value,disabled:n,onChange:()=>{r.onChange(!1)},children:ct.dataImportOptions.no})]}),e.jsx(Bp,{collapsed:!r.value,children:e.jsx("div",{className:As.alertWrapper,children:e.jsx(Q,{icon:"info_italic",children:ct.dataImportHelp})})})]})})]})]})},CI=["form","details"],nr=CI[0];function fne(t){return CI.includes(t)}const Ug="step";function bne(t){return Object.entries(t).reduce((s,[n,r])=>r?[...s,n]:s,[])}function xne({onStartAnalyticEvent:t,onDoneAnalyticEvent:s}){const n=ee("growth_onboarding_survey"),r=Ne(),o=jc(),{trackUiInteraction:a}=k(),i=m.useRef(Date.now()),c=m.useMemo(()=>{const j=["form"];return n&&j.push("details"),j},[n]);k(t?{mountEvent:{name:t,params:{steps:JSON.stringify(c)}}}:void 0);const[l,d]=m.useState(nr),u=m.useMemo(()=>({currentStepIndex:c.includes(l)?c.indexOf(l):0,totalSteps:c.length}),[c,l]),h=m.useMemo(()=>new URLSearchParams(o.search).get(Ug)??nr,[o.search]);function p(j){const b=new URLSearchParams(o.search);j===nr?b.delete(Ug):b.set(Ug,j),r.push(`?${b.toString()}`)}m.useEffect(()=>{l===nr&&h&&h!==l&&p(nr)},[]),xR(()=>{d(fne(h)?h:nr)},[h]);function g(j){if(a("onboarding_project_form_submitted",{project_id:j.project.id,duration:Date.now()-i.current}),n&&j.survey){try{$t.set(Me.OnboardingSurveyAnswers,j.survey)}catch{}a("onboarding_survey_answers",{workflows:JSON.stringify(bne(j.survey.workload)),database_size:j.survey.estimatedDatabaseSize,daily_usage:j.survey.expectedDailyUsage,data_import:j.survey.dataImport})}s&&a(s),r.push(F(C.ProjectsItem,{projectId:j.project.id}))}function _(){l!==nr&&p(nr)}function x(j,b){const f=c.indexOf(l);if(f===-1){p(nr),Sr(new Error("Invalid step"));return}const y=c[f+1];if(y){p(y),j.preventDefault();return}b==null||b(j)}return{currentStepId:l,stepper:u,onContinueClick:x,onSuccess:g,onFail:_}}function jne(t){const s=vd(t);m.useEffect(()=>(window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s)}),[s])}const yne=960;function kI({rootRef:t,shouldShowGlobe:s}){const n=m.useCallback(()=>s?s():t.current?t.current.clientWidth>=yne:!1,[t,s]),[r,o]=m.useState(n);return m.useEffect(()=>{o(n)},[n]),jne(()=>{o(n)}),r}const tv=434,vne="NEW_USER_CREDITS",wne=({title:t,headingLevel:s=1,shouldShowGlobe:n,onStartAnalyticEvent:r,onDoneAnalyticEvent:o})=>{const a=ee("growth_onboarding_survey"),{trackUiInteraction:i}=k(),{isSuspendedAccount:c}=ae(),{currentStepId:l,stepper:d,onContinueClick:u,onSuccess:h,onFail:p}=xne({onStartAnalyticEvent:r,onDoneAnalyticEvent:o}),g=ee("collect_slow_queries"),{form:_,onSubmit:x}=hR({createdBy:"GLOBE_ONBOARDING",logMinDurationStatement:g?500:void 0,onSuccess:h,onFail:p}),j=m.useRef(null),b=m.useRef(null),f=m.useRef(void 0),y=kI({rootRef:j,shouldShowGlobe:n});m.useEffect(()=>{a&&_.setValue("survey",gne())},[a,_]);const v=ee("new_users_get_credits");return m.useEffect(()=>{v&&q.applyPromoCode(vne).then(()=>{i("onboarding_promo_code_applied")}).catch(w=>{Sr(w)})},[v,i]),e.jsxs(tne,{form:_,stepper:d,isShowGlobe:y,contentRef:j,contentClassName:M({[Ku.root_withGlobe]:y,[Ku.root_withoutGlobe]:!y}),maxFooterWidth:y?void 0:tv,"data-qa":"create_project_form",onSubmit:w=>{b.current&&f.current===void 0&&(f.current=b.current.clientHeight),u(w,_.handleSubmit(x))},actions:e.jsx(_e,{size:"l",disabled:c,onClick:()=>{i("onboarding_project_form_create_project_clicked")},children:d.currentStepIndex<d.totalSteps-1?Jy.continue:Jy.createProject}),children:[e.jsx("div",{className:Ku.contentColumn,style:{maxWidth:tv},children:e.jsx("div",{ref:b,children:(()=>{switch(l){case"form":return e.jsx(ane,{title:t,headingLevel:s});case"details":return e.jsx(_ne,{headingLevel:s})}})()})}),y&&e.jsx("div",{className:Ku.asideColumn,children:e.jsx(wI,{})})]})};function II(){const{isFreeSubscription:t,isFetching:s}=ae();return t||s}const PI="range",Sne=t=>{switch(t.type){case"period":return`p:${t.period}`;case"custom":return`c:${t.fromDate.valueOf()}-${t.toDate.valueOf()}`}},sv=t=>{const s=new Date(Number(t));if(!Number.isNaN(s.valueOf()))return s},TI=t=>{if(!t)return;if(t.startsWith("p:")){const[a]=t.slice(2).split("+");return a in QN?{type:"period",period:a,fromDate:new Date}:void 0}if(!t.startsWith("c:"))return;const[s,n]=t.slice(2).split("-"),r=sv(s),o=sv(n);if(!(!r||!o))return{type:"custom",fromDate:r,toDate:o}},Cne=()=>{const[t,s]=Ma(PI),n=m.useCallback(r=>s(Sne(r)),[s]);return[TI(t),n]},ld={restartCompute:"Restart compute",cacheHitRestartAlert:"Displaying this metric requires a one-time compute restart.",monitoringRestartAlert:"Restart your compute to enable additional metrics. A compute restart drops current database connections.",customTimeRangeAlert:(t,s)=>e.jsxs(e.Fragment,{children:["Showing metrics for custom period"," ",e.jsx(ke,{children:le(t,ve.Full)})," to"," ",e.jsx(ke,{children:le(s,ve.Full)})]}),customTimeRangeAlertResetButton:"Reset"},NI=({endpoint:t,children:s,className:n})=>{const{trackUiInteraction:r}=k(),o=m.useCallback(async()=>{try{await q.restartProjectEndpoint(t.project_id,t.id)}catch(c){H(c)}},[t]),a=t.pending_state==="active",i=Jn(m.useMemo(()=>({exclusive:{endpoints:[t.id]},shared:{projects:[t.project_id],branches:[t.branch_id]}}),[t.branch_id,t.id,t.project_id]));return e.jsx(Q,{className:n,action:e.jsx(Er,{lockedMessage:i,children:e.jsx(A,{disabled:a||!!i,onClick:()=>{r("monitoring_page_restart_compute_clicked"),o()},children:ld.restartCompute})}),children:s})},kne=5213,Ine=5227,AI=(t,s)=>Number(t)<s,Pne="_alert_1w83a_1",Tne={alert:Pne},Fg=[0,.2,.4,.6,.8,1],nv=["lfc_hit_rate"],Nne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:nv}),d=Fg[Fg.length-1],u=m.useMemo(()=>i?Kn(i,nv,{metric:"lfc_hit_rate",scale:d},!0):[],[i,d]),h=AI(s.compute_release_version,Ine);return e.jsx(Fs,{title:"Local file cache hit rate",loading:c,isError:l,children:h?e.jsx(NI,{endpoint:s,className:Tne.alert,children:ld.cacheHitRestartAlert}):e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:u,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"lfc_hit_rate",allowDecimals:!0,tickFormatter:YN,axisLine:!1,ticks:Fg,domain:["dataMin","dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"lfc_hit_rate",name:$e.lfc_hit_rate,stroke:"var(--theme-border-color-highlight)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}lfc_hit_rate`,name:$e.lfc_hit_rate,stroke:"var(--theme-border-color-highlight)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Mp,{children:"Percentage"})})]})})})},rx=t=>t.map(s=>s??0),Ane=t=>{const s=t.reduce((a,i)=>Math.max(a,...rx(i.values)),0),n=wd(Math.ceil(s/Jh)||1),r=Math.ceil(Number(n.amount)),o=ZN(`${r}${n.units}`);return Array.from({length:Jh+1},(a,i)=>i*o)},ox=(t,s=1)=>{const n=t.reduce((o,a)=>Math.max(o,...rx(a.values)),0),r=[];for(const o of JN)if(r.push(o),o*s>=n)break;return[0,...r.map(o=>o*s)]},Xd=t=>{const s=t.reduce((r,o)=>Math.max(r,...rx(o.values)),0),n=Math.ceil(s/Jh)||1;return Array.from({length:Jh+1},(r,o)=>o*n)},Qu=["connection_counts_active","connection_counts_idle","connection_counts_total","connection_counts_max"],Ene=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),[i,c]=m.useState(()=>new Set([...Qu,ye.EndpointInactive])),{data:l,isFetching:d,isError:u}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:Qu}),h=m.useMemo(()=>l?Xd(l.data):[0],[l]),p=h[h.length-1],g=m.useMemo(()=>l?Kn(l,Qu,{metric:"connection_counts_total",scale:p},!0):[],[l,p]);return e.jsx(Fs,{title:"Connections count",loading:d,isError:u,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:g,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"connection_counts_total",allowDecimals:!0,tickFormatter:_=>`${_}`,axisLine:!1,ticks:h,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],hide:!i.has(ye.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"connection_counts_idle",name:$e.connection_counts_idle,hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"connection_counts_active",name:$e.connection_counts_active,hide:!i.has("connection_counts_active"),stroke:"var(--theme-border-color-highlight)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"connection_counts_total",name:$e.connection_counts_total,hide:!i.has("connection_counts_total"),stroke:"var(--component-monitoring_charts-connections-total-stroke)"}),e.jsx(Ke,{type:"step",dot:!1,dataKey:"connection_counts_max",name:$e.connection_counts_max,hide:!i.has("connection_counts_max"),stroke:"var(--component-monitoring_charts-connections-max-stroke)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}connection_counts_idle`,name:$e.connection_counts_idle,legendType:"none",hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}connection_counts_active`,name:$e.connection_counts_active,legendType:"none",hide:!i.has("connection_counts_active"),stroke:"var(--theme-border-color-highlight)",strokeDasharray:"3 3"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}connection_counts_total`,name:$e.connection_counts_total,legendType:"none",hide:!i.has("connection_counts_total"),stroke:"var(--component-monitoring_charts-connections-total-stroke)",strokeDasharray:"3 3"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}connection_counts_max`,name:$e.connection_counts_max,legendType:"none",hide:!i.has("connection_counts_max"),stroke:"var(--component-monitoring_charts-connections-max-stroke)",strokeDasharray:"3 3"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:_=>e.jsx(Tc,{payload:_.payload,legendOrder:Qu,onLegendToggle:x=>{c(j=>{const b=new Set(j);return j.has(x)?b.delete(x):b.add(x),b})}})})]})})})},rv=["cpu_consumed_cores","cpu_provisioned_cores"],qg={cpu_consumed_cores:"Used",cpu_provisioned_cores:"Allocated"},$ne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:rv}),d=m.useMemo(()=>i?ox(i.data):[0],[i]),u=d[d.length-1],h=m.useMemo(()=>i?Kn(i,rv,{metric:"cpu_provisioned_cores",scale:u},!0):[],[i,u]);return e.jsx(Fs,{title:"CPU",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:h,margin:{left:-50,top:20},children:[e.jsx(Yn,{dataKey:"cpu_provisioned_cores",allowDecimals:!0,tickFormatter:Nh,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(os,{type:"step",dot:!1,dataKey:"cpu_provisioned_cores",name:qg.cpu_provisioned_cores,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"cpu_consumed_cores",name:qg.cpu_consumed_cores,stroke:"var(--theme-border-color-highlight)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}cpu_consumed_cores`,name:qg.cpu_consumed_cores,stroke:"var(--theme-border-color-highlight)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:p=>e.jsx(Tc,{prefix:"Compute Units",payload:p.payload})})]})})})},Yu=["database_size","databases_total_size"],One=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),[i,c]=m.useState(()=>new Set(Yu)),{data:l,isFetching:d,isError:u}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:Yu}),h=m.useMemo(()=>l?Ane(l.data):[0],[l]),p=h[h.length-1],g=wd(p).units,{chartData:_,metrics:x}=m.useMemo(()=>{if(!l)return{chartData:[],metrics:[]};const j=xS(l,"database_size","datname");return c(new Set([...j,...Yu,ye.EndpointInactive])),{metrics:j,chartData:Kn(l,Yu,{metric:"databases_total_size",scale:p},!1,"datname")}},[l,p]);return e.jsx(Fs,{title:"Database size",loading:d,isError:u,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:_,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"databases_total_size",allowDecimals:!0,tickFormatter:j=>wd(j,g).amount,axisLine:!1,ticks:h,domain:[0,"dataMax"]}),e.jsxs(e.Fragment,{children:[e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],hide:!i.has(ye.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),x.map((j,b)=>e.jsx(Ke,{type:"monotone",dot:!1,dataKey:j,unit:"bytes",name:j,hide:!i.has(j),stroke:`var(--component-monitoring_charts-databases-${b+1}-stroke)`},j))]}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"databases_total_size",name:$e.databases_total_size,hide:!i.has("databases_total_size"),stroke:"var(--component-monitoring_charts-databases-total-stroke)"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:j=>e.jsx(Tc,{payload:j.payload,prefix:A1(g),onLegendToggle:b=>{c(f=>{const y=new Set(f);return f.has(b)?y.delete(b):y.add(b),y})}})})]})})})},ov=["deadlocks"],Rne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:ov}),d=m.useMemo(()=>i?Xd(i.data):[0],[i]),u=d[d.length-1],h=m.useMemo(()=>i?Kn(i,ov,{metric:"deadlocks",scale:u}):[],[i,u]);return e.jsx(Fs,{title:"Deadlocks",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:h,margin:{left:-50,top:20},children:[e.jsx(Yn,{dataKey:"deadlocks",allowDecimals:!0,tickFormatter:p=>`${p}`,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(XN,{type:"monotone",dataKey:"deadlocks",name:$e.deadlocks,fill:"var(--theme-border-color-highlight)",minPointSize:.5}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Mp,{children:"Count"})})]})})})},av=["ram_provisioned_bytes","ram_consumed_bytes","ram_cached_bytes"],Ju={ram_consumed_bytes:"Used",ram_provisioned_bytes:"Allocated",ram_cached_bytes:"Cached"},Bne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:av}),d=m.useMemo(()=>i?ox(i.data,E1):[0],[i]),u=d[d.length-1],h=m.useMemo(()=>i?Kn(i,av,{metric:"ram_provisioned_bytes",scale:u},!0):[],[i,u]);return e.jsx(Fs,{title:"RAM",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:h,margin:{left:-50,top:20},children:[e.jsx(Yn,{tickFormatter:p=>Pn(p,0),axisLine:!1,ticks:d}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(os,{type:"step",dot:!1,dataKey:"ram_provisioned_bytes",name:Ju.ram_provisioned_bytes,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),e.jsx(os,{type:"monotone",dot:!1,dataKey:"ram_consumed_bytes",name:Ju.ram_consumed_bytes,stroke:"var(--theme-border-color-highlight)",fill:"var(--theme-border-color-highlight)",stackId:"ram-usage",fillOpacity:.25}),e.jsx(os,{type:"monotone",dot:!1,dataKey:"ram_cached_bytes",name:Ju.ram_cached_bytes,stroke:"var(--component-monitoring_charts-compute-cached-stroke)",fill:"var(--component-monitoring_charts-compute-cached-stroke)",stackId:"ram-usage",fillOpacity:.25}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}ram_consumed_bytes`,name:Ju.ram_consumed_bytes,stroke:"var(--theme-border-color-highlight)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:p=>e.jsx(Tc,{prefix:"Gigabytes",payload:p.payload})})]})})})},iv=["replication_delay_bytes"],Lne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:iv},{skip:dn(s)}),d=m.useMemo(()=>i?Xd(i.data):[0],[i]),u=d[d.length-1],h=wd(u).units,p=m.useMemo(()=>i?Kn(i,iv,{metric:"replication_delay_bytes",scale:u}):[],[i,u]);return e.jsx(Fs,{title:"Replication delay bytes",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:p,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"replication_delay_bytes",allowDecimals:!0,tickFormatter:g=>wd(g,h).amount,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"replication_delay_bytes",name:$e.replication_delay_bytes,stroke:"var(--component-monitoring_charts-replication-delayBytes-stroke)"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Mp,{children:A1(h)})})]})})})},cv=["replication_delay_seconds"],Dne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:cv},{skip:dn(s)}),d=m.useMemo(()=>i?Xd(i.data):[0],[i]),u=d[d.length-1],h=m.useMemo(()=>i?Kn(i,cv,{metric:"replication_delay_seconds",scale:u}):[],[i,u]);return e.jsx(Fs,{title:"Replication delay seconds",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:h,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"replication_delay_seconds",allowDecimals:!0,tickFormatter:p=>Np(p).highestValue.toString(),axisLine:!1,ticks:d,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"replication_delay_seconds",name:$e.replication_delay_seconds,stroke:"var(--component-monitoring_charts-replication-delaySeconds-stroke)"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:e.jsx(Mp,{children:"Seconds"})})]})})})},Zu=["rows_inserted","rows_updated","rows_deleted"],Mne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),[i,c]=m.useState(()=>new Set([...Zu,ye.EndpointInactive])),{data:l,isFetching:d,isError:u}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:Zu}),h=m.useMemo(()=>l?Xd(l.data):[0],[l]),p=h[h.length-1],g=m.useMemo(()=>l?Kn(l,Zu,{metric:"rows_inserted",scale:p},!0):[],[l,p]);return e.jsx(Fs,{title:"Rows",loading:d,isError:u,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:g,margin:{left:-40,top:20},children:[e.jsx(Yn,{dataKey:"rows_inserted",allowDecimals:!0,tickFormatter:eA,axisLine:!1,ticks:h,domain:[0,"dataMax"]}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],hide:!i.has(ye.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"rows_deleted",name:$e.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"rows_updated",name:$e.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--theme-border-color-highlight)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"rows_inserted",name:$e.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--component-monitoring_charts-connections-total-stroke)"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}rows_deleted`,name:$e.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}rows_updated`,name:$e.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--theme-border-color-highlight)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:`${ye.EndpointInactiveMetricLine}rows_inserted`,name:$e.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--component-monitoring_charts-connections-total-stroke)",strokeDasharray:"3 3",legendType:"none"}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:_=>e.jsx(Tc,{prefix:"Count",payload:_.payload,legendOrder:Zu,onLegendToggle:x=>{c(j=>{const b=new Set(j);return j.has(x)?b.delete(x):b.add(x),b})}})})]})})})};function Une(t){return t.sort((s,n)=>{let r=parseInt(s.slice(0,-1),10),o=parseInt(n.slice(0,-1),10);return s.endsWith("h")&&(r*=60),n.endsWith("h")&&(o*=60),r-o}),t}const lv=["working_set_size","lfc_max_size"],Fne=({projectId:t,endpoint:s})=>{const{periodRange:[n,r],grouping:o,dateFormat:a}=Gn(),{data:i,isFetching:c,isError:l}=gn.useGetStatsQuery({projectId:t,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:o,metrics:lv}),[d,u]=m.useState(()=>new Set),h=m.useMemo(()=>i?ox(i.data,E1):[0],[i]),p=h[h.length-1],{chartData:g,metrics:_}=m.useMemo(()=>i?{metrics:Une(xS(i,"working_set_size","duration")),chartData:Kn(i,lv,{metric:"lfc_max_size",scale:p},!1,"duration")}:{chartData:[],metrics:[]},[i,p]);return e.jsx(Fs,{title:"Working set size",loading:c,isError:l,children:e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsxs(Qn,{dateFormat:a,chartData:g,margin:{left:-40,top:30},children:[e.jsx(Yn,{tickFormatter:x=>Pn(x,0),axisLine:!1,ticks:h}),e.jsx(os,{type:"monotone",connectNulls:!1,dataKey:ye.EndpointInactive,name:$e[ye.EndpointInactive],stroke:"none",hide:d.has(ye.EndpointInactive),fill:"url(#dash-pattern)"}),_.map((x,j)=>e.jsx(Ke,{type:"monotone",dot:!1,dataKey:x,name:x,unit:"bytes",stroke:`var(--component-monitoring_charts-working_set_size-duration_${j}-stroke)`,hide:d.has(x)},x)),e.jsx(Ke,{type:"monotone",dot:!1,dataKey:"lfc_max_size",name:"Local file cache size",stroke:"var(--component-monitoring_charts-working_set_size-lfc_size-stroke)",hide:d.has("lfc_max_size")}),e.jsx(Hn,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:x=>e.jsx(Tc,{prefix:"Duration",payload:x.payload,onLegendToggle:j=>{u(b=>{const f=new Set(b);return f.has(j)?f.delete(j):f.add(j),f})}})})]})})})},qne="_container_10300_1",zne="_settings_10300_10",Hne="_label_10300_16",xi={container:qne,settings:zne,label:Hne},Vne=({endpoint:t,project:s})=>{const[n,r]=m.useState(!1),{trackUiInteraction:o}=k();return e.jsx(Fs,{title:"Compute settings",children:e.jsxs("div",{className:xi.container,children:[e.jsx(qn,{isOpen:n,mode:"edit",project:s,endpoint:t,onRequestClose:()=>r(!1)}),e.jsxs("div",{className:xi.settings,children:[Kh(t)&&e.jsxs(e.Fragment,{children:[e.jsx(R,{label:"Min",labelClassName:xi.label,children:e.jsx(T,{children:Dn(t.autoscaling_limit_min_cu)})}),e.jsx(R,{label:"Max",labelClassName:xi.label,children:e.jsx(T,{children:Dn(t.autoscaling_limit_max_cu)})})]}),!Kh(t)&&e.jsx(R,{label:"Size",labelClassName:xi.label,children:e.jsx(T,{children:Dn(t.autoscaling_limit_max_cu)})}),e.jsx(R,{label:"Autosuspend delay",labelClassName:xi.label,children:e.jsx(T,{children:qb(t.suspend_timeout_seconds)})})]}),e.jsx(P,{appearance:"tertiary",onClick:()=>{r(!0),o("monitoring_page_edit_endpoint_clicked")},children:"Edit endpoint"})]})})},Wne="_charts_wgcns_1",Gne="_chartsRow_wgcns_7",Kne="_withAutoscaling_wgcns_13",Wo={charts:Wne,chartsRow:Gne,withAutoscaling:Kne},Qne="_widget_n5tbh_1",Yne="_container_n5tbh_7",Jne="_features_n5tbh_15",Zne="_icon_n5tbh_31",Xu={widget:Qne,container:Yne,features:Jne,icon:Zne},Xne=[{title:"14 days of metrics retention",iconName:"graph_gradient"},{title:"Up to 10 vCPU and 40 GB of memory",iconName:"written_data_gradient"},{title:"Autoscale to match demand",iconName:"compute_size_autoscale_gradient"},{title:"Scale to zero during periods of inactivity",iconName:"autosuspend_gradient"}],ere=()=>{const{trackUiInteraction:t}=k(),{billingUrl:s,isLoading:n}=wo();return e.jsx(Fs,{className:Xu.widget,height:"100%",children:e.jsxs("div",{className:Xu.container,children:[e.jsx(z,{level:6,children:"Paid plan features:"}),e.jsx("ul",{className:Xu.features,children:Xne.map(({title:r,iconName:o})=>e.jsxs("li",{children:[e.jsx("div",{className:Xu.icon,children:o&&e.jsx(L,{name:o,size:16})}),e.jsx(T,{appearance:"primary",children:r})]},r))}),e.jsx(P,{as:We,href:s,disabled:n,appearance:"secondary",onClick:()=>{t("monitoring_page_paid_features_widget_upgrade_clicked")},children:"Upgrade to a paid plan"})]})})},tre=({project:t,...s})=>{const{isFreeSubscription:n}=ae(),{isOwnProject:r}=O(),{endpoint:o}=s,{range:a,resetRange:i}=$1(),c=AI(o.compute_release_version,kne),l=r&&n;return e.jsxs("div",{className:Wo.charts,children:[a.type==="custom"&&e.jsx(Q,{action:e.jsx(A,{noWrap:!0,onClick:()=>i(),children:ld.customTimeRangeAlertResetButton}),children:ld.customTimeRangeAlert(a.fromDate,a.toDate)}),c&&e.jsx(NI,{endpoint:o,children:ld.monitoringRestartAlert}),e.jsxs("div",{className:M(Wo.chartsRow,Wo.withAutoscaling),children:[l?e.jsx(ere,{}):e.jsx(Vne,{endpoint:o,project:t}),e.jsx(Bne,{projectId:t.id,...s}),e.jsx($ne,{projectId:t.id,...s})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Wo.chartsRow,children:[e.jsx(Ene,{projectId:t.id,...s}),e.jsx(One,{projectId:t.id,...s})]}),dn(o)&&e.jsxs("div",{className:Wo.chartsRow,children:[e.jsx(Rne,{projectId:t.id,...s}),e.jsx(Mne,{projectId:t.id,...s})]}),e.jsxs("div",{className:Wo.chartsRow,children:[e.jsx(Nne,{projectId:t.id,...s}),e.jsx(Fne,{projectId:t.id,...s})]}),!dn(o)&&e.jsxs("div",{className:Wo.chartsRow,children:[e.jsx(Lne,{projectId:t.id,...s}),e.jsx(Dne,{projectId:t.id,...s})]})]})]})},dv={datadogStatusAlert:t=>{switch(t){case"disabled":return"Datadog export is disabled.";case"error":return"Datadog export is in error state.";case"pending":return"Datadog export is pending.";case"running":return"Datadog export status OK."}},manageIntegrationButton:"Manage integration"},sre="_root_5kbca_1",nre="_controls_5kbca_7",rre="_selectors_5kbca_14",ore="_dropdown_5kbca_19",are="_timeSelectorContainer_5kbca_23",gl={root:sre,controls:nre,selectors:rre,dropdown:ore,timeSelectorContainer:are},ire=(t,s)=>{switch(t.type){case"period":return s.type!==t.type?!1:t.fromDate.valueOf()===s.fromDate.valueOf()&&t.period===s.period;case"custom":return s.type!==t.type?!1:t.fromDate.valueOf()===s.fromDate.valueOf()&&t.toDate.valueOf()===s.toDate.valueOf()}},cre=t=>{switch(t){case"disabled":return"warning";case"error":return"error";case"pending":return"info";case"running":return"success"}},lre=()=>{var f;const{trackUiInteraction:t}=k(),{project:s,projectId:n}=O(),{selectOptions:r,isLoading:o}=Ye(),{branch:a}=ut(),i=a==null?void 0:a.id,{range:c}=$1(),[l,d]=Cne();m.useEffect(()=>{(!l||!ire(l,c))&&d(c)},[c,l,d]);const u=hs({projectId:n,branchId:i??""}),h=m.useMemo(()=>{var y;return((y=u.data)==null?void 0:y.endpoints)??[]},[u.data]),[p,g]=cm(),_=m.useMemo(()=>h.find(y=>y.id===p),[h,p]),x=m.useMemo(()=>r.find(y=>y.value===i),[r,i]),j=nm(),b=Yd();return!s||o||!x?e.jsx(pe,{}):e.jsxs("div",{className:gl.root,children:[(f=b.data)!=null&&f.datadog&&!j.datadog?e.jsx(Q,{appearance:cre(b.data.datadog.status),action:e.jsx(A,{href:`${F(C.ProjectsItemIntegrations,{projectId:s.id})}#datadog`,children:dv.manageIntegrationButton}),children:dv.datadogStatusAlert(b.data.datadog.status)}):null,e.jsxs("div",{className:gl.controls,children:[e.jsx("div",{className:gl.selectors,children:e.jsx(R,{label:"Compute",className:gl.dropdown,children:e.jsx(tb,{size:"s",endpoints:h,endpointId:p??void 0,onChange:y=>{y&&(g(y.id),t("monitoring_page_endpoint_changed"))}})})}),e.jsx("div",{className:gl.timeSelectorContainer,children:e.jsx(tA,{analyticsAction:"monitoring_page_time_period_changed"})}),e.jsx(YE,{})]}),_&&e.jsx(tre,{project:s,endpoint:_})]})},EI=(t,s)=>(t==null?void 0:t.pages.reduce((n,r)=>[...n,...s(r)],[]))??[],$I=t=>ec(t.action.split("_").join(" ")),dre="_root_1oayq_1",ure={root:dre},hre=t=>{switch(t){case"read_write":return"Primary";case"read_only":return"Replica";default:return""}},pre=({endpoint:t,onEdit:s})=>e.jsx(e.Fragment,{children:t?e.jsx(A,{onClick:()=>s(t),children:e.jsxs("div",{className:ure.root,children:[t.id,e.jsx(he,{children:hre(t.type)})]})}):""}),mre=()=>{var d;const{projectId:t,project:s}=O(),n=zp({projectId:t}),{branch:r}=ut(),o=m.useMemo(()=>EI(n.data,h=>h.operations).filter(h=>r&&h.branch_id===r.id),[n.data,r]),a=ds({projectId:t}),[i,c]=m.useState(null),l=m.useMemo(()=>vt([{key:"operation",label:"Operation",renderValue:$I},{key:"endpoint",label:"Compute",renderValue:u=>{var h;return u.endpoint_id?e.jsx(pre,{endpoint:(h=a.data)==null?void 0:h.endpoints.find(p=>p.id===u.endpoint_id),onEdit:p=>c(p)}):""}},{key:"status",label:"Operation status",renderValue:u=>e.jsx(gS,{status:u.status})},{key:"id",label:"Duration",renderValue:u=>["finished","failed"].includes(u.status)&&e.jsx(T,{children:Gh(u)})},{key:"created_at",label:"Date",renderValue:u=>e.jsx(T,{appearance:"secondary",children:le(u.created_at)})}]),[a.data]);return s?e.jsxs(e.Fragment,{children:[i!==null&&e.jsx(qn,{isOpen:!0,onRequestClose:()=>c(null),mode:"edit",project:s,endpoint:i}),e.jsx(Fn,{isLoading:n.isLoading,error:(d=n.error)==null?void 0:d.message,cols:l,data:o})]}):e.jsx(Fn,{isLoading:!0,cols:l})},gre="_root_1n2t9_1",_re="_desc_1n2t9_7",uv={root:gre,desc:_re},fre=()=>{const{trackUiInteraction:t}=k();return e.jsxs("div",{className:uv.root,children:[e.jsxs("p",{className:uv.desc,children:["An operation is an action performed by the Neon Control Plane on an object or resource, such as starting a compute or creating a branch. Monitor here for the health and progress of your Neon project operations."," ",e.jsx(A,{openInNewTab:!0,"aria-label":"System Operations",href:"https://neon.tech/docs/manage/operations",icon:"external_link",onClick:()=>{t("project_settings_ip_allow_learn_more_clicked")},children:"Learn more"})]}),e.jsx(mre,{})]})},bre="_sections_t5h2o_1",xre={sections:bre},hv=()=>{const{isSelfServedAccount:t}=ae(),s=m.useRef(null),n=r0(),{orgId:r}=Y(),o=r!==void 0,[a,i]=xs(Me.BillingGetStarted,o?`show_org_${r}`:"show",!1),c=()=>{i(!1)};return m.useEffect(()=>{switch(window.location.hash){case ru.SuccessUpgrade:re("Plan was changed successfully"),i(!0);break;case ru.SuccessDowngrade:i(!1),re("Plan was changed successfully");break;case ru.SuccessEdit:re("Payment method was upgraded successfully");break;case ru.Error:break;default:return}window.history.replaceState(null,""," ")},[i]),m.useEffect(()=>{s.current&&a&&s.current.scrollIntoView()},[a]),e.jsxs(e.Fragment,{children:[e.jsx(pM,{}),e.jsxs("div",{className:xre.sections,children:[t&&a&&e.jsx(sA,{ref:s,hide:c}),n.map(({id:l,name:d,titleOverride:u,Component:h})=>e.jsx(h,{id:l,title:u??d},l))]})]})},OI=()=>{const t=Ne(),{trackUiInteraction:s}=k(),[n,r]=m.useState(null),o=Yl("p"),a=Yl("tr"),i=Yl("ru");return m.useEffect(()=>{(async()=>{var l,d;if(!o||!a){r("Missing project ID or transfer request ID in URL parameters");return}try{s("project_claim_attempted",{project_id:o}),await q.acceptProjectTransferRequest(o,a,{}),s("project_claim_succeeded",{project_id:o}),re("Project has been successfully claimed."),i?window.location.href=decodeURIComponent(i):t.replace(F(C.ProjectsItem,{projectId:o}))}catch(u){const h=u instanceof nA&&((d=(l=u.response)==null?void 0:l.data)==null?void 0:d.message)||u instanceof Error&&u.message||String(u);s("project_claim_failed",{project_id:o,error:h}),r(`Failed to claim the project: ${h}. Please double-check the URL.`)}})()},[o,a,i,t,s]),n?e.jsx(is,{title:"Failed to claim project",subtitle:n,actions:e.jsx(P,{as:"a",href:qd,size:"l",children:"Back to Console"})}):e.jsx(pe,{})};OI.displayName="Claim";const jre="https://api64.ipify.org/",RI=R_.createApi({reducerPath:"ips",baseQuery:R_.fetchBaseQuery({baseUrl:jre}),endpoints:t=>({fetchIp:t.query({query:()=>({url:"/",params:{format:"json"}})})})});var rr={},Ks={},qr={},pv;function ff(){if(pv)return qr;pv=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.isInSubnet=t,qr.isCorrect=s,qr.numberToPaddedHex=n,qr.stringToPaddedHex=r,qr.testBit=o;function t(a){return this.subnetMask<a.subnetMask?!1:this.mask(a.subnetMask)===a.mask()}function s(a){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===a&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function n(a){return a.toString(16).padStart(2,"0")}function r(a){return n(parseInt(a,10))}function o(a,i){const{length:c}=a;if(i>c)return!1;const l=c-i;return a.substring(l,l+1)==="1"}return qr}var Qs={},mv;function BI(){return mv||(mv=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.RE_SUBNET_STRING=Qs.RE_ADDRESS=Qs.GROUPS=Qs.BITS=void 0,Qs.BITS=32,Qs.GROUPS=4,Qs.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,Qs.RE_SUBNET_STRING=/\/\d{1,2}$/),Qs}var _l={},gv;function ax(){if(gv)return _l;gv=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.AddressError=void 0;class t extends Error{constructor(n,r){super(n),this.name="AddressError",this.parseMessage=r}}return _l.AddressError=t,_l}var _v;function LI(){if(_v)return Ks;_v=1;var t=Ks&&Ks.__createBinding||(Object.create?function(c,l,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(l,d);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,u,h)}:function(c,l,d,u){u===void 0&&(u=d),c[u]=l[d]}),s=Ks&&Ks.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=Ks&&Ks.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&t(l,c,d);return s(l,c),l};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.Address4=void 0;const r=n(ff()),o=n(BI()),a=ax();class i{constructor(l){this.groups=o.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=r.isCorrect(o.BITS),this.isInSubnet=r.isInSubnet,this.address=l;const d=o.RE_SUBNET_STRING.exec(l);if(d){if(this.parsedSubnet=d[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>o.BITS)throw new a.AddressError("Invalid subnet mask.");l=l.replace(o.RE_SUBNET_STRING,"")}this.addressMinusSuffix=l,this.parsedAddress=this.parse(l)}static isValid(l){try{return new i(l),!0}catch{return!1}}parse(l){const d=l.split(".");if(!l.match(o.RE_ADDRESS))throw new a.AddressError("Invalid IPv4 address.");return d}correctForm(){return this.parsedAddress.map(l=>parseInt(l,10)).join(".")}static fromHex(l){const d=l.replace(/:/g,"").padStart(8,"0"),u=[];let h;for(h=0;h<8;h+=2){const p=d.slice(h,h+2);u.push(parseInt(p,16))}return new i(u.join("."))}static fromInteger(l){return i.fromHex(l.toString(16))}static fromArpa(l){const u=l.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new i(u)}toHex(){return this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join(":")}toArray(){return this.parsedAddress.map(l=>parseInt(l,10))}toGroup6(){const l=[];let d;for(d=0;d<o.GROUPS;d+=2)l.push(`${r.stringToPaddedHex(this.parsedAddress[d])}${r.stringToPaddedHex(this.parsedAddress[d+1])}`);return l.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(o.BITS-this.subnetMask)}`)}startAddress(){return i.fromBigInt(this._startAddress())}startAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._startAddress()+l)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(o.BITS-this.subnetMask)}`)}endAddress(){return i.fromBigInt(this._endAddress())}endAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._endAddress()-l)}static fromBigInt(l){return i.fromHex(l.toString(16))}mask(l){return l===void 0&&(l=this.subnetMask),this.getBitsBase2(0,l)}getBitsBase2(l,d){return this.binaryZeroPad().slice(l,d)}reverseForm(l){l||(l={});const d=this.correctForm().split(".").reverse().join(".");return l.omitSuffix?d:`${d}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new i("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(o.BITS,"0")}groupForV6(){const l=this.parsedAddress;return this.address.replace(o.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${l.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${l.slice(2,4).join(".")}</span>`)}}return Ks.Address4=i,Ks}var Ys={},at={},fv;function DI(){return fv||(fv=1,Object.defineProperty(at,"__esModule",{value:!0}),at.RE_URL_WITH_PORT=at.RE_URL=at.RE_ZONE_STRING=at.RE_SUBNET_STRING=at.RE_BAD_ADDRESS=at.RE_BAD_CHARACTERS=at.TYPES=at.SCOPES=at.GROUPS=at.BITS=void 0,at.BITS=128,at.GROUPS=8,at.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},at.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},at.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,at.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,at.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,at.RE_ZONE_STRING=/%.*$/,at.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/,at.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/),at}var Go={},bv;function MI(){if(bv)return Go;bv=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.spanAllZeroes=t,Go.spanAll=s,Go.spanLeadingZeroes=r,Go.simpleGroup=o;function t(a){return a.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(a,i=0){return a.split("").map((l,d)=>`<span class="digit value-${l} position-${d+i}">${t(l)}</span>`).join("")}function n(a){return a.replace(/^(0+)/,'<span class="zero">$1</span>')}function r(a){return a.split(":").map(c=>n(c)).join(":")}function o(a,i=0){return a.split(":").map((l,d)=>/group-v4/.test(l)?l:`<span class="hover-group group-${d+i}">${n(l)}</span>`)}return Go}var Kt={},xv;function yre(){if(xv)return Kt;xv=1;var t=Kt&&Kt.__createBinding||(Object.create?function(l,d,u,h){h===void 0&&(h=u);var p=Object.getOwnPropertyDescriptor(d,u);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,h,p)}:function(l,d,u,h){h===void 0&&(h=u),l[h]=d[u]}),s=Kt&&Kt.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),n=Kt&&Kt.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&t(d,l,u);return s(d,l),d};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.ADDRESS_BOUNDARY=void 0,Kt.groupPossibilities=o,Kt.padGroup=a,Kt.simpleRegularExpression=i,Kt.possibleElisions=c;const r=n(DI());function o(l){return`(${l.join("|")})`}function a(l){return l.length<4?`0{0,${4-l.length}}${l}`:l}Kt.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function i(l){const d=[];l.forEach((h,p)=>{parseInt(h,16)===0&&d.push(p)});const u=d.map(h=>l.map((p,g)=>{if(g===h){const _=g===0||g===r.GROUPS-1?":":"";return o([a(p),_])}return a(p)}).join(":"));return u.push(l.map(a).join(":")),o(u)}function c(l,d,u){const h=d?"":":",p=u?"":":",g=[];!d&&!u&&g.push("::"),d&&u&&g.push(""),(u&&!d||!u&&d)&&g.push(":"),g.push(`${h}(:0{1,4}){1,${l-1}}`),g.push(`(0{1,4}:){1,${l-1}}${p}`),g.push(`(0{1,4}:){${l-1}}0{1,4}`);for(let _=1;_<l-1;_++)for(let x=1;x<l-_;x++)g.push(`(0{1,4}:){${x}}:(0{1,4}:){${l-x-_-1}}0{1,4}`);return o(g)}return Kt}var jv;function vre(){if(jv)return Ys;jv=1;var t=Ys&&Ys.__createBinding||(Object.create?function(f,y,v,w){w===void 0&&(w=v);var S=Object.getOwnPropertyDescriptor(y,v);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[v]}}),Object.defineProperty(f,w,S)}:function(f,y,v,w){w===void 0&&(w=v),f[w]=y[v]}),s=Ys&&Ys.__setModuleDefault||(Object.create?function(f,y){Object.defineProperty(f,"default",{enumerable:!0,value:y})}:function(f,y){f.default=y}),n=Ys&&Ys.__importStar||function(f){if(f&&f.__esModule)return f;var y={};if(f!=null)for(var v in f)v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)&&t(y,f,v);return s(y,f),y};Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.Address6=void 0;const r=n(ff()),o=n(BI()),a=n(DI()),i=n(MI()),c=LI(),l=yre(),d=ax(),u=ff();function h(f){if(!f)throw new Error("Assertion failed.")}function p(f){const y=/(\d+)(\d{3})/;for(;y.test(f);)f=f.replace(y,"$1,$2");return f}function g(f){return f=f.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),f=f.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),f}function _(f,y){const v=[],w=[];let S;for(S=0;S<f.length;S++)S<y[0]?v.push(f[S]):S>y[1]&&w.push(f[S]);return v.concat(["compact"]).concat(w)}function x(f){return parseInt(f,16).toString(16).padStart(4,"0")}function j(f){return f&255}class b{constructor(y,v){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=r.isInSubnet,this.isCorrect=r.isCorrect(a.BITS),v===void 0?this.groups=a.GROUPS:this.groups=v,this.address=y;const w=a.RE_SUBNET_STRING.exec(y);if(w){if(this.parsedSubnet=w[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>a.BITS)throw new d.AddressError("Invalid subnet mask.");y=y.replace(a.RE_SUBNET_STRING,"")}else if(/\//.test(y))throw new d.AddressError("Invalid subnet mask.");const S=a.RE_ZONE_STRING.exec(y);S&&(this.zone=S[0],y=y.replace(a.RE_ZONE_STRING,"")),this.addressMinusSuffix=y,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(y){try{return new b(y),!0}catch{return!1}}static fromBigInt(y){const v=y.toString(16).padStart(32,"0"),w=[];let S;for(S=0;S<a.GROUPS;S++)w.push(v.slice(S*4,(S+1)*4));return new b(w.join(":"))}static fromURL(y){let v,w=null,S;if(y.indexOf("[")!==-1&&y.indexOf("]:")!==-1){if(S=a.RE_URL_WITH_PORT.exec(y),S===null)return{error:"failed to parse address with port",address:null,port:null};v=S[1],w=S[2]}else if(y.indexOf("/")!==-1){if(y=y.replace(/^[a-z0-9]+:\/\//,""),S=a.RE_URL.exec(y),S===null)return{error:"failed to parse address from URL",address:null,port:null};v=S[1]}else v=y;return w?(w=parseInt(w,10),(w<0||w>65536)&&(w=null)):w=null,{address:new b(v),port:w}}static fromAddress4(y){const v=new c.Address4(y),w=a.BITS-(o.BITS-v.subnetMask);return new b(`::ffff:${v.correctForm()}/${w}`)}static fromArpa(y){let v=y.replace(/(\.ip6\.arpa)?\.$/,"");const w=7;if(v.length!==63)throw new d.AddressError("Invalid 'ip6.arpa' form.");const S=v.split(".").reverse();for(let I=w;I>0;I--){const N=I*4;S.splice(N,0,":")}return v=S.join(""),new b(v)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(y=this.subnetMask){return this.getBitsBase2(0,y)}possibleSubnets(y=128){const v=a.BITS-this.subnetMask,w=Math.abs(y-a.BITS),S=v-w;return S<0?"0":p((BigInt("2")**BigInt(S)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(a.BITS-this.subnetMask)}`)}startAddress(){return b.fromBigInt(this._startAddress())}startAddressExclusive(){const y=BigInt("1");return b.fromBigInt(this._startAddress()+y)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(a.BITS-this.subnetMask)}`)}endAddress(){return b.fromBigInt(this._endAddress())}endAddressExclusive(){const y=BigInt("1");return b.fromBigInt(this._endAddress()-y)}getScope(){let y=a.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&y!=="Link local"&&(y="Global"),y||"Unknown"}getType(){for(const y of Object.keys(a.TYPES))if(this.isInSubnet(new b(y)))return a.TYPES[y];return"Global unicast"}getBits(y,v){return BigInt(`0b${this.getBitsBase2(y,v)}`)}getBitsBase2(y,v){return this.binaryZeroPad().slice(y,v)}getBitsBase16(y,v){const w=v-y;if(w%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(y,v).toString(16).padStart(w/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,a.BITS)}reverseForm(y){y||(y={});const v=Math.floor(this.subnetMask/4),w=this.canonicalForm().replace(/:/g,"").split("").slice(0,v).reverse().join(".");return v>0?y.omitSuffix?w:`${w}.ip6.arpa.`:y.omitSuffix?"":"ip6.arpa."}correctForm(){let y,v=[],w=0;const S=[];for(y=0;y<this.parsedAddress.length;y++){const D=parseInt(this.parsedAddress[y],16);D===0&&w++,D!==0&&w>0&&(w>1&&S.push([y-w,y-1]),w=0)}w>1&&S.push([this.parsedAddress.length-w,this.parsedAddress.length-1]);const I=S.map(D=>D[1]-D[0]+1);if(S.length>0){const D=I.indexOf(Math.max(...I));v=_(this.parsedAddress,S[D])}else v=this.parsedAddress;for(y=0;y<v.length;y++)v[y]!=="compact"&&(v[y]=parseInt(v[y],16).toString(16));let N=v.join(":");return N=N.replace(/^compact$/,"::"),N=N.replace(/(^compact)|(compact$)/,":"),N=N.replace(/compact/,""),N}binaryZeroPad(){return this.bigInt().toString(2).padStart(a.BITS,"0")}parse4in6(y){const v=y.split(":"),S=v.slice(-1)[0].match(o.RE_ADDRESS);if(S){this.parsedAddress4=S[0],this.address4=new c.Address4(this.parsedAddress4);for(let I=0;I<this.address4.groups;I++)if(/^0[0-9]+/.test(this.address4.parsedAddress[I]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",y.replace(o.RE_ADDRESS,this.address4.parsedAddress.map(g).join(".")));this.v4=!0,v[v.length-1]=this.address4.toGroup6(),y=v.join(":")}return y}parse(y){y=this.parse4in6(y);const v=y.match(a.RE_BAD_CHARACTERS);if(v)throw new d.AddressError(`Bad character${v.length>1?"s":""} detected in address: ${v.join("")}`,y.replace(a.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const w=y.match(a.RE_BAD_ADDRESS);if(w)throw new d.AddressError(`Address failed regex: ${w.join("")}`,y.replace(a.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let S=[];const I=y.split("::");if(I.length===2){let N=I[0].split(":"),D=I[1].split(":");N.length===1&&N[0]===""&&(N=[]),D.length===1&&D[0]===""&&(D=[]);const U=this.groups-(N.length+D.length);if(!U)throw new d.AddressError("Error parsing groups");this.elidedGroups=U,this.elisionBegin=N.length,this.elisionEnd=N.length+this.elidedGroups,S=S.concat(N);for(let E=0;E<U;E++)S.push("0");S=S.concat(D)}else if(I.length===1)S=y.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if(S=S.map(N=>parseInt(N,16).toString(16)),S.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return S}canonicalForm(){return this.parsedAddress.map(x).join(":")}decimal(){return this.parsedAddress.map(y=>parseInt(y,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(x).join("")}`)}to4(){const y=this.binaryZeroPad().split("");return c.Address4.fromHex(BigInt(`0b${y.slice(96,128).join("")}`).toString(16))}to4in6(){const y=this.to4(),w=new b(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let S="";return/:$/.test(w)||(S=":"),w+S+y.address}inspectTeredo(){const y=this.getBitsBase16(0,32),w=(this.getBits(80,96)^BigInt("0xffff")).toString(),S=c.Address4.fromHex(this.getBitsBase16(32,64)),I=this.getBits(96,128),N=c.Address4.fromHex((I^BigInt("0xffffffff")).toString(16)),D=this.getBitsBase2(64,80),U=(0,u.testBit)(D,15),E=(0,u.testBit)(D,14),K=(0,u.testBit)(D,8),J=(0,u.testBit)(D,9),B=BigInt(`0b${D.slice(2,6)+D.slice(8,16)}`).toString(10);return{prefix:`${y.slice(0,4)}:${y.slice(4,8)}`,server4:S.address,client4:N.address,flags:D,coneNat:U,microsoft:{reserved:E,universalLocal:J,groupIndividual:K,nonce:B},udpPort:w}}inspect6to4(){const y=this.getBitsBase16(0,16),v=c.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:y.slice(0,4),gateway:v.address}}to6to4(){if(!this.is4())return null;const y=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new b(y)}toByteArray(){const y=this.bigInt().toString(16),w=`${"0".repeat(y.length%2)}${y}`,S=[];for(let I=0,N=w.length;I<N;I+=2)S.push(parseInt(w.substring(I,I+2),16));return S}toUnsignedByteArray(){return this.toByteArray().map(j)}static fromByteArray(y){return this.fromUnsignedByteArray(y.map(j))}static fromUnsignedByteArray(y){const v=BigInt("256");let w=BigInt("0"),S=BigInt("1");for(let I=y.length-1;I>=0;I--)w+=S*BigInt(y[I].toString(10)),S*=v;return b.fromBigInt(w)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new b("2001::/32"))}is6to4(){return this.isInSubnet(new b("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(y){return y===void 0?y="":y=`:${y}`,`http://[${this.correctForm()}]${y}/`}link(y){y||(y={}),y.className===void 0&&(y.className=""),y.prefix===void 0&&(y.prefix="/#address="),y.v4===void 0&&(y.v4=!1);let v=this.correctForm;y.v4&&(v=this.to4in6);const w=v.call(this);return y.className?`<a href="${y.prefix}${w}" class="${y.className}">${w}</a>`:`<a href="${y.prefix}${w}">${w}</a>`}group(){if(this.elidedGroups===0)return i.simpleGroup(this.address).join(":");h(typeof this.elidedGroups=="number"),h(typeof this.elisionBegin=="number");const y=[],[v,w]=this.address.split("::");v.length?y.push(...i.simpleGroup(v)):y.push("");const S=["hover-group"];for(let I=this.elisionBegin;I<this.elisionBegin+this.elidedGroups;I++)S.push(`group-${I}`);return y.push(`<span class="${S.join(" ")}"></span>`),w.length?y.push(...i.simpleGroup(w,this.elisionEnd)):y.push(""),this.is4()&&(h(this.address4 instanceof c.Address4),y.pop(),y.push(this.address4.groupForV6())),y.join(":")}regularExpressionString(y=!1){let v=[];const w=new b(this.correctForm());if(w.elidedGroups===0)v.push((0,l.simpleRegularExpression)(w.parsedAddress));else if(w.elidedGroups===a.GROUPS)v.push((0,l.possibleElisions)(a.GROUPS));else{const S=w.address.split("::");S[0].length&&v.push((0,l.simpleRegularExpression)(S[0].split(":"))),h(typeof w.elidedGroups=="number"),v.push((0,l.possibleElisions)(w.elidedGroups,S[0].length!==0,S[1].length!==0)),S[1].length&&v.push((0,l.simpleRegularExpression)(S[1].split(":"))),v=[v.join(":")]}return y||(v=["(?=^|",l.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...v,")(?=[^\\w\\:]|",l.ADDRESS_BOUNDARY,"|$)"]),v.join("")}regularExpression(y=!1){return new RegExp(this.regularExpressionString(y),"i")}}return Ys.Address6=b,Ys}var yv;function wre(){return yv||(yv=1,function(t){var s=rr&&rr.__createBinding||(Object.create?function(l,d,u,h){h===void 0&&(h=u);var p=Object.getOwnPropertyDescriptor(d,u);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,h,p)}:function(l,d,u,h){h===void 0&&(h=u),l[h]=d[u]}),n=rr&&rr.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),r=rr&&rr.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&s(d,l,u);return n(d,l),d};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var o=LI();Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return o.Address4}});var a=vre();Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return a.Address6}});var i=ax();Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return i.AddressError}});const c=r(MI());t.v6={helpers:c}}(rr)),rr}var pp=wre();const Sre=t=>{try{return{address:new pp.Address4(t),version:4}}catch{return}},Cre=t=>{try{return{address:new pp.Address6(t),version:6}}catch{return}},uc=t=>{const s=Sre(t)??Cre(t);if(!s)throw new Error(`failed to parse IP address: ${t}`);const{address:n,version:r}=s;return{version:r,toNumber(){return n.bigInt()},compare(o){if(r!==o.version)throw new Error("Can not compare IP addresses with different version");return n.bigInt()<o.toNumber()?-1:n.bigInt()>o.toNumber()?1:0},isInSubnet(o){return n.isInSubnet(o)}}},kre=(t,s)=>{if(!s.includes("/"))return!1;if(t.version===4){const r=new pp.Address4(s);return t.isInSubnet(r)}const n=new pp.Address6(s);return t.isInSubnet(n)},Ire=(t,s)=>{if(!s.includes("-"))return!1;const[n,r]=s.split("-"),o=uc(n.trim()),a=uc(r.trim());return(o.compare(t)===0||o.compare(t)===-1)&&(a.compare(t)===0||a.compare(t)===1)},Pre=(t,s)=>{const n=uc(s);return t.compare(n)===0},Tre=(t,s)=>{try{const n=uc(t);return kre(n,s)||Ire(n,s)||Pre(n,s)}catch{return!1}},Nre="_container_1j9cd_1",Are={container:Nre},Ere=(t,s)=>s!=null&&s.protected_branches_only?t==null?void 0:t.protected:!0,ix=({onClose:t})=>{var y;const{projectId:s,project:n,isLoading:r}=O(),{trackUiInteraction:o}=k(),{branch:a}=ut(),[i,c]=m.useState(!1),[l,d]=m.useState(),[u,h]=m.useState(!1),p=Co(),g=(y=n==null?void 0:n.settings)==null?void 0:y.allowed_ips,[_]=RI.useLazyFetchIpQuery(),[x,j]=xs(Me.HideIPAllowModal,s,!1),b=m.useCallback(()=>{c(!1),t==null||t()},[t]);m.useEffect(()=>{const v=(g==null?void 0:g.ips)??[];x?t==null||t():v.length>0&&Ere(a,g)?_(void 0,!0).unwrap().then(({ip:w})=>{const S=v.some(I=>Tre(w,I));return d(w),c(!S),S?t==null?void 0:t():o("ip_allow_modal_shown")}):a&&g&&(t==null||t())},[a,_,g,t,o,x]);const f=m.useCallback(()=>{if(l){const v=(g==null?void 0:g.ips)??[];return p({projectId:s,data:{settings:{allowed_ips:{...g,ips:[...v,l]}}}}).catch(w=>Cp(w)).finally(()=>b())}},[l,g,p,s,b]);return r||x?null:e.jsx(e.Fragment,{children:e.jsxs(Qe,{isOpen:i,width:600,title:`Access Denied for ${l}`,onRequestClose:()=>{o("ip_allow_modal_dismissed"),b()},children:[e.jsx(be,{children:e.jsxs("div",{className:Are.container,children:[e.jsxs("p",{children:["You are trying to access Neon from IP address"," ",e.jsx(ke,{children:l}),", which is not on the project allow list."]}),e.jsx(Ir,{checked:u,onChange:v=>{h(v.target.checked)},children:"Don't show this message again for any IP address"})]})}),e.jsxs(ge,{children:[e.jsx(P,{appearance:"secondary",onClick:()=>{o(u?"ip_allow_modal_no_show":"ip_allow_modal_dismissed"),j(u),b()},children:u?"Close":"Cancel"}),e.jsx(P,{appearance:"primary",disabled:u,onClick:()=>{o("ip_allow_modal_confirmed"),f()},children:"Add"})]})]})})},fl={title:"Archived branch",body:"This branch is archived. Accessing it on the Tables page will unarchive it, which may take a moment, and queries may be slower at first.",learnMore:"Learn more about branch archiving",declineButton:"Cancel",confirmButton:"Proceed"},$re=({onDecline:t,onConfirm:s})=>e.jsxs(Qe,{isOpen:!0,title:fl.title,onRequestClose:t,children:[e.jsx(be,{gaps:!0,children:e.jsxs("p",{children:[fl.body," ",e.jsx(A,{href:nb,icon:"external_link",openInNewTab:!0,children:fl.learnMore})]})}),e.jsxs(ge,{children:[e.jsx(ls,{appearance:"secondary",children:fl.declineButton}),e.jsx(P,{onClick:s,children:fl.confirmButton})]})]}),Ore=m.lazy(async()=>({default:(await Cr(()=>import("./DrizzleStudio-zZ9NAwqk.js"),__vite__mapDeps([36,4,2,1,5,10,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,37]))).DrizzleStudio})),Xye=Rt({database:dt().optional().catch(void 0),schema:dt().optional().catch(void 0),table:dt().optional().catch(void 0)}),zg=()=>e.jsx(pe,{}),Rre=()=>{const[t,s]=m.useState(!1),[n,r]=m.useState(!1),{branch:o}=ut(),a=Ne();return t?o?o.current_state==="archived"&&!n&&kc(o)?e.jsxs(e.Fragment,{children:[e.jsx($re,{onDecline:()=>a.replace(F(C.ProjectsItemBranchesItem,{projectId:o.project_id,branchId:o.id})),onConfirm:()=>r(!0)}),e.jsx(zg,{})]}):e.jsx(m.Suspense,{fallback:e.jsx(zg,{}),children:e.jsx(Ore,{})}):e.jsx(zg,{}):e.jsx(ix,{onClose:()=>s(!0)})},Bre="_root_1u3cy_1",Lre={root:Bre},Dre=()=>{const{orgId:t,isVercelOrg:s,isLoading:n}=Y();return n?e.jsx(pe,{}):t?e.jsxs("div",{className:Lre.root,children:[e.jsx(Wk,{headingId:"github"}),!s&&e.jsx(Jk,{headingId:"vercel"})]}):null},mp=t=>{const s=t.split(/[ ,;\n]/).map(n=>n.trim()).filter(Boolean);return s.some(n=>!rA.test(n))?null:iR(s)},cx=m.forwardRef((t,s)=>{const{data:n,isLoading:r}=vs(),o=m.useMemo(()=>(n==null?void 0:n.map(a=>({value:a.id,label:a.name})))??[],[n]);return oA({...t,options:o}),r?null:e.jsx(Pa,{ref:s,...t,loading:r,options:o})});cx.displayName="ProjectSelect";const ji={title:t=>`Invite collaborators to ${t} project`,projectLabel:"Select project to invite collaborators to:",emailLabel:"Add emails",emailPlaceholder:"One or many comma separated emails",submitButton:"Invite collaborators",invitationSuccess:(t,s)=>`Collaborator ${t} received access to project ${s}`},Mre=({orgName:t,onRequestClose:s})=>{var c;const n=aA(),r=xe({mode:"onSubmit",defaultValues:{invitation_emails:""}}),[o,a]=m.useState(),i=async l=>{const d=mp(l.invitation_emails),u=o==null?void 0:o.value;if(u){const h=await Promise.allSettled(d.map(p=>n({projectId:u,email:p})));for(const p of h)p.status==="rejected"?H(p.reason):Te(e.jsx(Fe,{children:ji.invitationSuccess(p.value.granted_to_email,o.label)}))}s==null||s()};return e.jsx(e.Fragment,{children:e.jsxs(ws,{modalProps:{title:ji.title(t),isOpen:!0,onRequestClose:s,width:550},providerProps:r,onSubmit:i,children:[e.jsxs(be,{gaps:!0,children:[e.jsx(R,{label:ji.projectLabel,children:e.jsx(cx,{value:o,onChange:l=>{l&&a(l)}})}),e.jsx(R,{label:ji.emailLabel,error:(c=r.formState.errors.invitation_emails)==null?void 0:c.message,children:e.jsx(ne,{autoFocus:!0,placeholder:ji.emailPlaceholder,...r.register("invitation_emails",{required:{value:!0,message:"This field is required"},validate:l=>mp(l)!==null||"Please enter a valid email address"})})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{children:ji.submitButton})]})]})})},Ure=({...t})=>{const{org:s}=Y(),{isOrgAdmin:n}=wt(),r=Ve(De.InviteOrgCollaborators),{data:o,isLoading:a}=vs();if(s===void 0||a)return null;const i=!(o&&o.length>0&&n);return e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(Mre,{orgName:s.name,onRequestClose:r.closeModal}),e.jsx(P,{size:"s",onClick:r.openModal,...t,disabled:i,children:"Invite collaborators"})]})},yn={convertLabel:"Convert to member",convertModalHeader:"Convert collaborator to member",convertModalBody:(t,s)=>e.jsxs("span",{children:["Are you sure you want to convert"," ",e.jsx("strong",{children:t.user_email})," to member in ",s,"? They will get access to all projects."]}),convertModalConfirm:"Convert to member",convertSuccess:(t,s)=>e.jsxs(e.Fragment,{children:["Successfully converted ",e.jsx("strong",{children:t.user_email})," to member in ",s]}),removeLabel:"Remove from project",removeCollaboratorModalHeader:"Remove from project",removeCollaboratorModalBody:t=>e.jsxs("span",{children:["Are you sure you want to remove ",e.jsx("strong",{children:t.user_email})," ","from ",t.project_name,"?"," ",e.jsx("strong",{children:t.user_email})," will lose their access to this project."]}),removeCollaboratorModalConfirm:"Remove",removeCollaboratorSuccess:t=>e.jsxs(e.Fragment,{children:["Successfully removed ",e.jsx("strong",{children:t.user_email})," from"," ",t.project_name]})},Fre=({collaborator:t})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Oe(),{org:r,isVercelOrg:o}=Y(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:i}=wt(),c=iA(),l=cA(),d=m.useCallback(()=>{n({header:yn.convertModalHeader,text:yn.convertModalBody(t,a),confirmButtonText:yn.convertModalConfirm}).then(p=>{if(!p){s("org_guest_convert_to_member_dismissed");return}s("org_guest_convert_to_member_confirmed"),l({invitations:[{email:t.user_email,role:"member"}]}).then(()=>{Te(e.jsx(Fe,{children:yn.convertSuccess(t,a)}))}).catch(H)})},[t,a,l,n,s]),u=m.useCallback(()=>{n({appearance:"error",header:yn.removeCollaboratorModalHeader,text:yn.removeCollaboratorModalBody(t),confirmButtonText:yn.removeCollaboratorModalConfirm}).then(p=>{if(!p){s("org_guest_remove_from_project_dismissed");return}s("org_guest_remove_from_project_confirmed"),c({projectId:t.project_id,permissionId:t.permission_id}).then(()=>{Te(e.jsx(Fe,{children:yn.removeCollaboratorSuccess(t)}))}).catch(H)})},[t,c,n,s]),h=m.useMemo(()=>[{items:vt([!o&&{label:yn.convertLabel,onClick(){s("org_guest_convert_to_member_clicked"),d()}},{label:yn.removeLabel,onClick(){s("org_guest_remove_from_project_clicked"),u()}}])}],[d,u,s,o]);return e.jsx(Dt,{sections:h,children:e.jsx(Zt,{isDisabled:!i,"aria-label":`Actions for collaborator ${t.user_email}`})})},dd={title:"Collaborators",headerText:"Share projects with external collaborators. Collaborator access is limited to the projects you invite them to.",emailColumnLabel:"Email address",projectColumnLabel:"Project shared"},qre=[{id:"email",header:dd.emailColumnLabel,enableSorting:!0,accessorKey:"user_email",rowHeader:!0,render:t=>e.jsx(sc,{content:t.user_email,maxWidth:300})},{id:"project_name",header:dd.projectColumnLabel,enableSorting:!0,accessorFn:t=>t.project_name??t.project_id},{id:"action",size:30,render:t=>e.jsx(Fre,{collaborator:t})}],zre=()=>{const{data:t,isLoading:s}=rb();return e.jsx(Ae,{id:"collaborators",children:e.jsxs(Pe,{children:[e.jsx(fe,{actions:e.jsx(Ure,{}),children:dd.title}),e.jsx("p",{children:dd.headerText}),e.jsx(mn,{"aria-label":dd.title,columns:qre,rows:t,isLoading:s,defaultSorting:{column:"project_name",direction:"ascending"},getRowId:n=>n.permission_id})]})})},zt={changeRoleModalHeader:"Change role",changeRoleModalBody:(t,s,n)=>e.jsxs("span",{children:["Are you sure you want to change ",e.jsx("strong",{children:n.email}),"'s role in ",t," from ",ga[n.role]," to"," ",ga[s],"?"]}),changeRoleModalConfirm:"Change",changeRoleSuccess:(t,s,n)=>`Successfully changed ${n.email}'s role in ${t} from ${ga[n.role]} to ${ga[s]}`,removeMemberButton:"Remove from organization",removeMemberModalHeader:(t,s)=>`Remove ${s.email} from ${t}`,removeMemberModalBody:(t,s)=>e.jsxs("span",{children:["Are you sure you want to remove ",e.jsx("strong",{children:s.email})," from"," ",t,"? Removing ",e.jsx("strong",{children:s.email})," will revoke their access to projects."]}),removeMemberModalConfirm:"Remove",removeMemberSuccess:(t,s)=>`Successfully removed ${s.email} from ${t}`,leaveOrg:"Leave organization",leaveOrgModalHeader:"Leave organization",leaveOrgModalBody:t=>e.jsxs("span",{children:["Are you sure? If you leave now, you'll lose access to all projects in"," ",e.jsx("b",{children:t}),"."]}),leaveOrgModalConfirm:"Leave",leaveOrgSuccess:t=>`Successfully left ${t}`,leaveOrgOnlyAdminErrorBE:"can't remove the only admin member of the organization",leaveOrgOnlyAdminError:"Before leaving the organization you need to assign a different admin to it"},Hre={admin:!0,member:!0},Vre=({member:t})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Oe(),{org:r}=Y(),o=(r==null?void 0:r.name)??"",{isOrgAdmin:a}=wt(),i=lA(),c=O1(),l=m.useCallback(h=>{t.role!==h&&n({header:zt.changeRoleModalHeader,text:zt.changeRoleModalBody(o,h,t),confirmButtonText:zt.changeRoleModalConfirm}).then(p=>{if(!p){s("org_member_change_role_dismissed");return}s("org_member_change_role_confirmed"),i({memberId:t.id,data:{role:h}}).then(()=>{re(zt.changeRoleSuccess(o,h,t))}).catch(H)})},[t,o,i,n,s]),d=m.useCallback(()=>{n({appearance:"error",header:zt.removeMemberModalHeader(o,t),text:zt.removeMemberModalBody(o,t),confirmButtonText:zt.removeMemberModalConfirm}).then(h=>{if(!h){s("org_member_remove_from_org_dismissed");return}s("org_member_remove_from_org_confirmed"),c({memberId:t.id}).then(()=>{re(zt.removeMemberSuccess(o,t))}).catch(H)})},[t,o,c,n,s]),u=m.useMemo(()=>[{items:Object.keys(Hre).map(h=>({icon:h===t.role?"check":void 0,label:ga[h],onClick(){s("org_member_change_role_clicked",{from_role:t.role,to_role:h}),l(h)}}))},{items:[{label:zt.removeMemberButton,onClick(){s("org_member_remove_from_org_clicked"),d()}}]}],[t,l,d,s]);return e.jsx(Dt,{sections:u,children:e.jsx(Zt,{isDisabled:!a,"aria-label":`Actions for member ${t.email}`})})},Wre=({member:t,memberCount:s})=>{const{trackUiInteraction:n}=k(),r=Ne(),{confirm:o}=Oe(),{org:a}=Y(),i=(a==null?void 0:a.name)??"",c=O1(),l=t.id,d=m.useCallback(()=>{o({appearance:"error",header:zt.leaveOrgModalHeader,text:zt.leaveOrgModalBody(i),confirmButtonText:zt.leaveOrgModalConfirm}).then(h=>{if(!h){n("org_member_leave_org_dismissed");return}n("org_member_leave_org_confirmed"),c({memberId:l,isCurrentUser:!0}).then(()=>{r.push(F(C.ProjectsList)),re(zt.leaveOrgSuccess(i))}).catch(p=>{var g;(g=p==null?void 0:p.message)!=null&&g.includes(zt.leaveOrgOnlyAdminErrorBE)?tt(zt.leaveOrgOnlyAdminError):H(p)})})},[i,l,c,o,n,r]),u=m.useMemo(()=>[{items:[{label:zt.leaveOrg,onClick(){n("org_member_leave_org_clicked"),d()}}]}],[d,n]);return e.jsx(Dt,{sections:u,children:e.jsx(Zt,{isDisabled:s===1,"aria-label":`Actions for member ${t.email}`})})},Gre=({member:t,memberCount:s})=>{const{data:n}=rt();return t.user_id===(n==null?void 0:n.id)?e.jsx(Wre,{member:t,memberCount:s}):e.jsx(Vre,{member:t})},pa={title:"Members",headerText:"Invite new members, assign roles, or remove from the organization.",upgradeHeaderText:"You're the first person in this organization. Upgrade to start inviting your team.",emailColumnLabel:"Email",roleColumnLabel:"Role",vercelOrgInfo:"To manage organization members, use the Neon Postgres integration in Vercel."},Kre=[{id:"email",header:pa.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:t=>e.jsx(sc,{appearance:"tertiary",content:t.email,maxWidth:300})},{id:"role",header:pa.roleColumnLabel,enableSorting:!0,accessorFn:t=>ga[t.role]},{id:"action",size:30,render:(t,s)=>e.jsx(Gre,{member:t,memberCount:s.table.getRowCount()})}];function Qre(t,s){return s?t.slice(0,2):t}const Yre=()=>{const{isVercelOrg:t}=Y(),{data:s,isLoading:n}=dA(),{allowInvites:r,isLoading:o}=R1();return o?null:e.jsx(Ae,{id:"members",children:e.jsxs(Pe,{children:[e.jsx(fe,{actions:!t&&e.jsx(A_,{size:"l"}),children:pa.title}),e.jsx(T,{children:r?pa.headerText:pa.upgradeHeaderText}),t&&e.jsx(Q,{children:pa.vercelOrgInfo}),e.jsx(mn,{columns:Qre(Kre,t),rows:s??[],isLoading:n,getRowId:a=>a.id,defaultSorting:{column:"role",direction:"ascending"},"aria-label":pa.title})]})})},vn={resendButton:"Resend invite",resendModalHeader:"Resend invitation",resendModalBody:t=>`Are you sure you want to resend invitation to ${t}?`,resendModalSuccess:t=>`Successfully resent the invitation to ${t}`,cancelButton:"Cancel invite",cancelModalHeader:t=>`Cancel invite for ${t}`,cancelModalBody:t=>`Are you sure you want to cancel invite for ${t}? Once cancelled, they will not be able to accept the invite.`,cancelModalConfirm:"Cancel invite",cancelModalCancel:"Keep invite",cancelModalSuccess:t=>`Successfully cancelled invitation to ${t}`},Jre=({invitation:t})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Oe(),{isOrgAdmin:r}=wt(),o=uA(),a=hA(),i=m.useCallback(()=>{n({header:vn.resendModalHeader,text:vn.resendModalBody(t.email)}).then(d=>{if(!d){s("org_invitation_resend_dismissed");return}s("org_invitation_resend_confirmed"),a({invitationId:t.id}).then(()=>{Te(e.jsx(Fe,{children:vn.resendModalSuccess(t.email)}))}).catch(H)})},[a,s,n,t.email,t.id]),c=m.useCallback(()=>{n({appearance:"error",header:vn.cancelModalHeader(t.email),text:vn.cancelModalBody(t.email),confirmButtonText:vn.cancelModalConfirm,declineButtonText:vn.cancelModalCancel}).then(d=>{if(!d){s("org_invitation_cancel_dismissed");return}s("org_invitation_cancel_confirmed"),o({invitationId:t.id}).then(()=>{Te(e.jsx(Fe,{children:vn.cancelModalSuccess(t.email)}))}).catch(H)})},[o,s,n,t.id,t.email]),l=m.useMemo(()=>[{items:[{label:vn.resendButton,onClick(){s("org_invitation_resend_clicked"),i()}},{label:vn.cancelButton,onClick(){s("org_invitation_cancel_clicked"),c()}}]}],[i,c,s]);return e.jsx(Dt,{sections:l,children:e.jsx(Zt,{isDisabled:!r,"aria-label":`Actions with invitation to ${t.email}`})})},co={title:"Pending invites",noInvitesHeader:"There are no pending invites at the moment.",upgradeNoInvitesHeader:"You're the only member of this organization. Upgrade your plan to invite external collaborators to join this organization.",existingInvitesHeader:"Here you can find your pending invites.",emailColumnLabel:"Email",invitedOnLabel:"Invited on",invitedAsLabel:"Invited as"},Zre=[{id:"email",header:co.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:t=>e.jsx(sc,{content:t.email,maxWidth:300})},{id:"invited_as",header:co.invitedAsLabel,enableSorting:!0,accessorKey:"role",render:({role:t})=>e.jsx(T,{appearance:"secondary",children:ga[t]})},{id:"invited_at",header:co.invitedOnLabel,enableSorting:!0,accessorKey:"invited_at",render:({invited_at:t})=>e.jsx(T,{appearance:"secondary",children:le(t,ve.Date)})},{id:"action",size:30,render:t=>e.jsx(Jre,{invitation:t})}],Xre=()=>{const{data:t,isLoading:s}=pA(),n=t&&t.length>0,{allowInvites:r,isLoading:o}=R1();return o||t===void 0?null:e.jsx(Ae,{id:"pending",children:e.jsxs(Pe,{children:[e.jsx(fe,{actions:n&&e.jsx(A_,{size:"l"}),children:co.title}),s||n?e.jsxs(e.Fragment,{children:[co.existingInvitesHeader,e.jsx(mn,{"aria-label":co.title,columns:Zre,rows:t,isLoading:s,defaultSorting:{column:"email",direction:"ascending"},getRowId:a=>a.id})]}):e.jsxs(e.Fragment,{children:[r?co.noInvitesHeader:co.upgradeNoInvitesHeader,e.jsx(A_,{size:"l"})]})]})})},eoe=()=>{const{isVercelOrg:t}=Y(),{isFreeSubscription:s}=ae(),{data:n}=rb(),r=n&&n.length>0,o=!s&&r;return e.jsxs(e.Fragment,{children:[e.jsx(Yre,{}),!t&&e.jsx(Xre,{}),o&&e.jsx(zre,{})]})},Oa=B1({baseQuery:Vf,reducerPath:"api_keys",tagTypes:["ApiKeys","OrgApiKeys"],endpoints:t=>({getApiKeys:t.query({providesTags:["ApiKeys"],query:()=>q.listApiKeys()}),getOrgApiKeys:t.query({providesTags:["OrgApiKeys"],query:s=>q.listOrgApiKeys(s)}),createApiKey:t.mutation({invalidatesTags:["ApiKeys"],query:s=>q.createApiKey(s)}),createOrgApiKey:t.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,data:n})=>q.createOrgApiKey(s,n)}),revokeApiKey:t.mutation({invalidatesTags:["ApiKeys"],query:s=>q.revokeApiKey(s)}),revokeOrgApiKey:t.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,id:n})=>q.revokeOrgApiKey(s,n)})})});function toe(){const{orgId:t}=Y(),s=Oa.useGetApiKeysQuery(t!==void 0?N_:void 0),n=Oa.useGetOrgApiKeysQuery(t!==void 0?t:N_);return t!==void 0?n:s}function soe(){const[t]=Oa.useCreateApiKeyMutation(),[s]=Oa.useCreateOrgApiKeyMutation(),{orgId:n}=Y();return n!==void 0?r=>s({orgId:n,data:r}).unwrap():r=>t(r).unwrap()}function noe(){const[t]=Oa.useRevokeApiKeyMutation(),[s]=Oa.useRevokeOrgApiKeyMutation(),{orgId:n}=Y();return n!==void 0?r=>s({orgId:n,id:r}).unwrap():r=>t(r).unwrap()}const Hg={title:"Automatic, instant branches of your database with every PR",description:"The GitHub integration automatically creates an API key and sets it as a repository secret.",button:"Connect to GitHub"},roe="_root_1h3i4_1",ooe="_icon_1h3i4_11",aoe="_content_1h3i4_15",ioe="_description_1h3i4_22",eh={root:roe,icon:ooe,content:aoe,description:ioe},coe=({orgId:t})=>{const{trackUiInteraction:s}=k(),n=Ne(),{isInstalled:r,isLoading:o}=$r(),[a,i]=xs(Me.ApiKeysGithubCard,"isDismissed",!1);return o?null:!a&&!r&&e.jsxs("div",{className:eh.root,children:[e.jsxs("div",{className:eh.content,children:[e.jsx("div",{className:eh.icon,children:e.jsx(L,{name:"github",size:28})}),e.jsxs("div",{className:eh.description,children:[e.jsx(z,{level:5,children:Hg.title}),e.jsx(T,{appearance:"secondary",size:"s",children:Hg.description})]}),e.jsx(kr,{iconName:"close",iconSize:12,onClick:()=>{s(t?"org_api_keys_github_card_dismissed":"user_api_keys_github_card_dismissed"),i(!0)},appearance:"default"})]}),e.jsx(P,{appearance:"secondary",size:"s",onClick:()=>{s(t?"org_api_keys_github_card_connect_clicked":"user_api_keys_github_card_connect_clicked"),n.push(t?`${F(C.OrgIntegrations,{orgId:t})}#github`:`${C.UserIntegrations}#github`)},children:Hg.button})]})},Js={nameHeader:"Key name",projectHeader:"Project",createdHeader:"Created",lastUsedHeader:"Last used",revokeMenuItem:"Revoke key",revokeConfirmationTitle:"Revoke API key",revokeConfirmationButton:"Revoke",revokeConfirmationText1:"Are you sure you want revoke this API key?",revokeConfirmationText2:"Once revoked, any requests using this key will be denied. This action cannot be undone.",revokeSuccess:t=>`API key ${t} was successfully deleted`,revokeDisabled:"Additional permissions are required to revoke an API key."},loe="_list_18e8g_1",doe="_table_18e8g_7",uoe="_column_18e8g_15",hoe="_createdByCell_18e8g_22",poe="_revokeAlert_18e8g_28",lr={list:loe,table:doe,column:uoe,createdByCell:hoe,revokeAlert:poe},moe=({apiKey:t,isOrgContext:s,isOrgAdmin:n,projectNamesById:r})=>{const{trackUiInteraction:o}=k(),{confirm:a}=Oe(),i=noe(),c=m.useCallback(async()=>{if(!await a({appearance:"error",header:Js.revokeConfirmationTitle,text:e.jsx(Q,{appearance:"warning",children:e.jsxs("div",{className:lr.revokeAlert,children:[e.jsx(T,{appearance:"secondary",bold:!0,children:Js.revokeConfirmationText1}),e.jsx(T,{appearance:"secondary",children:Js.revokeConfirmationText2})]})}),confirmButtonText:Js.revokeConfirmationButton})){o(s?"org_api_keys_revoke_dismissed":"user_api_keys_revoke_dismissed");return}o(s?"org_api_keys_revoke_confirmed":"user_api_keys_revoke_confirmed");try{await i(t.id),re(Js.revokeSuccess(t.name))}catch(h){H(h)}},[a,t,i,o,s]),l=m.useMemo(()=>[{items:[{label:Js.revokeMenuItem,onClick(){o(s?"org_api_keys_revoke_clicked":"user_api_keys_revoke_clicked"),c()}}]}],[c,o,s]),d=t.project_id!==void 0;return e.jsxs("div",{className:lr.table,children:[e.jsxs("div",{className:lr.column,style:{width:d?"27%":"45%"},children:[e.jsx(T,{appearance:"secondary",children:Js.nameHeader}),e.jsx(sc,{content:t.name,maxWidth:"85%"})]}),d&&e.jsxs("div",{className:lr.column,style:{width:"20%"},children:[e.jsx(T,{appearance:"secondary",children:Js.projectHeader}),e.jsx(sc,{content:r==null?void 0:r[t.project_id],maxWidth:"85%"})]}),e.jsxs("div",{className:lr.column,style:{width:d?"23%":"25%"},children:[e.jsx(T,{appearance:"secondary",children:Js.createdHeader}),e.jsx(Z,{content:`By ${t.created_by.name} on ${le(t.created_at)}`,children:e.jsxs("div",{className:lr.createdByCell,children:[e.jsx(Hd,{size:"s",name:t.created_by.name,image:t.created_by.image}),e.jsx("div",{children:le(t.created_at,ve.Date)})]})})]}),e.jsxs("div",{className:lr.column,style:{width:d?"23%":"25%"},children:[e.jsx(T,{appearance:"secondary",children:Js.lastUsedHeader}),e.jsx("div",{children:t.last_used_at?e.jsx(Z,{content:le(t.last_used_at),children:e.jsx("div",{children:le(t.last_used_at,ve.Date)})}):"never"})]}),e.jsx("div",{className:lr.column,children:e.jsx(Dt,{sections:l,children:e.jsx(Z,{content:Js.revokeDisabled,disabled:!s||n,children:e.jsx("div",{children:e.jsx(Zt,{"aria-label":`Actions for api key ${t.name}`,isDisabled:s&&!n})})})})})]})},Vg=({apiKeys:t,isLoading:s,isOrgContext:n,isOrgAdmin:r,projectNamesById:o,...a})=>s||t===void 0?e.jsx(e.Fragment,{children:br(3).map(i=>e.jsx($,{width:"100%",height:44},i))}):e.jsx("div",{className:lr.list,...a,children:t.map(i=>e.jsx(moe,{apiKey:i,isOrgContext:n,isOrgAdmin:r,projectNamesById:o},i.id))}),zr={modalTitle:"Create new API key",keyScopeLabel:"Key scope",orgScopeLabel:"Org-wide",projectScopeLabel:"Project-scoped",projectLabel:"Project",keyNameLabel:"Key name",submitButton:"Create",projectScopeDisabledMessage:"Your organization has no projects"},goe="_radios_13x2k_1",_oe={radios:goe},vv=64,foe=({onSuccess:t,onRequestClose:s,isOrgContext:n,orgHasProjects:r})=>{var u;const o=soe(),a=xe({defaultValues:{key_scope:n?"org":"user",name:""}}),{field:i}=Op({name:"key_scope",control:a.control}),[c,l]=m.useState(),d=async h=>{try{const p=await o({key_name:h.name,project_id:i.value==="project"?c==null?void 0:c.value:void 0});t(p.key)}catch(p){H(p)}};return e.jsxs(ws,{modalProps:{isOpen:!0,title:zr.modalTitle,onRequestClose:s},providerProps:a,onSubmit:d,children:[e.jsxs(be,{gaps:!0,children:[n&&e.jsx(R,{label:zr.keyScopeLabel,children:e.jsxs("div",{className:_oe.radios,children:[e.jsx(Mn,{...i,value:"org",checked:i.value==="org",children:zr.orgScopeLabel}),e.jsx(Z,{content:zr.projectScopeDisabledMessage,disabled:r,children:e.jsx("div",{children:e.jsx(Mn,{...i,value:"project",checked:i.value==="project",disabled:!r,children:zr.projectScopeLabel})})})]})}),i.value==="project"&&e.jsx(R,{label:zr.projectLabel,children:e.jsx(cx,{value:c,onChange:h=>{h&&l(h)}})}),e.jsx(R,{label:zr.keyNameLabel,error:(u=a.formState.errors.name)==null?void 0:u.message,children:e.jsx(ne,{autoFocus:!0,...a.register("name",{required:{value:!0,message:"This field is required"},maxLength:{value:vv,message:`Name should be less than ${vv} characters`},trimWhitespace:!0}),"data-qa":"api_key_form_field_name"})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{"data-qa":"api_key_form_submit",children:zr.submitButton})]})]})},th={modalTitle:"API key successfully created",alert:"Copy your new API token and store it securely. You will not be able to view or copy it again.",keyLabel:"API token",closeButton:"Copy and close"},boe=({apiKeyToken:t,onRequestClose:s})=>e.jsxs(Qe,{isOpen:!0,title:th.modalTitle,onRequestClose:s,children:[e.jsxs(be,{gaps:!0,children:[e.jsx(Q,{appearance:"warning",children:th.alert}),e.jsx(R,{label:th.keyLabel,children:e.jsx(Un,{preserveSpaceUnderButtons:!0,hideOverflow:!0,"data-qa":"api_key_created_value",children:t})})]}),e.jsx(ge,{children:e.jsx(ls,{onClick:()=>jT(t),children:th.closeButton})})]}),Hr={title:t=>t?"API keys":"Personal API keys",personalDescription:e.jsxs(e.Fragment,{children:["These are your personal API keys. As a reminder, never share your keys with unauthorized users or expose it in client-side code. Learn about"," ",e.jsx(A,{href:"https://neon.tech/docs/manage/api-keys",openInNewTab:!0,children:"API key scopes"}),"."]}),orgDescription:(t,s)=>`${s?`As an admin of ${t}, you control your organization's API keys. `:""}These global keys provide admin-level access to all organization resources, including projects, members, and billing information.`,createButton:"Create new API key",createDisabledTooltip:"Additional permissions are required to create an API key.",orgListHeader:"Org-wide",projectScopedListHeader:"Project-scoped",personalKeysLinkLabel:"Click here to view your account specific API keys ->"},xoe="_apiKeyListHeader_1lv05_1",wv={apiKeyListHeader:xoe},UI=()=>{const{trackUiInteraction:t}=k(),{org:s,isLoading:n}=Y(),{data:r,isFetching:o}=toe(),a=s!==void 0,{isOrgAdmin:i}=wt(),{data:c}=rt(),l=Ar(c),d=Ve(De.CreateApiKey),u=Ve(De.CreateApiKeySuccess,!1),[h,p]=m.useState(),{data:g}=vs(),_=m.useMemo(()=>Object.fromEntries((g==null?void 0:g.map(f=>[f.id,f.name]))??[]),[g]),[x,j]=rC(r,f=>"project_id"in f&&f.project_id!==void 0);if(n)return e.jsx(pe,{});const b={isLoading:o,isOrgContext:a,isOrgAdmin:i};return e.jsxs(e.Fragment,{children:[d.isModalOpen&&e.jsx(foe,{isOrgContext:a,orgHasProjects:(g==null?void 0:g.length)!==0,onSuccess:f=>{t(a?"org_api_keys_create_submitted":"user_api_keys_create_submitted"),p(f),d.closeModal(),u.openModal()},onRequestClose:()=>{t(a?"org_api_keys_create_dismissed":"user_api_keys_create_dismissed"),d.closeModal()}}),u.isModalOpen&&h!==void 0&&e.jsx(boe,{apiKeyToken:h,onRequestClose:()=>{u.closeModal()}}),e.jsx(Ae,{id:"api-keys",children:e.jsxs(Pe,{children:[e.jsx(fe,{actions:e.jsx(Z,{content:Hr.createDisabledTooltip,disabled:!a||i,children:e.jsx("div",{children:e.jsx(P,{appearance:"primary",onClick:()=>{d.openModal(),t(a?"org_api_keys_create_clicked":"user_api_keys_create_clicked")},size:"s",disabled:a&&!i,"data-qa":"api_key_create_button",children:Hr.createButton})})}),children:Hr.title(a)}),e.jsx(T,{appearance:"secondary",children:s===void 0?Hr.personalDescription:Hr.orgDescription(s.name,i)}),a?e.jsxs(e.Fragment,{children:[j.length>0&&e.jsxs("div",{children:[e.jsx(fe,{level:6,className:wv.apiKeyListHeader,children:Hr.orgListHeader}),e.jsx(Vg,{apiKeys:j,...b,"data-qa":"api_key_list_org_scope"})]}),x.length>0&&e.jsxs("div",{children:[e.jsx(fe,{level:6,className:wv.apiKeyListHeader,children:Hr.projectScopedListHeader}),e.jsx(Vg,{apiKeys:x,...b,projectNamesById:_,"data-qa":"api_key_list_project_scope"})]})]}):e.jsx(Vg,{apiKeys:r,...b,"data-qa":"api_key_list"}),(a||!l)&&e.jsx(coe,{orgId:s==null?void 0:s.id}),a&&e.jsx(A,{href:`${C.UserSettings}#api-keys`,children:Hr.personalKeysLinkLabel})]})})]})},joe=async t=>(await q.getOrgDeletionChecklist(t)).data,yoe=t=>{const{data:s,isLoading:n}=st({queryKey:["org_deletion_checklist",t],queryFn:()=>joe(t),select:r=>r.conditions.map(o=>({name:o.name,satisfied:o.expected===o.actual,expected:o.expected,actual:o.actual}))});return{isLoading:n,conditions:s}},bl={title:"Delete organization",confirmationButtonText:"Delete organization",disclaimer:(t,s)=>e.jsxs(T,{children:["This action ",e.jsx("strong",{children:"cannot"})," be undone. It will permanently delete"," ",e.jsx("strong",{children:s}),". You might want to"," ",e.jsx(A,{href:F(C.OrgBilling,{orgId:t}),children:"download"})," ","your invoices before performing this action."]}),orgNameLabel:t=>e.jsxs(T,{children:["Type ",e.jsx("strong",{children:t})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},voe=({orgId:t,orgName:s,onSuccess:n,onRequestClose:r})=>{var c;const o=xe(),a=mA(),i=async l=>{try{await a(t),re(`Organization ${s} successfully deleted`),n==null||n(l)}catch(d){H(d)}};return e.jsxs(ws,{providerProps:o,onSubmit:i,modalProps:{title:bl.title,isOpen:!0,onRequestClose:r,width:600},children:[e.jsxs(be,{gaps:!0,children:[e.jsx(Q,{appearance:"warning",children:bl.disclaimer(t,s)}),e.jsx(R,{label:bl.orgNameLabel(s),error:(c=o.formState.errors.orgName)==null?void 0:c.message,children:e.jsx(ne,{...o.register("orgName",{validate:l=>l===s||bl.validationText})})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{appearance:"error","data-qa":"org_delete_confirmation_submit_button",children:bl.confirmationButtonText})]})]})},woe={project_count:(t,s,n)=>e.jsxs(e.Fragment,{children:["Delete its"," ",s.satisfied?"projects":e.jsx(A,{href:F(C.OrgProjectsList,{orgId:t}),onClick:n,children:"projects"})]})},ia={title:"Delete organization",description:"Before deleting this organization you need to:",disabledMessage:"You need additional permissions to delete an organization.",deleteButtonText:"Delete organization",conditionText:(t,s,n)=>woe[s.name](t,s,n),managedBy:{azure:"This organization is managed by Azure and can be deleted only from Azure portal.",vercel:"To manage your Neon subscription, go to the Neon Postgres integration in Vercel.",default:"This organization is managed externally and cannot be deleted from Console."}},Soe="_conditions_e3kns_1",Coe="_condition_e3kns_1",koe="_submitWrapper_e3kns_15",Wg={conditions:Soe,condition:Coe,submitWrapper:koe},Ioe={project_count:"org_settings_delete_project_count_link_clicked"},Poe=({message:t})=>e.jsx(Ae,{children:e.jsxs(Pe,{children:[e.jsx(fe,{children:ia.title}),e.jsx(Q,{children:t})]})}),Toe=({orgId:t,orgName:s,managedBy:n})=>{const r=Ve(De.DeleteOrg),{isOrgAdmin:o}=wt(),a=xe(),i=()=>{r.openModal()},{trackUiInteraction:c}=k(),l=Ne(),{isLoading:d,conditions:u}=yoe(t);if(n!=="console"){const p=ia.managedBy[n];return e.jsx(Poe,{message:p})}if(d||!u)return null;const h=u.every(p=>p.satisfied);return e.jsxs(Ae,{id:"delete",children:[r.isModalOpen&&e.jsx(voe,{orgId:t,orgName:s,onSuccess:()=>{c("org_settings_delete_modal_confirmed"),r.closeModal(),l.push(C.ProjectsList)},onRequestClose:()=>{c("org_settings_delete_modal_dismissed"),r.closeModal()}}),e.jsxs(Pe,{children:[e.jsx(fe,{children:ia.title}),e.jsxs(It,{gaps:!0,providerProps:a,onSubmit:i,children:[e.jsx(T,{appearance:"secondary",children:ia.description}),e.jsx("div",{className:Wg.conditions,children:u.map(p=>e.jsxs("div",{className:Wg.condition,children:[e.jsx(L,{name:p.satisfied?"success":"done",size:20}),e.jsx(T,{children:ia.conditionText(t,p,()=>c(Ioe[p.name]))})]},p.name))}),e.jsx(Ss,{children:e.jsx(Z,{content:ia.disabledMessage,disabled:o,children:e.jsx("div",{className:Wg.submitWrapper,children:e.jsx(_e,{appearance:"error",disabled:!h||!o,onClick:()=>{c("org_settings_delete_submitted")},"data-qa":"org_delete_form_submit_button",children:ia.deleteButtonText})})})})]})]})]})},Noe="_channel_40sxr_1",Aoe="_joined_40sxr_5",Sv={channel:Noe,joined:Aoe},Vr={title:"Early access",subtitle:t=>e.jsxs(e.Fragment,{children:["Join the early access program to preview upcoming features for"," ",e.jsx("b",{children:t}),"'s projects. You can opt out anytime."]}),benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:t=>e.jsxs("div",{className:Sv.joined,children:[e.jsxs(T,{children:["Thank you for being an early access member! ",e.jsx("b",{children:t}),"'s projects have exclusive access to upcoming features."]}),e.jsxs(T,{children:["Get support and share feedback in our"," ",e.jsx(A,{href:Qh,openInNewTab:!0,children:"Discord community"}),"."]}),e.jsx(T,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:e.jsxs(e.Fragment,{children:["Share feedback directly with our team. Join our"," ",e.jsx(A,{href:Qh,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",e.jsx("b",{className:Sv.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the Early Access Program!",submitJoin:"Join early access",disabled:"Additional permissions are required to change the early access setting."},Eoe="_submitWrapper_1a7lt_1",$oe={submitWrapper:Eoe},Ooe=({orgId:t,orgName:s})=>{const n=ie(),r=Ls(),o=L1("beta_program"),{isOrgAdmin:a}=wt(),{trackUiInteraction:i}=k(),c=xe(),l=m.useCallback(async()=>{try{i("org_settings_early_access_joined"),await q.joinOrgEarlyAccess(t),re(Vr.successJoin),r(zh.util.invalidateTags(["OrgLimits"])),await n.invalidateQueries({queryKey:gA(t)})}catch(d){H(d)}},[i,t,r,n]);return e.jsx(Ae,{id:"early-access",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:Vr.title}),e.jsx(It,{providerProps:c,onSubmit:l,gaps:!0,children:o?e.jsx("div",{children:Vr.alreadyIn(s)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(z,{level:5,children:Vr.subtitle(s)}),e.jsx("ul",{children:Vr.benefits.map(d=>e.jsx("li",{children:d},d))})]}),e.jsx("div",{children:e.jsx(T,{children:Vr.joinDiscord})}),e.jsx(Ss,{children:e.jsx(Z,{content:Vr.disabled,disabled:a,children:e.jsx("div",{className:$oe.submitWrapper,children:e.jsx(_e,{disabled:!a,children:Vr.submitJoin})})})})]})})]})})},Ko={title:"General information",infoId:"For billing purposes you can use the organization ID below.",nameLabel:"Organization name",idLabel:"Organization ID",submitText:"Save",updateSuccess:"Successfully updated organization settings",nameDisabledMessage:"You need additional permissions to rename an organization."},Cv=64,Roe=({orgId:t,orgName:s})=>{var i;const n=_A(),{isOrgAdmin:r}=wt(),o=xe({defaultValues:{name:s}}),a=m.useCallback(async c=>{try{await n({orgId:t,data:c}),re(Ko.updateSuccess)}catch(l){H(l)}},[t,n]);return e.jsx(Ae,{id:"general",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:Ko.title}),e.jsxs(It,{gaps:!0,providerProps:o,onSubmit:a,children:[e.jsx(T,{appearance:"secondary",children:Ko.infoId}),e.jsxs(Sd,{children:[e.jsx(R,{label:Ko.nameLabel,error:(i=o.formState.errors.name)==null?void 0:i.message,children:e.jsx(Z,{content:Ko.nameDisabledMessage,disabled:r,children:e.jsx("div",{children:e.jsx(ne,{...o.register("name",{required:{message:"This field is required",value:!0},disabled:!r,maxLength:{value:Cv,message:`Name should be less than ${Cv} characters`},trimWhitespace:!0})})})})}),e.jsx(R,{label:Ko.idLabel,children:e.jsx(Un,{children:t})})]}),e.jsx(Ss,{children:e.jsx(_e,{disabled:!r,"data-qa":"org_name_form_submit_button",children:Ko.submitText})})]})]})})},Ft={title:"Private Networking",includedInPlansBadge:"Business & Enterprise plans only",description:"Route traffic from your app to Neon through a protected AWS internal network.",prerequisites:{title:"Prerequisites",sameRegion:"The client application must be deployed in the same AWS region as the Neon database.",dedicatedVPCEndpoint:"A dedicated VPC endpoint to connect the Virtual Private Cloud (VPC) where the client application is deployed.",dedicatedVPCEndpointDocsLink:"View setup instructions",adminPrivileges:"Setting up Private Networking on Neon requires admin privileges"},form:{requiredField:"This field is required",eligiblePlan:{setupViaCliButton:"Setup using CLI",getSupportButton:"Get support"},ineligiblePlan:{messageField:{label:"About your use case",placeholder:"Private Networking is included with Business and Enterprise plans, to trial it on your current plan, please share details about your current use case with our Sales team."},submitButton:"Request trial"},submitSuccess:t=>e.jsxs(e.Fragment,{children:["We will reach out on ",e.jsx(ke,{children:t})," with next steps."]})}},Boe="_header_mhpba_1",Loe="_prerequisites_mhpba_7",Doe="_icon_mhpba_19",Moe="_eligibleButtons_mhpba_26",gp={header:Boe,prerequisites:Loe,icon:Doe,eligibleButtons:Moe},Gg=({children:t})=>e.jsxs("li",{children:[e.jsx(L,{size:16,name:"check_flat",className:gp.icon}),t]}),Uoe=()=>{const{isOrgAdmin:t}=wt();return e.jsxs("ul",{className:gp.prerequisites,children:[e.jsx(Gg,{children:Ft.prerequisites.sameRegion}),e.jsxs(Gg,{children:[Ft.prerequisites.dedicatedVPCEndpoint,e.jsx("div",{children:e.jsx(A,{href:Yh,children:Ft.prerequisites.dedicatedVPCEndpointDocsLink})})]}),t?null:e.jsx(Gg,{children:Ft.prerequisites.adminPrivileges})]})},Foe=()=>{const{isOrgAdmin:t}=wt(),{data:s}=rt(),{orgId:n,org:r}=Y(),{max_vpc_endpoints_per_region:o}=kp(),{trackUiInteraction:a}=k(),{isModalOpen:i,openModal:c,closeModal:l}=Ve(De.Support),d=xe(),{submitPrivateNetworkingBetaForm:u}=Ra(),h=o>0;return s?e.jsx(Ae,{id:"private-networking",children:e.jsxs(Pe,{children:[e.jsxs(fe,{className:gp.header,children:[Ft.title,!h&&e.jsx(he,{appearance:"neon",children:Ft.includedInPlansBadge})]}),e.jsxs(It,{gaps:!0,providerProps:d,onSubmit:async({message:p})=>{try{await u({orgId:n,orgName:r==null?void 0:r.name,email:s.email,message:p}),Te(e.jsx(Fe,{children:Ft.form.submitSuccess(s.email)})),d.reset({message:""})}catch(g){H(g)}},children:[e.jsx(T,{as:"p",appearance:"secondary",children:Ft.description}),e.jsx(z,{level:3,size:"h4",children:Ft.prerequisites.title}),e.jsx(Uoe,{}),e.jsx(So,{onRequestClose:()=>{a("support_form_dismissed"),l()},isOpen:i}),!h&&e.jsx(me,{control:d.control,name:"message",rules:{required:{message:Ft.form.requiredField,value:!0},minLength:{message:Ft.form.requiredField,value:1}},render:({field:p,fieldState:g})=>{var _;return e.jsx(R,{label:Ft.form.ineligiblePlan.messageField.label,error:(_=g.error)==null?void 0:_.message,children:e.jsx(La,{...p,placeholder:Ft.form.ineligiblePlan.messageField.placeholder})})}}),e.jsx(Ss,{children:h?e.jsxs("div",{className:gp.eligibleButtons,children:[t?e.jsx(P,{appearance:"secondary",as:We,target:"_blank",icon:"external_link",iconSide:"right",href:Yh,children:Ft.form.eligiblePlan.setupViaCliButton}):null,e.jsx(P,{onClick:c,children:Ft.form.eligiblePlan.getSupportButton})]}):e.jsx(_e,{children:Ft.form.ineligiblePlan.submitButton})})]})]})}):e.jsx(pe,{})},xl={orgAdmin:"You must be an admin to transfer organization projects",vercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",noOrgs:"Project cannot be transferred because you are not a member of any valid target organizations",sharedProjects:"Shared projects cannot be transferred",integrations:"Unable to transfer due to existing integrations. Please remove them first, then reinstall after the transfer."},qoe=({isOwnProject:t,isMyOrgProject:s,isOrgAdmin:n,hasOrgDestinations:r,isVercelOrg:o,hasIntegrations:a})=>{if(a)return xl.integrations;if(!r)return xl.noOrgs;if(s)return n?o?xl.vercelOrg:void 0:xl.orgAdmin;if(!t)return xl.sharedProjects},FI=t=>{const{data:s,isLoading:n}=Nr();if(t===void 0||n)return{isLoading:!0,orgs:void 0};const r=t[0].org_id,o=t.some(i=>{var c;return(c=i==null?void 0:i.settings)==null?void 0:c.hipaa});return{isLoading:!1,orgs:s==null?void 0:s.filter(i=>i.id!==r&&(!!i.allow_hipaa_projects||!o))}},qI=()=>{const{project:t,isOwnProject:s}=O(),{data:n}=Nr(),{orgs:r,isLoading:o}=FI(t?[t]:void 0),{isVercelOrg:a,isLoading:i}=Y(),{isOrgAdmin:c,isLoading:l}=wt(),{data:d,isLoading:u}=Yd();if(i||l||u||o)return{enabled:!1,isLoading:!0,disabledMessage:void 0};const h=!!(t!=null&&t.org_id&&(n!=null&&n.some(j=>j.id===(t==null?void 0:t.org_id)))),g=((r==null?void 0:r.length)??0)>0,_=(d==null?void 0:d.vercel)!==void 0||(d==null?void 0:d.github)!==void 0,x=qoe({isOwnProject:s,isMyOrgProject:h,isOrgAdmin:c,hasOrgDestinations:g,isVercelOrg:a,hasIntegrations:_});return{enabled:!x,isLoading:!1,disabledMessage:x}},Wr={title:t=>`Transfer ${$s("project",t)}`,descriptionSingle:t=>e.jsxs(e.Fragment,{children:["Transfer ",e.jsx("b",{children:t})," to"]}),descriptionMultiple:t=>`Transfer ${t} projects to`,tableColumnLabel:"Organization",confirmationButtonText:"Transfer",successSingle:(t,s)=>e.jsxs(e.Fragment,{children:["Project ",e.jsx("b",{children:t})," was successfully moved to ",e.jsx("b",{children:s}),". Existing members can now access the project through the org, and are no longer listed as collaborators."]}),successMultiple:(t,s)=>e.jsxs(e.Fragment,{children:[t," projects were successfully moved to ",e.jsx("b",{children:s}),". Existing members can now access the projects through the org, and are no longer listed as collaborators."]}),noOrgs:t=>`${$s("Project",t)} cannot be transferred because you are not a member of any valid target organizations`},zI=({projects:t,onRequestClose:s,onSuccess:n,disabledMessage:r,isLoading:o})=>{const{orgs:a,isLoading:i}=FI(t);let c=r;!c&&(a==null?void 0:a.length)===0&&(c=Wr.noOrgs(t.length));const l=xe({defaultValues:{targetOrgId:void 0}}),d=fA(),u=m.useCallback(async({targetOrgId:g})=>{const _=a.find(x=>x.id===g).name;try{await d({fromOrgId:t[0].org_id,projectIds:t.map(j=>j.id),toOrgId:g});const x=t.length===1?Wr.successSingle(t[0].name,_):Wr.successMultiple(t.length,_);re(x),n(g)}catch(x){vM(x)}},[n,a,t,d]),{field:h}=Op({name:"targetOrgId",control:l.control}),p=m.useMemo(()=>[{key:"id",label:Wr.tableColumnLabel,renderValue:({id:g,name:_})=>e.jsx("div",{children:e.jsx(Mn,{name:h.name,checked:h.value===g,onChange:()=>h.onChange(g),children:_})})}],[h]);return e.jsx(ws,{providerProps:l,onSubmit:u,modalProps:{isOpen:!0,title:Wr.title(t.length),onRequestClose:s},children:o||i?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx(be,{gaps:!0,children:c?e.jsx(T,{appearance:"secondary",children:c}):e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"secondary",children:t.length===1?Wr.descriptionSingle(t[0].name):Wr.descriptionMultiple(t.length)}),e.jsx(Fn,{cols:p,isLoading:a===void 0,data:a===void 0?[]:a,maxHeight:350})]})}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{"data-qa":"project_transfer_confirmation_submit_button",disabled:a===void 0||h.value===void 0||!!c,children:Wr.confirmationButtonText})]})]})})},sh={title:"Transfer projects",description:"Select projects to transfer",confirmationButtonText:"Next",limitReached:t=>`You have at least ${t} projects, please use the Neon API or contact our support team for help.`},kv=200,zoe=({projects:t,onRequestClose:s,onSuccess:n})=>{const r=xe({defaultValues:{projectIds:[]}}),o=r.watch("projectIds"),a=o.length===(t==null?void 0:t.length),i=m.useCallback(({projectIds:u})=>{n(u)},[n]),c=m.useMemo(()=>[{key:"id",label:e.jsx(Ir,{checked:a,onChange:u=>{u.target.checked?r.setValue("projectIds",t.map(h=>h.id)):r.setValue("projectIds",[])},children:"Select all"}),renderValue:({id:u,name:h})=>e.jsx("div",{children:e.jsx(Ir,{value:u,...r.register("projectIds"),children:h})})}],[r,a,t]),l=t.length>=kv,d=o.length===0||l;return e.jsxs(ws,{providerProps:r,onSubmit:i,modalProps:{isOpen:!0,title:sh.title,onRequestClose:s},children:[e.jsx(be,{gaps:!0,children:l?e.jsx(Q,{appearance:"error",children:sh.limitReached(kv)}):e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"secondary",children:sh.description}),e.jsx(Fn,{cols:c,data:t,maxHeight:350})]})}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{"data-qa":"projects_transfer_confirmation_submit_button",disabled:d,children:sh.confirmationButtonText})]})]})},_a={title:"Transfer projects",description:"You can only transfer projects to another organization you are a member of. Transfers are instant, with no downtime.",disabledMessageProjectCount:"The organization has no projects",disabledMessagePermissions:"You need additional permissions to transfer projects from this organization",disabledMessageNoDestinationOrgs:"Projects cannot be transferred because you are not a member of any other organizations",disabledMessageVercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",transferButtonText:"Transfer projects"},Hoe="_buttonWrapper_nih2t_1",Voe={buttonWrapper:Hoe},Woe=(t,s,n,r)=>{if(r)return _a.disabledMessageVercelOrg;if(t===0)return _a.disabledMessageProjectCount;if(!s)return _a.disabledMessagePermissions;if(n===0)return _a.disabledMessageNoDestinationOrgs},Goe=()=>{const{trackUiInteraction:t}=k(),s=Ne(),n=Ve(De.TransferProjectsSelectProjects),r=Ve(De.TransferProjectsSelectOrg,!1),{isVercelOrg:o}=Y(),{isOrgAdmin:a}=wt(),{data:i,isLoading:c}=vs(),l=(i==null?void 0:i.length)??0,{data:d}=Nr(),u=((d==null?void 0:d.length)??1)-1,h=Woe(l,a,u,o),p=h===void 0,[g,_]=m.useState([]);return e.jsxs(Ae,{id:"transfer",children:[!c&&i&&n.isModalOpen&&e.jsx(zoe,{projects:i,onRequestClose:()=>{n.closeModal(),t("transfer_projects_modal_dismissed")},onSuccess:x=>{const j=i.filter(({id:b})=>x.includes(b));_(j),n.closeModal(),r.openModal()}}),r.isModalOpen&&e.jsx(zI,{projects:g,onRequestClose:()=>{r.closeModal(),t("transfer_projects_modal_dismissed")},onSuccess:x=>{r.closeModal(),t("transfer_projects_modal_confirmed"),s.push(F(C.OrgProjectsList,{orgId:x}))}}),e.jsxs(Pe,{children:[e.jsx(fe,{children:_a.title}),e.jsx(T,{appearance:"secondary",children:_a.description}),e.jsx(Ss,{children:e.jsx(Z,{content:h,disabled:p,children:e.jsx("div",{className:Voe.buttonWrapper,children:e.jsx(P,{disabled:!p,onClick:()=>{t("org_settings_transfer_submitted"),n.openModal()},"data-qa":"org_settings_transfer_form_submit_button",children:_a.transferButtonText})})})})]})]})},Koe=()=>{const{orgId:t,org:s,isVercelOrg:n,isLoading:r}=Y();return r||!t||!s?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx(Roe,{orgId:s.id,orgName:s.name}),e.jsx(UI,{}),e.jsx(Ooe,{orgId:s.id,orgName:s.name}),e.jsx(Foe,{}),!n&&e.jsx(Goe,{}),e.jsx(Toe,{orgId:t,orgName:s.name,managedBy:s.managed_by})]})},HI=({onChange:t,timeout:s=500,minLength:n=3,value:r,...o})=>{const[a,i]=m.useState(r||"");m.useEffect(()=>{r!==void 0&&i(r)},[r]);const c=m.useMemo(()=>D1(s,t),[t,s]),l=m.useCallback(h=>{i(h.target.value)},[]);m.useEffect(()=>()=>c==null?void 0:c.cancel(),[c]);const d=m.useMemo(()=>a.trim().toLowerCase(),[a]),u=m.useCallback(h=>{h.key==="Enter"&&(c==null||c(d))},[c,d]);return m.useLayoutEffect(()=>{c==null||c(d.length<n?"":d)},[d,n,c]),e.jsx(ne,{placeholder:"Search...",...o,value:a,onChange:l,onKeyDown:u})},Qoe=({branch:t,onSuccess:s,onFail:n,children:r})=>{const o=ie(),a=zn({defaultValues:{name:t.name},shouldUnregister:!0}),i=l=>q.updateProjectBranch(t.project_id,t.id,{branch:{name:l.name}}).then(({data:d})=>{o.invalidateQueries({queryKey:bA(t.project_id,t.id)}),o.invalidateQueries({queryKey:ob({projectId:t.project_id})}),s&&s(d.branch)}).catch(d=>{n&&n(d)});return e.jsx(us,{...a,children:e.jsx(Lt,{id:"branch_rename_form",onSubmit:a.handleSubmit(i),children:r})})},Yoe=({branch:t,isOpen:s,onSuccess:n,onClose:r})=>e.jsx(Qe,{title:"Rename the branch",isOpen:s,onRequestClose:r,children:e.jsxs(Qoe,{branch:t,onSuccess:o=>{n==null||n(o)},onFail:H,children:[e.jsx(be,{children:e.jsx(vR,{})}),e.jsxs(ge,{children:[e.jsx(ls,{appearance:"secondary"}),e.jsx(_e,{disablePristine:!0,children:"Save"})]})]})}),yi={menuItemLabel:"Delete",defaultBranchTooltip:"You can't delete the default branch. To delete this branch, set another branch as the default.",protectedBranchTooltip:"You can't delete protected branches. To delete this branch, change its status to unprotected.",confirm:{header:"Delete the branch?",confirmButtonText:"Delete",warning:t=>e.jsxs(e.Fragment,{children:["This will permanently delete the branch ",e.jsx("code",{children:t}),". Are you sure you want proceed?"]})}},Joe=()=>{const{confirm:t}=Oe(),s=m.useCallback(async(n,r)=>{if(await t({header:yi.confirm.header,appearance:"error",confirmButtonText:yi.confirm.confirmButtonText,text:e.jsx(Q,{appearance:"error",children:yi.confirm.warning(n.name)})}))try{await q.deleteProjectBranch(n.project_id,n.id),r==null||r()}catch(a){H(a)}},[t]);return m.useCallback((n,r)=>{const o=n.default||n.protected;let a="";return n.default?a=yi.defaultBranchTooltip:n.protected&&(a=yi.protectedBranchTooltip),{label:yi.menuItemLabel,disabled:o,tooltip:a,icon:"trash",onClick:()=>s(n,r)}},[s])},bf={menuItemLabel:"Reset from parent",tooltipContent:t=>t.default?"You can't reset the default branch. Set another branch as default, then try again.":t.protected?"You can't reset protected branches. Unprotect this branch first, then try again.":t.parent_id?null:"You can't reset a root branch. It has no parent."},Zoe=()=>{const t=M1(),{trackUiInteraction:s}=k();return m.useCallback((n,r)=>{const o=bf.tooltipContent(n),a=o!==null;return{label:bf.menuItemLabel,disabled:a,icon:"branch_reset",tooltip:o??void 0,onClick:()=>{s("branch_reset_to_parent_reset_clicked"),t(n,r)}}},[t,s])},En={setAsDefault:{menuItemLabel:"Set as default",confirm:{header:"Set as default",text:t=>e.jsxs(e.Fragment,{children:[e.jsx("code",{children:t})," will be set as your default branch."]}),helpText:"The compute endpoint associated with the default branch remains accessible if you exceed project limits, ensuring uninterrupted access to data on the default branch.",confirmButtonText:"Set as default"}},protected:{menuItemLabel:t=>`Set as ${t?"unprotected":"protected"}`,confirm:{header:t=>`Set as ${t?"unprotected":"protected"}`,confirmButtonText:t=>`Set as ${t?"unprotected":"protected"}`},successToast:t=>e.jsxs(e.Fragment,{children:[e.jsx("code",{children:t.name})," is now set as"," ",t.protected?"a protected":"an unprotected"," branch."]})},schemaDiff:{menuItemLabel:"Compare to parent"}},Xoe=t=>m.useCallback(s=>{if(s.parent_id)return{label:En.schemaDiff.menuItemLabel,icon:"schema",onClick:()=>{t(s)}}},[t]),eae="_mainSection_scj2l_1",tae="_secondarySection_scj2l_9",Iv={mainSection:eae,secondarySection:tae},sae=()=>{const{confirm:t}=Oe(),s=m.useCallback(async(n,r)=>{if(await t({header:En.setAsDefault.confirm.header,text:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Iv.mainSection,children:En.setAsDefault.confirm.text(n.name)}),e.jsx("div",{className:Iv.secondarySection,children:En.setAsDefault.confirm.helpText})]}),confirmButtonText:En.setAsDefault.confirm.confirmButtonText,hint:e.jsxs("span",{children:["See"," ",e.jsx(A,{href:"https://neon.tech/docs/manage/branches",openInNewTab:!0,children:"Default branch"})," ","for more information."]})}))try{const{data:a}=await q.setDefaultProjectBranch(n.project_id,n.id);r==null||r(a.branch)}catch(a){H(a)}},[t]);return m.useCallback((n,r)=>({label:En.setAsDefault.menuItemLabel,disabled:n.default,icon:"check_hex",onClick:()=>s(n,r)}),[s])},nae={unarchiveAlert:"This branch is archived. Setting it to protected will unarchive it."},rae="_mainSection_rr4y4_1",oae="_listHeading_rr4y4_17",aae="_list_rr4y4_17",iae="_listItem_rr4y4_29",cae="_icon_rr4y4_35",ma={mainSection:rae,listHeading:oae,list:aae,listItem:iae,icon:cae},jl=({children:t})=>e.jsxs("li",{className:ma.listItem,children:[e.jsx(L,{name:"check_flat",size:16,className:ma.icon}),e.jsx("span",{children:t})]}),VI=({branch:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:ma.mainSection,children:[e.jsx(L,{"aria-label":"Protected branch",role:"img",name:"protect",size:40}),e.jsxs("span",{children:[e.jsx("code",{children:t.name})," will be set as"," ",t.protected?"an unprotected":"a protected"," branch."]})]}),!t.protected&&e.jsxs(e.Fragment,{children:[t.current_state==="archived"&&e.jsx(Q,{appearance:"info",children:nae.unarchiveAlert}),e.jsxs("section",{children:[e.jsx(z,{level:6,className:ma.listHeading,children:"Protected branches:"}),e.jsxs("ul",{className:ma.list,children:[e.jsx(jl,{children:"Can't be deleted"}),e.jsx(jl,{children:"Can't be archived"}),e.jsx(jl,{children:"Can't be reset"})]})]}),e.jsxs("section",{children:[e.jsx(z,{level:6,className:ma.listHeading,children:"Also:"}),e.jsxs("ul",{className:ma.list,children:[e.jsx(jl,{children:"Projects with a protected branch can't be deleted"}),e.jsx(jl,{children:"Computes for protected branches can't be deleted"})]})]}),e.jsxs("section",{children:["You can also restrict your IP Allow list to protected branches only. See"," ",e.jsx(A,{openInNewTab:!0,"aria-label":"IP Allow configuration",href:"https://neon.tech/docs/manage/projects#configure-ip-allow",icon:"external_link",children:"IP Allow"})]})]})]}),lae=()=>{const t=BS(),{confirm:s}=Oe(),{trackUiInteraction:n}=k(),r=m.useCallback(async(o,a)=>{if(n(o.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await s({header:En.protected.confirm.header(o.protected),text:e.jsx(VI,{branch:o}),confirmButtonText:En.protected.confirm.confirmButtonText(o.protected),hint:e.jsxs("span",{children:["See"," ",e.jsx(A,{href:Rp,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){n(o.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}n(o.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:c}}=await q.updateProjectBranch(o.project_id,o.id,{branch:{protected:!o.protected}});re(En.protected.successToast(c)),a(c)}catch(c){H(c)}},[n,s]);return m.useCallback((o,a)=>{const{enabled:i,reason:c}=t(o);return{label:En.protected.menuItemLabel(o.protected),disabled:!i,tooltip:c,icon:"protect",onClick:()=>r(o,a)}},[t,r])},WI=m.createContext(null),lx=({children:t,refreshBranches:s,onDeleteBranch:n})=>{const{trackUiInteraction:r}=k(),[o,a]=m.useState(null),{branchesById:i}=Ye(),c=m.useCallback(h=>{a({type:"rename-modal",branch:h})},[]),l=m.useCallback(h=>{a({type:"create-child-branch",branch:h})},[]),d=m.useCallback(h=>{r("schema_diff_link_clicked"),a({type:"schema-diff-drawer",branch:h})},[r]),u=m.useMemo(()=>({renameBranch:c,refreshBranches:s,onDeleteBranch:n,schemaDiff:d,createChildBranch:l}),[c,s,n,d,l]);return e.jsxs(WI.Provider,{value:u,children:[(o==null?void 0:o.type)==="rename-modal"&&e.jsx(Yoe,{branch:o.branch,isOpen:!0,onClose:()=>a(null),onSuccess:()=>{s(),a(null)}}),(o==null?void 0:o.type)==="schema-diff-drawer"&&e.jsx(Pb,{currentBranch:o.branch.parent_id?i[o.branch.parent_id]??null:null,compareTo:{sourceBranch:o.branch,mode:Ee.Head},onRequestClose:()=>(r("schema_diff_drawer_dismissed"),a(null)),isOpen:!0,changeableCurrentBranch:!0}),(o==null?void 0:o.type)==="create-child-branch"&&e.jsx(bb,{initialParentId:o.branch.id,isOpen:!0,onCancel:()=>a(null),onSuccess:()=>{s(),a(null)}}),t]})},GI=({omitCreateChildBranch:t,omitToggleProtectedBranch:s}={})=>{const n=ee("new_branch_creation_flow"),r=m.useContext(WI);if(r==null)throw new Error("useBranchActions must be used within a BranchActionsProvider");const{renameBranch:o,refreshBranches:a,onDeleteBranch:i,createChildBranch:c}=r,l=Zoe(),d=Joe(),u=Xoe(r.schemaDiff),h=sae(),p=lae();return m.useCallback(g=>vt([!t&&{label:"Create child branch",...n?{onClick:()=>c(g)}:{href:`${F(C.ProjectsItemBranchesNew,{projectId:g.project_id})}?parentId=${g.id}`},icon:"branch"},l(g,a),u(g),!s&&p(g,a),h(g,a),{label:"Rename",onClick:()=>o(g),icon:"edit"},d(g,()=>{a(),i==null||i()})]),[o,a,l,d,p,h,i,u,t,s,c,n])},dae="_tooltip_1lmrz_1",uae="_label_1lmrz_5",Pv={tooltip:dae,label:uae},mm=({endpoint:t})=>e.jsx(Z,{placement:"bottom-start",content:e.jsx("div",{className:Pv.tooltip,children:Kh(t)?e.jsxs(e.Fragment,{children:["Autoscaling is on.",e.jsx("br",{}),"Min: ",Dn(t.autoscaling_limit_min_cu),e.jsx("br",{}),"Max: ",Dn(t.autoscaling_limit_max_cu)]}):Dn(t.autoscaling_limit_max_cu)}),children:e.jsx("span",{className:Pv.label,children:Kh(t)?e.jsxs(e.Fragment,{children:[Nh(t.autoscaling_limit_min_cu)," ↔"," ",Nh(t.autoscaling_limit_max_cu)," CU"]}):e.jsxs(e.Fragment,{children:[Nh(t.autoscaling_limit_max_cu)," CU"]})})}),hae="_root_14x9h_1",pae={root:hae},KI=({branchId:t,endpoints:s})=>{const{project:n}=O(),[r,o]=m.useState(!1),a=m.useMemo(()=>s.find(i=>i.branch_id===t&&dn(i)),[s,t]);return a?e.jsxs(e.Fragment,{children:[r&&n&&e.jsx(qn,{isOpen:!0,mode:"edit",project:n,endpoint:a,onRequestClose:()=>o(!1)}),e.jsx(A,{onClick:()=>{o(!0)},children:e.jsxs("div",{className:pae.root,children:[e.jsx(mm,{endpoint:a}),e.jsx(ab,{endpoint:a})]})})]}):e.jsx(e.Fragment,{children:"-"})},QI=({branch:t,className:s})=>!t||t.init_source!=="schema-only"&&t.init_source!=="parent-schema"?null:e.jsx(he,{className:s,children:"schema-only"}),Kg={title:t=>e.jsxs(e.Fragment,{children:["Archived on"," ",le(t,ve.BranchDateTimeFormat)," due to inactivity"]}),description:"This branch was archived to minimize storage costs. You can unarchive it by connecting to the branch or querying it.",learnMore:"Learn more"},mae="_icon_zexke_1",gae="_tooltip_zexke_5",Tv={icon:mae,tooltip:gae},_ae=({branch:t,className:s})=>t.current_state!=="archived"?null:e.jsx("div",{onClick:n=>n.stopPropagation(),children:e.jsx(Z,{appearance:"rich",content:e.jsxs("div",{className:Tv.tooltip,children:[e.jsx(z,{level:6,children:Kg.title(t.state_changed_at)}),e.jsx("p",{children:Kg.description}),e.jsx(A,{href:nb,openInNewTab:!0,children:Kg.learnMore})]}),children:e.jsx(L,{"data-qa":"archived-branch-icon","aria-label":"Archived branch",role:"img",className:M(s,Tv.icon),name:"backup",size:16})})}),fae="_name_c8pf7_1",bae="_wrapper_c8pf7_8",ca={name:fae,wrapper:bae,default:"_default_c8pf7_14"},YI=({branch:t,searchWords:s})=>e.jsxs("div",{className:ca.wrapper,children:[e.jsx(qE,{title:t.name,className:ca.name,searchWords:s,textToHighlight:t.name}),e.jsx(U1,{className:ca.default,branch:t}),e.jsx(QI,{className:ca.primaryButton,branch:t}),e.jsx(F1,{className:ca.default,branch:t}),e.jsx(_ae,{className:ca.default,branch:t})]}),xae=({branch:t,branchesById:s})=>{const n=t.parent_id,r=n?s[n]:void 0,{branch:o,isLoading:a}=xA(t.project_id,r?void 0:n);if(a)return null;const i=r||o;return e.jsx("div",{title:n?i==null?void 0:i.name:void 0,className:ca.name,children:n?i==null?void 0:i.name:"-"})},jae="_createdBy_1qql6_1",yae="_hasAnnotations_1qql6_6",vae="_border_1qql6_11",wae="_source_1qql6_15",Sae="_sourceEmail_1qql6_22",Qo={createdBy:jae,hasAnnotations:yae,border:vae,source:wae,sourceEmail:Sae},Cae=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()):!1,Ji=m.forwardRef(({createdBy:t,iconOnly:s=!1},n)=>{if(t==="vercel"||t==="github"){const r=t==="vercel"?"Vercel":"GitHub";return e.jsxs("span",{className:M(Qo.createdBy,Qo.hasAnnotations),ref:n,"data-qa":"created-by-trigger",children:[e.jsx(L,{name:t,size:16}),s?null:e.jsx("span",{className:M(Qo.source,Qo.border),title:r,children:r})]})}return e.jsx("span",{ref:n,className:Qo.createdBy,"data-qa":"created-by-trigger",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Hd,{image:t.image,name:t.name,size:"s"}),s?null:e.jsx("span",{className:Cae(t.name)?Qo.sourceEmail:Qo.source,title:t.name,children:t.name})]}):"-"})});Ji.displayName="CreatedByTrigger";const kae="_root_1376f_1",Iae="_popupContent_1376f_5",Nv={root:kae,popupContent:Iae},JI=({content:t,children:s})=>e.jsx("div",{className:Nv.root,onClick:n=>n.stopPropagation(),children:e.jsx(Z,{appearance:"rich",maxWidth:350,placement:"bottom",content:e.jsx("div",{className:Nv.popupContent,children:t}),children:s})}),Pae="_flex_j7hd8_1",Tae="_nowrap_j7hd8_9",Wl={flex:Pae,nowrap:Tae},gm=({username:t,displayName:s,href:n,nowrap:r})=>{const o=e.jsxs(e.Fragment,{children:[e.jsx(Hd,{name:s??t,size:"s"}),s??t]});return n?e.jsx(A,{openInNewTab:!0,href:n,className:M(Wl.flex,{[Wl.nowrap]:r}),children:o}):e.jsx(T,{className:M(Wl.flex,{[Wl.nowrap]:r}),children:o})},Dc=({href:t,iconName:s,linkText:n})=>e.jsx(e.Fragment,{children:e.jsxs(T,{className:Wl.flex,children:[e.jsx(L,{name:s,size:16}),e.jsx(A,{openInNewTab:!0,href:t,children:n})]})}),Nae=({annotation:t})=>{const{value:s}=t,n=s["github-pr-number"],r=s["github-pr-title"],o=s["github-commit-repo"];if(!o||!n||!r)return null;const a=`https://github.com/${o}/pull/${n}`;return e.jsx(Dc,{href:a,linkText:r,iconName:"github_pr"})},Aae=({annotation:t})=>{const{value:s}=t,n=s["github-commit-repo"];if(!n)return null;const r=`https://github.com/${n}`;return e.jsx(Dc,{href:r,linkText:n,iconName:"github_mono"})},Eae=({annotation:t,iconOnly:s})=>e.jsx(JI,{content:e.jsxs(e.Fragment,{children:[e.jsx(gm,{username:t.value["github-commit-author-login"]}),e.jsx(Nae,{annotation:t}),e.jsx(Aae,{annotation:t})]}),children:e.jsx(Ji,{iconOnly:s,createdBy:"github"})}),$ae={github:"github_mono",bitbucket:"bitbucket",gitlab:"gitlab"},Oae=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],o=s["vercel-commit-repo"],a=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${o}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${o}/branch/${r}`;case"gitlab":return`https://gitlab.com/${o}/-/tree/${r}`;default:return null}},[n,o,r]);return!a||!r||!o?null:e.jsx(Dc,{href:a,iconName:"branch",linkText:s["vercel-commit-ref"]})},Rae=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],o=s["vercel-change-request-id"],a=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}/pull/${o}`;case"bitbucket":return`https://bitbucket.org/${r}/pull-requests/${o}`;case"gitlab":return`https://gitlab.com/${r}/-/merge_requests/${o}`;default:return null}},[n,r,o]);return!a||!r?null:e.jsx(Dc,{href:a,iconName:"github_pr",linkText:"Pull Request"})},Bae=({annotation:t})=>{const{value:s}=t,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],o=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}`;case"bitbucket":return`https://bitbucket.org/${r}`;case"gitlab":return`https://gitlab.com/${r}`;default:return null}},[n,r]);return!o||!r?null:e.jsx(Dc,{href:o,iconName:$ae[n]??"github",linkText:r})},Lae=({annotation:t})=>{const s=t.value["vercel-branch-alias"];if(!s)return null;const n=s.startsWith("https://")?s:`https://${s}`;return e.jsx(Dc,{href:n,linkText:"Vercel Preview",iconName:"vercel"})},Dae=({annotation:t,iconOnly:s})=>{const n=t.value["vercel-change-request-id"];return e.jsx(JI,{content:e.jsxs(e.Fragment,{children:[e.jsx(gm,{username:t.value["vercel-commit-author-login"],displayName:t.value["vercel-commit-author-name"]}),e.jsx(Lae,{annotation:t}),n?e.jsx(Rae,{annotation:t}):e.jsx(Oae,{annotation:t}),e.jsx(Bae,{annotation:t})]}),children:e.jsx(Ji,{iconOnly:s,createdBy:"vercel"})})},_p=({branch:t,annotation:s,iconOnly:n})=>{if(t.creation_source==="vercel")return e.jsx(e.Fragment,{children:s?e.jsx(Dae,{annotation:s,iconOnly:n}):e.jsx(Ji,{iconOnly:n,createdBy:"vercel"})});if(s&&jA(t,s))return e.jsx(Eae,{annotation:s,iconOnly:n});const o=t.created_by;return n?e.jsx(Z,{content:o==null?void 0:o.name,children:e.jsx(Ji,{iconOnly:!0,createdBy:o})}):e.jsx(Ji,{createdBy:o})},Mae=({endpoints:t,annotations:s={},branchesById:n,searchValue:r})=>{const o=ee("growth_hide_active_hours"),a=ee("branches_list_server_side_sorting"),i=m.useMemo(()=>a?{}:{enableSorting:!0,sortingFn:"protectedBranchesFirst"},[a]);return m.useMemo(()=>[{id:"branch_name",header:"Branch",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,rowHeader:!0,sortingFn:"protectedBranchesFirst",render:c=>e.jsx(YI,{branch:c,searchWords:r?[r]:[]})},{header:"Parent",id:"parent_branch_name",size:125,maxSize:150,...i,accessorFn:c=>{var l;return c.parent_id?(l=n[c.parent_id])==null?void 0:l.name:void 0},render:c=>e.jsx(xae,{branch:c,branchesById:n})},o?{id:"compute_hours",header:"Compute hours",...i,accessorFn:c=>c.compute_time_seconds,render:c=>xo(c.compute_time_seconds)}:{id:"active_time",header:"Active time",...i,accessorFn:c=>c.active_time_seconds,render:c=>xo(c.active_time_seconds)},{id:"primary_compute",header:"Primary compute",render:c=>e.jsx(KI,{branchId:c.id,endpoints:t??[]})},{id:"data_size",header:"Data size",minSize:120,...i,accessorFn:c=>c.logical_size,render:c=>{const l=c.logical_size;return l?Gd(l):null}},{id:"created_by",header:"Created by",size:125,maxSize:225,...i,accessorFn:c=>{var l;return((l=c.created_by)==null?void 0:l.name)??c.creation_source},render:c=>e.jsx(_p,{branch:c,annotation:s[c.id]})},Array.isArray(t)&&t.length===0?{id:"last_active",header:"Last active",render:()=>e.jsx(Bt,{})}:{header:"Last active",id:"last_active",minSize:190,...i,sortUndefined:i.enableSorting?"last":void 0,accessorFn:c=>vA(t==null?void 0:t.filter(l=>l.branch_id===c.id)),render:c=>yA(t==null?void 0:t.filter(l=>l.branch_id===c.id))}],[o,r,n,s,t,i])},Uae=({branchesLoading:t,branches:s,searchValue:n})=>m.useMemo(()=>t||!n?s:s.filter(r=>r.name.toLowerCase().indexOf(n)!==-1),[n,s,t]),Fae=({pagination:t,branchesCount:s,onPaginationChange:n})=>{const{trackUiInteraction:r}=k(),[o,a]=m.useState([]),i=ee("branches_list_server_side_pagination"),c=m.useCallback(d=>{if(r("branch_list_page_changed",{...d}),!!i)if(d.direction==="next"&&(t!=null&&t.next))a(u=>[...u,t.next]),n==null||n({limit:d.pageSize,cursor:t.next});else if(d.direction==="previous"&&o.length>1){const u=o[o.length-2];a(h=>h.slice(0,-1)),n==null||n({limit:d.pageSize,cursor:u})}else d.direction==="first"&&(a([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n,t,o]),l=m.useCallback(d=>{r("branch_list_page_size_changed",{...d}),i&&(a([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n]);return m.useMemo(()=>({rowCount:s,manualPagination:i,onPageChange:c,onPageSizeChange:l}),[i,s,c,l])},qae=(t,s)=>t==null&&s==null?0:t==null?1:s==null||t<s?-1:t>s?1:0,zae=t=>(s,n,r)=>{const o=s.original,a=n.original;return o.protected&&!a.protected?t==="ascending"?-1:1:!o.protected&&a.protected?t==="ascending"?1:-1:o.default&&!a.default?t==="ascending"?-1:1:!o.default&&a.default?t==="ascending"?1:-1:qae(s.getValue(r),n.getValue(r))},Hae=t=>{const s=zae(t);return{protectedBranchesFirst:(n,r,o)=>s(n,r,o)}},Av={branch_name:"name"},Vae=({onSortingChange:t})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState({column:"branch_name",direction:"ascending"}),o=ee("branches_list_server_side_sorting"),a=m.useCallback(i=>{o&&i.column&&Av[i.column]&&t({sort_by:Av[i.column],sort_order:i.direction==="ascending"?"asc":"desc"}),r(i),s("branch_list_sorting_changed",{...i})},[t,o,s]);return m.useMemo(()=>o?{sorting:n,manualSorting:!0,onSortingChange:a}:{defaultSorting:{column:"branch_name",direction:"ascending"},sortingFns:Hae,onSortingChange:a},[o,a,n])},ZI=({projectId:t,endpoints:s,branches:n,branchesById:r,annotations:o={},branchesLoading:a,onSortingChange:i,searchValue:c,...l})=>{const{trackUiInteraction:d}=k(),u=Vae({onSortingChange:i}),h=Fae(l),p=GI(),g=Uae({branches:n,branchesLoading:a,searchValue:c}),_=Mae({endpoints:s,branchesById:r,annotations:o,searchValue:c});return e.jsx(mn,{columns:_,rows:g,"aria-label":"Branches",isLoading:a,rowHref:x=>F(C.ProjectsItemBranchesItem,{branchId:x.id,projectId:t}),onRowClick:()=>d("branch_list_row_clicked"),rowActions:p,...u,...h})},dx=({children:t,parentId:s,...n})=>{const{projectId:r,isOwnProject:o}=O(),a=wR(),{trackUiInteraction:i}=k(),{isModalOpen:c,openModal:l,closeModal:d}=Ve(De.CreateBranch),u=ee("new_branch_creation_flow"),h=ae(),p=o&&(h.isFreeSubscription||h.subscriptionType==="launch"),[g,_]=m.useState(!1),x=t||(p?"Create branch":"New Branch"),j=Jn(m.useMemo(()=>s?{shared:{projects:[r],branches:[s],actions:[`create_branch@${s}`]}}:{shared:{projects:[r]}},[s,r])),b=F(C.ProjectsItemBranchesNew,{projectId:r});if(a.isLoading)return null;const f=wA(a);return p&&a.isLimitExceeded?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.BranchesLimitReached,isOpen:g,onRequestClose:()=>{_(!1)}}),e.jsx(P,{...n,"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),i("create_branch_button_limited_clicked"),_(!0)},children:x})]}):e.jsxs(e.Fragment,{children:[e.jsx(bb,{initialParentId:s,isOpen:c,onSuccess:()=>d(),onCancel:()=>d()}),e.jsx(Z,{content:a.message,disabled:!a.message,children:e.jsx("div",{style:{display:"inline-block"},children:a.isLimitExceeded?e.jsxs(P,{disabled:!0,"data-qa":"create_branch_button",...n,children:[x,f?` ${f}`:""]}):e.jsx(e.Fragment,{children:e.jsx(Er,{lockedMessage:j,children:u?e.jsxs(P,{"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),l()},...n,disabled:!!j||n.disabled,size:"s",children:[x,f?` ${f}`:""]}):e.jsxs(P,{as:q1,to:s?`${b}?parentId=${s}`:b,"data-qa":"create_branch_button",onClick:()=>i("create_branch_button_clicked"),...n,disabled:!!j||n.disabled,size:"s",children:[x,f?` ${f}`:""]})})})})})]})},Ev={title:"Branches",subtitle:t=>e.jsxs("div",{className:t,children:["Instantly"," ",e.jsx(A,{href:"https://neon.tech/docs/introduction/branching",openInNewTab:!0,icon:"external_link",iconSize:"s",children:"branch your data"}),"for development, testing, and various other purposes to improve developer productivity and optimize continuous integration and delivery (CI/CD) pipelines."]})},Wae="_filters_pgz1d_1",Gae="_search_pgz1d_8",Kae="_createBranchButton_pgz1d_13",Qae="_subtitle_pgz1d_19",nh={filters:Wae,search:Gae,createBranchButton:Kae,subtitle:Qae},XI=m.memo(()=>{var j;const{projectId:t}=O(),s=ee("branches_list_server_side_pagination"),n=ds({projectId:t}),r=m.useMemo(()=>{var b;return((b=n.data)==null?void 0:b.endpoints)??[]},[(j=n.data)==null?void 0:j.endpoints]),[o,a]=m.useState({sort_by:"name",sort_order:"asc",limit:s?O_:void 0}),{branches:i,annotations:c,branchesCount:l,pagination:d,branchesById:u,isLoading:h,error:p,refetch:g}=Zf({projectId:t,...o}),[_,x]=m.useState("");return m.useEffect(()=>{a(b=>({...b,limit:s?O_:void 0}))},[s]),p?e.jsx(is,{title:p.message}):e.jsxs(e.Fragment,{children:[e.jsx(Nc,{title:Ev.title,subtitle:Ev.subtitle(nh.subtitle)}),e.jsxs("div",{className:nh.filters,children:[e.jsx(HI,{className:nh.search,onChange:x,size:"s"}),e.jsx("div",{className:nh.createBranchButton,children:e.jsx(dx,{})})]}),e.jsx(lx,{refreshBranches:g,children:e.jsx(ZI,{endpoints:r,projectId:t,branches:i,branchesById:u,branchesLoading:h,searchValue:_,onSortingChange:b=>{a(f=>({...f,...b,cursor:void 0}))},annotations:c,branchesCount:l,pagination:d,onPaginationChange:b=>{a(f=>({...f,...b}))}})})]})});XI.displayName="ProjectBranches";const Yae="_branchImportToast_3pfyu_1",$v={branchImportToast:Yae},Jae={protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again."},Zae=({endpoint:t,branch:s,onConnectClicked:n,onEditClicked:r})=>{const{trackUiInteraction:o}=k(),a=v1(),i=w1({projectId:t.project_id}),c=m.useCallback(async()=>{const d=await a(t);if(o("endpoint_actions_menu_endpoint_delete_popup_shown"),!d){o("endpoint_delete_popup_cancel_button_clicked");return}o("endpoint_delete_popup_confirm_button_clicked"),i.mutate({endpointId:t.id})},[a,t,o,i]),l=s==null?void 0:s.protected;return e.jsx(e.Fragment,{children:e.jsxs(Jf,{onOpen:()=>{o("branch_view_endpoints_endpoint_actions_menu_clicked")},children:[e.jsx(_o,{as:"button",iconName:"connect","data-qa":"endpoint_actions_connect_button",onClick:n,children:"Connect"}),e.jsx(_o,{as:"button",onClick:r,iconName:"edit",children:"Edit"}),e.jsx(Z,{content:l?Jae.protectedBranchWarning:"",children:e.jsx("div",{children:e.jsx(_o,{as:"button",onClick:c,disabled:l,iconName:"trash",children:"Delete"})})})]})})},Xae="_hostCol_1db48_1",eie="_cuColumn_1db48_8",Ov={hostCol:Xae,cuColumn:eie},tie=({project:t,endpoints:s,branch:n,onConnectEndpoint:r,isLoading:o})=>{const[a,i]=m.useState(null),{trackUiInteraction:c}=k(),l=m.useCallback(p=>{c("branch_view_endpoints_edit_endpoint_drawer_opened"),i(p)},[c]),d=m.useCallback(()=>{c("branch_view_endpoints_edit_endpoint_drawer_closed"),i(null)},[c]),u=m.useMemo(()=>[{label:"Id",key:"id",renderValue:p=>e.jsxs("div",{className:Ov.hostCol,children:[e.jsx("b",{children:p.id}),e.jsx(P,{appearance:"secondary",onClick:()=>{r==null||r(p)},children:"Connect"})]})},{label:"Type",key:"type",renderValue:p=>SA(p.type)},{label:"Status",key:"state",renderValue:p=>e.jsx(ab,{endpoint:p})},{label:"Compute size",key:"size",renderValue:p=>e.jsx("div",{className:Ov.cuColumn,children:e.jsx(mm,{endpoint:p})})},{label:"Autosuspend delay",key:"suspend_timeout_seconds",renderValue:p=>p.suspend_timeout_seconds===-1?e.jsx("span",{title:"Never suspend",children:"-"}):qb(p.suspend_timeout_seconds)},{label:"Last active",key:"last_active",renderValue:p=>p.last_active&&p.last_active!==z1?le(p.last_active):"never"},_S(p=>e.jsx(Zae,{branch:n,endpoint:p,onEditClicked:()=>l(p),onConnectClicked:()=>r==null?void 0:r(p)}))],[n,r,l]),h=m.useMemo(()=>s.concat().sort(eb),[s]);return o?e.jsx(Fn,{data:[],isLoading:!0,cols:u}):!t||!n?null:e.jsxs(e.Fragment,{children:[a!==null&&e.jsx(qn,{isOpen:!0,onRequestClose:d,mode:"edit",project:t,endpoint:a}),e.jsx(Fn,{data:h,cols:u,"data-qa":"branch_view_endpoints",onRowClick:l,dataPlaceholderProps:{title:"This branch has no compute endpoints",size:"m",subtitle:"Create new compute endpoint to connect to the branch from your application.",actions:e.jsx(tx,{branchId:n.id,onClick:()=>{c("branch_view_endpoints_create_endpoint_drawer_opened")},children:"Add new compute endpoint"})}})]})},eP=({branch:t,onSuccess:s,children:n})=>{const r=BS(),{confirm:o}=Oe(),{trackUiInteraction:a}=k(),{enabled:i,reason:c}=m.useMemo(()=>r(t),[r,t]),l=m.useCallback(async()=>{if(a(t.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await o({header:`Set as ${t.protected?"unprotected":"protected"}`,text:e.jsx(VI,{branch:t}),confirmButtonText:`Set as ${t.protected?"unprotected":"protected"}`,hint:e.jsxs("span",{children:["See"," ",e.jsx(A,{href:Rp,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){a(t.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}a(t.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:u}}=await q.updateProjectBranch(t.project_id,t.id,{branch:{protected:!t.protected}});Te(e.jsxs(Fe,{children:[e.jsx("code",{children:t.name})," is now set as"," ",t.protected?"an unprotected":"a protected"," branch."]})),s&&s(u)}catch(u){H(u)}},[a,t,o,s]);return e.jsx(e.Fragment,{children:e.jsx(Z,{content:c,children:e.jsx("div",{children:n({onClick:l,disabled:!i})})})})},sie="_header_1yht0_1",nie="_titleContainer_1yht0_11",rie="_title_1yht0_11",oie="_branchInfo_1yht0_25",aie="_branchNameWrapper_1yht0_31",iie="_branchNameWrapper_link_1yht0_38",cie="_branchName_1yht0_31",lie="_actions_1yht0_54",wn={header:sie,titleContainer:nie,title:rie,branchInfo:oie,branchNameWrapper:aie,branchNameWrapper_link:iie,branchName:cie,actions:lie},eu=({title:t,subtitle:s,showBranchBadges:n,actions:r,forceShowBranchInHeader:o,className:a})=>{const i=ee("show_branch_in_header")||o,{branch:c,isLoading:l}=ut();return e.jsxs("header",{className:M(wn.header,a),children:[e.jsxs("div",{className:wn.titleContainer,children:[e.jsxs("div",{className:wn.title,children:[e.jsx(z,{level:1,size:"h2",children:t}),i&&e.jsx(e.Fragment,{children:c?e.jsxs("div",{className:wn.branchInfo,children:[e.jsxs(We,{href:F(C.ProjectsItemBranchesItem,{projectId:c.project_id,branchId:c.id}),className:M(wn.branchNameWrapper,wn.branchNameWrapper_link),children:[e.jsx(L,{name:"branch",size:12}),e.jsx("h2",{className:wn.branchName,title:c.name,children:c.name||"&nbsp;"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(U1,{branch:c}),e.jsx(QI,{branch:c}),e.jsx(F1,{branch:c})]})]}):l?e.jsx($,{width:64,height:20}):e.jsxs("div",{className:wn.branchNameWrapper,children:[e.jsx(L,{name:"branch",size:12}),e.jsx("h2",{className:wn.branchName,children:"-"})]})})]}),e.jsx("div",{className:wn.actions,children:r})]}),s&&e.jsx(T,{appearance:"secondary",children:s})]})},die=({branch:t})=>{const s=GI({omitCreateChildBranch:!0,omitToggleProtectedBranch:!0});return e.jsx(Dt,{placement:"bottom right",sections:[{items:s(t)}],children:e.jsx(P,{appearance:"secondary",icon:"chevron_down",iconSide:"right",children:"More"})})},uie="_header_16dbf_1",hie={header:uie},pie=({branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r})=>e.jsx(eu,{title:"Branch Overview",showBranchBadges:!0,className:hie.header,forceShowBranchInHeader:!0,actions:e.jsxs(e.Fragment,{children:[e.jsx(dx,{parentId:t.id,children:"Create child branch"}),CA(t,s)&&t.current_state!=="archived"&&e.jsx(eP,{branch:t,onSuccess:n,children:o=>e.jsx(P,{icon:"protect",appearance:"secondary",...o,children:t.protected?"Unprotect":"Protect"})}),e.jsx(lx,{refreshBranches:n,onDeleteBranch:r,children:e.jsx(die,{branch:t})})]})}),mie="_header_1tjj5_1",gie="_title_1tjj5_9",Rv={header:mie,title:gie},_ie=()=>e.jsxs("div",{className:Rv.header,children:[e.jsxs("div",{className:Rv.title,children:[e.jsx($,{width:100,height:32}),e.jsx($,{width:60,height:20})]}),e.jsx($,{width:64,height:24})]}),rh=({converter:t=Ww,showLimits:s,limit:n=-1,value:r})=>e.jsx(e.Fragment,{children:typeof r=="number"?e.jsxs(e.Fragment,{children:[t(r),s&&kt(n)&&e.jsxs(e.Fragment,{children:[" / ",t(n)]})]}):"-"}),fie=({annotation:t})=>{const s=(t==null?void 0:t.value)??{},n=s["github-commit-author-login"],r=s["github-pr-number"],o=s["github-pr-title"],a=s["github-commit-repo"];return m.useMemo(()=>({repoName:a,authorLogin:n,repoLink:a?`https://github.com/${a}`:void 0,authorLink:n?`https://github.com/${n}`:void 0,pullRequestLink:a&&r?`https://github.com/${a}/pull/${r}`:void 0,pullRequestTitle:o}),[a,r,n,o])},bie="_group_1wwv1_1",xie="_item_1wwv1_14",jie="_header_1wwv1_33",yie="_info_1wwv1_38",vie="_body_1wwv1_43",Gl={group:bie,item:xie,header:jie,info:yie,body:vie},ud=({className:t,...s})=>e.jsx("div",{className:M(Gl.group,t),...s}),At=({className:t,label:s,info:n,children:r,...o})=>{const{labelProps:a,fieldProps:i}=H1({label:s,labelElementType:"span"});return e.jsxs("div",{className:M(Gl.item,t),...o,children:[e.jsxs("span",{className:Gl.header,...a,children:[s,n&&e.jsx(Z,{content:n,maxWidth:300,children:e.jsx(L,{name:"info_italic",size:12,className:Gl.info})})]}),e.jsx("div",{className:Gl.body,...i,children:r})]})},Qg={authorLabel:"User",repoLabel:"Repository",pullRequestLabel:"Pull request"},wie="_nowrap_2zava_1",hd={nowrap:wie},Sie=({annotation:t})=>{const{trackUiInteraction:s}=k(),{authorLogin:n,authorLink:r,repoLink:o,repoName:a,pullRequestTitle:i,pullRequestLink:c}=fie({annotation:t});return e.jsxs(ud,{children:[e.jsx(L,{name:"github",size:32}),e.jsx(At,{label:Qg.authorLabel,children:e.jsx(gm,{nowrap:!0,username:n,href:r})}),o&&e.jsx(At,{label:Qg.repoLabel,children:e.jsx(A,{openInNewTab:!0,href:o,icon:"external_link",className:hd.nowrap,onClick:()=>{s("branch_view_github_repo_link_clicked")},children:a})}),c&&e.jsx(At,{label:Qg.pullRequestLabel,children:e.jsx(A,{openInNewTab:!0,href:c,icon:"external_link",className:hd.nowrap,onClick:()=>{s("branch_view_github_pull_request_link_clicked")},children:i})})]})},Cie=({annotation:t})=>{const s=(t==null?void 0:t.value)??{},n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],o=s["vercel-commit-repo"],a=s["vercel-commit-sha"],i=s["vercel-change-request-id"],c=s["vercel-branch-alias"],l=s["vercel-commit-author-login"],d=s["vercel-commit-author-name"],u=m.useMemo(()=>{if(!(!o||!r))switch(n){case"github":return`https://github.com/${o}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${o}/branch/${r}`;case"gitlab":return`https://gitlab.com/${o}/-/tree/${r}`;default:return}},[n,o,r]),[h,p]=m.useMemo(()=>{if(!i||!o)return[void 0,void 0];switch(n){case"github":return[`${o}#${i}`,`https://github.com/${o}/pull/${i}`];case"bitbucket":return[`${o}#${i}`,`https://bitbucket.org/${o}/pull-requests/${i}`];case"gitlab":return[`${o}#${i}`,`https://gitlab.com/${o}/-/merge_requests/${i}`];default:return[void 0,void 0]}},[n,o,i]);return m.useMemo(()=>({gitBranchLink:u,gitBranchName:r,gitProvider:n,gitCommitSha:a?a.substring(0,7):void 0,authorLogin:l,authorName:d,changeRequestId:h,changeRequestLink:p,vercelPreviewLink:c!=null&&c.startsWith("https://")?c:`https://${c}`}),[a,u,r,l,d,n,c,h,p])},Yo={authorLabel:"Commit author",previewLabel:"Preview deployment",previewLink:"Open preview deployment",previewUnavailable:"Unavailable",pullRequestLabel:"Pull request",gitBranchLabel:"Git branch",gitCommitShaLabel:"Git commit"},kie=({annotation:t})=>{const{trackUiInteraction:s}=k(),{vercelPreviewLink:n,changeRequestId:r,changeRequestLink:o,gitBranchLink:a,gitBranchName:i,gitCommitSha:c,authorLogin:l,authorName:d}=Cie({annotation:t});return e.jsxs(ud,{children:[e.jsx(L,{name:"vercel",size:32}),e.jsx(At,{label:Yo.authorLabel,children:e.jsx(gm,{nowrap:!0,username:l,displayName:d})}),e.jsx(At,{label:Yo.previewLabel,children:n?e.jsx(A,{openInNewTab:!0,href:n,icon:"external_link",className:hd.nowrap,onClick:()=>{s("branch_view_vercel_preview_link_clicked")},children:Yo.previewLink}):e.jsx(e.Fragment,{children:Yo.previewUnavailable})}),o?e.jsx(At,{label:Yo.pullRequestLabel,children:e.jsx(A,{openInNewTab:!0,href:o,icon:"external_link",className:hd.nowrap,onClick:()=>{s("branch_view_vercel_pull_request_link_clicked")},children:r})}):a&&e.jsx(At,{label:Yo.gitBranchLabel,children:e.jsx(A,{openInNewTab:!0,href:a,icon:"external_link",className:hd.nowrap,onClick:()=>{s("branch_view_vercel_branch_link_clicked")},children:i})}),c&&e.jsxs(At,{label:Yo.gitCommitShaLabel,children:[e.jsx(T,{children:c}),e.jsx(bo,{text:c,onCopy:()=>{s("branch_view_vercel_commit_sha_copied")}})]})]})},Iie=({branch:t,annotation:s})=>{const n=t.creation_source;return n==="vercel"?e.jsx(kie,{annotation:s}):n==="github"?e.jsx(Sie,{annotation:s}):null},Pie="_badge_1k7sh_1",Tie="_badge_warning_1k7sh_8",Nie="_badge_alert_1k7sh_13",Yg={badge:Pie,badge_warning:Tie,badge_alert:Nie},Aie=({appearance:t,hint:s,text:n})=>{const r=e.jsx("span",{className:M(Yg.badge,{[Yg.badge_warning]:t==="warning",[Yg.badge_alert]:t==="alert"}),children:n});return s?e.jsx(Z,{content:s,children:r}):r},Eie=.8;function Bv(t){const s=t.match(/^(.+)\s+(.+)$/);return s?{value:s[1],units:s[2]}:{value:t,units:void 0}}function $ie(t,s){const n=Bv(t),r=Bv(s);return n.units===r.units?`${n.value} / ${s}`:`${t} / ${s}`}function oh(t,s,n,r=!1){const o=n==="warning"?Eie:1;if(t&&kt(s)&&t>=o*s)return{type:n,value:t,limit:s,isOverallLimit:r}}const tP=({converter:t=String,showLimits:s,limit:n=-1,overallLimit:r=-1,value:o,overallValue:a,hideInlineLimit:i,getMessage:c,getNearOverallLimitMessage:l,getOverallLimitReachedMessage:d})=>{if(typeof o!="number")return e.jsx(e.Fragment,{children:"-"});let u=e.jsx(e.Fragment,{children:t(o)});if(typeof r=="number"&&kt(r)&&(i||(u=e.jsx(e.Fragment,{children:$ie(t(o),t(r))})),c)){const p=c({value:o,overallValue:a,overallLimit:r,converter:t});u=e.jsx(Z,{content:p,children:e.jsx("span",{children:u})})}let h;if(s){const p=oh(a,r,"alert",!0)??oh(o,n,"alert")??oh(a,r,"warning",!0)??oh(o,n,"warning");if(p){const g=p.isOverallLimit?p.type==="alert"?d:l:void 0;h=e.jsx(Aie,{appearance:p.type,hint:g==null?void 0:g({converter:t,overallValue:p.value,overallLimit:p.limit}),text:p.type==="alert"?"LIMIT REACHED":"NEAR LIMIT"})}}return e.jsxs(e.Fragment,{children:[u,h&&e.jsxs(e.Fragment,{children:[" ",h]})]})},Oie=({branch:t,hideInlineLimit:s,...n})=>e.jsx(tP,{...n,converter:xo,hideInlineLimit:s,getMessage:({value:r,overallLimit:o,converter:a})=>`This branch used ${a(r)}${o?` (${V1(r/o,!0)}) of ${a(o)} total allowance for ${t.default?"default":"non-default"} compute branch limit.`:""}`,getNearOverallLimitMessage:({overallValue:r,overallLimit:o,converter:a})=>`You've used ${a(r)} of your ${a(o)} ${t.default?"":"non-default account"} compute branch limit. Upgrade for more compute.`,getOverallLimitReachedMessage:({overallLimit:r,converter:o})=>`You've reached your ${o(r)} ${t.default?"":"non-default account"} compute limit. Upgrade to get more compute.`}),Lv=t=>e.jsx(tP,{...t,converter:Gd,getMessage:({converter:s,value:n,overallLimit:r})=>`This branch used ${s(n)} (${V1(n/r,!0)}) of ${s(r)} total allowance for storage.`,getNearOverallLimitMessage:({converter:s,overallValue:n,overallLimit:r})=>`You've used ${s(n)} of your ${s(r)} account storage limit. Upgrade for more storage.`,getOverallLimitReachedMessage:({converter:s,overallLimit:n})=>`You've reached your ${s(n)} limit. Upgrade for more storage.`}),ux=({onSuccess:t,branch:s,children:n})=>{const r=bf.tooltipContent(s),o=r!==null,{trackUiInteraction:a}=k(),i=M1(),c=m.useCallback(()=>{o||(a("branch_reset_to_parent_reset_clicked"),i(s,t))},[o,a,i,s,t]);return e.jsx(Z,{content:r,children:e.jsx("div",{children:n({onClick:c,disabled:o})})})},Rie="_root_5cwo2_1",Bie="_helpText_5cwo2_25",fp={root:Rie,helpText:Bie},Lie=({branch:t,onResetToParentBranch:s})=>e.jsxs("div",{className:fp.root,children:[e.jsx(L,{name:"branch_reset",size:20}),e.jsxs(T,{className:fp.helpText,children:["Update to latest data and schema",e.jsxs(T,{size:"s",children:["Last update:"," ",t.last_reset_at?le(t.last_reset_at,ve.BranchDateTimeFormat):"Never"," "]})]}),e.jsx(ux,{branch:t,onSuccess:s,children:n=>e.jsx(P,{appearance:"secondary",...n,children:"Reset from parent"})})]}),Die=({branch:t,children:s})=>{const{trackUiInteraction:n}=k(),[r,o]=m.useState(!1),{branchesById:a}=Ye(),i=t.parent_id?a[t.parent_id]:void 0,c={sourceBranch:t,mode:Ee.Head};return e.jsxs(e.Fragment,{children:[i&&c&&e.jsx(Pb,{changeableCurrentBranch:!0,currentBranch:i,isOpen:r,compareTo:c,onRequestClose:()=>{n("schema_diff_drawer_dismissed"),o(!1)}}),s({disabled:!i,onClick:()=>{n("schema_diff_link_clicked"),o(!0)}})]})},Mie=({branch:t})=>e.jsxs("div",{className:fp.root,children:[e.jsx(L,{name:"schema",size:20}),e.jsx(T,{className:fp.helpText,children:"See the schema differences between this branch and its parent"}),e.jsx(Die,{branch:t,children:s=>e.jsx(P,{...s,appearance:"secondary",children:"Schema diff"})})]}),Ze={idLabel:"ID",createdOnLabel:"Created on",createdByLabel:"Created by",computeHoursLabel:"Compute hours",computeHoursInfo:"Compute hours = CU size * active hours",currentPeriodActiveTime:t=>`Active hours since ${le(t,ve.ShortDate)}`,dataSizeLabel:"Data size",parentBranchLabel:"Parent branch",branchingPointLabel:"Branching point",lastDataResetLabel:"Last data reset",compareToParentLabel:"Compare to parent",archived:{title:"Archive status",description:t=>e.jsxs(e.Fragment,{children:["Automatically archived in cost-efficient storage on"," ",le(t,ve.BranchDateTimeFormat)," due to inactivity."]}),learnMore:"Learn more"},unarchiveCard:{title:"Automatic unarchive",description:"Querying will unarchive the branch automatically.",descriptionSlow:"Querying will unarchive the branch automatically. Expect slower queries during the process."},billingCard:{title:"Reduce costs",description:"Cost-efficient archive storage lowers your monthly bill."},disableArchivingCard:{title:"Disable archiving",description:"Enable branch protection to prevent this branch from being archived.",button:"Protect"},warmupAlert:{title:"Warming up",description:"This branch is queryable but is still being unarchived. Expect slow query times."}},Uie="_info_1z0dl_1",Fie="_id_1z0dl_7",qie="_datetime_1z0dl_15",zie="_dataSize_1z0dl_19",Hie="_archivedInfo_1z0dl_24",Vie="_infoLayout_1z0dl_31",Wie="_icon_1z0dl_39",Gie="_header_1z0dl_43",Kie="_card_1z0dl_51",ht={info:Uie,id:Fie,datetime:qie,dataSize:zie,archivedInfo:Hie,infoLayout:Vie,icon:Wie,header:Gie,card:Kie},Qie="_root_39mm7_1",Yie="_parentName_39mm7_9",Jg={root:Qie,parentName:Yie},Zg=({branch:t})=>{const{branchesById:s}=Ye();if(!t.parent_id)return null;const n=s[t.parent_id];return e.jsxs(At,{label:Ze.parentBranchLabel,className:Jg.root,children:[n?e.jsx(A,{noWrap:!0,className:Jg.parentName,href:F(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}),children:e.jsx("span",{title:n.name,children:n.name})}):e.jsx("span",{className:Jg.parentName,children:t.parent_id}),t.parent_lsn&&e.jsxs(e.Fragment,{children:["LSN ",e.jsx(bo,{text:t.parent_lsn})]})]})},Jie=["vercel","github"],Dv=({branch:t})=>e.jsxs(At,{label:Ze.idLabel,children:[e.jsx(Z,{content:t.id,placement:"top",children:e.jsx(T,{className:ht.id,children:t.id})}),e.jsx(bo,{text:t.id})]}),Zie=({project:t,branch:s,annotation:n,onResetToParentBranch:r,onSetBranchProtection:o})=>{const a=ee("growth_hide_active_hours"),{isFreeSubscription:i,isPaidSubscription:c}=ae(),{limits:l}=Mt(),{isLoading:d,usage:u}=fS(),h=m.useMemo(()=>d||!t||!s||!l?null:zE(t,s,l,u),[s,d,t,l,u]),p=Jie.includes(s.creation_source)&&n,g=!p;return e.jsx("div",{className:ht.info,children:s.current_state==="archived"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:ht.archivedInfo,children:[e.jsxs("div",{className:ht.infoLayout,children:[e.jsx(z,{level:5,size:"h6",children:Ze.archived.title}),e.jsx("p",{children:Ze.archived.description(s.state_changed_at)}),e.jsx(A,{href:nb,openInNewTab:!0,children:Ze.archived.learnMore})]}),e.jsxs("div",{className:M(ht.card,ht.infoLayout),children:[e.jsxs("div",{className:ht.header,children:[e.jsx(L,{className:ht.icon,name:"branch_fast",size:16}),e.jsx(z,{level:6,children:Ze.unarchiveCard.title})]}),e.jsx("p",{children:kc(s)?Ze.unarchiveCard.descriptionSlow:Ze.unarchiveCard.description})]}),c&&e.jsxs("div",{className:M(ht.card,ht.infoLayout),children:[e.jsxs("div",{className:ht.header,children:[e.jsx(L,{className:ht.icon,name:"piggy",size:16}),e.jsx(z,{level:6,children:Ze.billingCard.title})]}),e.jsx("p",{children:Ze.billingCard.description})]}),!s.protected&&e.jsxs("div",{className:M(ht.card,ht.infoLayout),children:[e.jsxs("div",{className:ht.header,children:[e.jsx(L,{className:ht.icon,name:"no_access",size:16}),e.jsx(z,{level:6,children:Ze.disableArchivingCard.title})]}),e.jsx("p",{children:Ze.disableArchivingCard.description}),e.jsx(eP,{branch:s,onSuccess:o,children:_=>e.jsx(P,{icon:"protect",appearance:"secondary",..._,children:Ze.disableArchivingCard.button})})]})]}),e.jsxs(ud,{children:[e.jsx(Dv,{branch:s}),e.jsx(Zg,{branch:s}),e.jsx(At,{label:Ze.createdOnLabel,className:ht.datetime,children:le(s.created_at,ve.BranchDateTimeFormat)}),e.jsx(At,{label:Ze.dataSizeLabel,className:ht.dataSize,children:h?e.jsx(e.Fragment,{children:i?e.jsx(Lv,{...h.current_data_size}):e.jsx(rh,{...h.current_data_size,converter:Gd})}):"-"}),e.jsx(At,{label:Ze.createdByLabel,children:e.jsx(_p,{branch:s,annotation:n})})]})]}):e.jsxs(e.Fragment,{children:[W1(s)&&e.jsx(Q,{appearance:"info",title:Ze.warmupAlert.title,children:Ze.warmupAlert.description}),e.jsxs(ud,{children:[e.jsx(Dv,{branch:s}),p&&e.jsx(Zg,{branch:s}),e.jsx(At,{label:Ze.createdOnLabel,className:ht.datetime,children:le(s.created_at,ve.BranchDateTimeFormat)}),e.jsx(At,{label:Ze.computeHoursLabel,className:ht.computeHours,info:Ze.computeHoursInfo,children:h?e.jsx(e.Fragment,{children:i?e.jsx(Oie,{branch:s,hideInlineLimit:!0,...h.compute_time}):e.jsx(rh,{...h.compute_time,converter:xo})}):"-"}),!a&&e.jsx(At,{label:Ze.currentPeriodActiveTime(t.consumption_period_start),children:h?e.jsx(rh,{...h.active_time}):"-"}),e.jsx(At,{label:Ze.dataSizeLabel,className:ht.dataSize,children:h?e.jsx(e.Fragment,{children:i?e.jsx(Lv,{...h.current_data_size}):e.jsx(rh,{...h.current_data_size,converter:Os})}):"-"}),g&&e.jsx(At,{label:Ze.createdByLabel,children:e.jsx(_p,{branch:s,annotation:n})})]}),p?e.jsx(Iie,{branch:s,annotation:n}):s.parent_id&&e.jsxs(ud,{children:[e.jsx(Zg,{branch:s}),e.jsx(Mie,{branch:s}),e.jsx(Lie,{branch:s,onResetToParentBranch:r})]})]})})},Xie=()=>e.jsx("div",{className:ht.info}),ece=(t,s)=>{const{data:n,isLoading:r,error:o}=st({queryKey:["dataAPI",t,s],queryFn:async()=>{var a;try{const i=await q.getProjectBranchDataApi(t,s);return i.status===404?null:i.data.url}catch(i){if(bc(i)&&((a=i.response)==null?void 0:a.status)===404)return null;throw i}}});return{url:n,isLoading:r,error:o}},tce=({projectId:t,branchId:s},{onSuccess:n,onError:r,...o})=>{const a=ie();return de({mutationFn:()=>q.deleteProjectBranchDataApi(t,s,{}),onSuccess:(...i)=>{n==null||n(...i),a.invalidateQueries({queryKey:["dataAPI",t,s]})},onError:(i,...c)=>{r==null||r(i,...c),H(i)},...o})},sce="_root_4u0w5_1",nce="_header_4u0w5_11",rce="_title_4u0w5_16",oce="_description_4u0w5_23",ace="_children_4u0w5_28",yl={root:sce,header:nce,title:rce,description:oce,children:ace},yo=({title:t,action:s,description:n,children:r,className:o,...a})=>{const i=t||s||n;return e.jsxs("section",{className:M(yl.root,o),...a,children:[i&&e.jsxs("div",{className:yl.header,children:[e.jsxs("div",{className:yl.title,children:[e.jsx(z,{level:2,children:t}),s]}),n&&e.jsx("div",{className:yl.description,children:n})]}),e.jsx("div",{className:yl.children,children:r})]})},vl={title:"Data API",description:"Access your database through auto-generated REST API endpoints.",urlTitle:"Project URL",urlDescription:"Provides read-write access to tables without Row Level Security enabled.",footer:e.jsxs(T,{children:["To read and write data with the Data API, set up"," ",e.jsx(We,{href:"https://neon.tech/docs/guides/neon-auth",children:"authentication"})," ","and RLS policies."," ",e.jsx(We,{href:G1,children:"Learn more"})]})},ice="_field_s6cjt_1",cce="_appUrlSection_s6cjt_5",lce="_appUrl_s6cjt_5",Xg={field:ice,appUrlSection:cce,appUrl:lce},dce=({url:t})=>e.jsxs(yo,{title:vl.title,description:vl.description,children:[e.jsxs("section",{children:[e.jsx(z,{level:6,className:Xg.field,children:e.jsx(T,{appearance:"secondary",children:vl.urlTitle})}),e.jsxs("div",{className:Xg.appUrlSection,children:[e.jsx(Un,{className:Xg.appUrl,children:t}),e.jsx(T,{appearance:"tertiary",size:"s",children:vl.urlDescription})]})]}),e.jsx(T,{children:vl.footer})]}),uce="_wrapper_jvaxz_1",Mv={wrapper:uce},sP=({tooltip:t,tooltipDisabled:s,children:n,...r})=>e.jsx("div",{className:Mv.wrapper,children:e.jsx(Z,{content:t,disabled:s,children:e.jsx("div",{className:Mv.wrapper,children:e.jsx(P,{...r,children:n})})})}),nP=t=>{const{org:s,isLoading:n}=Y(),{isOrgAdmin:r,isLoading:o}=wt(),{isCollaborator:a,isLoading:i}=Cc(t),c=n||i||o;return c?{isAllowedToManage:!1,isLoading:c}:a?{isAllowedToManage:!1,isCollaborator:!0,isLoading:c}:s?{isAllowedToManage:r,isLoading:c}:{isAllowedToManage:!0,isLoading:c}},pd={title:"Disable",description:"Disables the Data API for this branch. This will immediately terminate all active connections and block access to data for any apps, websites, or services using the API.",successToast:"Data API has been disabled",disableNotAllowedSharedProject:"You cannot disable the Data API on shared projects. Contact the Project owner for help.",disableNotAllowed:"You need additional permissions to disable the Data API. Contact your Organization Admin for help."},hce=({isLoading:t,isAllowedToManage:s,isCollaborator:n})=>t||s?null:n?pd.disableNotAllowedSharedProject:pd.disableNotAllowed,pce=({projectId:t,branchId:s})=>{const{isAllowedToManage:n,isCollaborator:r,isLoading:o}=nP(t),{mutate:a,isPending:i}=tce({projectId:t,branchId:s},{onSuccess:()=>{re(pd.successToast)},onError:c=>{H(c)}});return e.jsx(yo,{title:pd.title,description:pd.description,children:e.jsx(sP,{appearance:"error",tooltip:hce({isLoading:o,isAllowedToManage:n,isCollaborator:r})??void 0,tooltipDisabled:o||n,disabled:o||!n,onClick:()=>{a()},loading:i,children:"Disable"})})},md={title:"Data API",description:e.jsxs(T,{children:["Enable the Data API on this branch to access this branch through auto-generated REST API endpoints."," ",e.jsx(We,{href:G1,children:"Learn more"})]}),successToast:"Data API has been enabled",installNotAllowedSharedProject:"You cannot install the Data API on shared projects. Contact the Project Admin for help.",installNotAllowed:"You need additional permissions to install the Data API. Contact your Organization Admin for help."},mce=({isLoading:t,isAllowedToManage:s,isCollaborator:n})=>t||s?null:n?md.installNotAllowedSharedProject:md.installNotAllowed,gce=({branch:t})=>{const s=ie(),{trackUiInteraction:n}=k(),{isAllowedToManage:r,isCollaborator:o,isLoading:a}=nP(t.project_id),{mutate:i,isPending:c}=de({mutationFn:()=>q.createProjectBranchDataApi(t.project_id,t.id,{}),onSuccess:()=>{re(md.successToast),s.invalidateQueries({queryKey:["dataAPI",t.project_id,t.id]})},onError:l=>{H(l)}});return e.jsx(yo,{title:md.title,description:md.description,children:e.jsx(sP,{tooltip:mce({isLoading:a,isAllowedToManage:r,isCollaborator:o})??void 0,tooltipDisabled:a||r,disabled:a||!r,onClick:()=>{n("data_api_enable"),i()},loading:c,children:"Enable"})})},Uv={title:"Working with the Data API",description:e.jsxs(e.Fragment,{children:["To build apps that use the Data API, configure authentication for your users and"," ",e.jsx(We,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security in Postgres"}),"."]})},_ce="_stepList_4dzv1_1",fce={stepList:_ce},bce="_root_1f463_1",xce="_header_1f463_7",jce="_headerTitle_1f463_12",yce="_headerAction_1f463_18",vce="_stepCompletedIcon_1f463_24",wce="_content_1f463_28",to={root:bce,header:xce,headerTitle:jce,headerAction:yce,stepCompletedIcon:vce,content:wce},rP=({title:t,description:s,status:n="pending",action:r,children:o})=>e.jsxs("div",{className:to.root,children:[n==="pending"?e.jsx(L,{name:"empty_task",size:20}):e.jsx(L,{name:"check_circle_inverted2",size:20,className:to.stepCompletedIcon}),e.jsxs("div",{className:to.content,children:[e.jsxs("header",{className:to.header,children:[e.jsxs("div",{className:to.headerTitle,children:[e.jsx(z,{level:6,children:t}),e.jsx(T,{children:s})]}),e.jsx("div",{className:to.headerAction,children:r})]}),e.jsx("div",{children:o})]})]}),oP=()=>e.jsxs("div",{className:to.root,children:[e.jsx($,{width:20,height:20}),e.jsxs("div",{className:to.content,children:[e.jsx($,{height:20,width:120}),e.jsx($,{height:20,width:"100%"})]})]}),Fv={title:"Configure Neon Auth",description:"Authentication for your application's users whose actions will access the Data API. This will be used to set up your access policies."},Sce=()=>{const t=O(),{data:s,isLoading:n}=Po(t.projectId);if(n)return e.jsx(oP,{});const r=s==null?void 0:s.some(o=>o.auth_provider==="stack");return e.jsx(rP,{title:Fv.title,description:Fv.description,status:r?"completed":"pending",action:e.jsx(P,{appearance:"secondary",as:We,href:F(C.ProjectsItemIdentity,{projectId:t.projectId}),icon:"settings",children:"Configure"})})},e_={title:"Protect your data",description:e.jsxs(e.Fragment,{children:["All of your tables need to be protected with"," ",e.jsx(We,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security"}),"."]}),warning:t=>{const s=t.length,n=t.map(r=>r.relname).join(", ");return e.jsx("div",{style:{display:"inline"},children:e.jsxs(T,{children:[n," ",$s("is",s)," publicly accessible to anyone with the project URL because RLS is not enabled."]})})}},Cce=Rt({relname:dt(),relrowsecurity:Cd()}),kce=()=>{const t=Ha(),{projectId:s}=O();return Lc({queryKey:{key:["get_public_tables",(t==null?void 0:t.database.name)??"",s,(t==null?void 0:t.database.branch_id)??""],appendConnectionString:!1},query:`
SELECT
  relname,
  relrowsecurity
FROM
  pg_class
JOIN
  pg_catalog.pg_namespace n ON n.oid = pg_class.relnamespace
WHERE
  n.nspname = 'public'
  AND relkind = 'r';
    `,zodSchema:Cce,options:{enabled:!!t,staleTime:2*sb},connectionParams:{branchId:t==null?void 0:t.database.branch_id,dbName:t==null?void 0:t.database.name}})},Ice=()=>{const{data:t,isLoading:s}=kce();if(s||!t)return e.jsx(oP,{});const n=t.filter(r=>!r.relrowsecurity);return e.jsx(rP,{title:e_.title,description:e_.description,status:n.length===0?"completed":"pending",children:n.length>0&&e.jsx(Q,{appearance:"warning",children:e_.warning(n)})})},Pce=()=>e.jsx(yo,{title:Uv.title,description:Uv.description,children:e.jsxs("div",{className:fce.stepList,children:[e.jsx(Sce,{}),e.jsx(Ice,{})]})}),Tce=()=>{const{branch:t}=ut(),{url:s,isLoading:n}=ece((t==null?void 0:t.project_id)??"",(t==null?void 0:t.id)??"");return!t||n?e.jsx(pe,{}):s?e.jsxs(e.Fragment,{children:[e.jsx(dce,{url:s},"enabled"),e.jsx(Pce,{}),e.jsx(pce,{projectId:t.project_id,branchId:t.id})]}):e.jsx(gce,{branch:t},"disabled")},Nce=()=>e.jsx(Ms,{fallback:e.jsx(pe,{}),children:e.jsx(Tce,{})}),Ace="_card_14u2f_1",Ece="_cardText_14u2f_14",qv={card:Ace,cardText:Ece},_m=({icon:t,text:s,action:n})=>e.jsxs("div",{className:qv.card,children:[e.jsxs("div",{className:qv.cardText,children:[t&&e.jsx(L,{name:t,size:24}),e.jsx("div",{children:s})]}),n]}),$ce="_searchField_1cdno_1",Oce={searchField:$ce},Rce=({branch:t})=>{var b;const{projectId:s}=O(),n=ds({projectId:s}),r=m.useMemo(()=>{var f;return((f=n.data)==null?void 0:f.endpoints)??[]},[(b=n.data)==null?void 0:b.endpoints]),[o,a]=m.useState(""),i=ee("branches_list_server_side_pagination"),c=ee("branches_list_server_side_sorting"),[l,d]=m.useState({sort_by:"name",sort_order:"asc",limit:i?O_:void 0}),{branches:u,annotations:h,branchesById:p,isLoading:g,error:_,refetch:x}=Zf({projectId:s,...l}),j=m.useMemo(()=>u.filter(f=>f.parent_id===t.id),[u,t]);return _?e.jsx(is,{title:_.message||String(_)}):j.length>0?e.jsxs(e.Fragment,{children:[e.jsx(HI,{onChange:a,placeholder:"Filter branches by name",className:Oce.searchField,size:"s"}),e.jsx(lx,{refreshBranches:x,children:e.jsx(ZI,{endpoints:r,projectId:s,branches:j,branchesById:p,branchesLoading:g,searchValue:o,onSortingChange:f=>{c&&d(y=>({...y,...f,cursor:void 0}))},annotations:h,branchesCount:j.length,onPaginationChange:f=>{i&&d(y=>({...y,...f}))}})})]}):e.jsx(_m,{icon:"branch_gradient",text:e.jsxs("span",{children:[e.jsx(yd,{branch:t,noIcon:!0})," does not have any child branches."]}),action:e.jsx(dx,{parentId:t.id,children:"Create child branch"})})},Bce="_row_15kkf_1",Lce="_buttonContainer_15kkf_5",t_={row:Bce,buttonContainer:Lce},aP=({role:t,branch:s,children:n,onPasswordChanged:r})=>{const{projectId:o,project:a}=O(),{trackUiInteraction:i}=k(),{mutateAsync:c,isPending:l}=HE(),[d,u]=m.useState(),[h,p]=m.useState(!1),[g,_]=m.useState(""),[x,j]=m.useState(!1),b=s.id,f=m.useCallback(async()=>{try{const{data:v}=await c({projectId:o,branchId:b,role:t.name});u(v),j(!0),p(!1),r&&r(v.role),_(v.role.password||"")}catch(v){const w=cs(v);H(w)}},[t,r,o,b,c]);m.useEffect(()=>{x||u(void 0)},[x]);const y=m.useMemo(()=>{const v=`PGUSER=${t.name}
PGPASSWORD=${g}`,w=new Blob([v],{type:""});return window.URL.createObjectURL(w)},[t,g]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(y),[y]),a?e.jsxs(e.Fragment,{children:[h&&e.jsxs(Qe,{isOpen:!0,onRequestClose:()=>p(!1),width:468,"data-qa":"reset_role_password_confirmation",title:"Reset password",children:[e.jsxs(be,{children:[e.jsxs("div",{className:t_.row,children:["You are about to reset the password for the role"," ",e.jsx(ke,{children:t.name})," on the branch"," ",e.jsx(ke,{children:s.name}),"."]}),e.jsx("div",{className:t_.row,children:"After reset, the current password will no longer be valid or accessible."})]}),e.jsxs(ge,{children:[e.jsx(P,{appearance:"secondary",onClick:()=>p(!1),children:"Cancel"}),e.jsx(cR,{succeed:!!d,loading:l,label:["Reset","Loading","Done"],onClick:f})]})]}),x&&g&&e.jsx(Qe,{isOpen:!0,onRequestClose:()=>{j(!1)},title:"Reset password","data-qa":"reset_role_password_success",children:e.jsxs(be,{children:[e.jsxs(T,{children:["Password for the role ",e.jsx(ke,{children:t.name})," in the branch ",e.jsx(ke,{children:s.name})," was reset successfully. Copy the password or download the .env file.",!a.store_passwords&&e.jsxs(e.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),e.jsx("br",{}),e.jsx("br",{}),"Password:"]}),e.jsx("br",{}),e.jsx(Un,{reveal:{getUnmaskedValue:()=>Promise.resolve(g)},copy:{getUnmaskedValue:()=>Promise.resolve(g),onCopy:()=>i("role_created_popup_copy_password_clicked")},children:"*******"}),e.jsx("br",{}),y&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Download the .env file to save the user's password."}),e.jsx("br",{}),e.jsx("div",{className:t_.buttonContainer,children:e.jsx(P,{as:"a",size:"l",target:"_blank",href:y,download:".env",onClick:()=>i("reset_password_download_credentials_clicked"),children:"Download .env"})})]})]})}),n(()=>{i("connection_details_password_reset_clicked"),p(!0)})]}):null},zv="__ADD_ENDPOINT__",Dce=({selectedEndpointId:t,disabled:s,setSelectedEndpoint:n})=>{var y;const r=Ne(),{trackUiInteraction:o}=k(),[a,i]=m.useState(!1),{branch:c}=ut(),{project:l,projectId:d}=O(),{billingUrl:u}=wo(),h=Mf(l),p=qp({projectId:d}),g=!p.isLoading&&p.isLimitExceeded,_=RS({projectId:d}),x=!_.isLoading&&_.isLimitExceeded,b=(y=hs({projectId:d,branchId:(c==null?void 0:c.id)??""}).data)==null?void 0:y.endpoints.some(dn),f=m.useMemo(()=>{if((x||g&&b)&&h){const v=K1("read_only");return{key:zv,label:`Upgrade to add ${v}s...`,onClick:()=>{r.push(u),o("endpoint_select_upgrade_to_pro_clicked")}}}return{key:zv,label:"Add compute...",onClick:()=>{o("endpoint_select_new_endpoint_clicked"),i(!0)}}},[b,r,x,h,g,o,u]);return e.jsxs(e.Fragment,{children:[e.jsx(im,{projectId:d,"data-qa":"connection_fields_compute_select",disabled:s,extraOption:f,endpointId:t,onChange:v=>n(v??void 0)}),c&&l?e.jsx(qn,{isOpen:a,onRequestClose:()=>i(!1),mode:"create",project:l,branchId:c.id,endpointType:b?"read_only":"read_write"}):null]})},Hv={unarchiveAlert:"This branch is archived. Connecting to the branch will unarchive it.",unarchiveAlertSlow:"This branch is archived. Connecting to the branch will unarchive it. Query times may be slow during this process."},Mce="_root_m52h7_1",Uce="_section_m52h7_7",Fce="_col_m52h7_11",qce="_roleLabel_m52h7_22",Gr={root:Mce,section:Uce,col:Fce,roleLabel:qce},zce=({fixedBranch:t,fixedEndpoint:s})=>{const{projectId:n,isLoading:r,project:o}=O(),{branch:a,setBranch:i}=ut(),{selectOptionsById:c,branchesById:l}=Ye(),[d,u]=m.useState(null),[h,p]=m.useState(),g=hs({projectId:n,branchId:(a==null?void 0:a.id)??""}),_=m.useMemo(()=>{var E;return s??((E=g.data)==null?void 0:E.endpoints.find(K=>K.id===h))},[s,g.data,h]),[x,j]=Yte();m.useEffect(()=>{const E=x?l[x]:void 0;E&&E!==a&&i(E)},[x,l,a,i]);const{list:b,selectOptions:f,isLoading:y}=un(),[v,w]=Bc();m.useEffect(()=>{t&&j(t.id)},[t,j]);const{setPassword:S,clearPasswords:I}=Ic(),N=m.useCallback(E=>{S(n,E),u({value:E.name,label:E.name,role:E})},[n,S]),D=m.useCallback(E=>{S(n,E)},[S,n]);m.useEffect(()=>()=>{I(n)},[I,n]);const U=Jn(m.useMemo(()=>_?{exclusive:{endpoints:[_.id]},shared:{projects:[_.project_id],branches:[_.branch_id]}}:null,[_]));return r||!o?null:e.jsxs("div",{className:Gr.root,children:[(a==null?void 0:a.current_state)==="archived"&&e.jsx(Q,{appearance:"info",children:kc(a)?Hv.unarchiveAlertSlow:Hv.unarchiveAlert}),e.jsxs("div",{className:Gr.section,children:[e.jsx(R,{id:"branch",className:Gr.col,label:"Branch",children:e.jsx(LS,{includeNoneOption:!0,"data-qa":"connection_fields_branch_select",disabled:!!t,value:a?c[a.id]:void 0,onChange:E=>(E==null?void 0:E.branch)&&j(E.value),canCreateBranch:!0,onCreateBranch:E=>j(E.id)})}),e.jsx(R,{id:"compute",className:Gr.col,label:"Compute",children:e.jsx(Dce,{selectedEndpointId:_==null?void 0:_.id,disabled:!!s,setSelectedEndpoint:E=>p(E==null?void 0:E.id)})})]}),e.jsxs("div",{className:Gr.section,children:[e.jsx(R,{id:"database",className:Gr.col,label:"Database",children:!y&&e.jsx(fb,{"data-qa":"connection_fields_database_select",value:v?f.find(E=>E.value===v):void 0,onChange:E=>E&&w(E.value)})}),e.jsx(R,{id:"role",className:Gr.col,label:e.jsxs("div",{className:Gr.roleLabel,children:[e.jsx("span",{children:"Role"}),e.jsx("span",{children:a&&d?e.jsx(aP,{role:d.role,branch:a,onPasswordChanged:D,children:E=>e.jsx(Er,{lockedMessage:U,children:e.jsx(A,{onClick:E,disabled:!!U,children:"Reset password"})})}):e.jsx("button",{disabled:!0,type:"button",children:"Reset password"})})]}),children:e.jsx(SR,{"data-qa":"connection_fields_role_select",onAddUser:N,onChange:u,value:d})})]}),e.jsx("div",{children:e.jsx(yI,{branch:a,endpoint:_,role:d==null?void 0:d.role,database:v?b.find(E=>E.name===v):void 0})})]})},Vv={passwordSaved:e.jsxs(e.Fragment,{children:["Your password is saved in a secure storage vault."," ",e.jsx(A,{icon:"external_link",href:"https://neon.tech/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]}),passwordNotAccessible:t=>e.jsxs(e.Fragment,{children:["The password is not accessible after closing this modal. You can reset the password on the"," ",e.jsx(A,{href:t,openInNewTab:!0,children:"Roles"})," ","page."," ",e.jsx(A,{icon:"external_link",href:"https://neon.tech/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]})},Hce="_footer_1pc98_1",Vce={footer:Hce},Wce=({project:{id:t,store_passwords:s}})=>{const n=F(te.ProjectsItemRoles,{projectId:t});return e.jsx(jb,{className:Vce.footer,children:e.jsx("div",{children:s?Vv.passwordSaved:Vv.passwordNotAccessible(n)})})},hx=({branch:t,endpoint:s,project:n,isOpen:r,...o})=>{const a=(t==null?void 0:t.name)??(s==null?void 0:s.branch_id),{trackUiInteraction:i}=k();return m.useEffect(()=>{r&&i("connection_details_modal_shown")},[r,i]),e.jsxs(Qe,{isOpen:r,width:750,"data-qa":"connection_details_modal",title:a?`Connection details for ${a}`:"Connect to your database",...o,children:[e.jsx(be,{children:e.jsx(zce,{fixedBranch:t,fixedEndpoint:s})}),e.jsx(ge,{children:e.jsx(Wce,{project:n})})]})},Gce="_group_t9h1w_1",Kce="_item_t9h1w_19",Qce="_header_t9h1w_27",Yce="_body_t9h1w_34",Uh={group:Gce,item:Kce,header:Qce,body:Yce},hc=({className:t,...s})=>e.jsx("div",{className:M(Uh.group,t),...s,role:"row"}),bt=({className:t,label:s,"aria-label":n,bodyClassName:r,children:o,...a})=>{const{fieldProps:i,labelProps:c}=H1({"aria-label":n,label:s,labelElementType:"span"});return e.jsxs("div",{className:M(Uh.item,t),...a,role:"cell",children:[s&&e.jsx("span",{className:Uh.header,...c,children:s}),e.jsx("div",{className:M(Uh.body,r),...i,children:o})]})},Jce="_wrapper_115ga_1",Zce={wrapper:Jce},Xce=({projectId:t,branchId:s,setShowUpgradeModal:n})=>{var u;const{trackUiInteraction:r}=k(),o=qp({projectId:t}),a=hs({projectId:t,branchId:s});if(o.isLoading)return null;const i=!((u=a.data)!=null&&u.endpoints.some(dn)),c=i?"Add a compute to connect to the branch from an application or client.":"Read Replicas: Scale your application by offloading your read workload to a read-only instance of your database.",l=i?"Add a compute":"Add Read Replica",d=!i&&o.limit===0;return e.jsx(_m,{icon:"compute_time_gradient",text:c,action:d?e.jsx(P,{onClick:()=>{r("branch_page_compute_upgrade_plan_clicked"),n(!0)},appearance:"secondary","data-qa":"upgrade_plan_button",children:"Upgrade to paid plan"}):e.jsx(tx,{appearance:i?"primary":"secondary",branchId:s,children:l})})},ele="_endpointGroup_1dj3m_1",tle="_leftSection_1dj3m_8",sle="_rightSection_1dj3m_13",nle="_timestampColumn_1dj3m_19",rle="_actions_1dj3m_23",ole="_actionsButton_1dj3m_27",ale="_endpointStatus_1dj3m_33",ile="_typeRow_1dj3m_39",cle="_idRow_1dj3m_45",lle="_editableName_1dj3m_54",Sn={endpointGroup:ele,leftSection:tle,rightSection:sle,timestampColumn:nle,actions:rle,actionsButton:ole,endpointStatus:ale,typeRow:ile,idRow:cle,editableName:lle},dle=t=>{const s=t.name||K1(t.type),[n,r]=m.useState(s),o=Lf({projectId:t.project_id},{onSettled(i,c){if(c){r(s);return}i!=null&&i.endpoint.name&&r(i==null?void 0:i.endpoint.name)}}),a=m.useCallback(i=>{r(i),o.mutateAsync({endpointId:t.id,request:{endpoint:{name:i}}})},[t.id,o]);return m.useEffect(()=>{t.name!=null&&r(t.name)},[t.name]),{edit:a,displayName:n,isLoading:o.isPending}};function Wv(t){if(t!==void 0&&t!==z1)return le(t)}function ule(t){let s="unknown",n="",r="";const{name:o}=t;switch(t.current_state){case"active":s="ACTIVE",r="Started",n=Wv(t.started_at)??"";break;case"idle":s="SUSPENDED",r="Suspended",n=Wv(t.suspended_at)??"";break;case"init":s="STARTING";break}return{status:s,timestamp:n,timestampLabel:r,name:o}}const hle=({endpoint:t,...s})=>{const{trackUiInteraction:n}=k(),{status:r,timestamp:o,timestampLabel:a}=ule(t),i=fk(t),{displayName:c,edit:l,isLoading:d}=dle(t),u=`${F(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:t.project_id,branchId:t.branch_id})}?endpointId=${encodeURIComponent(t.id)}`;return e.jsxs(hc,{className:M(Sn.endpointGroup),children:[e.jsxs(bt,{"aria-label":"Type",bodyClassName:Sn.endpointStatus,className:Sn.leftSection,children:[e.jsxs("div",{className:Sn.typeRow,children:[e.jsx(z,{level:3,size:"h5","data-qa":"endpoint_item_compute_type",children:e.jsx(VC,{value:c,isLoading:d,onSave:l,className:Sn.editableName})}),e.jsx(ab,{endpoint:t,label:r}),t.type==="read_only"&&e.jsx(Z,{content:"This compute only accepts read requests",children:e.jsx(he,{children:"RO"})})]}),e.jsxs("div",{className:Sn.idRow,children:[e.jsx("code",{title:t.id,children:t.id})," ",e.jsx(bo,{text:t.id})]})]}),e.jsxs("div",{className:Sn.rightSection,children:[o&&e.jsx(bt,{label:a,className:Sn.timestampColumn,children:o}),e.jsx(bt,{label:"Size",children:e.jsx(mm,{endpoint:t})}),e.jsxs(bt,{"aria-label":"Actions",bodyClassName:Sn.actions,children:[e.jsx(P,{appearance:"secondary","data-qa":"endpoint_item_edit_button",onClick:()=>{n("branch_page_compute_edit_clicked"),s.onEditEndpoint(t)},children:"Edit"}),e.jsx(P,{appearance:"primary","data-qa":"endpoint_item_connect_button",size:"s",onClick:()=>{n("branch_page_compute_connect_clicked"),s.onConnectEndpoint(t)},children:"Connect"}),e.jsx(Dt,{sections:[{items:[{label:"Monitor activity",icon:"graph",href:u,onClick:()=>{n("branch_page_compute_monitor_clicked")},"data-qa":"endpoint_item_monitor_menu_item"},{label:"Delete",icon:"trash",onClick:()=>{n("branch_page_compute_edit_clicked"),i()},"data-qa":"endpoint_item_delete_menu_item"}]}],children:e.jsx(Zt,{iconName:"actions",className:Sn.actionsButton,"data-qa":"endpoint_item_actions_button"})})]})]})]})},ple=({project:t,branch:s})=>{const{trackUiInteraction:n}=k(),r=qp({projectId:t.id}),[o,a]=m.useState(!1),[i,c]=m.useState(!1),[l,d]=m.useState(),u=hs({projectId:t.id,branchId:s.id}),h=m.useCallback(()=>{c(!1)},[]),p=m.useCallback(f=>{d(f??void 0),c(!0)},[]),[g,_]=m.useState(null),x=m.useCallback(f=>{n("branch_view_endpoints_edit_endpoint_drawer_opened"),_(f)},[n]),j=m.useCallback(()=>{_(null)},[]),b=m.useMemo(()=>{var f;return((f=u.data)==null?void 0:f.endpoints.concat().sort(eb))??[]},[u.data]);return u.status==="pending"||r.isLoading?br(3,f=>e.jsx(hc,{children:e.jsx(bt,{"aria-label":"Loading"})},f)):!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsx(hx,{isOpen:i,onRequestClose:h,branch:s,endpoint:l,project:t}),e.jsx(Pt,{type:gt.EndpointLimitReached,isOpen:o,onRequestClose:()=>{a(!1)}}),g!==null&&e.jsx(qn,{isOpen:!0,onRequestClose:j,mode:"edit",project:t,endpoint:g}),e.jsxs("div",{className:Zce.wrapper,children:[e.jsx("div",{role:"table","aria-label":"Computes",children:b.map(f=>e.jsx(hle,{endpoint:f,onEditEndpoint:x,onConnectEndpoint:p},f.id))}),e.jsx(Xce,{projectId:t.id,branchId:s.id,setShowUpgradeModal:a})]})]})},mle=({children:t,branch:s,...n})=>{const{trackUiInteraction:r}=k(),[o,a]=m.useState(!1),i=m.useCallback(()=>a(!1),[]),c=m.useCallback(()=>{r("create_database_button_clicked"),a(!0)},[r]),{data:l}=hs({projectId:s.project_id,branchId:s.id}),d=m.useMemo(()=>{var h;return(h=Ba((l==null?void 0:l.endpoints)??[]))==null?void 0:h.id},[l]),u=Jn(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[s.project_id],branches:[s.id]}}:null,[s.id,s.project_id,d]));return e.jsxs(e.Fragment,{children:[e.jsx(CR,{projectId:s.project_id,branchId:s.id,isOpen:o,onRequestClose:i,formProps:{onSuccess:i}}),e.jsx(Er,{lockedMessage:u,children:e.jsx(P,{...n,onClick:c,"data-qa":"database_create_button",disabled:!!u||n.disabled,children:t||"New Database"})})]})},gle="_buttonContainer_13dcw_1",iP={buttonContainer:gle},_le="_group_1t3xx_1",fle="_overflow_1t3xx_10",ble="_actions_1t3xx_20",po={group:_le,overflow:fle,actions:ble},xle=({database:t})=>{const{trackUiInteraction:s}=k(),{deleteDatabase:n}=un(),{projectId:r}=O(),{branch:o}=ut(),{data:a}=hs({projectId:r,branchId:(o==null?void 0:o.id)??""}),i=m.useMemo(()=>{var u;return(u=Ba((a==null?void 0:a.endpoints)??[]))==null?void 0:u.id},[a]),c=m.useMemo(()=>{const u=new URLSearchParams;return u.set("database",t.name),u.toString()},[t]),l=Jn(m.useMemo(()=>o&&i?{exclusive:{endpoints:i?[i]:void 0},shared:{projects:[o.project_id],branches:[o.id]}}:null,[o,i])),d=m.useMemo(()=>[{items:[{label:"Delete database",onClick(){s("branch_page_databases_delete_database_clicked"),n(t)},disabled:!!l},{label:"Query",onClick(){s("branch_page_databases_query_database_clicked")},href:nx(C.ProjectsItemBranchesSQLEditor,{projectId:r,branchId:o==null?void 0:o.id,queryString:c})}]}],[n,t,s,r,o,c,l]);return o?e.jsx(Dt,{sections:d,placement:"right top",children:e.jsx(Zt,{"aria-label":"Database actions",isDisabled:!!l})}):null},jle=({database:t})=>{const{trackUiInteraction:s}=k(),{projectId:n}=O(),{branch:r}=ut(),o=m.useMemo(()=>{const i=new URLSearchParams;return i.set("database",t.name),i},[t]),a=m.useMemo(()=>vI(n,r.id,o),[n,r,o]);return!a||!r?null:e.jsx(P,{as:q1,appearance:"primary",size:"s",to:a,onClick:()=>s("branch_page_databases_edit_data_clicked"),children:"Edit data"})},yle=({databases:t})=>e.jsx("div",{"aria-label":"Databases list",children:t.map(s=>e.jsxs(hc,{"aria-label":"Databases list item",className:po.group,children:[e.jsx(bt,{"aria-label":"Name",className:po.overflow,children:e.jsx("span",{children:s.name})}),e.jsx(bt,{label:"Owner",className:po.overflow,children:e.jsx("span",{children:s.owner_name})}),e.jsx(bt,{label:"Created",children:le(s.created_at)}),e.jsx(bt,{label:"Last updated",children:le(s.updated_at)}),e.jsxs(bt,{"aria-label":"Actions",bodyClassName:po.actions,children:[e.jsx(jle,{database:s}),e.jsx(xle,{database:s})]})]},s.id))}),vle=({branch:t,databases:s,roles:n,onResetToParentBranch:r})=>{const o=s.length>0,a=n.length===0,i=!t.default&&!o,c=e.jsx(Z,{content:"Adding a database requires a role to assign as the database owner. Add a role first.",disabled:!a,children:e.jsx("div",{children:e.jsx(mle,{appearance:"secondary",disabled:a,branch:t,children:"Add database"})})});return e.jsx(yo,{title:"Databases",description:e.jsxs("span",{children:["Manage the Postgres databases on this branch. For more information, see"," ",e.jsx(A,{href:"https://neon.tech/docs/manage/databases",openInNewTab:!0,children:"Manage databases."})]}),action:o&&c,children:o?e.jsx(yle,{databases:s}):e.jsx(_m,{icon:"database_gradient",text:e.jsxs("span",{children:[e.jsx("code",{children:t.name})," does not have any databases."]}),action:e.jsxs("div",{className:iP.buttonContainer,children:[i&&e.jsx(ux,{branch:t,onSuccess:r,children:l=>e.jsx(P,{appearance:"secondary",size:"s",...l,children:"Reset from parent"})}),c]})})})},wle=()=>e.jsxs(e.Fragment,{children:[e.jsx(yo,{title:"Roles",children:br(2,t=>e.jsx(hc,{children:br(5,s=>e.jsx(bt,{"aria-label":"Roles loading",children:e.jsx($,{height:12,width:80})},s))},t))}),e.jsx(yo,{title:"Databases",children:br(2,t=>e.jsx(hc,{children:br(5,s=>e.jsx(bt,{"aria-label":"Databases loading",children:e.jsx($,{height:12,width:80})},s))},t))})]}),Gv={unarchiveAlert:"Creating a role on an archived branch will unarchive it.",unarchiveAlertSlow:"Creating a role on an archived branch will unarchive it. Connection times may be slow during this process."},Sle="_root_fjb5m_1",Cle={root:Sle},kle=()=>{const{register:t,formState:{errors:s}}=nt(),{branch:n}=ut(),{selectOptionsById:r}=Ye();return e.jsxs("div",{className:Cle.root,children:[(n==null?void 0:n.current_state)==="archived"&&e.jsx(Q,{appearance:"info",children:kc(n)?Gv.unarchiveAlertSlow:Gv.unarchiveAlert}),e.jsx(R,{id:"branch_field",label:"Branch",inline:!0,children:e.jsx(LS,{value:n?r[n.id]:void 0,disabled:!0})}),e.jsx(R,{id:"name_field",error:!!s.name,label:"Name",inline:!0,children:e.jsx(ne,{...t("name",{required:!0})})})]})},Ile=({initialRole:t,onSuccess:s,onError:n,children:r})=>{const{projectId:o}=O(),{branch:a}=ut(),{fetch:i}=Ua(),{onRoleCreate:c}=Q1(),l=zn({shouldUnregister:!0,mode:"onChange",defaultValues:{name:(t==null?void 0:t.name)||""}}),d=u=>q.createProjectBranchRole(o,(a==null?void 0:a.id)??"",{role:{name:u.name}}).then(({data:h})=>{c(h),s&&s(h.role),i()},h=>{H(h),n&&n(h)});return e.jsx(us,{...l,children:e.jsx(Lt,{onSubmit:l.handleSubmit(d),children:r})})},Ple=({initialRole:t,onError:s,onSuccess:n,...r})=>e.jsx(Qe,{title:"Role creation",width:500,"data-qa":"create_role_modal",...r,children:e.jsxs(Ile,{initialRole:t,onSuccess:o=>{n&&n(o),r.onRequestClose&&r.onRequestClose()},onError:s,children:[e.jsx(be,{children:e.jsx(kle,{})}),e.jsx(ge,{children:e.jsx(_e,{children:"Create"})})]})}),Tle=({branch:t,children:s,...n})=>{const{trackUiInteraction:r}=k(),[o,a]=m.useState(!1),i=m.useCallback(()=>a(!1),[]),c=m.useCallback(()=>{r("create_user_button_clicked"),a(!0)},[r]),{data:l}=hs({projectId:t.project_id,branchId:t.id}),d=m.useMemo(()=>{var h;return(h=Ba((l==null?void 0:l.endpoints)??[]))==null?void 0:h.id},[l]),u=Jn(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[t.project_id],branches:[t.id]}}:null,[t.id,t.project_id,d]));return e.jsxs(e.Fragment,{children:[e.jsx(Ple,{isOpen:o,onRequestClose:i}),e.jsx(Er,{lockedMessage:u,children:e.jsx(P,{...n,onClick:c,disabled:!!u||n.disabled,"data-qa":"create_role_button",children:s||"New Role"})})]})},Nle=({branch:t,handleResetPassword:s,handleDeleteRole:n})=>{const{trackUiInteraction:r}=k(),{data:o}=hs({projectId:t.project_id,branchId:t.id}),a=m.useMemo(()=>{var l;return(l=Ba((o==null?void 0:o.endpoints)??[]))==null?void 0:l.id},[o]),i=Jn(m.useMemo(()=>a?{exclusive:{endpoints:a?[a]:void 0},shared:{projects:[t.project_id],branches:[t.id]}}:null,[t.id,t.project_id,a])),c=m.useMemo(()=>[{items:[{label:"Reset password",onClick(){r("branch_page_roles_reset_password_clicked"),s()},disabled:!!i},{label:"Delete role",onClick(){r("branch_page_roles_delete_role_clicked"),n()},disabled:!!i}]}],[s,n,r,i]);return e.jsx(Dt,{sections:c,placement:"right top",children:e.jsx(Er,{lockedMessage:i,children:e.jsx(Zt,{"aria-label":"Role actions",isDisabled:!!i})})})},cP=({branch:t,role:s})=>{const{deleteRole:n}=Ua(),r=m.useCallback(()=>n(s),[n,s]);return s.name===Fd?null:e.jsx(aP,{branch:t,role:s,children:o=>e.jsx(Nle,{branch:t,handleResetPassword:o,handleDeleteRole:r})})},lP=({strings:t})=>e.jsx(Z,{content:t.join(", "),children:e.jsxs("span",{children:[t[0]??"-",t.length>1&&` +${t.length-1}`]})}),Ale=({branch:t,roles:s,roleDatabaseNames:n})=>s.map(r=>e.jsxs(hc,{className:po.group,"data-qa":"role_list_item",children:[e.jsx(bt,{"aria-label":"Name",className:po.overflow,children:e.jsx("span",{children:r.name})}),e.jsx(bt,{label:"Owns",className:po.overflow,children:e.jsx(lP,{strings:n[r.name]})}),e.jsx(bt,{label:"Created",children:le(r.created_at)}),e.jsx(bt,{label:"Last updated",children:le(r.updated_at)}),e.jsx(bt,{"aria-label":"Actions",bodyClassName:po.actions,children:e.jsx(cP,{role:r,branch:t})})]},r.name)),Ele="_actions_142i3_1",$le={actions:Ele},Ole=({branch:t,roles:s,roleDatabaseNames:n})=>{const r=m.useMemo(()=>[{key:"name",label:"Name"},{key:"name",label:"Owns",renderValue:o=>e.jsx(lP,{strings:n[o.name]})},{key:"name",label:"Created",renderValue:o=>le(o.created_at)},{key:"name",label:"Last updated",renderValue:o=>le(o.updated_at)},{key:"actions",label:"",renderValue:o=>!o.protected&&t&&e.jsx("div",{className:$le.actions,children:e.jsx(cP,{branch:t,role:o})}),tdAttrs:{width:"50px"}}],[t,n]);return e.jsx(Fn,{cols:r,data:s,keyField:"name",keyPrefix:t==null?void 0:t.id})},Rle=({branch:t,roles:s,databases:n,onResetToParentBranch:r})=>{const o=m.useMemo(()=>s.reduce((d,u)=>({...d,[u.name]:n.filter(h=>h.owner_name===u.name).map(h=>h.name)}),{}),[n,s]),a=m.useMemo(()=>s.length>3?e.jsx(Ole,{branch:t,roles:s,roleDatabaseNames:o}):e.jsx(Ale,{branch:t,roles:s,roleDatabaseNames:o}),[t,o,s]),i=s.length>0,c=!t.default&&!i,l=e.jsx(Tle,{appearance:"secondary",branch:t,children:"Add role"});return e.jsx(yo,{title:"Roles",description:e.jsxs("span",{children:["Manage the Postgres roles on this branch. For more information, see"," ",e.jsx(A,{href:"https://neon.tech/docs/manage/roles",openInNewTab:!0,children:"Manage roles."})]}),action:i&&l,"data-qa":"roles_section",children:i?a:e.jsx(_m,{icon:"roles_gradient",text:e.jsxs("span",{children:[e.jsx("code",{children:t.name})," does not have any roles."]}),action:e.jsxs("div",{className:iP.buttonContainer,children:[c&&e.jsx(ux,{branch:t,onSuccess:r,children:d=>e.jsx(P,{appearance:"secondary",size:"s",...d,children:"Reset from parent"})}),l]})})})},Ble=({onResetToParentBranch:t})=>{const{list:s,isLoading:n}=Ua(),{list:r,isLoading:o}=un(),{branch:a}=ut();return a?n||o?e.jsx(wle,{}):e.jsxs(e.Fragment,{children:[e.jsx(Rle,{branch:a,roles:s,databases:r,onResetToParentBranch:t}),e.jsx(vle,{branch:a,databases:r,roles:s,onResetToParentBranch:t})]}):e.jsx(is,{})},vi={computes:{label:"Computes",value:"computes",to:C.ProjectsItemBranchesComputes,event:"branch_page_compute_tab_clicked"},"roles-and-databases":{label:"Roles & Databases",value:"roles-and-databases",to:C.ProjectsItemBranchesRolesAndDatabases,event:"branch_page_roles_and_databases_tab_clicked"},"child-branches":{label:"Child branches",value:"child-branches",to:C.ProjectsItemBranchesChildBranches,event:"branch_page_child_branches_tab_clicked"},"data-api":{label:"Data API",badgeType:"beta",value:"data-api",to:C.ProjectsItemBranchesDataAPI,event:"branch_page_data_api_tab_clicked"}},Lle=t=>{const s=Ne(),{trackUiInteraction:n}=k(),r=ee("data_api"),{branchId:o,projectId:a,tab:i="computes"}=wc(),c=[vi.computes,vi["roles-and-databases"],vi["child-branches"]];r&&c.push(vi["data-api"]);const l=m.useCallback(d=>{const u=vi[d];n(u.event),s.push(F(u.to,{projectId:a,branchId:o}))},[s,a,o,n]);return e.jsxs(e.Fragment,{children:[e.jsx(pn,{options:c,value:i,onChange:l}),c.some(d=>d.value===i)?e.jsxs(e.Fragment,{children:[i==="computes"&&e.jsx(ple,{...t}),i==="roles-and-databases"&&e.jsx(Ble,{onResetToParentBranch:t.onResetToParentBranch}),i==="child-branches"&&e.jsx(Rce,{branch:t.branch}),i==="data-api"&&e.jsx(Nce,{})]}):e.jsx(ce,{to:F(vi.computes.to,{projectId:a,branchId:o})})]})},Dle=({branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r,onResetToParentBranch:o})=>{const{project:a}=O(),{limits:i,isLoading:c}=Mt(),{fetch:l}=Ua(),d=m.useRef(!1),u=Y1(t),{data:h}=zp({projectId:a==null?void 0:a.id}),p=m.useMemo(()=>{if(!h||u)return null;for(const g of h.pages)for(const _ of g.operations)if(_.branch_id===t.id&&_.action==="import_data")return _.failures_count>0?_:null;return null},[t.id,u,h]);return m.useEffect(()=>{!u&&d.current&&l(),d.current=u},[u,l]),c||!i?e.jsx(Bt,{}):!a||!t?e.jsx(kA,{}):e.jsxs(e.Fragment,{children:[e.jsx(pie,{branch:t,annotation:s,refreshBranches:n,onDeleteBranch:r}),p?e.jsx(fc,{className:$v.branchImportToast,children:"Database import failed"}):u?e.jsx(J1,{className:$v.branchImportToast,children:"Database import in progress"}):null,e.jsx(Zie,{project:a,branch:t,annotation:s,onResetToParentBranch:o,onSetBranchProtection:n}),e.jsx(Lle,{project:a,branch:t,onResetToParentBranch:o})]})},Mle=()=>e.jsxs(e.Fragment,{children:[e.jsx(_ie,{}),e.jsx(Xie,{}),e.jsx(Nc,{title:"Computes"}),e.jsx(tie,{endpoints:[],isLoading:!0})]}),Ule=(t,s)=>{var o;const{branchesById:n,annotations:r}=Ye();return n[t]&&s===((o=n[t])==null?void 0:o.project_id)?{branch:n[t],annotation:r[t]}:{branch:void 0,annotation:void 0}},Fle=()=>{const{branchId:t,projectId:s}=wc(),{isLoading:n}=O(),{branch:r,annotation:o}=Ule(t,s),{fetch:a}=Ye(),i=Ne(),c=sx("branch"),[l,d]=IA(),u=n||l.isLoading,h=m.useCallback(()=>{q.getProjectBranch(s,t).then(({data:p})=>{p.branch.project_id===s?d({isLoading:!1,data:p.branch}):d({isLoading:!1,error:"Branch doesn't belong to the project"})}).catch(p=>{const g=PA(p);d({isLoading:!1,error:g})})},[s,t,d]);return m.useEffect(()=>{d({data:r,isLoading:!r}),h()},[r,d,h]),u?e.jsx(Mle,{}):l.error||!l.data?e.jsx(is,{title:l.error}):e.jsxs(e.Fragment,{children:[c,e.jsx(Dle,{branch:l.data,annotation:o,refreshBranches:()=>{a(),h()},onDeleteBranch:()=>{a(),i.push(F(C.ProjectsItemBranches,{projectId:s}))},onResetToParentBranch:h})]})},qle=(t="/")=>{const s=Ne();return m.useCallback(()=>{s.length?s.goBack():s.push(t)},[s,t])},Kv={archivedBranchAlertSlow:"This branch is archived. Creating a child branch will unarchive it. Connection times may be slow during this process.",archivedBranchAlert:"This branch is archived. Creating a child branch will unarchive it."},zle=()=>{const{watch:t}=nt(),{branchesById:s}=Ye(),n=s[t("parentId")];return!n||n.current_state!=="archived"?null:e.jsx(Q,{appearance:"info",children:kc(n)?Kv.archivedBranchAlertSlow:Kv.archivedBranchAlert})},Hle="_root_nbwb7_1",Vle="_header_nbwb7_10",Wle="_panels_nbwb7_15",Gle="_docPanel_nbwb7_21",ah={root:Hle,header:Vle,panels:Wle,docPanel:Gle};function Kle(t){if(t.isLimitExceeded||t.leftCount&&t.leftCount<3)return t.message}const Qle=({rootBranchesLimits:t})=>{const{field:s}=Op({name:"type"}),{trackUiInteraction:n}=k();return e.jsx(R,{label:tc.branchType,"data-qa":"branch_type_toggle",children:e.jsxs(Da,{children:[e.jsx(as,{value:"DATA_AND_SCHEMA",active:s.value==="DATA_AND_SCHEMA",onClick:()=>s.onChange("DATA_AND_SCHEMA"),children:"Data and schema"}),e.jsxs(as,{disabled:t.isLimitExceeded,tooltip:Kle(t),value:"SCHEMA_ONLY",active:s.value==="SCHEMA_ONLY",onClick:()=>{n("schema_only_branches_toggle_clicked"),s.onChange("SCHEMA_ONLY")},"data-qa":"schema_only_toggle",children:["Schema-only"," ",e.jsx(he,{appearance:"experimental",margin:"left",children:"Beta"})]})]})})},Yle=({project:t})=>{const{watch:s}=nt(),n=s("type");if(n==="DATA_AND_SCHEMA"){const r=`${F(C.ProjectsItemSettings,{projectId:t.id})}#storage`;return e.jsx(T,{children:tc.subTitle(r)})}return n==="SCHEMA_ONLY"?e.jsx(T,{children:tc.schemaOnlyOverrides.subTitle}):null},Jle="_actions_e0gjf_1",Zle={actions:Jle},Xle=({onCancel:t})=>{const{trackUiInteraction:s}=k(),{formState:n}=nt(),r=m.useCallback(()=>{s("branch_form_dismissed"),t==null||t()},[t,s]);return e.jsxs("div",{className:Zle.actions,children:[e.jsx(P,{disabled:n.isSubmitting||!n.isValid,type:"submit",children:tc.createBranch}),t&&e.jsx(P,{appearance:"secondary",disabled:n.isSubmitting,onClick:r,children:tc.cancel})]})},ede="_root_5s9wu_1",tde="_title_5s9wu_12",sde="_description_5s9wu_18",nde="_actions_5s9wu_24",rde="_thankYou_5s9wu_33",wl={root:ede,title:tde,description:sde,actions:nde,thankYou:rde},ode=({surveyKey:t})=>{const{surveys:s,enroll:n,dismiss:r}=yT(),o=s[t],a=o==null?void 0:o.questions[0],[i,c]=m.useState("active"),[l,d]=xs(Me.SurveyShown,t,!1),u=vd(()=>{n(t),c("submitted"),d(!0)}),h=vd(()=>{r(t),c("dismissed"),d(!0)});return!a||l&&i!=="submitted"||i==="dismissed"?null:e.jsxs("div",{className:wl.root,children:[i==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(he,{appearance:"experimental",children:"Coming soon"}),e.jsx("div",{className:wl.title,children:a.question}),e.jsx("div",{className:wl.description,children:a.description}),e.jsxs("div",{className:wl.actions,children:[e.jsx(P,{appearance:"primary",size:"s",onClick:u,children:"Yes"}),e.jsx(P,{appearance:"secondary",size:"s",onClick:h,children:"Not now"})]})]}),i==="submitted"&&e.jsxs("div",{className:wl.thankYou,children:["Thank you for your feedback!",e.jsx("br",{}),"We'll be in touch."]})]})},dP=m.memo(({className:t})=>{const{trackUiInteraction:s}=k();return e.jsx(T2,{className:t,vertical:!0,title:"More ways to create branches",extraBlock:e.jsx(ode,{surveyKey:"anonymization_branches_optin"}),items:[{title:"Using our CLI",url:"https://neon.tech/docs/guides/branching-neon-cli",onClick:()=>{s("new_branch_doc_links_using_cli_clicked")}},{title:"Using our API",url:"https://neon.tech/docs/guides/branching-neon-api",onClick:()=>{s("new_branch_doc_links_using_api_clicked")}},{title:"Using GitHub Actions",url:TA,onClick:()=>{s("new_branch_doc_links_using_github_actions_clicked")}}]})});dP.displayName="NewBranchDocLinks";const ade=({initialParentId:t,onSuccess:s,onCancel:n})=>{const{project:r}=O(),o=kR(),a=ee("schema_only_branches");return!r||o.isLoading?null:e.jsxs("div",{className:ah.root,children:[e.jsx(z,{level:1,className:ah.header,children:tc.title}),e.jsxs("div",{className:ah.panels,children:[e.jsxs(IR,{initialParentId:t,onSuccess:s,children:[a&&e.jsx(Qle,{rootBranchesLimits:o}),e.jsx(Yle,{project:r}),e.jsx(zle,{}),e.jsx(PR,{}),e.jsx(TR,{}),e.jsx(NR,{}),e.jsx(AR,{project:r}),e.jsx(Xle,{onCancel:n})]}),e.jsx("div",{className:ah.docPanel,children:e.jsx(dP,{})})]})]})},ide=()=>{const{projectId:t}=O(),s=Ne(),n=m.useMemo(()=>new URLSearchParams(s.location.search).get("parentId")??void 0,[s.location.search]),r=qle(F(C.ProjectsItemBranches,{projectId:t}));return e.jsx(ade,{initialParentId:n,onSuccess:o=>{s.replace(F(C.ProjectsItemBranchesItem,{projectId:t,branchId:o.id}))},onCancel:r})},cde={dividerText:"Or restore from a snapshot"},lde="_root_xp5xc_1",dde="_divider_xp5xc_7",Qv={root:lde,divider:dde},ude=(t,s)=>`${t}_old_${Ln(s)}`,hde=t=>{const s=ie();return de({mutationFn:({timestamp:n,branchPreservedName:r})=>q.restoreProjectBranch(t.project_id,t.id,{source_branch_id:t.id,source_timestamp:n,preserve_under_name:r}),onSuccess:()=>s.invalidateQueries({queryKey:ob({projectId:t.project_id})})})},pde=(t,s)=>`${t}_from_snapshot_${Ln(s)}`,mde=t=>{const s=ie();return de({mutationFn:({snapshotId:n,snapshotRestoredBranchName:r})=>q.restoreSnapshot({projectId:t.project_id,snapshotId:n,name:r}),onSuccess:()=>s.invalidateQueries({queryKey:ob({projectId:t.project_id})})})};var Bn=(t=>(t.Hours="hours",t.Days="days",t.Weeks="weeks",t.Months="months",t))(Bn||{}),rs=(t=>(t.PITR="pitr",t.Snapshot="snapshot",t))(rs||{});const mr={title:({timestamp:t,type:s,isRestoreMode:n})=>{switch(s){case rs.PITR:return`${n?"Restore":"Preview"} branch from ${Ln(t)}`;case rs.Snapshot:return`${n?"Restore":"Preview"} snapshot_${Ln(t)}`}},drizzle:"Browse data",schemaDiff:"Compare schemas",timeTravel:"Query data",restore:"Restore",cancel:"Cancel",preview:"Preview data",descriptionTitle:({branchName:t,type:s})=>{switch(s){case rs.PITR:return e.jsxs(e.Fragment,{children:["You're about to restore ",e.jsx(ke,{children:t})," to an earlier point in time — here's what will happen:"]});case rs.Snapshot:return"You're about to restore a snapshot — here's what will happen:"}},description:({currentBranchName:t,timestamp:s,type:n,newBranchName:r})=>{switch(n){case rs.PITR:return[e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:t})," will be restored to how it was on ",e.jsx("b",{children:Ln(s)}),"."]}),e.jsxs(e.Fragment,{children:["Your current branch will be kept as a backup and renamed to ",e.jsx(ke,{children:r})]}),e.jsxs(e.Fragment,{children:["You can undo this restore as long as you keep ",e.jsx(ke,{children:r})]})];case rs.Snapshot:return["The restore operation occurs instantly",e.jsxs(e.Fragment,{children:["Your ",e.jsx(ke,{children:t})," branch will remain unchanged"]}),e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:r})," will be created as a new branch"]})]}}},gde="_viewSelect_mucng_1",_de="_description_mucng_5",fde="_descriptionList_mucng_15",bde="_descriptionItem_mucng_24",xde="_descriptionIcon_mucng_29",Sl={viewSelect:gde,description:_de,descriptionList:fde,descriptionItem:bde,descriptionIcon:xde};Cr(()=>import("./load-bundle-B_6N7ayM.js"),__vite__mapDeps([38,2]));const px=t=>["auth_jwks",t],uP=t=>st({queryKey:px(t),queryFn:async()=>(await q.getProjectJwks(t)).data}),jde=t=>{const s=ie();return de({mutationFn:async n=>(await q.addProjectJwks(t,{provider_name:n.providerName,jwks_url:n.jwksUrl,role_names:["authenticated","anonymous"],jwt_audience:n.expectedAudience?n.expectedAudience:void 0})).data,onSuccess:()=>{s.invalidateQueries({queryKey:px(t)})}})},yde=t=>{const s=ie();return de({mutationFn:async n=>(await q.deleteProjectJwks(t,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:px(t)})}})},vde={title:"Tables"},wde="_container_toqvi_1",Sde={container:wde},Cde=()=>e.jsx("div",{className:Sde.container,children:e.jsx(eu,{title:vde.title})}),kde={"--page-background":"#ffffff","--background":"#ffffff","--foreground":"#191919","--popover":"#ffffff","--popover-foreground":"#262626","--primary":"#121212","--primary-foreground":" #ffffff","--secondary":"#efefef","--secondary-foreground":"#2e2e2e","--muted":"#f5f5f5","--muted-foreground":"#262626","--accent":"#dedede","--accent-foreground":"#191919","--destructive":"#ff005c","--destructive-foreground":"#ffffff","--border":"#dedede","--input":"#ffffff","--table-font":"CommitMono, monospace","--interface-font":"intervariable, sans-serif","--edit":"#ffd69d","--edit-foreground":"#7f4c04","--submit":"#00b27d","--submit-foreground":"#fafafa","--table-vertical-lines":"1px","--icon-set":"update","--buttons-variant":"default","--radius":"0.5rem","--table-row":"#ffffff","--table-row-hover":"#f5f5f5","--table-row-border-hover":"#b0b0b0","--table-cell-text-muted":"#858585","--table-cell-selected-border":"#1a73e9","--table-cell-selected-background":"#1a73e914","--table-cell-relation-button":"#ebebeb","--filters-toolbar":"#fafafa","--filters-button":"#ebebeb","--input-placeholder":"#858585","--input-border":"#b0b0b0","--input-border-focus":"#2e2e2e","--sidebar-list-item":"#ffffff","--sidebar-list-item-text":"#191919","--sidebar-list-item-hover":"#f5f5f5","--sidebar-list-item-hover-text":"#191919","--sidebar-list-item-active":"#EBEBEB","--sidebar-list-item-active-text":"#191919","--sidebar-list-item-active-hover":"#EBEBEB","--sidebar-list-item-active-hover-text":"#191919","--sidebar-list-subview-arrow":"#a8a8a8","--sidebar-list-subview-arrow-active":"#262626","--button-outline":"#ffffff","--button-outline-hover":"#f5f5f5","--button-outline-text":"#191919","--button-outline-text-hover":"#191919","--button-outline-border":"#b0b0b0","--button-outline-border-hover":"#b0b0b0","--button-outline-active":"#EEE","--button-outline-active-hover":"#EEE","--button-outline-active-text":"#191919","--button-outline-active-hover-text":"#191919","--button-outline-active-border":"#949494","--button-outline-active-border-hover":"#949494","--number-color":"#F35815","--property-name":"#1A1A1A","--cursor":"#616161","--line-number":"#616161","--string-value":"#13862E","--boolean-value":"#5E49AF","--highlight-background":"#F4F4F470","--editor-background":"#ffffff","--selection":"#B4D7FF","--fold-gutter-hover":"#d6d9e4","--sql-variable":"#24292f","--sql-keyword":"#d73a4a","--sql-number":"#015cc5","--sql-string":"#022f62","--sql-boolean":"#24292f","--structure":"#f8f8f8","--structure-button-link-text":"var(--component-link_button-primary-color)","--structure-card-border":"#dedede","--structure-codeblock":"#fafafa","--structure-codeblock-border":"#dedede","--structure-codeblock-border-hover":"#cacbcf","--structure-codeblock-hover":"#f5f5f5","--structure-codeblock-edit":"#fff6e5","--structure-codeblock-edit-hover":"#ffedce","--structure-codeblock-edit-text":"#a45200","--structure-codeblock-edit-border":"#ffd484","--structure-codeblock-edit-border-hover":"#ffd484","--structure-edit":"#fff6e5","--structure-edit-text":"#a45200"},Ide={"--page-background":"#191919","--background":"#191919","--foreground":"#bfbfbf","--popover":"#191919","--popover-foreground":"#bfbfbf","--primary":"#f5f5f5","--primary-foreground":"#191d23","--secondary":"#15222e","--secondary-foreground":"#007bff","--muted":"#222222","--muted-foreground":"#757575","--accent":"#1c1c1c","--accent-foreground":"#bfbfbf","--destructive":"#ff467d","--destructive-foreground":"#fafafa","--border":"#2e2e2e","--input":"#191919","--table-font":"CommitMono, monospace","--interface-font":"intervariable, sans-serif","--filters-toolbar":"#222222","--filters-button":"#2e2e2e","--edit":"#ffd69d","--edit-foreground":"#7f4c04","--submit":"#00db9a","--submit-foreground":"#025a40","--table-vertical-lines":"1px","--icon-set":"update","--buttons-variant":"default","--radius":"0.5rem","--table-row":"#191919","--table-row-hover":"#1a1a1a","--table-row-border-hover":"#757575","--table-cell-text-muted":"#858585","--table-cell-selected-border":"#016BE6","--table-cell-selected-background":"#016BE614","--table-cell-relation-button":"#2e2e2e","--input-placeholder":"#757575","--input-border":"#2e2e2e","--input-border-focus":"#4f4f4f","--sidebar-list-item":"#191919","--sidebar-list-item-text":"#bfbfbf","--sidebar-list-item-hover":"#222222","--sidebar-list-item-hover-text":"#bfbfbf","--sidebar-list-item-active":"#2A2929","--sidebar-list-item-active-text":"#bfbfbf","--sidebar-list-item-active-hover":"#2A2929","--sidebar-list-item-active-hover-text":"#bfbfbf","--sidebar-list-subview-arrow":"#757575","--sidebar-list-subview-arrow-active":"#c8c8c8","--button-outline":"#191919","--button-outline-hover":"#222222","--button-outline-text":"#dedede","--button-outline-text-hover":"#dedede","--button-outline-border":"#2e2e2e","--button-outline-border-hover":"#4f4f4f","--button-outline-active":"#2a2929","--button-outline-active-hover":"#2a2929","--button-outline-active-text":"#dedede","--button-outline-active-hover-text":"#dedede","--button-outline-active-border":"#4f4f4f","--button-outline-active-border-hover":"#4f4f4f","--number-color":"#73C7F9","--property-name":"#fafafa","--cursor":"#abb2bf","--line-number":"#A1A1A1","--string-value":"#27b648","--boolean-value":"#A18BF5","--highlight-background":"#1A1A1A70","--editor-background":"#111111","--selection":"#3E5473","--fold-gutter-hover":"#1A1A1A","--sql-variable":"#e1e3e7","--sql-keyword":"#f87683","--sql-number":"#79b8ff","--sql-string":"#91bae9","--sql-boolean":"#e2e4e8","--structure":"#1C1C1C","--structure-card-border":"#2E2E2E","--structure-button-link-text":"var(--component-link_button-primary-color)","--structure-codeblock":"#252525","--structure-codeblock-border":"#2E2E2E","--structure-codeblock-border-hover":"#666666","--structure-codeblock-hover":"#2E2E2E","--structure-codeblock-edit":"#2b1c12","--structure-codeblock-edit-hover":"#3b2619","--structure-codeblock-edit-text":"#ffd484","--structure-codeblock-edit-border":"#92400e","--structure-codeblock-edit-border-hover":"#a24710","--structure-edit":"#2b1c12","--structure-edit-text":"#fde68a"},Pde=(t,{isUnexpected:s,id:n})=>{const r={drizzle_error_id:n};s?Sr(new Error(`Unexpected error in drizzle studio: ${t.message}`,{cause:t}),{extra:r}):Sr(new Error("Handled error in drizzle studio",{cause:t}),{level:"info",extra:r})};function ih(t,s){return`${s}-${t}`}const Tde=({style:t,children:s,branchId:n,databases:r,excludeSchemas:o,excludeTables:a,readOnly:i,selectedDatabase:c,selectedSchema:l,selectedTable:d,header:u=e.jsx(Cde,{}),onDatabaseSelected:h,setupClient:p})=>{const g=m.useRef(null),_=m.useRef(!1),x=m.useRef({}),[j,b]=m.useState(null),[f,y]=m.useState(!1),{trackUiInteraction:v}=k(),w=vo(),S=m.useMemo(()=>r.map(({name:D})=>({id:ih(D,n),name:D})),[n,r]);m.useEffect(()=>()=>{_.current=!0},[]);const I=m.useCallback(D=>{v(`${vT}${D}`)},[v]),N=vd(async(D,U,E,K=[])=>{var W,X;if(!j&&g.current&&b(g.current.packageVersion),_.current)return{rows:[]};(W=x.current)[X=ih(D,n)]??(W[X]=await p(D));const J=x.current[ih(D,n)];return J?await J(E,K,{arrayMode:U,fullResults:!0,types:{...Ka,getTypeParser:(G,V)=>{switch(G){case Ka.builtins.TIMESTAMPTZ:case Ka.builtins.TIMESTAMP:case Ka.builtins.DATE:case Ka.builtins.INTERVAL:return Se=>Se;default:return Ka.getTypeParser(G,V)}}}}):{rows:[]}});return m.useEffect(()=>{j&&(console.log("Tables version",j),wT("drizzle_studio.version",j))},[j]),m.useEffect(()=>{customElements.whenDefined("drizzle-studio").then(()=>{y(!0)})},[]),m.useLayoutEffect(()=>{f&&g.current&&(g.current.queryFn=N,g.current.onEvent=I,g.current.onError=Pde)},[f,I,N]),m.useEffect(()=>{f&&g.current&&(g.current.cssVariables=w==="dark"?Ide:kde)},[f,w]),m.useEffect(()=>{f&&g.current&&(g.current.databases=S)},[f,S]),m.useEffect(()=>{f&&g.current&&(g.current.selectedSchema=l??null)},[f,l]),m.useEffect(()=>{f&&g.current&&(g.current.selectedTable=d??null)},[f,d]),m.useEffect(()=>{f&&g.current&&(g.current.excludeSchemas=o??[])},[f,o]),m.useEffect(()=>{f&&g.current&&(g.current.excludeTables=a??[])},[f,a]),m.useEffect(()=>{f&&g.current&&h&&(g.current.onDatabaseSelected=h)},[f,h]),m.useEffect(()=>{f&&g.current&&(g.current.readOnly=i??!1)},[f,i]),m.useEffect(()=>{f&&g.current&&(g.current.selectedDatabase=c?ih(c,n):null)},[f,n,c]),f?e.jsxs("drizzle-studio",{ref:g,style:t,children:[e.jsx("div",{slot:"page-title",children:u}),s]}):e.jsx(pe,{})},Nde=({branchId:t,databases:s,setupClient:n})=>{const{projectId:r}=O(),{data:o,status:a}=uP(r),[i,c]=m.useState(),l=m.useMemo(()=>a!=="error"&&(o==null?void 0:o.jwks.length)===0?[]:["auth"],[a,o==null?void 0:o.jwks.length]);return e.jsx(Tde,{databases:s,selectedDatabase:i,excludeSchemas:l,readOnly:!0,onDatabaseSelected:c,setupClient:n,branchId:t})},Ade="_content_9xqb_1",Ede={content:Ade},hP=({content:t})=>e.jsx(FC,{appearance:"blue",size:"s",description:e.jsxs("div",{className:Ede.content,children:[e.jsx(L,{name:"info_italic",size:16}),e.jsx(T,{children:t})]})}),$de={bannerDescription:({timestamp:t,type:s})=>{switch(s){case rs.PITR:return`You're viewing data as it existed on ${t}`;case rs.Snapshot:return`Displaying data in snapshot_${t}`}}},Ode="_root_o0avu_1",Rde="_drizzle_o0avu_7",Yv={root:Ode,drizzle:Rde},Bde=({timestamp:t,databases:s,branchId:n,type:r})=>{const{project:o}=O(),[a]=pb(),i=`${n}.${o==null?void 0:o.proxy_host}`,c=m.useCallback(async l=>{if(o)try{const d=s.find(({name:p})=>p===l);if(!d)return;const u=o.store_passwords?d.owner_name:Fd,h=await a({branchId:n,projectId:o.id,role:u},!0).unwrap();return Dp(Zl({host:i,database:l,password:h,role:u,options:`neon_timestamp:${t}`}))}catch(d){H(d);return}},[s,t,a,o,i,n]);return e.jsxs("div",{className:Yv.root,children:[e.jsx(hP,{content:$de.bannerDescription({timestamp:t,type:r})}),e.jsx("div",{className:Yv.drizzle,children:e.jsx(Nde,{setupClient:c,branchId:n,databases:s})})]})},Lde={noDatabases:"You do not have any databases"},Dde="_alert_1cfm8_1",Mde={alert:Dde},Ude="_root_1l3rc_1",Fde="_bar_1l3rc_7",qde="_databaseSelect_1l3rc_14",zde="_schemaDiff_1l3rc_19",ch={root:Ude,bar:Fde,databaseSelect:qde,schemaDiff:zde},Hde=({timestamp:t,branch:s,databaseOptions:n})=>{const[r,o]=m.useState(n[0].database),a=i=>{var l;const c=(l=n.find(({value:d})=>d===i))==null?void 0:l.database;c&&o(c)};return e.jsxs("div",{className:ch.root,children:[e.jsx("div",{className:ch.bar,children:e.jsx("div",{className:ch.databaseSelect,children:e.jsx(He,{options:n,value:r.name,onChange:a,disabled:n.length===1,size:"s"})})}),e.jsx("div",{className:ch.schemaDiff,children:e.jsx(cS,{projectId:s.project_id,currentBranch:s,database:r,compareSource:{branch:s,mode:Jl.Timestamp,timestamp:t}})})]})},Vde=t=>({fields:t.fields.map(s=>s.name),rows:t.rows.map(s=>s.map(n=>String(n))),truncated:!1}),Wde=t=>{const{project:s}=O(),[n]=pb(),[r]=bS.useLazyRunQuery(),[o,a]=m.useState(0),[i,c]=m.useState(),[l,d]=m.useState(),[u,h]=m.useState(!1),p=()=>d(void 0),g=m.useRef(()=>{}),_=g.current,x=m.useCallback(async({database:j,query:b,timestamp:f})=>{if(!s)return;d(void 0),h(!0);const y=s.store_passwords?j.owner_name:Fd;try{const v=await n({branchId:t,projectId:s.id,role:y},!0).unwrap(),w=`${t}.${s.proxy_host}`,S=r({database:j.name,password:v,host:w,query:b,role:y,pointInTime:{mode:Jl.Timestamp,timestamp:f}});g.current=S.abort;const I=await S.unwrap();c(Vde(I)),a(0)}catch(v){v.name!=="AbortError"&&(d(VE(v.message)),c(void 0),a(0))}finally{h(!1)}},[t,s,n,r]);return{queryResult:i,isQueryRunning:u,runQuery:x,cancelQuery:_,error:l,clearError:p,offset:o,changeOffset:a}},lh={queryPlaceholder:`/*
 * Run read-only queries to preview data as it existed at the selected time.
 * Make sure you've got the right restore point.
 */`,run:"Run query at timestamp",cancel:"Cancel",banner:t=>`You are viewing data as it existed on ${t}`},Gde="_root_ros1k_1",Kde="_queryEditor_ros1k_7",Qde="_actions_ros1k_14",Yde="_queryResult_ros1k_21",Jde="_alert_ros1k_27",Cl={root:Gde,queryEditor:Kde,actions:Qde,queryResult:Yde,alert:Jde},Zde=({timestamp:t,branchId:s,databaseOptions:n})=>{const{project:r}=O(),{queryResult:o,isQueryRunning:a,runQuery:i,cancelQuery:c,error:l,clearError:d,offset:u,changeOffset:h}=Wde(s),[p,g]=m.useState(n[0].database),_=v=>{var S;const w=(S=n.find(({value:I})=>I===v))==null?void 0:S.database;w&&(d(),g(w))},[x,j]=m.useState(lh.queryPlaceholder),b=x.trim().length===0,f=m.useCallback(()=>i({database:p,query:x,timestamp:t}),[i,x,p,t]),y=m.useCallback(v=>{v.key==="Enter"&&(v.ctrlKey||v.metaKey)&&f()},[f]);return e.jsxs("div",{className:Cl.root,children:[e.jsx("div",{className:Cl.queryEditor,role:"textbox",tabIndex:0,onKeyDown:y,children:e.jsx(hb,{width:"100%",height:"100%",focus:!0,name:"query_editor",mode:`pgsql${(r==null?void 0:r.pg_version)??15}`,value:x,onChange:j,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),e.jsxs("div",{className:Cl.actions,children:[e.jsx(He,{options:n,value:p.name,onChange:_,disabled:n.length===1,size:"s"}),a?e.jsx(P,{appearance:"error",onClick:c,children:lh.cancel}):e.jsx(P,{appearance:"secondary",onClick:f,icon:"play_circle",disabled:b,children:lh.run})]}),o&&!a&&e.jsx(hP,{content:lh.banner(t)}),l&&e.jsx("div",{className:Cl.alert,children:e.jsx(Q,{appearance:"error",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l}})})}),e.jsxs("div",{className:Cl.queryResult,children:[a&&e.jsx(dS,{}),o&&e.jsx(uS,{data:o,offset:u,onChangeOffset:h})]})]})},Xde=({timestamp:t,view:s,type:n,branch:r})=>{const{isLoading:o,selectOptions:a,list:i}=un();if(o)return e.jsx(pe,{});if(!i.length)return e.jsx("div",{className:Mde.alert,children:e.jsx(Q,{children:Lde.noDatabases})});switch(s){case"drizzle":return e.jsx(Bde,{timestamp:t,databases:i,type:n,branchId:r.id});case"schema_diff":return e.jsx(Hde,{timestamp:t,databaseOptions:a,branch:r});case"time_travel":return e.jsx(Zde,{timestamp:t,databaseOptions:a,branchId:r.id});default:return null}},eue=[{value:"drizzle",label:mr.drizzle},{value:"time_travel",label:mr.timeTravel},{value:"schema_diff",label:mr.schemaDiff}];var xf=(t=>(t.Restore="restore",t.Preview="preview",t))(xf||{});const tue=(t,s)=>{let n=t;const r=o=>n===o;for(let o=2;s.some(r);o+=1)n=`${t} (${o})`;return n},pP=({type:t,isOpen:s,onRequestClose:n,timestamp:r,restore:o,initialMode:a="restore"})=>{const i=ee("snapshot_preview"),{branches:c}=Ye(),{branch:l}=ut(),[d,u]=m.useState(!1),[h,p]=m.useState(),[g,_]=m.useState("drizzle"),x=h==="restore",j=t===rs.PITR||t===rs.Snapshot&&i,b=t===rs.PITR?ude(l.name,r):pde(l.name,r),f=m.useMemo(()=>c.map(w=>w.name),[c]),y=m.useMemo(()=>tue(b,f),[b,f]),v=async()=>{try{u(!0),await o(y)}catch(w){H(w)}finally{u(!1)}};return m.useEffect(()=>{if(!s){p(void 0),_("drizzle");return}p(a)},[s,a]),!h||!l?null:e.jsx(DS,{title:mr.title({timestamp:r,type:t,isRestoreMode:x}),isOpen:s,onRequestClose:n,noBodyPadding:!0,noDismiss:d,width:x?720:void 0,height:x?"auto":void 0,header:!x&&e.jsx("div",{className:Sl.viewSelect,children:e.jsx(He,{value:g,options:eue,onChange:w=>w&&_(w),size:"s"})}),footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"l",loading:d,onClick:v,icon:"restore",children:mr.restore}),x&&j&&e.jsx(P,{size:"l",appearance:"secondary",onClick:()=>p("preview"),icon:"search",children:mr.preview}),e.jsx(ls,{size:"l",appearance:"secondary",children:mr.cancel})]}),children:x?e.jsxs("div",{className:Sl.description,children:[e.jsx(T,{appearance:"secondary",children:mr.descriptionTitle({branchName:l.name,type:t})}),e.jsx("ul",{className:Sl.descriptionList,children:mr.description({currentBranchName:l.name,timestamp:r,type:t,newBranchName:y}).map((w,S)=>e.jsxs("li",{className:Sl.descriptionItem,children:[e.jsx(L,{name:"check_flat",size:16,className:Sl.descriptionIcon}),e.jsx(T,{appearance:"secondary",children:w})]},S))})]}):e.jsx(Xde,{type:t,view:g,timestamp:r,branch:l})})},Jo={title:"Instant point-in-time restore",description:t=>`Instantly restore your branch to any point in the past ${t}`,restore:"Restore",invalidBeforeBranchCreation:"Date is before branch creation",invalidBeforeRetention:"Date is beyond the history retention",invalidAfterNow:"Date is in the future",restoreSuccess:t=>`This branch and all its roles and databases successfully restored to their state on ${t}`},sue="_root_1gkue_1",nue="_content_1gkue_12",rue="_actions_1gkue_19",Zi={root:sue,content:nue,actions:rue};_t.extend(ER);const oue=()=>e.jsxs("div",{className:Zi.root,children:[e.jsx(L,{name:"lightning_filled",size:28}),e.jsxs("div",{className:Zi.content,children:[e.jsx($,{width:200,height:20}),e.jsx($,{width:320,height:18})]}),e.jsxs("div",{className:Zi.actions,children:[e.jsx($,{width:250,height:32}),e.jsx($,{width:200,height:32})]})]}),aue=({branch:t})=>{const s=Ne(),{project:n,projectId:r,isLoading:o}=O(),{mutateAsync:a}=hde(t),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),[u,h]=m.useState(new Date),[p,g]=m.useState(),[_,x]=m.useState(!1),j=u==null?void 0:u.toISOString(),b=m.useMemo(()=>_t(t.created_at??0),[t]),f=m.useMemo(()=>_t().subtract((n==null?void 0:n.history_retention_seconds)??0,"seconds"),[n]),y=m.useMemo(()=>_t.max(b,f),[b,f]),v=m.useMemo(()=>({maxDate:new Date,minDate:y.toDate()}),[y]),w=m.useCallback(N=>{if(h(N),_t(N).valueOf()>_t().valueOf()){g(Jo.invalidAfterNow),x(!0);return}if(_t(N).valueOf()<b.valueOf()){g(Jo.invalidBeforeBranchCreation),x(!0);return}if(_t(N).valueOf()<f.valueOf()){g(Jo.invalidBeforeRetention),x(!0);return}x(!1)},[b,f]),S=m.useCallback((N,D)=>{d(),re(Jo.restoreSuccess(D)),s.push(F(C.ProjectsItemBranchesItem,{projectId:r,branchId:N.id}))},[s,r]),I=m.useCallback(N=>async D=>{try{const{data:{branch:U}}=await a({timestamp:N,branchPreservedName:D});S(U,N)}catch(U){H(U)}},[a,S]);return m.useEffect(()=>{h(new Date),x(!1)},[t]),o?e.jsx(oue,{}):e.jsxs(e.Fragment,{children:[j&&e.jsx(pP,{type:rs.PITR,isOpen:i,onRequestClose:d,timestamp:j,restore:I(j)}),e.jsxs("div",{className:Zi.root,children:[e.jsx(L,{name:"lightning_filled",size:28}),e.jsxs("div",{className:Zi.content,children:[e.jsx(z,{level:6,children:Jo.title}),e.jsx(T,{size:"s",appearance:"tertiary",children:Jo.description(xc((n==null?void 0:n.history_retention_seconds)??0))})]}),e.jsxs("div",{className:Zi.actions,children:[e.jsx(Z,{content:p,visible:_,appearance:"error",zIndex:0,children:e.jsx("div",{children:e.jsx($R,{date:u,onDateChange:w,isInvalid:_,calendarParams:v,showCalendar:!0})})}),e.jsx(P,{icon:"arrow_right",iconSide:"right",onClick:l,disabled:_||!u,children:Jo.restore})]})]})]})};Bn.Hours+"",60*60,Bn.Days+"",60*60*24,Bn.Weeks+"",60*60*24*7,Bn.Months+"",60*60*24*30;const iue={[Bn.Hours]:"Hour(s)",[Bn.Days]:"Day(s)",[Bn.Weeks]:"Week(s)",[Bn.Months]:"Month(s)"};Object.values(Bn).map(t=>({value:t,label:iue[t]}));const cue="Manual snapshot",$n={today:"Today",week:"This week",month:"This month",year:"This year",lastYear:"Last year"},Jv=[$n.today,$n.week,$n.month,$n.year,$n.lastYear],fm=({branchId:t})=>["snapshots",t],lue=t=>st({queryKey:fm({branchId:t.id}),queryFn:async()=>{const{data:{snapshots:s}}=await q.listSnapshots(t.project_id);return s==null?void 0:s.filter(n=>n.source_branch_id===t.id)}}),due=t=>{const s=ie();return de({mutationFn:async()=>{const{data:n}=await q.createSnapshot({branchId:t.id,projectId:t.project_id,name:cue});$t.set(Me.NewManualSnapshotId,n.snapshot.id)},onSuccess:()=>s.invalidateQueries({queryKey:fm({branchId:t.id})})})},uue=t=>{const s=ie();return de({mutationFn:n=>q.deleteSnapshot(t.project_id,n),onSuccess:()=>s.invalidateQueries({queryKey:fm({branchId:t.id})})})},hue=t=>{const s=ie();return de({mutationFn:async({snapshotId:n,name:r})=>{await q.updateSnapshot(t.project_id,n,{snapshot:{name:r}})},onSuccess:()=>s.invalidateQueries({queryKey:fm({branchId:t.id})})})},mP=({projectId:t,branchId:s})=>["snapshot_schedule",t,s],pue=(t,s)=>{const n=ie();return de({mutationFn:r=>q.setSnapshotSchedule(t,s,r),onSuccess:async()=>{await n.invalidateQueries({queryKey:mP({projectId:t,branchId:s})})}})},mue=(t,s,n)=>st({queryKey:mP({projectId:t,branchId:s}),queryFn:async()=>{const{data:r}=await q.getSnapshotSchedule(t,s);return r},enabled:n}),Zo={noSchedule:"Set a snapshot schedule for the selected branch",disabled:"Create a snapshot for the selected branch",editSchedule:"Edit schedule",createSnapshot:"Create snapshot",success:"Snapshot was successfully created",snapshotScheduleSuccess:"Snapshot schedule updated successfully!",failedToLoadSnapshotSchedule:"Failed to load snapshot schedule. Please try again later."},gue="_root_4xzun_1",_ue="_icon_4xzun_10",fue="_content_4xzun_14",bue="_actions_4xzun_21",mo={root:gue,icon:_ue,content:fue,actions:bue},ue={NONE:"none",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},tu=86400,$d=tu*7,Od=tu*30;function xue(t){const s={daily:[],weekly:[],monthly:[],other:[]};for(const n of t)switch(n.frequency){case ue.DAILY:s.daily.push(n);break;case ue.WEEKLY:s.weekly.push(n);break;case ue.MONTHLY:s.monthly.push(n);break;default:s.other.push(n);break}return s}const jue=t=>{switch(t){case ue.DAILY:return tu;case ue.WEEKLY:return $d;case ue.MONTHLY:return Od;default:return 1}},gP=t=>{if(t>=11&&t<=13)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},yue=t=>{switch(t){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:return""}},_P=t=>{switch(t){case ue.DAILY:return"days";case ue.WEEKLY:return"weeks";case ue.MONTHLY:return"months";default:return"days"}},s_={createdViaAPIAlert:"This schedule was created via the API and is not reflected in the UI. You can still update it here, but doing so will override the previous schedule.",snapshotScheduleAlert:(t,s,n,r)=>`Snapshots will start being created ${t} ${s&&t===ue.WEEKLY?`on ${yue(s)}`:""} ${s&&t===ue.MONTHLY?`on the ${s}${gP(s)}`:""} at ${n.toString().padStart(2,"0")}:00, and each will be retained for ${r} ${_P(t)}.`,noSnapshotsAlert:"No snapshots will be created."},vue="_row_1455t_1",wue="_select_1455t_6",Sue="_divider_1455t_11",Cue="_locale_1455t_24",kue="_modalBody_1455t_34",Iue="_label_1455t_41",pt={row:vue,select:wue,divider:Sue,locale:Cue,modalBody:kue,label:Iue},Pue=Array.from({length:24},(t,s)=>({label:`${s.toString().padStart(2,"0")}:00`,value:s})),fP=[...Array.from({length:28},(t,s)=>({label:`${s+1}${gP(s+1)}`,value:s+1})),{label:"Last day of the month",value:31}],bP=[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],n_={retain:!1,retainDay:1,retainForWeeks:1},kl={retain:!1,retainDay:1,retainForMonths:1},Tue=({schedule:t,setSchedule:s})=>e.jsxs("div",{className:pt.row,children:[e.jsx(He,{options:[{label:"No schedule",value:ue.NONE},{label:"Daily",value:ue.DAILY},{label:"Weekly",value:ue.WEEKLY},{label:"Monthly",value:ue.MONTHLY}],size:"s",className:pt.select,value:t.frequency,onChange:n=>{s({...t,frequency:n})}}),t.frequency!==ue.NONE&&e.jsxs(e.Fragment,{children:[t.frequency===ue.WEEKLY&&e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"tertiary",className:pt.label,children:"on"}),e.jsx(He,{options:bP,size:"s",className:pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}})]}),t.frequency===ue.MONTHLY&&e.jsxs(e.Fragment,{children:[e.jsx(T,{appearance:"tertiary",className:pt.label,children:"on the"}),e.jsx(He,{options:fP,size:"s",className:pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}})]}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"at"}),e.jsx(He,{options:Pue,size:"s",className:pt.select,value:t.hour,onChange:n=>{s({...t,hour:n})}}),e.jsx("div",{children:e.jsx(T,{appearance:"tertiary",className:pt.locale,children:"UTC"})}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"and retain them for"}),e.jsx(gb,{value:t.retainFor??0,minValue:1,suffix:_P(t.frequency),onChange:n=>s({...t,retainFor:n})})]})]}),Nue=({weeklyRetention:t,setWeeklyRetention:s})=>e.jsxs("div",{role:"group","aria-label":"Weekly retention",className:pt.row,children:[e.jsx(Ir,{checked:t.retain,onChange:n=>{s({...t,retain:n.target.checked})}}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"Retain"}),e.jsx(He,{options:bP,size:"s",className:pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"snapshots for"}),e.jsx(gb,{minValue:1,value:t.retainForWeeks,suffix:"weeks",onChange:n=>s({...t,retainForWeeks:n})})]}),Aue=({monthlyRetention:t,setMonthlyRetention:s})=>e.jsxs("div",{role:"group","aria-label":"Monthly retention",className:pt.row,children:[e.jsx(Ir,{checked:t.retain,onChange:n=>{s({...t,retain:n.target.checked})}}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"Retain"}),e.jsx(He,{options:fP,size:"s",className:pt.select,value:t.retainDay,onChange:n=>{s({...t,retainDay:n})}}),e.jsx(T,{appearance:"tertiary",className:pt.label,children:"day of the month snapshots for"}),e.jsx(gb,{minValue:1,value:t.retainForMonths,suffix:"months",onChange:n=>s({...t,retainForMonths:n})})]}),Eue=({isOpen:t,closeModal:s,schedule:n,weeklyRetention:r,monthlyRetention:o,isCreatedViaAPI:a,onSubmit:i})=>{const[c,l]=m.useState(n),[d,u]=m.useState(n_),[h,p]=m.useState(kl);return m.useEffect(()=>{if(t)switch(l(n),n.frequency){case ue.DAILY:u(r||n_),p(o||kl);break;case ue.WEEKLY:u(void 0),p(o||kl);break;default:u(void 0),p(void 0);break}},[t,n,r,o]),e.jsxs(Qe,{isOpen:t,title:"Edit snapshot schedule",onRequestClose:s,width:800,children:[e.jsxs(be,{className:pt.modalBody,children:[e.jsx(Tue,{schedule:c,setSchedule:g=>{let _=!1;if(g.frequency!==c.frequency)switch(_=!0,g.frequency){case ue.NONE:u(void 0),p(void 0);break;case ue.DAILY:u(n_),p(kl);break;case ue.WEEKLY:u(void 0),p(kl);break;case ue.MONTHLY:u(void 0),p(void 0);break}l({...g,retainDay:_?1:g.retainDay})}}),e.jsx("div",{className:pt.divider}),c.frequency===ue.DAILY&&d&&e.jsx(Nue,{weeklyRetention:d,setWeeklyRetention:u}),(c.frequency===ue.DAILY||c.frequency===ue.WEEKLY)&&h&&e.jsx(Aue,{monthlyRetention:h,setMonthlyRetention:p}),e.jsx("div",{className:pt.row,children:a&&e.jsx(Q,{appearance:"warning",children:e.jsx(T,{children:s_.createdViaAPIAlert})})}),e.jsx("div",{className:pt.row,children:e.jsxs(Q,{children:[c.frequency===ue.NONE&&e.jsx(T,{children:s_.noSnapshotsAlert}),(c.frequency===ue.DAILY||c.frequency===ue.WEEKLY||c.frequency===ue.MONTHLY)&&e.jsx(T,{children:s_.snapshotScheduleAlert(c.frequency,c.retainDay,c.hour,c.retainFor)})]})})]}),e.jsxs(ge,{children:[e.jsx(P,{appearance:"secondary",onClick:s,children:"Cancel"}),e.jsx(P,{appearance:"primary",onClick:async()=>{await i(c,d,h)},children:"Update schedule"})]})]})},$ue=()=>e.jsxs("div",{className:mo.root,children:[e.jsx(L,{name:"schedule",size:24,className:mo.icon}),e.jsxs("div",{className:mo.content,children:[e.jsx($,{width:200,height:20}),e.jsx($,{width:180,height:18}),e.jsx($,{width:150,height:18})]}),e.jsxs("div",{className:mo.actions,children:[e.jsx($,{width:150,height:32}),e.jsx($,{width:160,height:32})]})]});function Oue(t){var l,d,u,h,p,g,_,x;const s={frequency:ue.NONE,hour:0,retainFor:1},n={schedule:s,isCreatedViaAPI:!0};if(t.length===0)return{schedule:s,isCreatedViaAPI:!1};const r=xue(t);if(r.other.length>0||r.daily.length>1||r.weekly.length>1||r.monthly.length>1||(((l=r.daily[0])==null?void 0:l.retention_seconds)||0)%tu!==0||(((d=r.weekly[0])==null?void 0:d.retention_seconds)||0)%$d!==0||(((u=r.monthly[0])==null?void 0:u.retention_seconds)||0)%Od!==0)return n;const o=[(h=r.daily[0])==null?void 0:h.hour,(p=r.weekly[0])==null?void 0:p.hour,(g=r.monthly[0])==null?void 0:g.hour].filter(j=>j!=null);if(o.length===0||!o.every(j=>j===o[0])||((_=r.monthly[0])==null?void 0:_.day)===29||((x=r.monthly[0])==null?void 0:x.day)===30)return n;const i=t.map(j=>({...j,order:j.frequency===ue.DAILY?0:j.frequency===ue.WEEKLY?1:2}));i.sort((j,b)=>j.order-b.order);const c={schedule:s,isCreatedViaAPI:!1};for(const[j,b]of i.entries())if(j===0)c.schedule={frequency:b.frequency,hour:b.hour??0,retainDay:b.day??1,retainFor:(b.retention_seconds||0)/jue(b.frequency)};else switch(b.frequency){case ue.WEEKLY:c.weeklyRetention={retain:!0,retainDay:b.day??0,retainForWeeks:b.retention_seconds?b.retention_seconds/$d:0};break;case ue.MONTHLY:c.monthlyRetention={retain:!0,retainDay:b.day??0,retainForMonths:b.retention_seconds?b.retention_seconds/Od:0}}return c}const Rue=({branch:t})=>{const s=ee("snapshot_schedules"),{mutateAsync:n,isPending:r}=due(t),{data:o,isLoading:a,error:i}=mue(t.project_id,t.id,s);m.useEffect(()=>{i&&tt(Zo.failedToLoadSnapshotSchedule)},[i]);const{mutateAsync:c}=pue(t.project_id,t.id),[l,d]=m.useState(!1),u=()=>d(!0),h=()=>d(!1),p=()=>{re(Zo.success)},g=async()=>{try{await n(),p()}catch(j){H(j)}},_=m.useMemo(()=>Oue((o==null?void 0:o.schedule)??[]),[o==null?void 0:o.schedule]);if(a)return e.jsx($ue,{});const x=async(j,b,f)=>{const y=[];switch(j.frequency){case ue.NONE:break;case ue.DAILY:y.push({frequency:"daily",hour:j.hour,retention_seconds:j.retainFor*tu});break;case ue.WEEKLY:y.push({frequency:ue.WEEKLY,hour:j.hour,day:j.retainDay,retention_seconds:j.retainFor*$d});break;case ue.MONTHLY:y.push({frequency:ue.MONTHLY,hour:j.hour,day:j.retainDay,retention_seconds:j.retainFor*Od});break}b&&b.retain&&y.push({frequency:ue.WEEKLY,hour:j.hour,day:b.retainDay,retention_seconds:b.retainForWeeks*$d}),f&&f.retain&&y.push({frequency:ue.MONTHLY,hour:j.hour,day:f.retainDay,retention_seconds:f.retainForMonths*Od}),await c({schedule:y},{onSuccess:()=>{re(Zo.snapshotScheduleSuccess),d(!1)},onError:v=>{H(v)}})};return e.jsxs(e.Fragment,{children:[e.jsx(Eue,{isOpen:l,closeModal:h,schedule:_.schedule,weeklyRetention:_.weeklyRetention,monthlyRetention:_.monthlyRetention,isCreatedViaAPI:_.isCreatedViaAPI,onSubmit:x}),e.jsxs("div",{className:mo.root,children:[e.jsx(L,{name:"schedule",size:24,className:mo.icon}),e.jsx("div",{className:mo.content,children:s?e.jsx(z,{level:6,children:Zo.noSchedule}):e.jsx(z,{level:6,children:Zo.disabled})}),e.jsxs("div",{className:mo.actions,children:[s&&e.jsx(P,{appearance:"secondary",onClick:u,disabled:!!i,children:Zo.editSchedule}),e.jsx(P,{appearance:"secondary",icon:"snapshot",onClick:g,loading:r,children:Zo.createSnapshot})]})]})]})},Bue=(t,s)=>s.isSame(t,"day")?$n.today:s.isSame(t,"week")?$n.week:s.isSame(t,"month")?$n.month:s.isSame(t,"year")?$n.year:s.isSame(t.subtract(1,"year"))?$n.lastYear:s.year().toString(),Lue=t=>{const s=_t(),n=t.reduce((r,o)=>{const a=_t(o.created_at),i=Bue(s,a);return r[i]?r[i]=[o,...r[i]]:r[i]=[o],r},{});return Object.entries(n).sort(([r],[o])=>{const a=Jv.indexOf(r),i=Jv.indexOf(o);return a!==-1&&i!==-1?a-i:1})},Kr={delete:"Delete snapshot",successDeleted:"Snapshot was successfully deleted",successRestored:"Snapshot was successfully restored",preview:"Preview",restore:"Restore",deleteConfirmation:"This is a permanent operation. Deleted snapshots cannot be recovered."},Due="_root_ffldm_1",Mue="_content_ffldm_12",Uue="_actions_ffldm_19",Fue="_date_ffldm_25",fa={root:Due,content:Mue,actions:Uue,date:Fue},que=2e3,zue=({id:t,name:s,created_at:n})=>{const r=ee("snapshot_preview"),o=Ne(),{branch:a}=ut(),{mutateAsync:i,isPending:c}=uue(a),{mutateAsync:l}=hue(a),{mutateAsync:d}=mde(a),{confirm:u}=Oe(),h=m.useRef(void 0),[p,g]=m.useState(!1),_=N=>()=>{h.current=N,g(!0)},x=()=>g(!1),[j,b]=m.useState(!1),[f,y]=m.useState(!1),v=m.useCallback(N=>{x(),re(Kr.successRestored),o.push(F(C.ProjectsItemBranchesItem,{projectId:N.project_id,branchId:N.id}))},[o]),w=async N=>{try{const{data:{branch:D}}=await d({snapshotId:t,snapshotRestoredBranchName:N});v(D)}catch(D){H(D)}},S=async()=>{try{if(!await u({appearance:"error",header:Kr.delete,text:Kr.deleteConfirmation,confirmButtonText:Kr.delete}))return;await i(t),re(Kr.successDeleted)}catch(N){H(N)}},I=[{items:[{label:Kr.delete,onClick:S}]}];return m.useEffect(()=>{$t.get(Me.NewManualSnapshotId)===t&&(b(!0),$t.remove(Me.NewManualSnapshotId),setTimeout(()=>b(!1),que))},[t]),e.jsxs(e.Fragment,{children:[e.jsx(pP,{type:rs.Snapshot,isOpen:p,onRequestClose:x,timestamp:n,restore:w,initialMode:h.current}),e.jsxs("div",{className:fa.root,children:[e.jsx(L,{size:20,name:j?"done_gradient":"snapshot"}),e.jsxs("div",{className:fa.content,children:[e.jsx(VC,{value:s,onSave:async N=>{try{y(!0),await l({snapshotId:t,name:N})}catch(D){H(D)}finally{y(!1)}},isLoading:f}),e.jsx(T,{appearance:"tertiary",size:"s",className:fa.date,children:_t(n).format(ve.SnapshotDate)})]}),e.jsxs("div",{className:fa.actions,children:[e.jsx(P,{appearance:"secondary",onClick:_(xf.Restore),disabled:c,children:Kr.restore}),r&&e.jsx(P,{appearance:"secondary",onClick:_(xf.Preview),disabled:c,children:Kr.preview}),e.jsx(Dt,{sections:I,children:e.jsx(Zt,{isDisabled:c})})]})]})]})},r_=()=>e.jsxs("div",{className:fa.root,children:[e.jsx(L,{size:20,name:"snapshot"}),e.jsxs("div",{className:fa.content,children:[e.jsx($,{width:100,height:20}),e.jsx($,{width:120,height:18})]}),e.jsxs("div",{className:fa.actions,children:[e.jsx($,{width:80,height:32}),e.jsx($,{width:80,height:32}),e.jsx($,{width:32,height:32})]})]}),Hue="_labelWrapper_1fq9k_1",Vue="_label_1fq9k_1",Wue="_snapshotGroupItem_1fq9k_13",gd={labelWrapper:Hue,label:Vue,snapshotGroupItem:Wue},Gue="_root_1h6pm_1",Kue="_track_1h6pm_6",Que="_start_1h6pm_22",Yue="_end_1h6pm_26",Jue="_point_1h6pm_30",Zue="_disabled_1h6pm_45",Xue="_content_1h6pm_50",Xo={root:Gue,track:Kue,start:Que,end:Yue,point:Jue,disabled:Zue,content:Xue},ba=({children:t,className:s,hidePoint:n,isDisabled:r,isStartPoint:o,isEndPoint:a})=>e.jsxs("div",{className:M(Xo.root,s,{[Xo.disabled]:r,[Xo.start]:o,[Xo.end]:a}),children:[e.jsx("div",{className:Xo.track,children:!n&&e.jsx("div",{className:Xo.point})}),e.jsx("div",{className:Xo.content,children:t})]}),ehe=({label:t,snapshots:s,isLastGroup:n})=>e.jsxs("div",{children:[e.jsx(ba,{className:gd.labelWrapper,hidePoint:!0,children:e.jsx(T,{className:gd.label,children:t})}),s.map((r,o)=>e.jsx(ba,{className:gd.snapshotGroupItem,isEndPoint:n&&o===s.length-1,children:e.jsx(zue,{...r})},r.id))]}),the=()=>e.jsxs("div",{children:[e.jsx(ba,{hidePoint:!0,className:gd.labelWrapper,children:e.jsx(T,{size:"s",className:gd.label,children:e.jsx($,{width:100,height:18})})}),e.jsx(ba,{children:e.jsx(r_,{})}),e.jsx(ba,{children:e.jsx(r_,{})}),e.jsx(ba,{isEndPoint:!0,children:e.jsx(r_,{})})]}),she=({snapshots:t,isLoading:s})=>{const n=m.useMemo(()=>t&&Lue(t),[t]);return s?e.jsx(the,{}):e.jsx("div",{children:n==null?void 0:n.map(([r,o],a)=>e.jsx(ehe,{label:r,snapshots:o,isLastGroup:a===n.length-1},r))})},nhe=({branch:t})=>{const{data:s,isLoading:n}=lue(t);return e.jsxs("div",{children:[e.jsx(ba,{isStartPoint:!0,isDisabled:!0,isEndPoint:!(s!=null&&s.length)&&!n,children:e.jsx(Rue,{branch:t})}),e.jsx(she,{snapshots:s,isLoading:n})]})},rhe=()=>{const{branch:t}=ut();return t?e.jsxs("div",{className:Qv.root,children:[e.jsx(aue,{branch:t}),e.jsx(T,{appearance:"secondary",size:"s",className:Qv.divider,children:cde.dividerText}),e.jsx(nhe,{branch:t})]}):e.jsx(pe,{})},Il={old:{title:"Restore"},title:"Backup & Restore",description:t=>`Instantly restore a branch from a point in time or a snapshot${t?", and manage your snapshot schedule":""}`,earlyAccessToggle:"Early Access",earlyAccessHint:"Explore the new Backup & Restore page with snapshot capabilities. Toggle off to return to the original Restore page."},ohe="_header_16dbf_1",ahe={header:ohe};function ihe(){const t=ee("snapshot_system"),[s,n]=xs(Me.EarlyAccessRestorePage,"opt-in",!0);return[t&&s,n]}const che=()=>{const t=ee("snapshot_system"),s=ee("snapshot_schedules"),[n,r]=ihe();return e.jsxs(e.Fragment,{children:[e.jsx(eu,{title:t?Il.title:Il.old.title,subtitle:n?Il.description(s):void 0,className:ahe.header,actions:t&&e.jsxs(hn,{isSelected:n,onChange:o=>r(o),children:[Il.earlyAccessToggle,e.jsx(Ot,{children:Il.earlyAccessHint})]})}),n?e.jsx(rhe,{}):e.jsx(vq,{})]})},lhe="_container_1pk9s_1",dhe="_contentWrapper_1pk9s_8",uhe="_topText_1pk9s_12",hhe="_list_1pk9s_16",phe="_infoText_1pk9s_20",Pl={container:lhe,contentWrapper:dhe,topText:uhe,list:hhe,infoText:phe},mhe=({onRequestClose:t,setShowUpgradeModal:s})=>{const{trackUiInteraction:n}=k({mountEvent:"protected_branch_upgrade_modal_shown"});return e.jsx(e.Fragment,{children:e.jsxs(Qe,{isOpen:!0,title:"Upgrade your plan to protect your branch",onRequestClose:t,width:700,children:[e.jsx(be,{children:e.jsxs("div",{className:Pl.container,children:[e.jsx(L,{name:"protect",size:40}),e.jsxs("div",{className:Pl.contentWrapper,children:[e.jsx("div",{className:Pl.topText,children:"Branch protection is only available on paid Neon plans. Upgrade to a launch plan to protect your branch and ensure:"}),e.jsxs("ul",{className:Pl.list,children:[e.jsx("li",{children:"Your default branch cannot be deleted or reset"}),e.jsx("li",{children:"Computes associated with your default branch cannot be deleted"}),e.jsx("li",{children:"Your default branch will not be archived due to inactivity"}),e.jsx("li",{children:"SQL editor will warn you when running queries against your protected branch"}),e.jsx("li",{children:"Unique passwords are generated for all child branches of your default branch"}),e.jsx("li",{children:"IP allow lists can be selectively applied to your default branch"})]}),e.jsxs("div",{className:Pl.infoText,children:["See"," ",e.jsx(We,{href:Rp,target:"_blank",rel:"noopener noreferrer",children:"Protected branches"})," ","for more information."]})]})]})}),e.jsxs(ge,{children:[e.jsx(P,{onClick:()=>{n("protected_branch_upgrade_modal_dismissed"),t==null||t()},appearance:"secondary",children:"Cancel"}),e.jsx(P,{onClick:()=>{n("protected_branch_upgrade_modal_upgrade_clicked"),t==null||t(),s(!0)},appearance:"primary",children:"Upgrade ($19/month)"})]})]})})},ghe="_root_1oiol_1",_he="_arrowButton_1oiol_6",fhe="_arrowButton_left_1oiol_19",bhe="_arrowButton_right_1oiol_28",xhe="_scrollBox_1oiol_38",wi={root:ghe,arrowButton:_he,arrowButton_left:fhe,arrowButton_right:bhe,scrollBox:xhe},jhe=({children:t})=>{const s=m.useRef(null),[n,r]=m.useState(!1),[o,a]=m.useState(!1),i=wr(()=>{const l=s.current,d=l.scrollWidth-l.offsetWidth;r(l.scrollLeft>0),a(l.scrollLeft<d)});m.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[i]),m.useLayoutEffect(i);const c=l=>{const d=Math.floor(s.current.offsetWidth/2);s.current.scrollBy({left:l*d,behavior:"smooth"})};return e.jsxs("div",{className:wi.root,children:[e.jsx("div",{className:wi.scrollBox,ref:s,onScroll:i,children:t}),n&&e.jsx("button",{type:"button",className:M(wi.arrowButton,wi.arrowButton_left),title:"Scroll left",onClick:()=>{c(-1)},children:e.jsx(L,{name:"chevron_left",size:24})}),o&&e.jsx("button",{type:"button",className:M(wi.arrowButton,wi.arrowButton_right),title:"Scroll right",onClick:()=>{c(1)},children:e.jsx(L,{name:"chevron_right",size:24})})]})},yhe="_card_jeqlm_1",vhe="_textContent_jeqlm_16",whe="_title_jeqlm_25",She="_description_jeqlm_30",dh={card:yhe,textContent:vhe,title:whe,description:She},Mc=({iconName:t,title:s,description:n,action:r})=>e.jsxs("div",{className:dh.card,children:[e.jsx(L,{name:t,size:42}),e.jsxs("div",{className:dh.textContent,children:[e.jsx("div",{className:dh.title,children:s}),e.jsx("div",{className:dh.description,children:n})]}),r]}),o_={title:"Integrate Neon with your AI tools",description:"Connect to MCP clients like Cursor, Claude Desktop, Cline, Zed, and Windsurf.",actionButton:"Install MCP Server"},Che=()=>{const{trackUiInteraction:t}=k();return e.jsx(Mc,{iconName:"written_data",title:o_.title,description:o_.description,action:e.jsx(P,{appearance:"secondary",as:We,openInNewTab:!0,href:"https://neon.tech/docs/ai/connect-mcp-clients-to-neon",onClick:()=>{t("get_started_widget_ai_tools_clicked")},children:o_.actionButton})})},a_={title:"Connect to your database",description:"Get connection details your app needs to connect to your database",actionButton:"Connect"},khe=()=>{const{trackUiInteraction:t}=k(),{project:s}=O(),[n,r]=m.useState(!1);return e.jsxs(e.Fragment,{children:[s&&e.jsx(hx,{isOpen:n,project:s,onRequestClose:()=>{r(!1)}}),e.jsx(Mc,{iconName:"connect",title:a_.title,description:a_.description,action:e.jsx(P,{appearance:"secondary",onClick:()=>{t("get_started_widget_connect_clicked"),r(!0)},children:a_.actionButton})})]})},Ihe="_steps_1v84y_1",Phe="_stepHeader_1v84y_30",The="_stepCompletedIcon_1v84y_36",Nhe="_stepCounter_1v84y_40",Ahe="_stepDescription_1v84y_57",_d={steps:Ihe,stepHeader:Phe,stepCompletedIcon:The,stepCounter:Nhe,stepDescription:Ahe},xP=({children:t})=>e.jsx("div",{className:_d.steps,children:t}),Ehe=({title:t,isStepCompleted:s})=>e.jsxs("div",{className:_d.stepHeader,children:[s?e.jsx(L,{name:"check_circle_inverted2",className:_d.stepCompletedIcon,size:24}):e.jsx("div",{className:_d.stepCounter}),e.jsx(z,{level:4,children:t})]}),jf=({title:t,description:s,children:n,isStepCompleted:r,isStepCollapsed:o,onStepCollapse:a})=>e.jsxs(xb,{header:e.jsx(Ehe,{title:t,isStepCompleted:r}),isCollapsed:o,onCollapseStateChange:a,children:[s?e.jsx(T,{as:"p",appearance:"secondary",className:_d.stepDescription,children:s}):null,n]}),$he={startImport:"Start Import"},Ohe="_button_33mbu_1",Rhe={button:Ohe},Bhe=({connectionString:t})=>{const{trackUiInteraction:s}=k(),{projectId:n}=O(),[r,o]=m.useState(!1),a=Ne(),i=m.useCallback(async()=>{o(!0),s("import_data_start_clicked");const c=new Date;try{const{data:{branch:l}}=await q.createProjectBranchImport(n,{branch_create:{branch:{name:`import-${c.toISOString()}`},endpoints:[{type:"read_write"}]},import_options:{source_connection_string:t}});s("import_data_start_succeeded"),a.push(F(C.ProjectsItemBranchesItem,{projectId:n,branchId:l.id}))}catch(l){s("import_data_start_failed"),H(l)}finally{o(!1)}},[t,a,n,s]);return e.jsx(P,{className:Rhe.button,appearance:"primary",loading:r,disabled:r,onClick:i,children:$he.startImport})},Lhe="_container_i4za4_1",Dhe="_colorCheckPassed_i4za4_7",Mhe="_checksPassedContainer_i4za4_11",yf={container:Lhe,colorCheckPassed:Dhe,checksPassedContainer:Mhe},Uhe={db_is_reachable:{title:"Cannot connect to the source database",description:"We were not able to connect to the source database.",recoverySuggestion:"Please check your connection string and try again."},db_version:{title:"Postgres version is not supported",description:"Neon currently supports Postgres 14 - 17",recoverySuggestion:"Please upgrade your database to a supported version or contact support."},db_version_too_new:{title:"Source Postgres version is too new",recoverySuggestion:"Create project with the same or newer PostgreSQL version than your source database."},non_default_tablespaces:{title:"Non-default tablespaces"},non_default_settings:{title:"Non-default settings"},extension_support:{title:"Found unsupported extensions"},extension_compatibility:{title:"Found incompatible extension versions"},cu_limits:{title:"We were not able to determine appropriate instance size"},database_list:{title:"We were not able to query databases"},service_type:{title:"We were not able to detect source database service provider"},service_region:{title:"We were not able to detect database region"}},Zv={supportMessageSubject:t=>`Migration Assistant:"${t}"`,supportMessageDescription:(t,s)=>`Migration Assistant check "${t}" has failed with the error: "${s}"`},Fhe="_container_vv55i_1",qhe="_title_vv55i_8",zhe="_error_vv55i_13",Hhe="_warning_vv55i_17",uh={container:Fhe,title:qhe,error:zhe,warning:Hhe},Vhe=({rule:t,description:s,warning:n})=>{const r=Uhe[t];if(!r)return null;const{title:o,description:a=s,recoverySuggestion:i}=r,c=Zv.supportMessageSubject(o),l=Zv.supportMessageDescription(t,s),d=!!n;return e.jsx(xb,{initiallyCollapsed:!0,size:"s",header:e.jsxs(z,{className:uh.title,level:6,children:[e.jsx(L,{name:"warning",size:20,className:M({[uh.error]:!d,[uh.warning]:d})}),o]}),children:e.jsxs("div",{className:uh.container,children:[e.jsx("p",{children:a}),i&&e.jsx("p",{children:i}),!d&&e.jsx(fI,{subject:c,description:l})]})})},Whe=()=>e.jsxs("div",{className:yf.checksPassedContainer,children:[e.jsx(L,{name:"check",size:20,className:yf.colorCheckPassed}),"All checks have passed!"]}),jP=({checks:t})=>{if(!t.length)return null;const s=t.filter(n=>!n.succeed);return s.length?e.jsx("div",{className:yf.container,children:s.map(n=>e.jsx(Vhe,{...n},n.rule))}):e.jsx(Whe,{})},Tl={connectionStringLabel:"Your database connection string",runChecksButtonLabel:"Run Checks",loaderText:"Running checks...",limitExceededTitle:"Size limit exceeded",limitExceededMessage:"The size of the database exceeds what we support at the moment. Our Solutions team will reach out to you soon to provide assistance."},Ghe="_container_10z5i_1",Khe="_form_10z5i_7",Qhe="_connectionStringFormField_10z5i_14",Yhe="_loaderContainer_10z5i_18",hh={container:Ghe,form:Khe,connectionStringFormField:Qhe,loaderContainer:Yhe},Jhe=({onOk:t})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState(!1),{limits:o}=Mt(),{projectId:a}=O(),[i,c]=m.useState(""),[l,d]=m.useState(!1),[u,h]=m.useState([]),p=m.useCallback(_=>{c(_.target.value)},[c]),g=m.useCallback(async()=>{var _;r(!0),s("import_data_run_checks_clicked");try{const{data:x}=await q.getMigrationChecklist({connection_uri:i.trim(),project_id:a});h(x.data),o!==void 0&&x.database_size!==void 0&&o.max_import_size>=0&&o.max_import_size<x.database_size?(d(!0),s("import_data_run_checks_limits_exceeded")):(_=x.data)!=null&&_.every(({succeed:j,warning:b})=>b||j)&&(s("import_data_run_checks_succeeded"),t(i))}catch(x){s("import_data_run_checks_failed"),H(x)}finally{r(!1)}},[o,t,a,i,s]);return e.jsxs("div",{className:hh.container,children:[e.jsxs(Lt,{onSubmit:g,formBodyClassName:hh.form,children:[e.jsx(R,{label:Tl.connectionStringLabel,className:hh.connectionStringFormField,children:e.jsx(ne,{disabled:n,placeholder:"postgresql://",size:"s",value:i,onChange:p})}),e.jsx(P,{onClick:g,appearance:"primary",type:"submit",disabled:n||!i.trim()||o===void 0,children:Tl.runChecksButtonLabel})]}),n?e.jsxs("div",{className:hh.loaderContainer,children:[e.jsx(Bt,{}),Tl.loaderText]}):l?e.jsx(Q,{appearance:"error",title:Tl.limitExceededTitle,children:Tl.limitExceededMessage}):e.jsx(jP,{checks:u})]})},or={title:"Import Data",subtitle:"This tool checks compatibility before creating a copy of your data in Neon. Your source database remains untouched.",checksTitle:"Check compatibility",checksDescription:"We'll analyze your database and provide recommendations for a successful migration. No changes will be made to your source database.",importTitle:"Import data",importDescription:"We'll copy your data to a new branch.",importWarning:t=>e.jsxs(e.Fragment,{children:["Support for all database configurations is still evolving. Some databases may encounter issues. If your database is larger than 10 GB and you need help, ",t("contact us"),"."]}),importWarningTitle:"About automatic data import"},Zhe="_title_m0bo0_1",Xhe="_content_m0bo0_7",epe="_importAlert_m0bo0_14",i_={title:Zhe,content:Xhe,importAlert:epe},tpe=({onCloseDrawer:t})=>{const[s,n]=m.useState("checks"),[r,o]=m.useState(""),a=m.useCallback(u=>{o(u),n("import")},[]),{trackUiInteraction:i}=k(),[c,l]=m.useState(!1),d=m.useCallback(()=>{i("import_data_support_clicked"),l(!0)},[i]);return e.jsxs(e.Fragment,{children:[e.jsx(So,{isOpen:c,onRequestClose:()=>l(!1)}),e.jsx(Vn,{"aria-label":or.title,isOpen:!0,size:"l",onRequestClose:t,children:e.jsx(Wn,{title:e.jsxs("div",{className:i_.title,children:[or.title,e.jsx(he,{appearance:"experimental",size:"m",children:"Beta"})]}),children:e.jsxs("div",{className:i_.content,children:[e.jsx(T,{as:"p",appearance:"secondary",children:or.subtitle}),e.jsxs(xP,{children:[e.jsx(jf,{title:or.checksTitle,description:or.checksDescription,isStepCollapsed:!1,isStepCompleted:s==="import",children:e.jsx(Jhe,{onOk:a})}),e.jsxs(jf,{title:or.importTitle,isStepCollapsed:s!=="import",isStepCompleted:!1,children:[e.jsx(T,{as:"p",appearance:"secondary",children:or.importDescription}),e.jsx(Q,{className:i_.importAlert,title:or.importWarningTitle,children:or.importWarning(u=>e.jsx(A,{onClick:d,children:u}))}),e.jsx(Bhe,{connectionString:r})]})]})]})})})]})},spe="importData",npe=t=>{const{trackUiInteraction:s}=k(),n=ee("migration_assistant_dashboard_import"),[r,o]=Ma(spe,{historyMethod:"push"}),a=wr(c=>{var l;s("import_data_button_clicked"),o("show"),(l=t.onClick)==null||l.call(t,c)}),i=wr(()=>{s("import_data_drawer_closed"),o(void 0)});return m.useEffect(()=>{n&&s("import_data_button_shown")},[n,s]),n?e.jsxs(e.Fragment,{children:[e.jsx(P,{...t,onClick:a,children:t.children||"Import data"}),r&&e.jsx(tpe,{onCloseDrawer:i})]}):null},c_={title:"Import your data",description:"Automatically import your data directly into your Neon database",actionButton:"Import database"},rpe=()=>{const{trackUiInteraction:t}=k();return e.jsx(Mc,{iconName:"data_import",title:c_.title,description:c_.description,action:e.jsx(npe,{appearance:"secondary",onClick:()=>{t("get_started_widget_import_database_clicked",{mode:"auto"})},children:c_.actionButton})})},ope=["run_checks","create_project","move_data","actual_import"],yP=m.createContext(null),Uc=ST(yP),bp=()=>{const{currentStepIdx:t,setCurrentStepIdx:s,setStepCollapsed:n,mode:r}=Uc(),o=m.useMemo(()=>ope.filter(l=>r==="auto"?l!=="move_data":l!=="actual_import"),[r]),a=m.useCallback(l=>{for(let d=0;d<o.length;d+=1)if(l===o[d])return d<=t;return!1},[t,o]),i=m.useCallback(l=>{for(let d=0;d<o.length;d+=1)if(l===o[d])return d<t;return!1},[t,o]),c=m.useCallback((l,d=!1)=>{d&&n(o[t],!0);const u=Math.max(o.indexOf(l),t);s(u),n(l,!1)},[t,s,n,o]);return{isStepEnabled:a,continueTo:c,isStepCompleted:i}},ape=({project:t,children:s,mode:n})=>{const[r,o]=m.useState(""),[a,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(0),[h,p]=m.useState(new Set(["create_project","move_data","actual_import"])),[g,_]=m.useState(t??null),[x,j]=m.useState(null),b=m.useCallback(v=>h.has(v),[h]),f=m.useCallback((v,w)=>{p(S=>w?new Set([...S,v]):new Set([...S].filter(I=>I!==v)))},[p]),y=m.useMemo(()=>({sourceDatabaseUrl:r,setSourceDatabaseUrl:o,targetDatabaseUrl:a,setTargetDatabaseUrl:i,newProjectConfiguration:c,setNewProjectConfiguration:l,currentStepIdx:d,setCurrentStepIdx:u,isStepCollapsed:b,setStepCollapsed:f,createdProject:g,setCreatedProject:_,createdBranch:x,setCreatedBranch:j,mode:n}),[r,a,c,d,b,f,g,x,n]);return e.jsx(yP.Provider,{value:y,children:s})},ipe=({id:t,title:s,description:n,content:r})=>{const{isStepCollapsed:o,setStepCollapsed:a}=Uc(),{isStepCompleted:i}=bp(),{trackUiInteraction:c}=k(),l=m.useCallback(d=>{a(t,d),c(d?"migration_assistant_step_collapsed":"migration_assistant_step_expanded",{step:t})},[t,a,c]);return e.jsx(jf,{title:s,isStepCompleted:i(t),isStepCollapsed:o(t),description:n,onStepCollapse:l,children:r})},cpe=({steps:t})=>e.jsx(xP,{children:t.map(s=>e.jsx(ipe,{...s},s.id))}),ph={title:"Import Data Assistant",subtitle:"Quickly import your existing Postgres database to Neon. Follow these steps to check compatibility, and import your data.",learnMore:"Learn more"},lpe="_content_1d2xh_1",dpe="_title_1d2xh_8",Xv={content:lpe,title:dpe},fd={stepTitle:"Start import process",startImport:"Start import",description:"Click the button below to start the import process.",importLockedTooltip:"Project is being created, please wait.",importWarning:`This data import feature is currently in beta and may not be fully stable.
    Users should expect that some imports may fail.
    We're actively improving the stability and will update as the feature matures.`},upe="_tooltipButtonWrapper_1t02y_1",hpe="_importWarning_1t02y_5",ew={tooltipButtonWrapper:upe,importWarning:hpe},ppe=()=>{const{sourceDatabaseUrl:t,createdProject:s}=Uc(),[n,r]=m.useState(!1),o=Ne(),{trackUiInteraction:a}=k(),i=m.useCallback(async()=>{if(!s)throw new Error("Project not created");r(!0);try{a("migration_assistant_actual_import_start_clicked");const{data:{branch:d}}=await q.createProjectBranchImport(s.id,{import_options:{source_connection_string:t},branch_create:{branch:{name:"import"},endpoints:[{type:"read_write"}]}});o.push(F(C.ProjectsItemBranchesItem,{projectId:s.id,branchId:d.id}))}catch(d){H(d)}finally{r(!1)}},[s,o,t,a]),{data:c}=zp({projectId:s==null?void 0:s.id}),l=m.useMemo(()=>{if(!c)return!0;for(const d of c.pages)for(const u of d.operations)if(u.status==="running"||u.status==="scheduling")return!0;return!1},[c]);return e.jsxs("div",{children:[e.jsx(Q,{className:ew.importWarning,children:fd.importWarning}),e.jsx(Z,{content:l?fd.importLockedTooltip:void 0,placement:"top",zIndex:100,children:e.jsx("div",{className:ew.tooltipButtonWrapper,children:e.jsx(P,{appearance:"primary",loading:n,onClick:i,disabled:n||!s||!t||l,children:fd.startImport})})})]})},mpe={id:"actual_import",title:fd.stepTitle,description:fd.description,content:e.jsx(ppe,{})},gpe="_content_k7ay8_1",_pe="_globe_k7ay8_8",tw={content:gpe,globe:_pe},fpe=1024,bpe=()=>window.innerWidth>=fpe,xpe=({isOpen:t,onRequestClose:s,settings:n,onSuccess:r,preferredDefaults:o,createdBy:a})=>{const{trackUiInteraction:i}=k(),c=Ne(),l=m.useRef(null),d=kI({rootRef:l,shouldShowGlobe:bpe}),{onProjectCreate:u}=Q1(),{setPassword:h}=Ic(),p=m.useCallback(()=>{i("project_form_dismissed"),s==null||s()},[i,s]),g=m.useCallback(x=>{u(x),c.push(F(C.ProjectsItem,{projectId:x.project.id}))},[c,u]),_=m.useCallback(x=>{if(h(x.project.id,x.roles),s==null||s(),r){r(x);return}g(x)},[g,s,r,h]);return e.jsx(DS,{isOpen:t,onRequestClose:p,title:"Create project",width:1318,height:720,footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"submit",form:"create_project_form_id",onClick:()=>{i("project_form_submitted")},size:"l",children:"Create"}),e.jsx(ls,{appearance:"secondary",size:"l",children:"Cancel"})]}),children:e.jsxs(pR,{id:"create_project_form_id",settings:n,onSuccess:_,preferredDefaults:o,formBodyClassName:tw.content,createdBy:a,children:[e.jsx(TS,{}),d&&e.jsx(wI,{globeClassName:tw.globe,adjustHeight:!0})]})})},mh={vercelOrg:"To create a new project, use the Neon Postgres integration in Vercel",projectCreationForbidden:"Sorry, you can't create projects for now",projectCreationAvailable:t=>`You can create ${t} more ${$s("project",t)}`,limitReached:"You can not create any more projects for now"},mx=({children:t,settings:s,onSuccess:n,preferredDefaults:r,...o})=>{const{trackUiInteraction:a}=k(),{flags:{projectCreationForbidden:i}}=NA(),c=AA(),{data:l}=vs(),{max_projects:d}=kp(),u=ae(),{isVercelOrg:h}=Y(),p=u.isFreeSubscription||u.subscriptionType==="launch",g=!n,{isModalOpen:_,openModal:x,closeModal:j}=Ve(De.CreateProject,g),[b,f]=m.useState(!1),y=(l==null?void 0:l.length)||0,v=d!==-1&&y>=d,w=m.useMemo(()=>{if(h)return mh.vercelOrg;if(i)return mh.projectCreationForbidden;if(kt(d)){if(!v){const S=d-y;return mh.projectCreationAvailable(S)}return mh.limitReached}},[v,y,i,d,h]);return e.jsxs(e.Fragment,{children:[e.jsx(xpe,{isOpen:_,onRequestClose:j,settings:s,preferredDefaults:r,onSuccess:n}),p&&e.jsx(Pt,{type:gt.ProjectsLimitReached,isOpen:b,onRequestClose:()=>f(!1)}),p&&!i&&v&&!u.isMarketplaceAccount?e.jsx(P,{...o,"data-qa":"project_create_button",onClick:()=>{a("create_project_button_limited_clicked"),f(!0)},children:t||"Create project"}):e.jsx(Z,{content:w,disabled:!w,children:e.jsx("div",{style:{display:"inline-block"},children:e.jsx(P,{...o,disabled:c||i||h||o.disabled,"data-qa":"project_create_button",onClick:()=>{a("create_project_button_clicked"),x()},children:t||"New project"})})})]})},vf={stepTitle:"Create a Neon project",createProjectButton:"Create new project",description:"Create a project to host your database. We've tried to match defaults to your source database (region, Postgres version)."},jpe="_container_4s2wx_1",ype={container:jpe},vpe=()=>{const{setTargetDatabaseUrl:t,setCreatedProject:s,setCreatedBranch:n,newProjectConfiguration:r}=Uc(),{isStepEnabled:o,continueTo:a,isStepCompleted:i}=bp(),{trackUiInteraction:c}=k(),l=r!=null&&r.region?`aws-${r.region}`:"aws-us-east-2",d={platformId:"aws",databaseVersion:r==null?void 0:r.databaseVersion,regionId:l},u=ee("migration_assistant_actual_import"),h=m.useCallback(p=>{c("migration_assistant_on_new_project_created",{project_id:p.project.id}),s(p.project),n(p.branch),p.connection_uris.length>0&&(t(p.connection_uris[0].connection_uri),a(u?"actual_import":"move_data"))},[a,u,n,s,t,c]);return e.jsx("div",{className:ype.container,children:e.jsx(mx,{disabled:!o("create_project")||i("create_project"),preferredDefaults:d,onSuccess:h,children:vf.createProjectButton})})},vP={id:"create_project",title:vf.stepTitle,description:vf.description,content:e.jsx(vpe,{})},hr={stepTitle:"Import data to Neon",description:"Use the commands below to import your database data. First, download your data using pg_dump. Then, upload it to Neon with pg_restore.",pgdumpMessage:"Download a copy of your database",pgdumpInstructions:t=>`pg_dump --no-owner --no-privileges --no-publications --no-subscriptions --no-tablespaces -Fc -v -d "${t}" -f database.bak`,pgrestoreMessage:"Upload the database to Neon",pgrestoreInstructions:t=>`pg_restore -v -d "${t}" database.bak`,monitorProgressMessage:"Monitor the operations progress in your terminal.",allDone:"All done?",goToProject:"Go to project"},wpe="_container_1u5zb_1",Spe="_group_1u5zb_7",Cpe="_hint_1u5zb_13",kpe="_goToProjectButton_1u5zb_20",Si={container:wpe,group:Spe,hint:Cpe,goToProjectButton:kpe},Ipe={databaseUrlPlaceholder:"<postgres connection string>"},sw=t=>t.length>0?t:Ipe.databaseUrlPlaceholder,Ppe=()=>{const{sourceDatabaseUrl:t,targetDatabaseUrl:s,createdProject:n}=Uc(),r=Ne(),{trackUiInteraction:o}=k(),a=m.useCallback(()=>{if(!n)throw new Error("Project should be created at this point");o("migration_assistant_go_to_project_clicked"),r.push(F(C.ProjectsItem,{projectId:n.id}))},[r,n,o]);return e.jsxs("div",{className:Si.container,children:[e.jsxs("div",{className:Si.group,children:[e.jsx(T,{as:"p",appearance:"secondary",children:hr.pgdumpMessage}),e.jsx(Tr,{mode:"text",copy:{onCopy:()=>o("migration_assistant_copy_pgdump_clicked")},children:hr.pgdumpInstructions(sw(t))})]}),e.jsxs("div",{className:Si.group,children:[e.jsx(T,{as:"p",appearance:"secondary",children:hr.pgrestoreMessage}),e.jsx(Tr,{mode:"text",copy:{onCopy:()=>o("migration_assistant_copy_pgrestore_clicked")},children:hr.pgrestoreInstructions(sw(s))})]}),e.jsxs("div",{className:Si.hint,children:[e.jsx(L,{name:"terminal",size:16}),hr.monitorProgressMessage]}),e.jsxs("div",{className:Si.group,children:[hr.allDone,e.jsx(P,{appearance:"secondary",onClick:a,disabled:!n,className:Si.goToProjectButton,children:hr.goToProject})]})]})},wP={id:"move_data",title:hr.stepTitle,description:hr.description,content:e.jsx(Ppe,{})},bd={stepTitle:"Check compatibility",loaderText:"Running checks...",description:"We'll analyze your database and provide recommendations for a successful data import. No changes will be made to your source database.",connectionStringLabel:"Current database connection string",runChecksButtonLabel:"Run Checks"},Tpe="_container_10z5i_1",Npe="_form_10z5i_7",Ape="_connectionStringFormField_10z5i_14",Epe="_loaderContainer_10z5i_18",gh={container:Tpe,form:Npe,connectionStringFormField:Ape,loaderContainer:Epe},$pe=()=>{const{isStepCompleted:t}=bp(),{sourceDatabaseUrl:s,setSourceDatabaseUrl:n,setNewProjectConfiguration:r}=Uc(),{continueTo:o}=bp(),[a,i]=m.useState(!1),[c,l]=m.useState([]),{trackUiInteraction:d}=k(),u=m.useCallback(g=>{n(g.target.value)},[n]),h=!a&&s.trim()&&!t("run_checks"),p=m.useCallback(async()=>{if(d("migration_assistant_run_checks_clicked"),!!h)try{i(!0),l([]);const{data:{data:g,new_project_configuration:_}}=await q.getMigrationChecklist({connection_uri:s.trim()});_&&r({databaseVersion:_.database_version,region:_.service_region}),l(g);const x=g.filter(b=>b.warning===!0&&!b.succeed).map(b=>b.rule),j=g.filter(b=>!b.succeed&&!b.warning).map(b=>b.rule);d("migration_assistant_run_checks_completed",{warnings:x,errors:j}),j.length||o("create_project",!x.length)}catch(g){H(g)}finally{i(!1)}},[o,r,h,s,d]);return e.jsxs("div",{className:gh.container,children:[e.jsxs(Lt,{onSubmit:p,formBodyClassName:gh.form,children:[e.jsx(R,{label:bd.connectionStringLabel,className:gh.connectionStringFormField,children:e.jsx(ne,{disabled:a||t("run_checks"),placeholder:"postgresql://",size:"s",value:s,onChange:u})}),e.jsx(P,{onClick:p,appearance:"primary",type:"submit",disabled:!h,children:bd.runChecksButtonLabel})]}),a?e.jsxs("div",{className:gh.loaderContainer,children:[e.jsx(Bt,{}),bd.loaderText]}):e.jsx(jP,{checks:c})]})},Ope={id:"run_checks",title:bd.stepTitle,description:bd.description,content:e.jsx($pe,{})},Rpe=[Ope,vP,wP],SP=({project:t,onCloseDrawer:s})=>{const{importAvailableRegions:n}=Fa(),r=ee("migration_assistant_actual_import")&&(!t||n.find(c=>c.id===(t==null?void 0:t.region_id))),o=r?"auto":"manual";k({mountEvent:{name:"migration_assistant_drawer_opened",params:{mode:o}},unmountEvent:{name:"migration_assistant_drawer_closed",params:{mode:o}}});const a=!!t,i=m.useMemo(()=>Rpe.map(c=>r&&c===wP?mpe:c).filter(c=>!(a&&c===vP)),[r,a]);return e.jsx(Vn,{isOpen:!0,size:"l","aria-label":ph.title,onRequestClose:s,children:e.jsx(Wn,{title:e.jsxs("div",{className:Xv.title,children:[ph.title," ",e.jsx(he,{appearance:"experimental",size:"m",children:"Beta"})]}),children:e.jsxs("div",{className:Xv.content,children:[e.jsxs(T,{as:"p",appearance:"secondary",children:[ph.subtitle," ",e.jsx(A,{href:EA,openInNewTab:!0,icon:"external_link",children:ph.learnMore})]}),e.jsx(ape,{project:t,mode:o,children:e.jsx(cpe,{steps:i})})]})})})},l_={title:"Import your data",description:"Import your data directly into your Neon database",actionButton:"Import database"},Bpe="manualImportData",Lpe=()=>{const{trackUiInteraction:t}=k(),[s,n]=Ma(Bpe,{historyMethod:"push"}),{project:r}=O();return e.jsxs(e.Fragment,{children:[s&&e.jsx(SP,{project:r,onCloseDrawer:()=>{n(void 0)}}),e.jsx(Mc,{iconName:"data_import",title:l_.title,description:l_.description,action:e.jsx(P,{appearance:"secondary",onClick:()=>{t("get_started_widget_import_database_clicked",{mode:"manual"}),n("show")},children:l_.actionButton})})]})},d_={title:"Get sample data",description:"Easily test out your Neon database with Neon prepared datasets",actionButton:"Get data"},Dpe=()=>{const{trackUiInteraction:t}=k();return e.jsx(Mc,{iconName:"docs",title:d_.title,description:d_.description,action:e.jsx(P,{appearance:"secondary",as:We,openInNewTab:!0,href:"https://neon.tech/docs/import/import-sample-data",onClick:()=>{t("get_started_widget_get_sample_data_clicked")},children:d_.actionButton})})},u_={title:"View database contents",description:"Manage your database and view table contents with the Tables page",actionButton:"Go to Tables page"},Mpe=()=>{const{trackUiInteraction:t}=k(),{projectId:s}=O(),{defaultBranch:n}=Ye();return e.jsx(Mc,{iconName:"table",title:u_.title,description:u_.description,action:e.jsx(P,{appearance:"secondary",as:We,disabled:!n,href:n?F(C.ProjectsItemDrizzle,{projectId:s,branchId:n.id}):void 0,onClick:()=>{t("get_started_widget_open_tables_clicked")},children:u_.actionButton})})},nw={title:"Get started with your new database",dismiss:"Dismiss"},Upe="_root_2ixmr_1",Fpe="_header_2ixmr_7",qpe="_dismissButton_2ixmr_14",zpe="_cards_2ixmr_20",_h={root:Upe,header:Fpe,dismissButton:qpe,cards:zpe},Hpe=({onDismiss:t})=>{const{project:s}=O(),{importAvailableRegions:n}=Fa();k({mountEvent:"get_started_widget_shown"});const o=ee("migration_assistant_dashboard_import")&&n.find(a=>a.id===(s==null?void 0:s.region_id));return e.jsxs("div",{className:_h.root,children:[e.jsxs("div",{className:_h.header,children:[e.jsx(z,{level:2,size:"h4",children:nw.title}),e.jsx(A,{className:_h.dismissButton,onClick:t,children:nw.dismiss})]}),e.jsx(jhe,{children:e.jsxs("div",{className:_h.cards,children:[e.jsx(khe,{}),o?e.jsx(rpe,{}):e.jsx(Lpe,{}),e.jsx(Che,{}),e.jsx(Dpe,{}),e.jsx(Mpe,{})]})})]})},Vpe=()=>{const{trackUiInteraction:t}=k(),s=mR(),{projectId:n}=O(),[r,o]=m.useState(()=>gR(n));if(!s||!r)return null;const a=()=>{t("get_started_widget_dismissed"),o(!1),_R(n)};return e.jsx(Hpe,{onDismiss:a})},Nl={MIN_COMPUTE_CU:1,MAX_COMPUTE_CU:2,MIN_READ_REPLICAS:1},fh={MIN_COMPUTE_CU:.25,MAX_COMPUTE_CU:2};var la=(t=>(t.MinMaxCompute="min_max_compute",t.ReadReplica="read_replica",t.DisableScaleToZero="disable_scale_to_zero",t.InstantRestore="instant_restore",t.StagingBranch="staging_branch",t.IPAllow="ip_allow",t))(la||{}),so=(t=>(t.EditCompute="edit_compute",t.AddReadReplica="add_read_replica",t.EditRestoreWindow="edit_restore_window",t.EnableStagingBranch="enable_staging_branch",t.DisableScaleToZero="disable_scale_to_zero",t.UpgradePlan="upgrade_plan",t))(so||{});const Wpe=(t,s)=>{if(!t.length)return{readReplicaCount:0,currentMinCompute:fh.MIN_COMPUTE_CU,currentMaxCompute:fh.MAX_COMPUTE_CU,primaryEndpoint:void 0,branches:[]};const n=t.filter(S1).length,r=t.find(dn);return{readReplicaCount:n,currentMinCompute:(r==null?void 0:r.autoscaling_limit_min_cu)??fh.MIN_COMPUTE_CU,currentMaxCompute:(r==null?void 0:r.autoscaling_limit_max_cu)??fh.MAX_COMPUTE_CU,primaryEndpoint:r,branches:s}},Gpe=t=>t.some(s=>s.name.toLowerCase().includes("staging")),Kpe=(t,s)=>s>0?Math.round(t/s*100):0,Qpe=(t,s,n,r,o)=>[{id:"min_max_compute",title:"High Performance Production Branch",description:s?`Set autoscaling for ${Nl.MIN_COMPUTE_CU}-${Nl.MAX_COMPUTE_CU} CU. Current: ${t.currentMinCompute}-${t.currentMaxCompute} CU.`:"No compute endpoints found",completed:s&&t.currentMinCompute>=Nl.MIN_COMPUTE_CU&&t.currentMaxCompute<=Nl.MAX_COMPUTE_CU,fixType:"edit_compute"},{id:"disable_scale_to_zero",title:"Disable Cold Starts on Production Branch",description:s?"Current state: scale-to-zero when idle":"No compute endpoints found",completed:!1,fixType:"upgrade_plan"},{id:"read_replica",title:"Read-only Replica for Analytics and Reporting",description:`Current number of read-only replicas: ${t.readReplicaCount}`,completed:t.readReplicaCount>=Nl.MIN_READ_REPLICAS,fixType:"add_read_replica"},{id:"instant_restore",title:"24 Hour Instant Restore Window",description:`Current restore window: ${xc(n)}`,completed:n>=r,fixType:"edit_restore_window"},{id:"staging_branch",title:"Create a Staging Branch",description:`Current branches: ${t.branches.map(a=>a.name).join(", ")}`,completed:o,fixType:"enable_staging_branch"},{id:"ip_allow",title:"Secure Network Traffic by Restricting IPs",description:"Current state: open to public network traffic",completed:!1,fixType:"upgrade_plan"}],Ype=()=>{var p;const{projectId:t,project:s}=O(),{branches:n,defaultBranch:r,isLoading:o}=Ye(),a=hs({projectId:t,branchId:(r==null?void 0:r.id)??""}),{limits:i,isLoading:c}=Mt(),l=m.useMemo(()=>{var y;const g=((y=a.data)==null?void 0:y.endpoints)??[],_=g.length>0,x=(s==null?void 0:s.history_retention_seconds)??0,j=(i==null?void 0:i.max_history_retention_seconds)??0,b=Gpe(n);return{...Wpe(g,n),hasEndpoints:_,restoreWindow:x,hasStagingBranch:b,maxHistoryRetentionSeconds:j}},[(p=a.data)==null?void 0:p.endpoints,s==null?void 0:s.history_retention_seconds,n,i==null?void 0:i.max_history_retention_seconds]),d=m.useMemo(()=>Qpe(l,l.hasEndpoints,l.restoreWindow,l.maxHistoryRetentionSeconds,l.hasStagingBranch),[l]),u=m.useMemo(()=>d.filter(g=>g.completed).length,[d]),h=m.useMemo(()=>Kpe(u,d.length),[u,d.length]);return{items:d,completedItems:u,totalItems:d.length,completionPercentage:h,isLoading:a.isLoading||c||o,hasError:!!a.isError,primaryEndpoint:l.primaryEndpoint,hasEndpoints:l.hasEndpoints,restoreWindow:l.restoreWindow,hasStagingBranch:l.hasStagingBranch,maxHistoryRetentionSeconds:l.maxHistoryRetentionSeconds}},Jpe="_root_u3osn_1",Zpe="_container_u3osn_14",Xpe="_textContainer_u3osn_22",eme="_actionsContainer_u3osn_30",tme="_enabled_u3osn_37",sme="_disabled_u3osn_41",xa={root:Jpe,container:Zpe,textContainer:Xpe,actionsContainer:eme,enabled:tme,disabled:sme},nme={[la.MinMaxCompute]:"production_checklist_min_max_compute_fix_clicked",[la.DisableScaleToZero]:"production_checklist_disable_scale_to_zero_upgrade_clicked",[la.ReadReplica]:"production_checklist_read_replica_fix_clicked",[la.InstantRestore]:"production_checklist_instant_restore_fix_clicked",[la.StagingBranch]:"production_checklist_staging_branch_fix_clicked",[la.IPAllow]:"production_checklist_ip_allow_upgrade_clicked"},rme=(t,s)=>{const{projectId:n}=O(),r=Ne(),{trackUiInteraction:o}=k();return{handleFixAction:(i,c)=>{const l=nme[c];l&&o(l);const u={[so.EditCompute]:()=>t.setShowEditComputeDrawer(!0),[so.DisableScaleToZero]:()=>t.setShowEditComputeDrawer(!0),[so.AddReadReplica]:()=>t.setShowAddReadReplicaDrawer(!0),[so.EnableStagingBranch]:()=>t.setShowCreateBranchModal(!0),[so.UpgradePlan]:s,[so.EditRestoreWindow]:()=>{const h=`${F(C.ProjectsItemSettings,{projectId:n})}#storage`;r.push(h)}}[i];u&&u()}}},ome=({item:t})=>{if(t.completed)return null;const s=t.fixType===so.UpgradePlan?{appearance:"success",text:"UPGRADE"}:{appearance:"warning",text:"FIX"};return e.jsx(he,{appearance:s.appearance,children:s.text})},ame=({completed:t})=>e.jsx(L,{className:M({[xa.enabled]:t,[xa.disabled]:!t}),name:t?"check_circle_inverted2":"check_circle_dashed",size:16}),ime=({item:t})=>e.jsxs("span",{className:xa.textContainer,children:[e.jsx(T,{children:t.title}),e.jsx(T,{appearance:"tertiary",size:"s",children:t.description})]}),cme=({item:t,handleUpgradeClick:s,drawerActions:n})=>{const{handleFixAction:r}=rme(n,s),o=()=>{if(!t.completed){if(!t.fixType){s();return}r(t.fixType,t.id)}},a=e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:xa.container,children:[e.jsx(ame,{completed:t.completed}),e.jsx(ime,{item:t})]}),e.jsx("div",{className:xa.actionsContainer,children:e.jsx(ome,{item:t})})]});return t.completed?e.jsx("div",{className:xa.root,children:a}):e.jsx("button",{type:"button",className:xa.root,onClick:o,children:a})},lme="_itemsContainer_1okry_1",dme={itemsContainer:lme},ume=({items:t,handleUpgradeClick:s,setShowEditComputeDrawer:n,setShowAddReadReplicaDrawer:r,setShowCreateBranchModal:o})=>{const a={setShowEditComputeDrawer:n,setShowAddReadReplicaDrawer:r,setShowCreateBranchModal:o};return e.jsx("div",{className:dme.itemsContainer,children:t.map(i=>e.jsx(cme,{item:i,handleUpgradeClick:s,drawerActions:a},i.id))})},hme="_root_mvpsd_1",pme="_progressHeader_mvpsd_7",rw={root:hme,progressHeader:pme},mme=({completedItems:t,totalItems:s,percentage:n})=>e.jsxs("div",{className:rw.root,children:[e.jsxs("div",{className:rw.progressHeader,children:[e.jsxs(T,{children:[n,"% completed"]}),e.jsxs(T,{appearance:"tertiary",size:"s",children:[t," of ",s," items"]})]}),e.jsx(hD,{percent:n/100,wide:!0,hideText:!0})]}),gme="_root_33u6h_1",_me="_newBadge_33u6h_8",fme="_progressContainer_33u6h_12",Al={root:gme,newBadge:_me,progressContainer:fme},bme="staging",xme=()=>{const t=Ne(),{project:s}=O(),{items:n,completedItems:r,totalItems:o,completionPercentage:a,isLoading:i,primaryEndpoint:c}=Ype(),[l,d]=m.useState(!1),[u,h]=m.useState(!1),[p,g]=m.useState(!1),[_,x]=m.useState(!1),{trackUiInteraction:j}=k({mountEvent:"production_checklist_shown"}),{orgId:b}=Y(),{isMarketplaceAccount:f}=ae(),y=()=>{if(j("production_checklist_upgrade_clicked",{is_marketplace_account:f}),f){const v=b?F(C.OrgBilling,{orgId:b}):C.UserBilling;return t.push(v)}x(!0)};return i?e.jsx(Pr,{title:e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Production Checklist"}),e.jsx(he,{appearance:"neon",className:Al.newBadge,children:"New"})]}),children:e.jsxs("div",{className:Al.root,children:[e.jsx(T,{appearance:"tertiary",children:"Loading checklist..."}),e.jsx($,{width:"100%",height:30,animate:!0}),e.jsx($,{width:"100%",height:30,animate:!0})]})}):e.jsxs(Pr,{title:e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"Production Checklist"}),e.jsx(he,{appearance:"neon",className:Al.newBadge,children:"New"})]}),children:[e.jsx(Pt,{type:gt.Default,isOpen:_,onRequestClose:()=>{x(!1)}}),l&&c&&s&&e.jsx(qn,{isOpen:l,onRequestClose:()=>d(!1),mode:"edit",endpoint:c,project:s}),u&&c&&s&&e.jsx(qn,{isOpen:u,onRequestClose:()=>h(!1),mode:"create",project:s,endpointType:"read_only",branchId:c.branch_id}),p&&e.jsx(bb,{isOpen:p,onSuccess:()=>g(!1),onCancel:()=>g(!1),initialBranchName:bme}),e.jsxs("div",{className:Al.root,children:[e.jsx(ume,{items:n,handleUpgradeClick:y,setShowEditComputeDrawer:d,setShowAddReadReplicaDrawer:h,setShowCreateBranchModal:g}),e.jsx("div",{className:Al.progressContainer,children:e.jsx(mme,{completedItems:r,totalItems:o,percentage:a})})]})]})},jme=({project:t})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState(!1);return e.jsxs(e.Fragment,{children:[t&&e.jsx(hx,{isOpen:n,project:t,onRequestClose:()=>{r(!1)}}),e.jsx(P,{appearance:"primary",icon:"connect",onClick:()=>{s("dashboard_toolbar_connect_clicked"),r(!0)},children:"Connect"})]})},yme=()=>{const{trackUiInteraction:t}=k(),{project:s}=O(),{billingUrl:n,isLoading:r}=wo(),o=ee("breadcrumbs_separated_dropdown");return e.jsx(Nc,{title:"Project Dashboard",actions:e.jsxs(e.Fragment,{children:[e.jsx(jme,{project:s}),!o&&e.jsx(P,{as:We,href:n,disabled:r,appearance:"secondary",onClick:()=>{t("dashboard_billing_clicked")},children:"Go to Billing"})]})})},CP=({project:t})=>{const{autoscalingMin:s,autoscalingMax:n}=Z1(t),r={autoscaling_limit_min_cu:s,autoscaling_limit_max_cu:n};return e.jsx(mm,{endpoint:r})},gx=t=>e.jsxs(Pr,{className:t.className,title:e.jsx($,{style:{width:"240px",height:"12px"}}),children:[e.jsxs("div",{style:{display:"flex",gap:"22px",marginBottom:"40px"},children:[e.jsx($,{style:{flexGrow:1,height:"44px"}}),e.jsx($,{style:{flexGrow:1,height:"44px"}})]}),e.jsx($,{style:{height:"44px",marginBottom:"40px"}}),e.jsx($,{style:{height:"44px"}})]}),vme="_root_fqm3d_1",wme="_computeDefaultsValue_fqm3d_5",Sme="_region_fqm3d_9",bh={root:vme,computeDefaultsValue:wme,region:Sme},Cme=t=>{const{trackUiInteraction:s}=k(),{projectId:n,project:r,isLoading:o}=O(),{limits:a,isLoading:i}=Mt(),c=a==null?void 0:a.max_autoscaling_cu,{getRegionSafe:l}=Fa(),d=l((r==null?void 0:r.platform_id)??"",(r==null?void 0:r.region_id)??""),u=xM();return o||!r||i?e.jsx(gx,{}):e.jsx(Pr,{...t,title:"Project settings",footer:u,links:c&&c>.25?e.jsx(A,{href:`${F(C.ProjectsItemSettings,{projectId:n})}#compute`,onClick:()=>s("storage_widget_go_to_settings_clicked"),children:"Manage"}):void 0,children:e.jsx("div",{className:bh.root,children:e.jsxs(X1,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Region"}),e.jsx("td",{children:e.jsx("div",{className:bh.region,children:e.jsx("b",{children:d==null?void 0:d.name})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Default compute size"}),e.jsx("td",{children:e.jsx("b",{className:bh.computeDefaultsValue,children:e.jsx(CP,{project:r})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"History retention"}),e.jsx("td",{children:e.jsx("b",{className:bh.computeDefaultsValue,children:xc(r.history_retention_seconds)})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Postgres version"}),e.jsx("td",{children:e.jsx("b",{children:r==null?void 0:r.pg_version})})]})]})})})},kme={title:"Monitoring"},Ime="_selectRow_1rh2j_1",Pme="_refreshButton_1rh2j_10",ow={selectRow:Ime,refreshButton:Pme},Tme="_root_1hds3_1",Nme="_content_1hds3_8",Ame="_dismissButton_1hds3_16",h_={root:Tme,content:Nme,dismissButton:Ame},Eme=({onDismiss:t})=>{const{trackUiInteraction:s}=k({mountEvent:"monitoring_widget_slack_app_announcement_shown"}),n=()=>{s("monitoring_widget_slack_app_announcement_dismissed"),t()};return e.jsxs("div",{className:h_.root,children:[e.jsxs("div",{className:h_.content,children:[e.jsx(L,{name:"slack",size:20}),e.jsx(A,{href:"https://neon.tech/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("monitoring_widget_slack_app_announcement_slack_app_link_clicked")},children:"Track your Neon projects in Slack"}),e.jsx(he,{appearance:"neon",children:"NEW"})]}),e.jsx("button",{type:"button",className:h_.dismissButton,title:"Dismiss",onClick:n,children:e.jsx(L,{name:"close",size:12})})]})};function $me(){const t=Tf("growth_slack_app_announcement")==="monitoring_widget",[s,n]=m.useState(()=>!!$t.get(Me.SlackAppAnnouncementDismissed));return s||!t?{slackAppNode:null}:{slackAppNode:e.jsx(Eme,{onDismiss:()=>{$t.set(Me.SlackAppAnnouncementDismissed,!0),n(!0)}})}}const Ome=({project:t})=>{var g;const{selectOptions:s}=Ye(),{trackUiInteraction:n}=k(),{slackAppNode:r}=$me(),[o,a]=m.useState(null),[i,c]=m.useState(),l=hs({projectId:t.id,branchId:((g=o==null?void 0:o.branch)==null?void 0:g.id)??""}),d=m.useMemo(()=>{var _;return((_=l.data)==null?void 0:_.endpoints)??[]},[l.data]);m.useEffect(()=>{!o&&s&&s.length>0&&a(s.find(_=>_.branch&&_.branch.default)??s[0])},[o,s]);const[u,h]=m.useState(0),p=m.useCallback(()=>{h(_=>_+1)},[]);return e.jsx(e.Fragment,{children:e.jsxs(Pr,{title:kme.title,links:e.jsx(A,{href:o!=null&&o.branch?F(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:t.id,branchId:o.branch.id}):void 0,onClick:()=>n("monitoring_widget_view_all_metrics_clicked"),children:"View all metrics"}),footer:r,children:[e.jsxs("div",{className:ow.selectRow,children:[e.jsx(R,{label:"Branch",children:e.jsx(Vh,{value:o,options:s,size:"s",onChange:a})}),e.jsx(R,{label:"Compute",children:e.jsx(tb,{endpoints:d,endpointId:i,size:"s",onChange:_=>c((_==null?void 0:_.id)??void 0)})}),e.jsx("div",{className:ow.refreshButton,children:e.jsx(P,{appearance:"secondary",icon:"reset",size:"s",onClick:p,children:"Refresh"})})]}),i&&e.jsx(eS,{defaultRange:{type:"period",fromDate:new Date,period:$A.day},children:e.jsx(OA,{endpointId:i,height:280},u)})]})})},Rme="_branchName_1s5bc_1",Bme="_branchWrapper_1s5bc_7",Lme="_branchCell_1s5bc_13",p_={branchName:Rme,branchWrapper:Bme,branchCell:Lme},Dme=t=>{const{projectId:s,isLoading:n}=O(),r=zp({projectId:s}),o=m.useMemo(()=>EI(r.data,d=>d.operations),[r.data]),{trackUiInteraction:a}=k(),{branchesById:i}=Ye(),c=n||r.status==="pending";let l=e.jsx(T,{appearance:"secondary",children:"Something went wrong"});return c?e.jsx(gx,{}):(r.status==="error"?l=e.jsx(T,{appearance:"secondary",children:r.error.message}):o.length===0?l=e.jsx(T,{appearance:"secondary",children:"There are no operations yet"}):l=e.jsxs(X1,{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Branch"}),e.jsx("th",{children:"Date"}),e.jsx("th",{style:{textAlign:"left"},children:"Status"})]}),o.slice(0,5).map(d=>{var u,h;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:$I(d)})}),e.jsx("td",{className:p_.branchCell,children:d.branch_id?e.jsx(A,{"aria-label":(u=i[d.branch_id])==null?void 0:u.name,className:p_.branchWrapper,href:F(C.ProjectsItemBranchesItem,{projectId:s,branchId:d.branch_id}),onClick:()=>a("ops_widget_branch_link_clicked"),children:e.jsx("div",{className:p_.branchName,children:(h=i[d.branch_id])==null?void 0:h.name})}):"-"}),e.jsx("td",{children:le(d.created_at)}),e.jsx("td",{style:{textAlign:"left"},children:e.jsx(gS,{status:d.status})})]},d.id)})]}),e.jsx(Pr,{...t,title:"Operations",links:e.jsx(A,{href:F(te.ProjectsItemMonitoringOperations,{projectId:s}),onClick:()=>a("ops_widget_show_all_clicked"),children:"Show all"}),children:l}))},Mme=Pp({name:"branchWidget",initialState:{isVercelIntegrationAlertClosed:!1},reducers:{setIsVercelIntegrationAlertClosed:(t,{payload:s})=>{t.isVercelIntegrationAlertClosed=s}}}),Rd=Tp(Mme);function*Ume(){try{const t=$t.get(Me.BranchWidget);if(t){const s=t;yield Qf(Rd.actions.setIsVercelIntegrationAlertClosed(!!s.isVercelIntegrationAlertClosed))}}catch{$t.remove(Me.BranchWidget)}}function*Fme(){yield lb(Rd.actionTypes,function*(){const s=yield Kf(Rd.selector);$t.set(Me.BranchWidget,s)})}function*qme(){yield Wf(Ume),yield Gf(Fme)}Rd.setSaga(qme);const wf=Rd,zme="_root_ntegn_1",Hme="_close_ntegn_11",Vme="_tag_ntegn_17",Wme="_content_ntegn_29",xh={root:zme,close:Hme,tag:Vme,content:Wme},m_={tag:"Preview Workflow",description:"You don't have any preview branches yet. Improve your workflow by adding database branching to your development previews.",button:"Install an integration"},Gme=()=>{const t=Ne(),{projectId:s}=wc(),{isVercelIntegrationAlertClosed:n}=vc(wf.selector),r=Ls(),{trackUiInteraction:o}=k(),{isVercelOrg:a,isLoading:i}=Y(),c=()=>{r(wf.actions.setIsVercelIntegrationAlertClosed(!0)),o("branches_widget_install_integration_closed")},l=()=>{o("branches_widget_install_integration_clicked"),t.push(F(C.ProjectsItemIntegrations,{projectId:s}))};return n||i||a?null:e.jsxs("div",{className:xh.root,children:[e.jsx(kr,{appearance:"default",onClick:c,className:xh.close,iconName:"close",iconSize:12,"aria-label":"Close button"}),e.jsx("span",{className:xh.tag,children:m_.tag}),e.jsx("p",{className:xh.content,children:m_.description}),e.jsx(P,{onClick:l,type:"button",appearance:"secondary",children:m_.button})]})},Kme="_createdBy_1q8ec_1",Qme={createdBy:Kme},Yme=({annotations:t={},endpoints:s})=>m.useMemo(()=>[{header:"Name",accessorKey:"name",maxSize:250,rowHeader:!0,render:n=>e.jsx(YI,{branch:n,searchWords:[]})},{header:"Primary compute",render:n=>e.jsx(KI,{branchId:n.id,endpoints:s})},{header:"Created by",size:110,render:n=>e.jsx("div",{className:Qme.createdBy,children:e.jsx(_p,{iconOnly:!0,branch:n,annotation:t[n.id]})})}],[t,s]),Jme=({branches:t,annotations:s,endpoints:n,isLoading:r=!1})=>{const{trackUiInteraction:o}=k(),{projectId:a}=O(),i=Yme({annotations:s,endpoints:n});return e.jsx(mn,{columns:i,rows:t,isLoading:r,"aria-label":"Branches",appearance:"borderless",rowHref:c=>F(C.ProjectsItemBranchesItem,{branchId:c.id,projectId:a}),onRowClick:()=>o("branches_widget_row_clicked")})},aw=t=>{var p;const{trackUiInteraction:s}=k(),{projectId:n,project:r,isLoading:o}=O(),{branches:a,annotations:i,isLoading:c}=Ye(),l=ds({projectId:n}),d=o||c||!r,u=m.useMemo(()=>a.slice(0,5),[a]),h=m.useMemo(()=>a.find(Y1),[a]);return d?e.jsx(gx,{}):e.jsxs(Pr,{...t,title:"Branches",links:e.jsx(A,{href:F(C.ProjectsItemBranches,{projectId:n}),onClick:()=>s("branches_widget_go_to_branches_list_clicked"),children:"View all"}),children:[h&&e.jsxs(J1,{children:["Database import in progress on '",h.name,"' branch"]}),e.jsx(Jme,{branches:u,annotations:i,endpoints:((p=l.data)==null?void 0:p.endpoints)??[]}),e.jsx(Gme,{})]})},ss={normal:"",warning:"",error:"",unlimited:""},iw={storage:{normal:t=>`Your storage usage is well within the ${t} GB limit. You've got space to grow.`,warning:t=>`You're nearing your storage limit of ${t} GB. Free up space or upgrade to avoid issues.`,error:"Storage limit reached. Further database operations will fail unless you free up space or upgrade.",unlimited:""},compute:{normal:"Your compute usage is within the limits of your plan.",warning:"You're approaching your compute usage limit. Consider upgrading to avoid suspension.",error:"Compute limit exceeded. Compute operations are suspended until your next billing cycle or upgrade.",unlimited:"24/7 availability at the default 0.25 vCPU with 1 GB RAM"},branchCompute:{normal:t=>`Your branch computes are within the allowed ${t} hours per month across all branches.`,warning:t=>`You're nearing the ${t}-hour limit for branch computes. Consider optimizing or upgrading your plan.`,error:"Branch compute limit reached. Further operations on non-default branches will be paused until the next billing cycle or upgrade.",unlimited:""},dataTransfer:{normal:t=>`Data transfer is within your plan's ${t} GB-month limit.`,warning:t=>`You're close to reaching your data transfer limit of ${t} GB-month. Monitor usage to avoid suspension.`,error:"Data transfer limit exceeded. Compute is suspended until the next billing cycle or upgrade.",unlimited:""},branches:{normal:t=>`You're within the allowed number of ${t} branches for your plan.`,warning:t=>`You're nearing the maximum number of ${t} branches. Upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:t=>`You're within the allowed number of ${t} projects for your plan.`,warning:"You're nearing the maximum number of projects. Upgrade for more.",error:"Projects limit reached. Remove unused projects or upgrade your plan.",unlimited:""},publicDataTransfer:ss,privateDataTransfer:ss},dr={storage:{normal:t=>`Your storage usage is well within your ${t} GB allowance.`,warning:t=>`You're nearing your storage allowance of ${t} GB. Extra charges will apply if you go over.`,error:"You've reached your storage allowance. You'll be charged for any extra storage you add.",unlimited:""},compute:{normal:"Your compute usage is within your plan's allowance.",warning:"You're almost at your compute allowance. Extra charges will apply if you go over.",error:"You've reached your compute allowance. You'll be charged for any additional compute time.",unlimited:""},branches:{normal:t=>`You're within the allowed number of ${t} branches for your project.`,warning:t=>`You're nearing the maximum number of ${t} branches. Remove unused branches or upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:t=>`You're within the allowed number of ${t} projects for your plan.`,warning:t=>`You're nearing the maximum number of ${t} projects. Remove unused projects to stay within your limit.`,error:"You've reached your project limit. Remove unused projects to continue.",unlimited:""},branchCompute:ss,dataTransfer:ss,publicDataTransfer:ss,privateDataTransfer:ss},El={...dr.projects,warning:t=>`You're nearing the maximum number of ${t} projects. Extra charges will apply if you go over.`,error:"You've reached your project limit. Extra charges will apply for any new projects you create.",unlimited:""},Zme={free_v2:iw,free_v3:iw,serverless_v3:dr,launch:dr,scale:{...dr,projects:El},business:{...dr,projects:El},business_v3:{...dr,projects:El},aws_marketplace:{...dr,projects:El},direct_sales:{...dr,projects:El},vercel_pg_legacy:{...dr},UNKNOWN:{branchCompute:ss,storage:ss,compute:ss,dataTransfer:ss,branches:ss,projects:ss,publicDataTransfer:ss,privateDataTransfer:ss}},pc={titleForProjectLevel:"Usage since",titleForAccountLevel:"Account Usage",upgradeButtonContent:"Upgrade",extendLimitsButtonContent:"Upgrade to extend limits",toNow:"to now",divider:"•"},Xme=(t,s,n)=>Zme[n][t][s],ege=(t,s)=>kt(s)?t>=s?"error":t>=s*.8?"warning":"normal":"unlimited",tge=({usageType:t,usage:s,allowance:n,subscriptionType:r})=>{const o=ege(s,n);return{usageState:o,tooltip:Xme(t,o,r)}},g_=({converterFn:t,value:s})=>s===void 0?"-":(t?t(s):s.toString()).split(" ")[0],sge=({converterFn:t,value:s})=>s===void 0?"":(t?t(s):s.toString()).split(" ")[1]||"",nge=(t,s)=>t&&!kt(s),Ht=({usageType:t,usage:s,allowance:n,isFreeSubscription:r,converterFn:o,showAllowance:a,isPaidSubscription:i,subscriptionType:c})=>{const l=sge({converterFn:o,value:s}),{usageState:d,tooltip:u}=tge({usageType:t,usage:s,allowance:n,subscriptionType:c}),h=n===-1?"∞":g_({converterFn:o,value:n}),p=typeof u=="function"?u(h):u;return i?{usageType:t,usage:g_({converterFn:o,value:s}),allowance:h,usageState:"normal",tooltip:p,isUnlimited:!1,showAllowance:a,unit:l}:{usageType:t,usage:g_({converterFn:o,value:s}),allowance:h,usageState:d,tooltip:p,isUnlimited:nge(r,n),converterFn:o,showAllowance:a,unit:l}},kP=t=>t.map(s=>({...s,tooltip:"",usageState:"normal"})),rge=()=>{const t=ee("growth_remove_non_primary_compute_limit"),{isFreeSubscription:s,isPaidSubscription:n,subscriptionType:r}=ae(),{isLoading:o,startPeriod:a,usage:i,allowance:c}=fS(),{isOwnProject:l}=O(),{branchesCount:d,isLoading:u}=Ye(),{limits:h,isLoading:p}=Mt();return{items:m.useMemo(()=>{const _=vt([Ht({isFreeSubscription:s,usageType:"storage",usage:i.projectStorage,allowance:c.storage,converterFn:Os,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"compute",usage:i.projectComputeTime,allowance:c.compute,converterFn:xo,isPaidSubscription:n,subscriptionType:r}),t?void 0:Ht({isFreeSubscription:s,usageType:"branchCompute",usage:i.nonPrimaryCompute,allowance:c.nonPrimaryCompute,converterFn:xo,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"dataTransfer",usage:i.dataTransfer,allowance:c.dataTransfer,converterFn:Os,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"branches",usage:d,allowance:(h==null?void 0:h.max_branches)||-1,showAllowance:s,isPaidSubscription:n,subscriptionType:r})]);return l?_:kP(_)},[s,i.projectStorage,i.projectComputeTime,i.nonPrimaryCompute,i.dataTransfer,c.storage,c.compute,c.nonPrimaryCompute,c.dataTransfer,n,r,d,h==null?void 0:h.max_branches,l,t]),isLoading:o||u||p,startPeriod:Ln(a,ve.Date)}},oge=()=>{const{isFreeSubscription:t,isPaidSubscription:s,subscriptionType:n}=ae(),{isOwnProject:r,projectId:o,project:a}=O(),i=Ff(),{branchesCount:c,isLoading:l}=Ye(),{limits:d,isLoading:u}=Mt(),{data:h,isLoading:p}=ib.useGetProjectConsumptionQuery(o),{startPeriod:g,isLoading:_}=Pc();return{items:m.useMemo(()=>{var v;const b=new XC((h==null?void 0:h.v3_metrics)??[],i).collectProjectUsageMetrics(),f=RA((v=i.pg_settings)==null?void 0:v["neon.max_cluster_size"]),y=vt([Ht({isFreeSubscription:t,usageType:"branches",usage:c,allowance:(d==null?void 0:d.max_branches)||-1,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),Ht({isFreeSubscription:t,usageType:"compute",usage:b.computeSeconds,allowance:(d==null?void 0:d.per_project.compute_time_seconds)??-1,converterFn:BA,showAllowance:t,isPaidSubscription:s,subscriptionType:n}),Ht({isFreeSubscription:t,usageType:"storage",usage:t?(a==null?void 0:a.written_data_bytes)??0:b.storage,allowance:f??-1,showAllowance:t,converterFn:t?Os:Hh,isPaidSubscription:s,subscriptionType:n}),...t?[Ht({isFreeSubscription:t,usageType:"dataTransfer",usage:(a==null?void 0:a.data_transfer_bytes)??0,allowance:(d==null?void 0:d.per_project.data_transfer_bytes)??-1,showAllowance:t,converterFn:Os,isPaidSubscription:s,subscriptionType:n})]:[Ht({isFreeSubscription:t,usageType:"privateDataTransfer",usage:b.privateTransfer,allowance:-1,showAllowance:!1,converterFn:Os,isPaidSubscription:s,subscriptionType:n}),Ht({isFreeSubscription:t,usageType:"publicDataTransfer",usage:b.publicTransfer,allowance:-1,showAllowance:!1,converterFn:Os,isPaidSubscription:s,subscriptionType:n})]]);return r?y:kP(y)},[h==null?void 0:h.v3_metrics,i,t,c,d==null?void 0:d.max_branches,d==null?void 0:d.per_project.compute_time_seconds,d==null?void 0:d.per_project.data_transfer_bytes,s,n,a==null?void 0:a.written_data_bytes,a==null?void 0:a.data_transfer_bytes,r]),isLoading:p||l||u||_,startPeriod:Ln(g,ve.Date)}},age="_statisticValues_o7viv_1",ige="_statisticIcon_o7viv_7",cge="_color_warning_o7viv_11",lge="_color_error_o7viv_15",Ci={statisticValues:age,statisticIcon:ige,color_warning:cge,color_error:lge},dge=({usageState:t,usage:s,showAllowance:n,allowance:r,unit:o})=>e.jsxs("span",{className:Ci.statisticValues,"data-qa":`usage-card-usage-${t}`,children:[e.jsx(z,{level:2,className:M({[Ci.color_error]:t==="error",[Ci.color_warning]:t==="warning"}),children:s}),n&&e.jsxs(e.Fragment,{children:[e.jsx(T,{children:"/"}),e.jsx(T,{"data-qa":"usage-card-allowance",children:r})]}),e.jsx(T,{children:o}),t!=="normal"&&t!=="unlimited"&&e.jsx(L,{"data-qa":`usage-card-icon-${t}`,className:M(Ci.statisticIcon,{[Ci.color_error]:t==="error",[Ci.color_warning]:t==="warning"}),name:"warning",size:12})]}),uge={storage:"Storage",compute:"Compute",branchCompute:"Branch Compute",dataTransfer:"Data Transfer",publicDataTransfer:"Public transfer",privateDataTransfer:"Private transfer",branches:"Branches",projects:"Projects"},hge={unlimited:"Unlimited"},pge="_root_gnkut_1",mge="_statisticTitle_gnkut_13",gge="_statisticValues_gnkut_18",jh={root:pge,statisticTitle:mge,statisticValues:gge},_ge=({data:t,isLoading:s=!0})=>s||!t?e.jsx("div",{className:jh.root,children:e.jsx($,{"data-qa":"usage-card-loading",width:"100%",height:30})}):e.jsx(Z,{content:t.tooltip,maxWidth:200,children:e.jsxs("div",{className:jh.root,"data-qa":"usage-card",children:[e.jsx(z,{level:6,className:jh.statisticTitle,children:uge[t.usageType]}),t.isUnlimited?e.jsx(z,{level:5,className:jh.statisticValues,children:hge.unlimited}):e.jsx(dge,{...t})]})}),fge="_root_gyp2s_1",bge={root:fge},xge=()=>e.jsxs(T,{size:"s",className:bge.root,children:["Metrics may be delayed up to one hour."," ",e.jsx(We,{href:LA,openInNewTab:!0,children:"Learn more here"}),"."]}),jge="_cards_5erur_1",yge={cards:jge},vge=({setUpgradePopupOpened:t,setEnterpriseTrialModalOpened:s,upgradePopupOpened:n,enterpriseTrialModalOpened:r})=>{const o=ae(),{trackUiInteraction:a}=k(),i=m.useMemo(()=>o.subscriptionType==="scale",[o.subscriptionType]),c=m.useMemo(()=>!i&&o.subscriptionType!=="business"&&o.subscriptionType!=="business_v3",[i,o.subscriptionType]);return e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.Default,isOpen:n,onRequestClose:()=>t(!1)}),e.jsx(YC,{isOpen:r,onRequestClose:()=>s(!1)}),e.jsx(A,{onClick:()=>{a("usage_widget_upgrade_clicked"),i||c?t(!0):s(!0)},children:c?pc.upgradeButtonContent:pc.extendLimitsButtonContent})]})},wge=t=>{const s=ae(),[n,r]=m.useState(!1),[o,a]=m.useState(!1),i=m.useMemo(()=>t.type==="project",[t.type]);if(!t.showUpgrade)return null;const c=!i&&e.jsxs("span",{children:[t.startPeriod," ",pc.toNow]}),l=s.isFreeSubscription&&e.jsx(vge,{setUpgradePopupOpened:r,setEnterpriseTrialModalOpened:a,upgradePopupOpened:n,enterpriseTrialModalOpened:o});return e.jsxs("div",{children:[c,c&&l&&e.jsx("span",{children:` ${pc.divider} `}),l]})},_x=({data:{items:t,isLoading:s,startPeriod:n},showUpgrade:r,type:o})=>{const{isMarketplaceAccount:a}=ae(),i=m.useMemo(()=>o==="project"?`${pc.titleForProjectLevel} ${n}`:pc.titleForAccountLevel,[n,o]);return e.jsxs(Pr,{title:i,links:!a&&e.jsx(wge,{type:o,startPeriod:n,showUpgrade:r}),children:[e.jsx("div",{className:yge.cards,children:t.map(c=>e.jsx(_ge,{data:c,isLoading:s},c.usageType))}),e.jsx(xge,{})]})},Sge=({showUpgrade:t})=>{const s=rge();return e.jsx(_x,{data:s,type:"project",showUpgrade:t})},Cge=({showUpgrade:t})=>{const s=oge();return e.jsx(_x,{data:s,type:"project",showUpgrade:t})},kge=()=>{const{isPaidAccount:t,isPricingV3Account:s}=ae(),{isOwnProject:n}=O(),r=m.useMemo(()=>n&&!t,[n,t]);return s?e.jsx(Cge,{showUpgrade:r}):e.jsx(Sge,{showUpgrade:r})},Ige="_topSection_14cul_3",Pge="_container_14cul_10",Tge="_col_14cul_15",yh={topSection:Ige,container:Pge,col:Tge},Nge=()=>{const{project:t}=O(),s=ee("growth_protected_branch_upgrade_modal"),{isChecklistVariant:n,shouldShowChecklist:r}=fR(),{isFreeSubscription:o}=ae(),a=Ve(De.ProtectedBranchUpgrade),i=sx("project"),c=t&&t.provisioner===DA.K8SNeonvm,[l,d]=m.useState(!1),u=s&&a.isModalOpen&&(t==null?void 0:t.id),h=()=>r(o)?e.jsx(xme,{}):e.jsx(aw,{});return e.jsxs(e.Fragment,{children:[l&&e.jsx(Pt,{type:gt.Default,isOpen:l,onRequestClose:()=>{d(!1)}}),u&&e.jsx(mhe,{setShowUpgradeModal:d,onRequestClose:()=>{a.closeModal()}}),i,e.jsx(yme,{}),e.jsxs("div",{className:yh.topSection,children:[e.jsx(Vpe,{}),e.jsx(kge,{})]}),e.jsxs("div",{className:yh.container,"data-qa":"project_dashboard",children:[e.jsxs("div",{className:yh.col,children:[n&&o&&e.jsx(aw,{}),c?e.jsx(Ome,{project:t}):e.jsx(Dme,{})]}),e.jsxs("div",{className:yh.col,children:[h(),e.jsx(Cme,{})]})]})]})},Age="_sections_2o68n_1",Ege="_addedSection_2o68n_7",$ge="_sectionTitle_2o68n_16",Oge="_cardsList_2o68n_24",vh={sections:Age,addedSection:Ege,sectionTitle:$ge,cardsList:Oge},Rge={vercel:aQ,github:yK,outerbase:vQ,datadog:hY,opentelemetry:BY},Bge=()=>{const t=Gb(),s=nm(),n=Yd(),r=Ak();m.useEffect(()=>{wQ()},[]);const{projectId:o}=O();return n.status==="error"?e.jsx("section",{children:e.jsx(is,{title:"Failed to load integrations",subtitle:n.error.message})}):n.status==="pending"?e.jsx(PG,{}):e.jsxs(lR,{children:[e.jsx("div",{className:vh.sections,children:Object.keys(wa).map(a=>{var i;if((i=r[a])!=null&&i.length)return e.jsxs("section",{"data-qa":`${a}-integrations-list`,role:"list","aria-label":wa[a],className:M({[vh.addedSection]:a===ho.Added}),children:[e.jsxs("div",{className:vh.sectionTitle,id:a,children:[e.jsx(z,{level:2,children:wa[a]}),a===ho.Added?e.jsx(A,{icon:"external_link",href:MA,openInNewTab:!0,children:"Read more"}):null]}),e.jsx("div",{className:vh.cardsList,children:r[a].map(c=>{var l;if(a===ho.Added){const d=(l=n.data)==null?void 0:l[c.id],u=d&&"status"in d?Kk(d.status):void 0;return e.jsx(SG,{integration:c,status:u},c.id)}return e.jsx(bG,{integration:c,beta:t[c.id],featured:a===ho.Featured,disabled:c.disabled},c.id)})})]},a)})}),Object.entries(Rge).map(([a,i])=>{var d;const c=a,l=i;return s[c]?null:e.jsx(l,{projectId:o,configuration:(d=n.data)==null?void 0:d[c]},c)})]})};var Kl=(t=>(t.Metrics="metrics",t.Operations="operations",t.ActiveQueries="active-queries",t.QueryHistory="query-history",t))(Kl||{});const Ql={metrics:{label:"Metrics",value:"metrics",to:C.ProjectsItemBranchesItemMonitoringMetrics,event:"monitoring_page_metrics_tab_clicked"},operations:{label:"System operations",value:"operations",to:C.ProjectsItemBranchesItemMonitoringOperations,event:"monitoring_page_operations_tab_clicked"},"active-queries":{label:"Active Queries",value:"active-queries",to:C.ProjectsItemBranchesItemMonitoringActiveQueries,event:"monitoring_page_active_queries_tab_clicked"},"query-history":{label:"Query History",value:"query-history",to:C.ProjectsItemBranchesItemMonitoringQueryHistory,event:"monitoring_page_query_history_tab_clicked"}},Lge=[Ql.metrics,Ql["active-queries"],Ql["query-history"],Ql.operations],Dge=({selected:t})=>{const{projectId:s}=O(),{branch:n}=ut(),{trackUiInteraction:r}=k(),o=Ne();return e.jsx(pn,{options:Lge,value:t,onChange:a=>{const i=Ql[a];r(i.event),n&&o.push(F(i.to,{projectId:s,branchId:n.id}))}})},Fh={title:"Enable Datadog",content:e.jsxs(e.Fragment,{children:["The"," ",e.jsx(A,{openInNewTab:!0,icon:"external_link",href:"https://neon.tech/docs/guides/datadog",children:"Neon DataDog integration"})," ","lets you monitor your database performance, resource utilization, and system health directly from Datadog's observability platform.",e.jsx("br",{}),e.jsx("br",{}),"This add-on is available at an additional cost and can be enabled in your billing settings. You can disable it at any time."]}),cancelButton:"Cancel",enableButton:"Enable in Billing"},Mge="_content_zhjmz_1",Uge={content:Mge},Fge=({onRequestClose:t})=>{const{orgId:s}=Y();return e.jsxs(e.Fragment,{children:[e.jsx(be,{className:Uge.content,children:Fh.content}),e.jsxs(ge,{children:[e.jsx(P,{appearance:"secondary",onClick:t,children:Fh.cancelButton}),e.jsx(P,{as:We,href:I1({orgId:s,section:"addons"}),children:Fh.enableButton})]})]})},qge=({isOpen:t,onRequestClose:s})=>e.jsx(Qe,{title:Fh.title,isOpen:t,width:720,onRequestClose:s,children:e.jsx(Fge,{onRequestClose:s})}),zge={enableAddonButton:"Enable Datadog add-on"},Hge=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(qge,{isOpen:s,onRequestClose:()=>{t("monitoring_page_enabling_datadog_addon_modal_dismissed"),n(!1)}}),e.jsx(P,{icon:"datadog",appearance:"secondary",onClick:()=>{t("monitoring_page_enabling_datadog_addon_modal_shown"),n(!0)},children:zge.enableAddonButton})]})},cw={metricsButton:"Export metrics",upgradeButton:"Upgrade to export metrics"},Vge="_header_16dbf_1",Wge={header:Vge},Gge=()=>{const{project:t}=O(),{trackUiInteraction:s}=k(),[n,r]=m.useState(!1),o=m.useCallback(()=>{s("monitoring_page_upgrade_modal_opened"),r(!0)},[s]),a=m.useCallback(()=>{s("monitoring_page_upgrade_modal_closed"),r(!1)},[s]),{datadog:i}=nm(),{availableAddons:c}=Ip();return t?i?c.add_on_monitoring_integration?e.jsx(Hge,{}):e.jsxs(e.Fragment,{children:[e.jsx(P,{icon:"datadog",appearance:"secondary",size:"s",onClick:o,children:cw.upgradeButton}),e.jsx(Pt,{type:gt.ExportMetrics,isOpen:n,onRequestClose:a})]}):e.jsx(P,{icon:"datadog",appearance:"secondary",as:FA,href:`${F(C.ProjectsItemIntegrations,{projectId:t.id})}#datadog`,children:cw.metricsButton}):null},wh=(t,s)=>{const n=m.memo(r=>{const o=Yl(PI);return e.jsxs(e.Fragment,{children:[e.jsx(eu,{title:"Monitoring",actions:e.jsx(Gge,{}),className:Wge.header}),e.jsx("div",{children:e.jsxs(eS,{defaultRange:TI(o),children:[e.jsx(Dge,{selected:s}),e.jsx(UA,{children:e.jsx(t,{...r})})]})})]})});return n.displayName=`withMonitoringPageLayout(${t.displayName})`,n},IP=({project:t,...s})=>{const{isLoading:n,disabledMessage:r}=qI();return e.jsx(zI,{projects:[t],disabledMessage:r,isLoading:n,...s})},PP=({project:t,isUserProject:s,onProjectTransfer:n})=>{const{trackUiInteraction:r}=k(),o=m.useCallback(()=>{r("projects_list_item_menu_opened")},[r]),{data:a}=Nr(),i=(a==null?void 0:a.length)??0,c=!!(t!=null&&t.org_id&&(a!=null&&a.some(p=>p.id===t.org_id))),d=i>(c?1:0),u=(s||c)&&d,h=m.useMemo(()=>[{items:vt([{icon:"overview",label:"Dashboard",href:F(C.ProjectsItem,{projectId:t.id}),onClick(){r("projects_list_item_menu_dashboard_clicked")},"data-qa":"project-dashboard-link"},{icon:"editor",label:"SQL Editor",href:F(te.ProjectsItemQuery,{projectId:t.id}),onClick(){r("projects_list_item_menu_sql_editor_clicked")},"data-qa":"project-sql-editor-link"},u&&{icon:"connect_with",label:"Transfer project",onClick(){r("projects_list_item_menu_transfer_project_clicked"),n==null||n()},"data-qa":"project-sql-editor-link"},{icon:"settings",label:"Settings",href:F(C.ProjectsItemSettings,{projectId:t.id}),onClick(){r("projects_list_item_menu_settings_clicked")},"data-qa":"project-settings-link"}])}],[t,r,u,n]);return e.jsx(Dt,{sections:h,placement:"bottom right",children:e.jsx(Zt,{"data-qa":"project-actions","aria-label":`Actions with project ${t.name}`,onClick:o})})},Kge=()=>{const t=ee("growth_remove_non_primary_compute_limit"),{isFreeSubscription:s,isPaidSubscription:n,subscriptionType:r}=ae(),{usage:o,isLoading:a,startPeriod:i}=Pc(),c=ub();return{items:m.useMemo(()=>[Ht({isFreeSubscription:s,usageType:"storage",usage:o.storage,allowance:c.storage,converterFn:Os,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"compute",usage:o.compute,allowance:c.compute,converterFn:xo,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),!t&&s&&Ht({isFreeSubscription:s,usageType:"branchCompute",usage:o.nonPrimaryCompute,allowance:c.nonPrimaryCompute,converterFn:xo,showAllowance:!0,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"dataTransfer",usage:o.dataTransfer,allowance:c.dataTransfer,converterFn:Os,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),Ht({isFreeSubscription:s,usageType:"projects",usage:o.projects,allowance:c.projects,showAllowance:!0,isPaidSubscription:n,subscriptionType:r})].filter(Boolean),[s,o.storage,o.compute,o.nonPrimaryCompute,o.dataTransfer,o.projects,c.storage,c.compute,c.nonPrimaryCompute,c.dataTransfer,c.projects,n,r,t]),isLoading:a,startPeriod:Ln(i,ve.Date)}},Qge=({showUpgrade:t})=>{const s=Kge();return e.jsx(_x,{data:s,showUpgrade:t,type:"account"})},Yge={migrateToNeon:"Import database"},TP=()=>{const t=Ve(De.ImportDataAssistant),{isSuspendedAccount:s}=ae();return e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(SP,{onCloseDrawer:()=>t.closeModal()}),e.jsx(P,{onClick:()=>t.openModal(),appearance:"secondary",disabled:s,children:Yge.migrateToNeon})]})},Jge="_root_1yyl5_1",Zge="_addIntegrationButton_1yyl5_7",lw={root:Jge,addIntegrationButton:Zge},Xge={vercel:"vercel",github:"github",datadog:"datadog",opentelemetry:"opentelemetry"},e_e=({projectId:t,integrations:s=[]})=>{const n=Ne(),r=F(C.ProjectsItemIntegrations,{projectId:t}),o=()=>{n.push(r)};return e.jsxs("div",{className:lw.root,children:[s.map(a=>e.jsx(L,{name:Xge[a],size:16},a)),!s.length&&e.jsx(A,{icon:"add_outlined",onClick:o,className:lw.addIntegrationButton,children:"Add"})]})},__={title:"You currently have no projects",description:"Create a project to start building on your application and managing your data efficiently.",createProject:"Create project"},t_e="_root_lau2d_1",s_e="_icon_lau2d_12",n_e="_description_lau2d_16",r_e="_actions_lau2d_21",Sh={root:t_e,icon:s_e,description:n_e,actions:r_e},o_e=()=>e.jsxs("div",{className:Sh.root,"data-qa":"no_projects",children:[e.jsx(L,{name:"project",size:36,className:Sh.icon}),e.jsx(z,{level:3,children:__.title}),e.jsx(T,{appearance:"secondary",size:"l",className:Sh.description,children:__.description}),e.jsxs("div",{className:Sh.actions,children:[e.jsx(mx,{children:__.createProject}),e.jsx(TP,{})]})]}),a_e="_usageContainer_6lgen_1",i_e="_projectNameCell_6lgen_5",c_e="_projectName_6lgen_5",f_={usageContainer:a_e,projectNameCell:i_e,projectName:c_e},Ch={title:"Unable to fetch projects list",titleShared:"Unable to fetch shared projects list",description:"We couldn't fetch your current projects, please refresh to try again.",descriptionShared:"We couldn't fetch your shared projects, please refresh to try again."},Sf=({variant:t})=>e.jsx(Wd,{title:t==="shared"?Ch.titleShared:Ch.title,subtitle:t==="shared"?Ch.descriptionShared:Ch.description,actions:e.jsx(P,{appearance:"primary",onClick:()=>window.location.reload(),size:"s","data-qa":"refresh_page_button",children:"Refresh page"})}),l_e=(t,s)=>t?s?"Projects":`${t.name}'s projects`:"Your projects",Cf=(t,s)=>{const n=(t??[]).map(o=>({id:o.id,project:o})),r=(s??[]).map(o=>({id:o}));return[...n,...r]},d_e=()=>{const t=ee("project_integrations_column"),{trackUiInteraction:s}=k(),{data:n,isFetching:r,unavailableIds:o,error:a}=vs(),{isPricingV3Account:i,isFetching:c}=ae();m.useEffect(()=>{window.location.hash===K_&&(re("Your organization was successfully created."),window.history.replaceState(null,""," "))},[]);const l=m.useMemo(()=>Cf(n,o),[n,o]),{data:d,isLoading:u,unavailableIds:h,error:p}=cb(),g=m.useMemo(()=>Cf(d,h),[d,h]),{org:_,isLoading:x,isVercelOrg:j}=Y(),{data:b,isLoading:f}=kk({enabled:t}),y=r||u||f||x||c,v=Ne(),{getRegionSafe:w}=Fa(),S=m.useMemo(()=>[{key:"name",label:"Name",renderValue:({project:G})=>G?e.jsxs("div",{className:f_.projectNameCell,children:[e.jsx(T,{className:f_.projectName,bold:!0,children:G.name}),G.hipaa_enabled_at!==void 0&&e.jsx(Z,{content:"HIPAA compliant",children:e.jsx(he,{children:"HIPAA"})})]}):e.jsx($,{height:12})},{key:"region_name",label:"Region",renderValue:({project:G})=>{var V;return G?e.jsx(T,{children:(V=w(G.platform_id,G.region_id))==null?void 0:V.name}):e.jsx($,{height:12})}},{key:"created_at",label:"Created at",renderValue:({project:G})=>G?e.jsx(T,{appearance:"secondary",children:le(G.created_at)}):e.jsx($,{height:12})},{key:"synthetic_storage_size",label:"Storage",renderValue:({project:G})=>G?e.jsx(T,{nowrap:!0,bold:!0,children:G.synthetic_storage_size?Gd(G.synthetic_storage_size):"-"}):e.jsx($,{height:12,width:24})},{key:"pg_version",label:"Postgres version",renderValue:({project:G})=>G?e.jsx(T,{children:G.pg_version}):e.jsx($,{height:12,width:24})}],[w]),I=Ve(De.TransferProject),[N,D]=m.useState(),U={key:"actions",label:"",renderValue:({project:G})=>G?e.jsx(PP,{project:G,isUserProject:_===void 0&&!!(n!=null&&n.some(({id:V})=>V===G.id)),onProjectTransfer:()=>{D(G),I.openModal()}}):null,tdAttrs:{style:{width:"62px"}}},E=m.useMemo(()=>t?[{key:"integrations",label:"Integrations",renderValue:({project:G})=>G?e.jsx(e_e,{projectId:G.id,integrations:b==null?void 0:b[G.id]}):null}]:[],[t,b]),K=m.useCallback(({project:G},V)=>{if(!G)return;const Se=F(C.ProjectsItem,{projectId:G.id});if(V.metaKey||V.ctrlKey){s("project_list_project_opened_new_tab"),window.open(qd+Se,"");return}s("project_list_project_opened"),v.push(Se)},[v,s]),J=l_e(_,j),B=!!(l!=null&&l.length),W=!!(g!=null&&g.length),X=B||W;return e.jsxs(e.Fragment,{children:[I.isModalOpen&&N&&e.jsx(Xf,{projectId:N.id,children:e.jsx(IP,{project:N,onRequestClose:()=>{I.closeModal(),s("transfer_project_modal_dismissed")},onSuccess:G=>{I.closeModal(),s("transfer_project_modal_confirmed"),v.push(F(C.OrgProjectsList,{orgId:G}))}})}),e.jsx(Nc,{title:J,actions:X&&e.jsxs(e.Fragment,{children:[e.jsx(mx,{}),e.jsx(TP,{})]})}),!c&&!i&&e.jsx("div",{className:f_.usageContainer,children:e.jsx(Qge,{showUpgrade:B})}),(y||B||!!a)&&e.jsx(Im,{children:a?e.jsx(Sf,{variant:"owned"}):e.jsx(Fn,{isLoading:y,cols:[...S,...E,U],data:y||l===void 0?[]:l,onRowClick:K,keyField:"id",style:{tableLayout:"fixed"}})}),(g&&g.length>0||!!p)&&e.jsxs(e.Fragment,{children:[e.jsx(Im,{children:e.jsx(dR,{children:"Shared with you"})}),e.jsx(Im,{children:p?e.jsx(Sf,{variant:"shared"}):e.jsx(Fn,{isLoading:y,cols:[...S,U],data:y?[]:g,onRowClick:K,style:{tableLayout:"fixed"}})})]}),!X&&!y&&!a&&!p&&e.jsx(o_e,{})]})},xp=[{value:"clerk",label:"Clerk",icon:"clerk_icon",jwksUrlSlug:"clerk",expectedAudienceRequired:!1},{value:"auth0",label:"Auth0",icon:"auth0_icon",jwksUrlSlug:"auth0",expectedAudienceRequired:!1},{value:"aws_cognito",label:"AWS Cognito",icon:"aws_incognito",jwksUrlSlug:"amazonaws",expectedAudienceRequired:!1},{value:"gcp_identity",label:"GCP Cloud Identity",icon:"gcp_identity",jwksUrlSlug:"google",expectedAudienceRequired:!0},{value:"azure_ad",label:"Entra",icon:"azure_ad",jwksUrlSlug:"microsoft",expectedAudienceRequired:!1},{value:"stytch",label:"Stytch",icon:"stytch",jwksUrlSlug:"stytch",expectedAudienceRequired:!1},{value:"descope",label:"Descope",icon:"descope_auth",jwksUrlSlug:"descope",expectedAudienceRequired:!1},{value:"keycloak",label:"Keycloak",icon:"keycloak_icon",jwksUrlSlug:"realms",expectedAudienceRequired:!1},{value:"firebase_auth",label:"Firebase Auth",icon:"firebase",jwksUrlSlug:"firebase",expectedAudienceRequired:!0},{value:"stack",label:"Stack Auth",icon:"stack_auth",jwksUrlSlug:"stack-auth",expectedAudienceRequired:!1},{value:"other",label:"Other",icon:"other",expectedAudienceRequired:!1}];function kf(t){const s=xp.find(n=>n.value===t);return s||xp.find(n=>n.value==="other")}const u_e="_body_mws9h_1",h_e="_helpMessage_mws9h_6",p_e="_providersList_mws9h_10",m_e="_inputContainer_mws9h_17",g_e="_helpLink_mws9h_23",__e="_jwksInput_mws9h_28",f_e="_providerIconUnselected_mws9h_32",b_e="_fieldContainer_mws9h_36",x_e="_jwksInputDarkMode_mws9h_44",In={body:u_e,helpMessage:h_e,providersList:p_e,inputContainer:m_e,helpLink:g_e,jwksInput:__e,providerIconUnselected:f_e,fieldContainer:b_e,jwksInputDarkMode:x_e},j_e="other",dw=2050,y_e=({submitButton:t})=>{const s=nt(),n=vo(),[r,o]=m.useState(!1),{setValue:a}=s,i=m.useMemo(()=>NS(c=>{const l=URL.canParse(c);if(!c.length||!l){a("providerName",""),o(!1);return}const d=xp.find(u=>u.jwksUrlSlug&&c.includes(u.jwksUrlSlug));a("providerName",(d==null?void 0:d.value)??j_e),o((d==null?void 0:d.expectedAudienceRequired)??!1)},300,{leading:!0,trailing:!0}),[a]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:In.inputContainer,children:[e.jsx(R,{className:In.fieldContainer,error:!!s.formState.errors.jwksUrl,label:"JSON Web Key Set (JWKS) URL / Endpoint",children:e.jsx(ne,{className:M(In.jwksInput,{[In.jwksInputDarkMode]:n===cn.Dark}),size:"l",type:"url",placeholder:"https://your.auth.provider/jwks/PROJECT_ID",maxLength:dw,...s.register("jwksUrl",{required:!0,onChange:c=>{i(c.target.value)}})})}),e.jsx(R,{className:In.fieldContainer,label:e.jsxs(e.Fragment,{children:[r?null:"(Optional) ","JWT Audience"," ",e.jsxs(Ot,{children:[e.jsxs("p",{children:["Only JWTs with the ",e.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),e.jsx("br",{}),e.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),error:!!s.formState.errors.expectedAudience,children:e.jsx(ne,{size:"l",type:"text",maxLength:dw,...s.register("expectedAudience",{required:r})})}),t]}),e.jsx(A,{className:In.helpLink,openInNewTab:!0,href:qA,icon:"external_link",iconSize:"s",children:"Where do I get this URL?"})]}),e.jsx("div",{className:In.providersList,children:xp.map(c=>{const l=s.watch("providerName")===c.value;return e.jsx("span",{children:e.jsx(Z,{content:c.label,placement:"top",children:e.jsx("div",{className:M({[In.providerIconUnselected]:!l}),children:e.jsx(L,{name:c.icon,size:32})})})},c.value)})})]})},v_e=({handleCreate:t,isOpen:s,createJwksRequestStatus:n,onRequestClose:r})=>{const o=nt(),{trackUiInteraction:a}=k(),{reset:i}=o,c=m.useMemo(()=>({title:"Add new authentication provider",isOpen:s,maxWidth:700,onRequestClose:()=>{i(),r==null||r(),a("neon_authorize_add_provider_modal_dismissed")}}),[s,r,a,i]);return e.jsxs(ws,{modalProps:c,providerProps:o,onSubmit:t,children:[e.jsxs(be,{className:In.body,children:[e.jsxs(et,{className:In.helpMessage,children:["Enter the URL where your authentication provider's JSON Web Key Set (JWKS) is hosted. This URL allows us to retrieve the public keys needed to verify JSON Web Tokens (JWTs) issued by your provider."," "]}),e.jsx(y_e,{})]}),e.jsx(ge,{children:e.jsx(_e,{disabled:!o.formState.isValid,loading:n==="pending",onClick:()=>{a("neon_authorize_add_provider_modal_submitted")},children:"Set Up"})})]})},w_e="/assets/assets/empty-state-diagram-dark-D13rg5wl.svg",S_e="/assets/assets/empty-state-diagram-light-DCxISfU5.svg",C_e="_emptyStateContainer_128s8_1",k_e="_authProviderRow_128s8_5",I_e="_jwksUrlColumnContent_128s8_11",P_e="_jwksUrlCopyButton_128s8_30",T_e="_actionsColumn_128s8_35",N_e="_headerSection_128s8_39",A_e="_imageContainer_128s8_43",E_e="_emptyStateActions_128s8_57",$_e="_widget_128s8_65",fr={emptyStateContainer:C_e,authProviderRow:k_e,jwksUrlColumnContent:I_e,jwksUrlCopyButton:P_e,actionsColumn:T_e,headerSection:N_e,imageContainer:A_e,emptyStateActions:E_e,widget:$_e},O_e=({jwks:t})=>{const{trackUiInteraction:s}=k(),n=yde(t.project_id),{confirm:r}=Oe(),o=m.useMemo(()=>[{items:[{label:"Remove Provider",async onClick(){s("neon_authorize_remove_provider_shown"),await r({header:"Delete Provider",text:e.jsx(Q,{appearance:"warning",children:"Are you sure you want to remove this provider?"}),confirmButtonText:"Confirm"})?(s("neon_authorize_remove_provider_confirmed"),n.mutate(t.id,{onSuccess:()=>{re("Removed the provider successfully")},onError:()=>{tt("Failed to remove the provider")}})):s("neon_authorize_remove_provider_dismissed")}}]}],[t,n,r,s]);return e.jsx(Dt,{sections:o,placement:"bottom",children:e.jsx(Zt,{"aria-label":"Provider actions"})})},R_e=({handleOpenCreateForm:t})=>{const n=vo()===cn.Dark?w_e:S_e;return e.jsxs("div",{className:fr.emptyStateContainer,children:[e.jsx("div",{className:fr.headerSection,children:e.jsxs(et,{children:["Add your RLS auth provider and secure your database connections with JWT validation from your preferred auth provider."," ",e.jsx(A,{openInNewTab:!0,href:P1,icon:"external_link",children:"Learn more"})]})}),e.jsx("div",{className:fr.imageContainer,children:e.jsx("img",{src:n,alt:"Neon RLS Diagram"})}),e.jsx("div",{className:fr.emptyStateActions,children:e.jsx(P,{onClick:t,size:"l",children:"Set up authentication provider"})})]})},B_e=({jwks:t,handleGetStartedClick:s})=>{const{trackUiInteraction:n}=k();return[...t.map(a=>({...a,...kf(a.provider_name)}))].sort((a,i)=>{const c=new Date(a.created_at);return new Date(i.created_at).getTime()-c.getTime()}).map(a=>e.jsx(Pr,{className:fr.widget,title:e.jsx(L,{name:a.icon,size:30,title:a.label}),links:e.jsxs("div",{className:fr.actionsColumn,children:[e.jsx(P,{appearance:"secondary","data-qa":"endpoint_item_connect_button",onClick:()=>{n("neon_authorize_get_started_clicked"),s(a.provider_name)},children:"Get Started"}),e.jsx(O_e,{jwks:a})]}),footer:e.jsx(bt,{label:"Created on",children:le(a.created_at)}),children:e.jsxs("div",{className:fr.authProviderRow,children:[e.jsxs("div",{className:fr.jwksUrlColumnContent,children:[e.jsx(bt,{label:"JKWS URL",title:a.jwks_url,children:a.jwks_url}),e.jsx(bo,{onCopy:()=>n("neon_authorize_copy_jwks_url_clicked"),className:fr.jwksUrlCopyButton,text:a.jwks_url})]}),e.jsxs(bt,{label:e.jsxs(e.Fragment,{children:["Roles"," ",e.jsx(Ot,{children:"Neon RLS will only authenticate your requests if you use one of the roles below."})]}),children:[e.jsx(ke,{children:Rn}),e.jsx(ke,{children:cd})]}),a.jwt_audience&&e.jsx(bt,{label:e.jsxs(e.Fragment,{children:["JWT Audience"," ",e.jsxs(Ot,{children:[e.jsxs("p",{children:["Only JWTs with the ",e.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),e.jsx("br",{}),e.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),"aria-label":"Actions",children:a.jwt_audience})]})},a.id))},L_e=()=>{const{trackUiInteraction:t}=k(),[s,n]=m.useState(void 0),r=zn({mode:"onSubmit"}),{reset:o}=r,{projectId:a}=O(),{data:i,status:c}=uP(a),l=jde(a),{fetch:d}=Ua(),u=(i==null?void 0:i.jwks.length)===0,h=m.useCallback(x=>{l.mutate(x,{onSuccess:()=>{if(u){const j=kf(x.providerName);n({modal:"use-authorize-instructions-modal",authorizationProviderOption:j,reason:"success"})}else n(void 0),re("Authentication provider configured");o(),d()},onError:j=>{var f,y;const b="Failed to set up authentication provider";bc(j)&&((y=(f=j.response)==null?void 0:f.data)!=null&&y.message)?tt(`${b}: ${j.response.data.message}`):tt(b)}})},[l,u,d,o]);let p,g;switch(c){case"error":p=e.jsx("div",{children:"Failed to load JWKS — please refresh or contact us if this persists."});break;case"pending":p=e.jsx($,{height:12,width:80});break;case"success":u?p=e.jsx(R_e,{handleOpenCreateForm:()=>{t("neon_authorize_empty_state_add_provider_clicked"),n({modal:"add-jwks-modal"})}}):(g=e.jsx(P,{onClick:()=>{t("neon_authorize_add_provider_modal_shown"),n({modal:"add-jwks-modal"})},children:"Add Provider"}),p=e.jsx(B_e,{handleGetStartedClick:x=>n({modal:"use-authorize-instructions-modal",authorizationProviderOption:kf(x),reason:"info"}),jwks:i.jwks}));break}let _=null;return(s==null?void 0:s.modal)==="add-jwks-modal"&&(_=e.jsx(v_e,{isOpen:!0,createJwksRequestStatus:l.status,handleCreate:h,onRequestClose:()=>n(void 0)})),(s==null?void 0:s.modal)==="use-authorize-instructions-modal"&&(_=e.jsx(JZ,{authorizationProvider:s.authorizationProviderOption,onCloseDrawer:()=>n(void 0),openReason:s.reason})),e.jsxs(Ae,{id:"rls",children:[e.jsx(fe,{actions:g,children:"RLS (Row Level Security)"}),e.jsxs(us,{...r,children:[p,_]})]})},D_e=()=>e.jsx(L_e,{}),M_e="_computeSettingsList_17kw2_1",U_e={computeSettingsList:M_e},F_e=()=>{const{trackUiInteraction:t}=k(),{project:s,isLoading:n}=O(),r=Mf(s),{isVercelOrg:o,isLoading:a}=Y(),i=Z1(s),{limits:c}=Mt(),l=c==null?void 0:c.max_autoscaling_cu,[d,u]=m.useState(!1),h=m.useCallback(()=>u(!0),[]),p=m.useCallback(()=>{u(!1)},[]),g=CT(),{billingUrl:_,isLoading:x}=wo(),j=i.suspendTimeoutSeconds!==-1?qb(i.suspendTimeoutSeconds):"disabled";return s?e.jsxs(e.Fragment,{children:[e.jsx(OR,{isOpen:d,onRequestClose:p,formProps:{project:s,onSuccess:p}}),e.jsx(Ae,{id:"compute","aria-labelledby":g,children:e.jsxs(Pe,{children:[e.jsx(fe,{id:g,children:"Compute defaults"}),e.jsxs("div",{children:[e.jsx("p",{children:"These defaults will be used as the initial settings for any primary or read replica computes you create. Modifying these defaults does not alter the settings of any existing computes."}),e.jsxs("ul",{className:U_e.computeSettingsList,children:[e.jsxs("li",{children:[e.jsx("b",{children:"Compute size: "}),e.jsx(CP,{project:s})]}),e.jsxs("li",{children:[e.jsx("b",{children:"Scale to zero: "}),j]})]}),r&&!o&&e.jsxs("span",{children:[e.jsx(A,{href:_,disabled:x,onClick:()=>{t("project_settings_compute_upgrade_to_pro_clicked")},children:"Upgrade"}),e.jsx("span",{children:" to control compute size and scale to zero"})]})]}),(l??0)>.25&&e.jsx(Ss,{children:e.jsx(P,{disabled:n||a,onClick:h,"data-qa":"change_compute_setting_button",size:"s",children:"Modify defaults"})})]})})]}):e.jsx(pe,{})},NP=({children:t="contact support"})=>{const{isModalOpen:s,openModal:n,closeModal:r}=Ve(De.Support),{trackUiInteraction:o}=k();return e.jsxs(e.Fragment,{children:[e.jsx(So,{onRequestClose:()=>{o("support_form_dismissed"),r()},isOpen:s}),e.jsx(A,{onClick:n,children:t})]})},ki={deletionAlert:t=>e.jsxs(e.Fragment,{children:["Permanently delete project ",e.jsx("b",{children:t}),". This action is not reversible. Proceed with caution."]}),sharedProjectAlert:t=>{var s;return e.jsxs(e.Fragment,{children:["Only the"," ",t.org_id?"organization admins":`project owner (${((s=t.owner)==null?void 0:s.email)??""})`," ","can delete the project."]})},deleteButton:"Delete project",protectedBranchesAlert:"You can't delete this project because it has protected branches. Unprotect all branches first, then try again.",vercelOrgAlert:"To delete this project, use the Neon Postgres integration in Vercel.",hipaaAlert:e.jsxs(e.Fragment,{children:["To delete a HIPAA-enabled project, please ",e.jsx(NP,{}),"."]})},q_e=()=>{var b;const{projectId:t,project:s,isOwnProject:n}=O(),{isOrgAdmin:r,isLoading:o}=wt(),{branches:a,isLoading:i}=Ye(),{isVercelOrg:c}=Y(),{confirm:l}=Oe(),{trackUiInteraction:d}=k(),u=Ne(),{mutate:h,result:p}=zA(),g=async()=>{d("project_settings_delete_project_clicked");const f=(s==null?void 0:s.name)??"unknown";await l({header:"Do you want to delete this project?",confirmButtonText:"Delete",appearance:"error",text:e.jsxs(Q,{appearance:"error",children:["This action cannot be undone. This will permanently delete the project"," ",e.jsx("code",{children:f}),". Proceed with caution."]}),inputs:{default:{label:e.jsxs("span",{children:['To confirm, type "',e.jsx("b",{children:f}),'" in the box below.']}),expectedValue:f}}})&&h(t).then(()=>{Te(e.jsx(Fe,{children:e.jsxs(e.Fragment,{children:["Project ",e.jsx("b",{children:f})," was successfully deleted"]})})),s!=null&&s.org_id?u.push(F(C.OrgProjectsList,{orgId:s.org_id})):u.push(C.ProjectsList)},H)},_=m.useMemo(()=>a.some(f=>f.protected),[a]),x=!!((b=s==null?void 0:s.settings)!=null&&b.hipaa),j=!c&&(n||r);return!s||i||o?e.jsx(pe,{}):e.jsx(Ae,{id:"delete",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:"Delete project"}),j?e.jsxs(e.Fragment,{children:[e.jsx(Q,{appearance:"error",children:_?ki.protectedBranchesAlert:x?ki.hipaaAlert:ki.deletionAlert(s.name)}),e.jsx(Ss,{children:e.jsx(P,{"data-qa":"delete-project-button",onClick:g,disabled:_||x,loading:p.isLoading,appearance:"error",size:"s",children:ki.deleteButton})})]}):e.jsx(e.Fragment,{children:c?e.jsx(Q,{appearance:"info",children:ki.vercelOrgAlert}):e.jsx(Q,{children:ki.sharedProjectAlert(s)})})]})})},$l={header:"General",projectNameLabel:"Project name",projectIdLabel:"Project ID",success:"Project updated successfully",submitButton:"Save"},ea={label:"HIPAA compliance",enabledLabel:t=>`Enabled on ${le(t,ve.DateFull)}`,notAllowedLabel:e.jsxs(e.Fragment,{children:[e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/contact-sales",children:"Add HIPAA to your Organization's plan"})," ","to enable it for your projects."]}),tooltip:e.jsxs(e.Fragment,{children:[e.jsx(NP,{children:"Contact support"})," to disable HIPAA compliance for this project."]}),confirmHeader:"Confirm HIPAA",confirmText:"Are you sure you want to enable HIPAA for this project?",hipaaEnabledSuccess:t=>`HIPAA has been enabled for project ${t}`},z_e="_switchWrapper_1cwta_1",H_e={switchWrapper:z_e},V_e=()=>{const{confirm:t}=Oe(),s=L1("allow_hipaa_projects"),n=nt(),{field:r}=Op({name:"hipaa",control:n.control}),o=r.onChange,{isLoading:a,project:i}=O(),c=Co(),l=m.useCallback(async u=>{if(!(!u||!await t({header:ea.confirmHeader,text:ea.confirmText}))){o(u);try{await c({projectId:i.id,data:{settings:{hipaa:!0}}}),re(ea.hipaaEnabledSuccess(i.name))}catch(p){H(p),o(!1)}}},[t,o,c,i]),{isPricingV3Account:d}=ae();return a||!i||s===void 0||d&&!s?null:e.jsx(Z,{content:e.jsx(T,{children:ea.tooltip}),disabled:!r.value,children:e.jsx("div",{className:H_e.switchWrapper,children:e.jsx(hn,{isDisabled:!s||r.value,isSelected:r.value,onChange:l,children:e.jsxs("div",{children:[e.jsx(T,{children:ea.label}),e.jsx(T,{appearance:"secondary",children:r.value&&i.hipaa_enabled_at!==void 0?ea.enabledLabel(i.hipaa_enabled_at):!d&&!s&&ea.notAllowedLabel})]})})})})},uw=64,W_e=()=>{var l;const{isLoading:t,project:s,projectId:n}=O(),{trackUiInteraction:r}=k(),o=m.useCallback(()=>{r("project_settings_project_id_copied")},[r]),a=xe({defaultValues:{name:s==null?void 0:s.name,hipaa:(s==null?void 0:s.hipaa_enabled_at)!==void 0}}),i=Co(),c=d=>(r("project_settings_general_page_save"),i({projectId:n,data:d}).then(()=>{re($l.success)}).catch(H));return t?e.jsx(pe,{}):s?e.jsx(Ae,{id:"general",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:$l.header}),e.jsxs(It,{providerProps:a,onSubmit:c,gaps:!0,children:[e.jsxs(Sd,{children:[e.jsx(R,{id:"name_field",error:(l=a.formState.errors.name)==null?void 0:l.message,label:$l.projectNameLabel,children:e.jsx(ne,{...a.register("name",{maxLength:{value:uw,message:`Name should be less than ${uw} characters`}})})}),e.jsx(R,{label:$l.projectIdLabel,children:e.jsx(Un,{"data-qa":"project-id",copy:{onCopy:o},children:n})})]}),e.jsx(V_e,{}),e.jsx("div",{children:e.jsx(_e,{children:$l.submitButton})})]})]})}):null},G_e="_checkboxLabel_jt7k6_1",K_e={checkboxLabel:G_e},Q_e=({control:t})=>e.jsx(me,{name:"protected_branches_only",control:t,render:({field:s})=>e.jsx(R,{id:"branch_selector","aria-label":"Branch access",children:e.jsxs(Pe,{children:[e.jsx(fe,{level:4,size:"h5",children:"Branch access"}),e.jsxs("p",{children:["Restrict IP access to protected branches only while allowing development teams full access to other branches. Be sure to set a branch as protected before enabling this option. See"," ",e.jsx(A,{href:Rp,openInNewTab:!0,children:"Protected branches"})," ","for more information."]}),e.jsx(Ir,{id:"branch_selector",disabled:s.disabled,ref:s.ref,checked:s.value===!0,labelClassName:K_e.checkboxLabel,onChange:n=>s.onChange(n.target.checked),children:"Restrict IP access to protected branches only"})]})})}),Y_e="_container_18ebk_1",J_e="_header_18ebk_6",hw={container:Y_e,header:J_e},Z_e=t=>{if(t)return(qh(t)?t:[t]).filter(Boolean)[0].message},kh={toModel:t=>t.split(",").map(s=>s.trim()),toPresentation:t=>t.join(", ")},X_e=({field:t,fieldState:s,headerAction:n,validate:r})=>{const[o,a]=m.useState(kh.toPresentation(t.value??[]));return m.useEffect(()=>{US(kh.toModel(o),t.value)||a(kh.toPresentation(t.value??[]))},[t.value,o]),e.jsx(R,{id:"ip_addresses",className:hw.container,label:e.jsxs("span",{className:hw.header,children:["Allowed IP addresses and ranges ",n]}),description:"Separate multiple entries with commas.",error:Z_e(s.error),children:e.jsx(La,{placeholder:"e.g., 192.0.2.1, 198.51.100.20-198.51.100.50, 203.0.113.0/24, 2001:DB8:5432::/48",ref:t.ref,rows:3,disabled:t.disabled,value:o,onChange:i=>{a(i.target.value),t.onChange(kh.toModel(i.target.value)),r()}})})},efe=({control:t,headerAction:s,validate:n})=>e.jsx(me,{control:t,name:"ips",render:({field:r,fieldState:o})=>e.jsx(X_e,{field:r,fieldState:o,validate:n,headerAction:s})}),pw="[a-fA-F\\d:]",go=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${pw})|(?<=${pw})(?=\\s|$))`:"",rn="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",xt="[a-fA-F\\d]{1,4}",bm=`
(?:
(?:${xt}:){7}(?:${xt}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${xt}:){6}(?:${rn}|:${xt}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${xt}:){5}(?::${rn}|(?::${xt}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${xt}:){4}(?:(?::${xt}){0,1}:${rn}|(?::${xt}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${xt}:){3}(?:(?::${xt}){0,2}:${rn}|(?::${xt}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${xt}:){2}(?:(?::${xt}){0,3}:${rn}|(?::${xt}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${xt}:){1}(?:(?::${xt}){0,4}:${rn}|(?::${xt}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${xt}){0,5}:${rn}|(?::${xt}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),tfe=new RegExp(`(?:^${rn}$)|(?:^${bm}$)`),sfe=new RegExp(`^${rn}$`),nfe=new RegExp(`^${bm}$`),xm=t=>t&&t.exact?tfe:new RegExp(`(?:${go(t)}${rn}${go(t)})|(?:${go(t)}${bm}${go(t)})`,"g");xm.v4=t=>t&&t.exact?sfe:new RegExp(`${go(t)}${rn}${go(t)}`,"g");xm.v6=t=>t&&t.exact?nfe:new RegExp(`${go(t)}${bm}${go(t)}`,"g");const AP={exact:!1},EP=`${xm.v4().source}\\/(3[0-2]|[12]?[0-9])`,$P=`${xm.v6().source}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,rfe=new RegExp(`^${EP}$`),ofe=new RegExp(`^${$P}$`),afe=({exact:t}=AP)=>t?rfe:new RegExp(EP,"g"),ife=({exact:t}=AP)=>t?ofe:new RegExp($P,"g"),OP=afe({exact:!0}),RP=ife({exact:!0}),fx=t=>OP.test(t)?4:RP.test(t)?6:0;fx.v4=t=>OP.test(t);fx.v6=t=>RP.test(t);const cfe=dt({errorMap:(t,s)=>({message:`Invalid IP address: '${s.data}'`})}).trim().superRefine((t,s)=>{try{uc(t)}catch{s.addIssue({code:Li.custom,message:`Invalid IP address: '${t}'`})}}),lfe=jS(t=>fx(t)!==0,t=>({message:`Invalid CIDR format: '${t}'`})),dfe=dt().superRefine((t,s)=>{const n=t.split("-").map(r=>r.trim());if(n.length!==2){s.addIssue({code:Li.custom,message:`IP range must be separated by single '-': '${t}'`});return}try{const[r,o]=n.map(a=>uc(a));if(r.version!==o.version){s.addIssue({code:Li.custom,message:`IPs in range must have same version: '${t}'`});return}r.compare(o)===1&&s.addIssue({code:Li.custom,message:`The start part of IP range should be lower than end part: '${t}'`})}catch{s.addIssue({code:Li.custom,message:`Invalid IP address range: '${t}'`})}}),mw=Rt({protected_branches_only:Cd().optional(),ips:va(dt()).or(vS()).superRefine((t,s)=>(t==null||t.map(n=>{if(n.includes("/"))return lfe.safeParse(n);if(n.includes("-"))return dfe.safeParse(n);if(n.trim().length>0)return cfe.safeParse(n)}).forEach((n,r)=>{n&&!n.success&&n.error.errors.forEach(o=>s.addIssue({...o,path:[r]}))}),t))}),ufe=(t,s,{disabled:n}={})=>{const{trackUiInteraction:r}=k(),{confirm:o}=Oe(),a=Co(),{control:i,handleSubmit:c,formState:l,reset:d,trigger:u}=xe({resolver:Vd(mw),defaultValues:{ips:(s==null?void 0:s.ips)??[],protected_branches_only:(s==null?void 0:s.protected_branches_only)??!0},disabled:n});return{control:i,handleSubmit:c(async({ips:p,protected_branches_only:g})=>{r("project_settings_ip_allow_form_submit_clicked");try{const _=mw.parse({ips:p==null?void 0:p.filter(Boolean),protected_branches_only:g});if(ZB(_.ips)&&_.ips!==(s==null?void 0:s.ips)){if(!await o({header:"Edit IP Allow list",text:e.jsx(Q,{appearance:"warning",children:"Removing all IP addresses from the allowlist will permit database connection attempts from any IP address. However, any database connection still requires authentication."}),confirmButtonText:"Confirm"})){r("project_settings_ip_allow_form_submit_declined"),d(s,{keepDefaultValues:!1});return}r("project_settings_ip_allow_form_submit_confirmed")}await a({projectId:t,data:{settings:{allowed_ips:_}}}),Te(e.jsx(Fe,{children:"IP Allow updated!"}))}catch(_){Cp(_)}}),formState:l,validate:u}},hfe=({project:t,disabled:s})=>{var c;const{control:n,handleSubmit:r,formState:o,validate:a}=ufe(t.id,(c=t.settings)==null?void 0:c.allowed_ips,{disabled:s}),i=o.isValid;return e.jsx(e.Fragment,{children:e.jsx(Lt,{onSubmit:r,children:e.jsxs(Pe,{children:[e.jsx(efe,{control:n,validate:a}),e.jsx(Q_e,{control:n}),e.jsx(P,{type:"submit",size:"s","data-qa":"ip_allow_form_submit",disabled:s||!i,loading:o.isSubmitting,children:o.isSubmitting?"Saving changes...":"Save changes"})]})})})},Bi={title:"IP Allow",description:t=>e.jsxs(e.Fragment,{children:["Control database access in this project by adding allowed IP addresses. Enter individual IP addresses, define ranges with a dash, or use"," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/reference/glossary#cidr-notation",icon:"external_link",onClick:t,children:"CIDR notation"})," ","for more flexibility."]}),learnMore:"Learn more",upgradeRequired:t=>e.jsxs(e.Fragment,{children:["Limit database access to trusted IP addresses."," ",e.jsx(A,{"data-qa":"upgrade_button",onClick:t,children:"Upgrade your plan"})," ","to enable this feature."]}),addonEnableRequired:t=>`Limit database access to trusted IP addresses for ${lt(t)} per month.`,addonEnableCallToAction:"Enable in Billing"},pfe=({onUpgradeClick:t,project:s,isIPAllowUnavailable:n})=>{const{trackUiInteraction:r}=k(),{orgId:o}=Y(),{availableAddons:a}=Ip(),{isLoading:i}=O();if(n){const c=a.add_on_ip_allow;if(c){const l=o?F(C.OrgBilling,{orgId:o}):C.UserBilling,d=c.price,u=d?Bi.addonEnableRequired(d):"";return e.jsxs("div",{children:[u," ",e.jsx(A,{href:l,children:Bi.addonEnableCallToAction})]})}return e.jsx("div",{children:Bi.upgradeRequired(t)})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[Bi.description(()=>{r("project_settings_ip_allow_learn_more_clicked")})," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/manage/projects#configure-ip-allow",icon:"external_link",onClick:()=>{r("project_settings_ip_allow_learn_more_clicked")},children:Bi.learnMore})]}),e.jsx(hfe,{project:s,disabled:i})]})},mfe=({project:t})=>{const{trackUiInteraction:s}=k(),{isLoading:n,limits:r}=Mt(),o=!(r!=null&&r.max_allowed_ips),[a,i]=m.useState(!1),c=()=>{s("project_settings_ip_allow_upgrade_to_pro_clicked"),i(!0)};return n?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.IpAllowRules,isOpen:a,onRequestClose:()=>i(!1)}),e.jsxs(Pe,{children:[e.jsx(fe,{level:3,children:Bi.title}),e.jsx(pfe,{onUpgradeClick:c,isIPAllowUnavailable:o,project:t})]})]})},Cn={title:"Private networking",description:"Securely connect your apps to Neon's infrastructure over a protected internal network using AWS PrivateLink.",learnMore:"Learn more",orgSettingsLink:"Configure in organization settings",suffix:{nonOrg:"Only available on select plans for the organization accounts.",orgCollaborator:"Ask organization admin to configure.",userCollaborator:"Ask the project owner to configure."},convertButton:"Create organization"},gfe="_pageHeader_17yw7_1",_fe={pageHeader:gfe},ffe=({project:t})=>{const{orgId:s}=Y(),{isOwnProject:n}=O(),[r,o]=m.useState(!1);return t?s?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[Cn.description," ",e.jsx(A,{href:Yh,icon:"external_link",openInNewTab:!0,children:Cn.learnMore})]}),e.jsx(P,{appearance:"secondary",as:We,href:F(C.OrgSettings,{orgId:s}),children:Cn.orgSettingsLink})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[Cn.description," ",n?Cn.suffix.nonOrg:t.org_id?Cn.suffix.orgCollaborator:Cn.suffix.userCollaborator," ",e.jsx(A,{href:Yh,icon:"external_link",openInNewTab:!0,children:Cn.learnMore})]}),n&&e.jsxs(e.Fragment,{children:[r&&e.jsx(Tb,{onRequestClose:()=>o(!1)}),e.jsx(P,{appearance:"secondary",size:"s",onClick:()=>o(!0),children:Cn.convertButton})]})]}):null},bfe=({project:t})=>e.jsxs(Pe,{children:[e.jsx(fe,{level:3,titleClassName:_fe.pageHeader,children:Cn.title}),e.jsx(ffe,{project:t})]}),xfe={title:"Network security"},jfe=()=>{const{project:t}=O(),{isLoading:s}=Mt();return!t||s?e.jsx(pe,{}):e.jsxs(Ae,{id:"network-security",children:[e.jsx(fe,{children:xfe.title}),e.jsx(mfe,{project:t}),e.jsx(bfe,{project:t})]})},Qr={header:"Logical Replication",logicalReplicationDescription:"Logical replication lets you replicate data changes from Neon to external data services and platforms.",logicalReplicationWarning:e.jsxs(e.Fragment,{children:["Enabling logical replication:",e.jsxs("ul",{children:[e.jsx("li",{children:"Restarts all computes in your Neon project, dropping any active connections"}),e.jsxs("li",{children:["Changes your Postgres ",e.jsx(ke,{children:"wal_level"})," setting to"," ",e.jsx(ke,{children:"logical"})]}),e.jsx("li",{children:"Can not be turned off once enabled"})]})]}),nextStepsTitle:"Next steps",nextSteps:e.jsxs("p",{children:["After enabling logical replication, the next steps are creating publications in Neon and configuring subscribers. For detailed instructions, please refer to our"," ",e.jsx(A,{href:"https://neon.tech/docs/guides/logical-replication-guide",openInNewTab:!0,icon:"external_link",children:"documentation"})]}),logicalReplicationEnabled:"Logical replication is enabled for this project.",enableLogicalReplicationButton:"Enable"},yfe=()=>{var c;const{confirm:t}=Oe(),{trackUiInteraction:s}=k(),{project:n}=O(),r=Co(),o=(c=n==null?void 0:n.settings)==null?void 0:c.enable_logical_replication,a=m.useCallback(async()=>{if(!n)return;if(s("logical_replication_enable_clicked"),!await t({header:"Enable logical replication",text:e.jsx(Q,{appearance:"warning",children:Qr.logicalReplicationWarning}),confirmButtonText:"Enable"})){s("logical_replication_enable_cancelled");return}s("logical_replication_enable_confirmed"),r({projectId:n.id,data:{settings:{enable_logical_replication:!0}}}).catch(d=>Cp(d))},[n,s,r,t]),i=Jn(m.useMemo(()=>n?{shared:{projects:[n.id]}}:null,[n]));return n?e.jsxs(Ae,{id:"out-replication",children:[e.jsx(Pe,{children:e.jsx(fe,{children:Qr.header})}),!!o&&e.jsx(Q,{appearance:"success",children:Qr.logicalReplicationEnabled}),e.jsx("p",{children:Qr.logicalReplicationDescription}),!o&&e.jsx(Q,{appearance:"warning",children:Qr.logicalReplicationWarning}),o?e.jsxs(e.Fragment,{children:[e.jsx(z,{level:3,size:"h4",children:Qr.nextStepsTitle}),Qr.nextSteps]}):e.jsx(Er,{lockedMessage:i,children:e.jsx(P,{appearance:"primary",size:"s",onClick:a,disabled:!!i,children:Qr.enableLogicalReplicationButton})})]}):null},bx=({projectId:t})=>["listProjectPermissions",t],vfe=({projectId:t})=>st({queryKey:bx({projectId:t}),queryFn:async()=>(await q.listProjectPermissions(t)).data,enabled:!!t,retry:0}),wfe=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:["revokePermissionFromProject",t],mutationFn:async({permissionId:a})=>(await q.revokePermissionFromProject(t,a)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:bx({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},Sfe=({projectId:t},{onSuccess:s,onError:n,...r}={})=>{const o=ie();return de({mutationKey:["grantPermissionToProject",t],mutationFn:async a=>(await q.grantPermissionToProject(t,a)).data,onSuccess:(...a)=>{o.invalidateQueries({queryKey:bx({projectId:t})}),s==null||s(...a)},onError:(a,...i)=>{H(a),n==null||n(a,...i)},...r})},Ii={title:"Invite collaborators",emailLabel:"Email address",emailPlaceholder:"name@example.com",emailFooter:"Comma separated emails",submitButton:"Invite",invitationSuccess:(t,s)=>`Collaborator ${t} received access to project ${s}`},Cfe="_emailInput_1qx2h_1",kfe={emailInput:Cfe},Ife=({project:t,onSubmit:s,onRequestClose:n})=>{var i;const r=xe({mode:"onSubmit",defaultValues:{collaborator_emails:""}}),o=Sfe({projectId:t.id},{onSuccess:c=>re(Ii.invitationSuccess(c.granted_to_email,t.name))}),a=c=>{mp(c.collaborator_emails).forEach(l=>o.mutate({email:l})),s()};return e.jsx(e.Fragment,{children:e.jsxs(ws,{modalProps:{title:Ii.title,isOpen:!0,onRequestClose:n,width:550},providerProps:r,onSubmit:a,children:[e.jsx(be,{gaps:!0,children:e.jsxs(R,{label:Ii.emailLabel,error:(i=r.formState.errors.collaborator_emails)==null?void 0:i.message,children:[e.jsx(ne,{autoFocus:!0,placeholder:Ii.emailPlaceholder,className:kfe.emailInput,...r.register("collaborator_emails",{required:{value:!0,message:"This field is required"},validate:c=>mp(c)!==null||"Please enter a valid email address"})}),e.jsx(T,{appearance:"secondary",style:{marginTop:4},children:Ii.emailFooter})]})}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{children:Ii.submitButton})]})]})})},Pfe=({project:t,...s})=>{const{trackUiInteraction:n}=k(),r=Ve(De.InviteProjectCollaborators);return e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(Ife,{project:t,onSubmit:()=>{n("project_settings_sharing_invite_modal_submitted"),r.closeModal()},onRequestClose:()=>{n("project_settings_sharing_invite_modal_cancelled"),r.closeModal()}}),e.jsx(P,{size:"s",onClick:()=>{n("project_settings_sharing_invite_clicked"),r.openModal()},...s,children:"Invite"})]})},qi={title:"Collaborators",description:t=>e.jsx(e.Fragment,{children:t?e.jsxs(e.Fragment,{children:["You have been added to this project. Other collaborators are listed below. Collaborators have limited permissions.",e.jsx(Ot,{children:"Collaborators can manage all database resources, but they can't delete the project."})]}):"Invite external collaborators to join this project. Existing collaborators are listed below."}),emailColumnLabel:"Email",revokeLabel:"Revoke project sharing",revokeSuccess:(t,s)=>`Removed collaborator ${t} access to project ${s}`,footnote:(t,s,n)=>e.jsxs("p",{children:["* This project is owned by ",e.jsx("strong",{children:t}),"."," ",s!==void 0&&e.jsxs(e.Fragment,{children:[n?"Manage member permissions on":"View members from the"," ",e.jsx(A,{href:F(C.OrgPeople,{orgId:s.id}),children:"People page"}),"."]})]})},Tfe=({permissionId:t,project:s,email:n})=>{const{trackUiInteraction:r}=k(),o=wfe({projectId:s.id},{onSuccess:()=>re(qi.revokeSuccess(n,s.name))}),a=m.useMemo(()=>[{items:[{label:qi.revokeLabel,onClick(){r("project_settings_sharing_revoke_clicked"),o.mutate({permissionId:t})}}]}],[r,o,t]);return e.jsx(Dt,{sections:a,placement:"bottom right",children:e.jsx(Zt,{"aria-label":`Actions for collaborator ${n}`})})},Nfe=()=>{var p,g;const t=Ne(),s=Ls(),{project:n,isLoading:r,projectId:o}=O(),{org:a,isLoading:i}=Y(),{isOrgAdmin:c}=wt(),{data:l}=cb(),d=!!(l!=null&&l.some(({id:_})=>_===(n==null?void 0:n.id))),u=vfe({projectId:o});m.useEffect(()=>{bc(u.error)&&u.error.status===404&&(s(ib.util.invalidateTags(["Projects"])),t.push(C.ProjectsList))},[u.error,t,s]);const h=m.useMemo(()=>[{key:"user_email",label:qi.emailColumnLabel,renderValue:({granted_to_email:_})=>e.jsx(T,{children:_})},_S(({id:_,granted_to_email:x})=>e.jsx(Tfe,{project:n,permissionId:_,email:x}))],[n]);return!n||i||r?null:e.jsxs(Ae,{id:"sharing",children:[e.jsxs(Pe,{children:[e.jsx(fe,{actions:e.jsx(Pfe,{project:n}),children:qi.title}),e.jsx(T,{appearance:"secondary",children:qi.description(d)})]}),e.jsx(Fn,{cols:h,data:(p=u.data)==null?void 0:p.project_permissions,isLoading:u.isLoading,dataPlaceholderProps:{title:"You haven't shared your project with anyone yet"}}),(d||a!==void 0)&&qi.footnote(((g=n.owner)==null?void 0:g.name)??"",a,c)]})},Afe="_root_14q3m_1",Efe="_value_14q3m_6",$fe="_unit_14q3m_10",b_={root:Afe,value:Efe,unit:$fe},Ofe=Object.values(jr).filter(t=>t!==jr.Seconds&&t!==jr.Minutes).map(t=>({value:t,label:ec(t)})),Rfe=({savedValue:t,onChangeValue:s,onEmptyValue:n})=>{const[r,o]=m.useState(""),[a,i]=m.useState();m.useEffect(()=>{if(a)if(r){const d=Number(r)*On[a.value];s(d)}else n("Provide a correct value")},[r,a,s,n]),m.useEffect(()=>{if(t===void 0)return;const{highestValue:d,highestUnit:u}=Np(t);o(String(d)),i({value:u,label:ec(u)})},[t]);const c=d=>{o(d.target.value)},l=d=>{i(d)};return e.jsx(e.Fragment,{children:a&&e.jsxs("div",{className:b_.root,children:[e.jsx(ne,{type:"number",value:r,onChange:c,className:b_.value}),e.jsx(Pa,{value:a,options:Ofe,onChange:d=>l(d??void 0),className:b_.unit})]})})},If=[{value:0,unit:qs.Hours},{value:1,unit:qs.Hours},{value:2,unit:qs.Hours},{value:6,unit:qs.Hours},{value:12,unit:qs.Hours},{value:1,unit:qs.Days},{value:2,unit:qs.Days},{value:7,unit:qs.Days},{value:14,unit:qs.Days},{value:21,unit:qs.Days},{value:30,unit:qs.Days}],Bfe=({savedValue:t,defaultValue:s,maxValue:n,onChangePreset:r})=>{const[o,a]=m.useState(),i=m.useMemo(()=>If.filter(({value:d,unit:u})=>d*On[u]<=n),[n]),c=m.useMemo(()=>If.findIndex(({value:d,unit:u})=>d*On[u]===s),[s]),l=d=>{const{value:u,unit:h}=i[d];return`${u}${h}`};return m.useEffect(()=>{if(o!==void 0){const{value:d,unit:u}=i[o];r(d*On[u])}},[o,r,i]),m.useEffect(()=>{if(t===void 0)return;const d=i.findIndex(({value:u,unit:h})=>u*On[h]===t);if(d!==-1){a(d);return}a(c)},[c,t,i]),e.jsx(e.Fragment,{children:o!==void 0&&e.jsx(z_,{value:o,onChange:d=>a(d),max:i.length-1,formatMark:l,filled:!1})})};function BP(t){return Jn(m.useMemo(()=>({shared:{projects:[t]},exclusive:{actions:[`apply_storage_config@${t}`]}}),[t]))}const xd={title:"Instant restore",description:()=>e.jsxs(e.Fragment,{children:["Choose the length of your restore window. This setting enables"," ",e.jsx("b",{children:"instant restore"})," (for point-in-time recovery), time travel queries, and branching from past states."]}),longRetentionWarning:"Note: A longer restore window can increase your storage usage.",learnMore:"Learn more"},Lfe="_description_pina7_1",Dfe="_form_pina7_5",Mfe="_content_pina7_11",Ufe="_options_pina7_17",Ffe="_optionTitle_pina7_23",qfe="_optionPrice_pina7_27",zfe="_footer_pina7_32",ta={description:Lfe,form:Dfe,content:Mfe,options:Ufe,optionTitle:Ffe,optionPrice:qfe,footer:zfe},Hfe=({project:t})=>{const s=Ff(),n=m.useMemo(()=>HA(s),[s]),r=t.history_retention_seconds,o=m.useMemo(()=>{var u;return((u=VA(n,r))==null?void 0:u.interval)??0},[n,r]),a=xe({defaultValues:{recoveryInterval:o}}),i=a.watch("recoveryInterval"),c=BP(t.id),l=Co(),d=async u=>{try{const{recoveryInterval:h}=u;await l({projectId:t.id,data:{history_retention_seconds:h}}),re(qc.successToast(h))}catch(h){H(h)}};return e.jsxs(Pe,{children:[e.jsx("div",{className:ta.description,children:xd.description()}),e.jsxs(It,{providerProps:a,formBodyClassName:ta.form,onSubmit:d,children:[e.jsxs("div",{className:ta.content,children:[r<o&&e.jsx(Q,{action:e.jsx(A,{disabled:a.formState.disabled||a.formState.isSubmitting,onClick:()=>{a.setValue("recoveryInterval",o)},children:qc.applySuggestionButton(o)}),children:qc.increaseSuggestion({current:r,tier:o})}),e.jsx(z,{level:3,size:"h6",children:"Restore window:"}),e.jsx("div",{className:ta.options,children:e.jsx(me,{control:a.control,name:"recoveryInterval",render:({field:u,formState:h})=>e.jsx(e.Fragment,{children:n.map(({interval:p,price:g})=>e.jsxs(Mn,{checked:p===u.value,disabled:h.disabled||a.formState.isSubmitting,onChange:()=>{u.onChange(p)},children:[e.jsx("span",{className:ta.optionTitle,children:WA(p)}),g!==void 0&&g>0&&e.jsxs(e.Fragment,{children:[" ",e.jsx("span",{className:ta.optionPrice,children:qc.tierPrice(g)})]})]},p))})})})]}),e.jsxs("div",{className:ta.footer,children:[e.jsx(Er,{lockedMessage:c,children:e.jsx(_e,{disabled:o===i||!!c,children:qc.saveButton})}),a.formState.isSubmitting&&e.jsx(Bt,{fadeInSlowly:!0})]})]})]})},Vfe="_form_z95oq_1",Wfe="_controlContainer_z95oq_7",Gfe="_control_z95oq_7",Kfe="_error_z95oq_20",Ih={form:Vfe,controlContainer:Wfe,control:Gfe,error:Kfe},gw=tS,Qfe=tS,Yfe=({project:t,limits:s})=>{const n=s?s.max_history_retention_seconds:gw,[r,o]=m.useState(!1),[a,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(),h=m.useMemo(()=>{if(t)return t.history_retention_seconds},[t]);m.useEffect(()=>{if(h===void 0)return;const f=If.findIndex(({value:y,unit:v})=>y*On[v]===h);u(f===-1)},[h]);const p=f=>{l(f),i(f>n?`History retention can be set for up to ${xc(n)}`:"")},g=f=>{l(f),i("")},_=Co(),x=m.useCallback(f=>(f.preventDefault(),o(!0),_({projectId:t.id,data:{history_retention_seconds:c}}).then(()=>{Te(e.jsx(Fe,{children:"Successfully updated history retention settings"}))}).catch(H).finally(()=>o(!1))),[_,c,t.id]),j=r||h===c||!!a,b=BP(t.id);return e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsxs(Pe,{children:[e.jsx("div",{children:xd.description()}),e.jsxs("form",{className:Ih.form,onSubmit:x,children:[e.jsxs("div",{className:Ih.controlContainer,children:[e.jsx("div",{className:Ih.control,children:d?e.jsx(Rfe,{savedValue:h,onChangeValue:p,onEmptyValue:i}):e.jsx(Bfe,{savedValue:h,defaultValue:Math.min(gw,n),maxValue:n,onChangePreset:g})}),a&&e.jsx("div",{className:Ih.error,children:a})]}),Number(c)>Qfe&&e.jsxs(Q,{appearance:"warning",children:[xd.longRetentionWarning," ",e.jsx(A,{href:"https://neon.tech/docs/manage/projects#configure-history-retention",icon:"external_link",children:xd.learnMore})]}),e.jsx(mM,{}),e.jsx("div",{children:e.jsx(Er,{lockedMessage:b,children:e.jsx(P,{type:"submit",disabled:j||!!b,size:"s",children:r?"Saving...":"Save"})})})]})]})})})},Jfe=()=>{const{project:t,isLoading:s}=O(),{isPricingV3Account:n,subscriptionType:r}=ae(),{limits:o,isLoading:a}=Mt();return!t||s||a||!o?e.jsx(pe,{}):e.jsxs(Ae,{id:"storage",children:[e.jsx(fe,{children:xd.title}),n&&r!=="free_v3"?e.jsx(Hfe,{project:t}):e.jsx(Yfe,{project:t,limits:o})]})},x_={header:"Transfer project",info:"You can only transfer projects to an organization you are a member of. Transfers are instant, with no downtime.",transferButton:"Transfer project"},Zfe="_buttonWrapper_nih2t_1",Xfe={buttonWrapper:Zfe},ebe=()=>{const{project:t}=O(),{trackUiInteraction:s}=k(),n=Ne(),r=Ve(De.TransferProject),{enabled:o,isLoading:a,disabledMessage:i}=qI();return!t||a?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[r.isModalOpen&&e.jsx(IP,{project:t,onRequestClose:()=>{r.closeModal(),s("transfer_project_modal_dismissed")},onSuccess:c=>{r.closeModal(),s("transfer_project_modal_confirmed"),n.push(F(C.OrgProjectsList,{orgId:c}))}}),e.jsx(Ae,{id:"transfer",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:x_.header}),e.jsx(T,{appearance:"secondary",children:x_.info}),e.jsx(Ss,{children:e.jsx(Z,{content:i,disabled:o,children:e.jsx("div",{className:Xfe.buttonWrapper,children:e.jsx(P,{"data-qa":"transfer-project-button",onClick:()=>{s("project_settings_transfer_project_clicked"),r.openModal()},disabled:!o,size:"s",children:x_.transferButton})})})})]})})]})},tbe={nextUpdate:t=>`Next update: ${le(t,ve.UpdateScheduleUpcomingDateAndTime)}`},sbe=({date:t})=>e.jsx(Q,{"data-qa":"next-update-time",children:e.jsx(T,{as:"p",children:tbe.nextUpdate(t)})}),j_={title:"Updates",description:"Keep your computes up to date with the latest Postgres version updates, security patches, and Neon features. Updates require a brief restart of your project’s computes.",learnMore:"Learn more"},nbe="_sectionsGap_1gvn5_1",rbe={sectionsGap:nbe},y_={description:"Select your preferred time window for updates. Compute restarts typically take only a few seconds.",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},obe="_container_11k2x_1",abe={container:obe},LP=m.forwardRef(({onChange:t,value:s,disabled:n},r)=>{const{trackUiInteraction:o}=k(),a=l=>l+1,i=l=>s.includes(l),c=l=>()=>{o("project_settings_update_schedule_day_changed",{day:y_.days[l-1].toLowerCase()}),t([l])};return e.jsxs("div",{className:abe.container,ref:r,children:[e.jsx(T,{as:"p",children:y_.description}),e.jsx(Da,{children:y_.days.map((l,d)=>e.jsx(as,{active:i(a(d)),onClick:c(a(d)),disabled:n,children:l},l))})]})});LP.displayName="UpdateScheduleDayPicker";const Pi={save:"Save",upgradeToEdit:"Upgrade to customize",whyUpgrade:"On the Free Plan, Neon schedules updates as needed, typically completing in just a few seconds. For more control over when updates occur, upgrade your plan to set a specific time window for updates.",schedule:"Schedule",noSchedule:"An update schedule hasn't been set for this project yet. You can choose a preferred schedule now, or Neon will set one for you in the coming weeks.",restartsOutsideOfSchedule:"Neon may occasionally restart computes outside the selected update window to address critical security issues or perform essential maintenance."},ibe="_button_1wi41_1",cbe="_restartOutsideOfScheduleAlert_1wi41_5",v_={button:ibe,restartOutsideOfScheduleAlert:cbe},lbe={time:"Time"},dbe="_container_1uh3k_1",ube="_select_1uh3k_8",_w={container:dbe,select:ube},hbe={timeInYourTimezone:(t,s)=>`The selected UTC time corresponds to ${s} in your timezone (${t})`},pbe="_infoMessage_1pzmk_1",mbe={infoMessage:pbe},gbe=t=>{const s=new Date;s.setUTCHours(t),s.setUTCMinutes(0);const n=Intl.DateTimeFormat().resolvedOptions(),r=s.toLocaleTimeString(n.locale,{hour:"2-digit",minute:"2-digit",timeZone:n.timeZone,hour12:!0});return hbe.timeInYourTimezone(n.timeZone,r)},_be=({hours:t})=>e.jsx(Qi,{icon:"ext_geospacial",className:mbe.infoMessage,children:gbe(t)}),fbe=1;function bbe(t){const s=t.start_time.split(":"),n=s.length===2?Number(s[0]):0;return{weekdays:t.weekdays,startHour:n}}function DP(t){return(t+fbe)%24}function xbe(t){const s=t.startHour.toString().padStart(2,"0"),n=DP(t.startHour).toString().padStart(2,"0");return{weekdays:t.weekdays,start_time:`${s}:00`,end_time:`${n}:00`}}const fw=t=>{const s=t<12?"AM":"PM";return`${t%12||12}:00 ${s}`},MP=m.forwardRef(({onChange:t,value:s,disabled:n},r)=>{const{trackUiInteraction:o}=k(),a=m.useMemo(()=>Array.from({length:24},(c,l)=>({label:`${fw(l)} - ${fw(DP(l))} UTC`,value:l})),[]),i=m.useCallback(c=>{o("project_settings_update_schedule_time_changed",{start_hour_utc:c}),t(c)},[o,t]);return e.jsxs("div",{className:_w.container,children:[e.jsx(R,{label:lbe.time,children:e.jsx(He,{ref:r,options:a,onChange:i,value:s,className:_w.select,size:"s",disabled:n,filterable:!0})}),e.jsx(_be,{hours:s})]})});MP.displayName="UpdateScheduleTimePicker";const jbe={toastSuccessMessage:"Schedule updated successfully!"},ybe={weekdays:[7],startHour:0},vbe=(t,s)=>{const n=Co(),r=Hf("edit_maintenance_window");return{form:xe({defaultValues:s?bbe(s):ybe,disabled:!r}),handleSubmit:async i=>{try{await n({projectId:t,data:{settings:{maintenance_window:xbe(i)}}}),re(jbe.toastSuccessMessage)}catch(c){H(c)}},canEditUpdateSchedule:r}},wbe=({projectId:t,maintenanceWindow:s})=>{const{form:n,handleSubmit:r,canEditUpdateSchedule:o}=vbe(t,s),{trackUiInteraction:a}=k(),[i,c]=m.useState(!1),l=m.useCallback(()=>{a("project_settings_update_schedule_upgrade_to_customize_clicked"),c(!0)},[a]),d=m.useCallback(()=>c(!1),[]),u=m.useCallback(h=>(a("project_settings_update_schedule_save_clicked"),r(h)),[a,r]);return e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:gt.Default,isOpen:i,onRequestClose:d}),o?e.jsxs(It,{providerProps:n,onSubmit:u,gaps:!0,children:[e.jsx(fe,{level:3,children:Pi.schedule}),e.jsx(me,{render:({field:h})=>e.jsx(LP,{...h}),name:"weekdays"}),e.jsx(me,{name:"startHour",render:({field:h})=>e.jsx(MP,{...h})}),!s&&e.jsx(Q,{"data-qa":"update-schedule-not-populated",children:Pi.noSchedule}),e.jsx(_e,{className:v_.button,children:Pi.save}),e.jsx(Qi,{icon:"info_italic",className:v_.restartOutsideOfScheduleAlert,children:Pi.restartsOutsideOfSchedule})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{as:"p",children:Pi.whyUpgrade}),e.jsx(P,{className:v_.button,onClick:l,children:Pi.upgradeToEdit})]})]})},Sbe=()=>{var n;const{project:t}=O(),{trackUiInteraction:s}=k();return e.jsxs(Ae,{id:"update-schedule","data-qa":"maintenance-window-page",children:[e.jsx(fe,{children:j_.title}),e.jsxs("div",{className:rbe.sectionsGap,children:[e.jsxs(Pe,{children:[e.jsxs(T,{as:"p",children:[j_.description," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/manage/updates",icon:"external_link",onClick:()=>{s("project_settings_update_schedule_learn_more_clicked")},children:j_.learnMore})]}),(t==null?void 0:t.maintenance_scheduled_for)&&e.jsx(sbe,{date:t.maintenance_scheduled_for})]}),e.jsx(Pe,{children:t?e.jsx(wbe,{projectId:t.id,maintenanceWindow:(n=t==null?void 0:t.settings)==null?void 0:n.maintenance_window}):e.jsx(pe,{})})]})]})},Cbe=()=>{const{isLoading:t}=O(),{isLoading:s}=Mt(),{isFetching:n}=ae(),{orgId:r,isLoading:o}=Y();return t||s||n&&(o||!!r)?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx(W_e,{}),e.jsx(F_e,{}),e.jsx(Jfe,{}),e.jsx(Sbe,{}),e.jsx(Nfe,{}),e.jsx(jfe,{}),e.jsx(D_e,{}),e.jsx(yfe,{}),e.jsx(ebe,{}),e.jsx(q_e,{})]})},no={title:"Projects shared with me",subtitle:e.jsxs(e.Fragment,{children:["Projects shared with you by other users. Learn about"," ",e.jsx(A,{openInNewTab:!0,href:"https://neon.tech/docs/guides/project-collaboration-guide",children:"project collaboration"}),"."]}),nameHeader:"Name",organizationHeader:"Organization",regionHeader:"Region",createdAtHeader:"Created at",storageHeader:"Storage",pgVersionHeader:"Postgres version"},kbe="_projectNameCell_lypcp_1",Ibe="_projectName_lypcp_1",bw={projectNameCell:kbe,projectName:Ibe},Pbe=()=>{const{getRegionSafe:t}=Fa();return m.useMemo(()=>[{id:"name",header:no.nameHeader,accessorKey:"name",enableSorting:!0,rowHeader:!0,render:({project:s})=>s?e.jsxs("div",{className:bw.projectNameCell,children:[e.jsx(T,{className:bw.projectName,bold:!0,children:s.name}),s.hipaa_enabled_at!==void 0&&e.jsx(Z,{content:"HIPAA compliant",children:e.jsx(he,{children:"HIPAA"})})]}):e.jsx($,{height:12})},{id:"organization",header:no.organizationHeader,render:({project:s})=>s?e.jsx(T,{children:s.org_name}):e.jsx($,{height:12})},{id:"region_name",header:no.regionHeader,render:({project:s})=>{var n;return s?e.jsx(T,{children:(n=t(s.platform_id,s.region_id))==null?void 0:n.name}):e.jsx($,{height:12})}},{id:"created_at",header:no.createdAtHeader,render:({project:s})=>s?e.jsx(T,{appearance:"secondary",children:le(s.created_at)}):e.jsx($,{height:12})},{id:"synthetic_storage_size",header:no.storageHeader,render:({project:s})=>s?e.jsx(T,{nowrap:!0,bold:!0,children:s.synthetic_storage_size?Gd(s.synthetic_storage_size):"-"}):e.jsx($,{height:12,width:24})},{id:"pg_version",header:no.pgVersionHeader,render:({project:s})=>s?e.jsx(T,{children:s.pg_version}):e.jsx($,{height:12,width:24})},{id:"actions",render:({project:s})=>s?e.jsx(PP,{project:s,isUserProject:!1}):null,size:62,maxSize:62}],[t])},Tbe=()=>{const{data:t,isLoading:s,unavailableIds:n,error:r}=zd(),o=m.useMemo(()=>Cf(t,n),[t,n]),a=!!(o!=null&&o.length),{trackUiInteraction:i}=k(),c=Pbe();return e.jsxs(e.Fragment,{children:[e.jsx(Nc,{title:no.title,subtitle:no.subtitle}),(a||!!r)&&e.jsx(e.Fragment,{children:r?e.jsx(Sf,{variant:"shared"}):c&&e.jsx(mn,{isLoading:s,"aria-label":"Shared projects",columns:c,rows:o,rowHref:l=>F(C.ProjectsItem,{projectId:l.id}),onRowClick:()=>i("project_list_project_opened")})})]})},Nbe="_root_1yiej_1",Abe="_body_1yiej_7",xw={root:Nbe,body:Abe};var Ol={exports:{}},Rl={},Ph={},jw;function Ebe(){if(jw)return Ph;jw=1,Ph.__esModule=!0,Ph.cloneElement=c;var t=s(Nf());function s(l){return l&&l.__esModule?l:{default:l}}function n(l,d){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);d&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),u.push.apply(u,h)}return u}function r(l){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?n(Object(u),!0).forEach(function(h){o(l,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(u,h))})}return l}function o(l,d,u){return d=a(d),d in l?Object.defineProperty(l,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[d]=u,l}function a(l){var d=i(l,"string");return typeof d=="symbol"?d:String(d)}function i(l,d){if(typeof l!="object"||l===null)return l;var u=l[Symbol.toPrimitive];if(u!==void 0){var h=u.call(l,d);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(l)}function c(l,d){return d.style&&l.props.style&&(d.style=r(r({},l.props.style),d.style)),d.className&&l.props.className&&(d.className=l.props.className+" "+d.className),t.default.cloneElement(l,d)}return Ph}var Bl={},yw;function UP(){if(yw)return Bl;yw=1,Bl.__esModule=!0,Bl.resizableProps=void 0;var t=s(Qw());FS();function s(r){return r&&r.__esModule?r:{default:r}}var n={axis:t.default.oneOf(["both","x","y","none"]),className:t.default.string,children:t.default.element.isRequired,draggableOpts:t.default.shape({allowAnyClick:t.default.bool,cancel:t.default.string,children:t.default.node,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:t.default.node,grid:t.default.arrayOf(t.default.number),handle:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number}),height:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var c=a[0];if(c.axis==="both"||c.axis==="y"){var l;return(l=t.default.number).isRequired.apply(l,a)}return t.default.number.apply(t.default,a)},handle:t.default.oneOfType([t.default.node,t.default.func]),handleSize:t.default.arrayOf(t.default.number),lockAspectRatio:t.default.bool,maxConstraints:t.default.arrayOf(t.default.number),minConstraints:t.default.arrayOf(t.default.number),onResizeStop:t.default.func,onResizeStart:t.default.func,onResize:t.default.func,resizeHandles:t.default.arrayOf(t.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:t.default.number,width:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var c=a[0];if(c.axis==="both"||c.axis==="x"){var l;return(l=t.default.number).isRequired.apply(l,a)}return t.default.number.apply(t.default,a)}};return Bl.resizableProps=n,Bl}var vw;function FP(){if(vw)return Rl;vw=1,Rl.__esModule=!0,Rl.default=void 0;var t=i(Nf()),s=FS(),n=Ebe(),r=UP(),o=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function a(b){if(typeof WeakMap!="function")return null;var f=new WeakMap,y=new WeakMap;return(a=function(w){return w?y:f})(b)}function i(b,f){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var y=a(f);if(y&&y.has(b))return y.get(b);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var I=w?Object.getOwnPropertyDescriptor(b,S):null;I&&(I.get||I.set)?Object.defineProperty(v,S,I):v[S]=b[S]}return v.default=b,y&&y.set(b,v),v}function c(){return c=Object.assign?Object.assign.bind():function(b){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(b[v]=y[v])}return b},c.apply(this,arguments)}function l(b,f){if(b==null)return{};var y={},v=Object.keys(b),w,S;for(S=0;S<v.length;S++)w=v[S],!(f.indexOf(w)>=0)&&(y[w]=b[w]);return y}function d(b,f){var y=Object.keys(b);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(b);f&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(b,w).enumerable})),y.push.apply(y,v)}return y}function u(b){for(var f=1;f<arguments.length;f++){var y=arguments[f]!=null?arguments[f]:{};f%2?d(Object(y),!0).forEach(function(v){h(b,v,y[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(y)):d(Object(y)).forEach(function(v){Object.defineProperty(b,v,Object.getOwnPropertyDescriptor(y,v))})}return b}function h(b,f,y){return f=p(f),f in b?Object.defineProperty(b,f,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[f]=y,b}function p(b){var f=g(b,"string");return typeof f=="symbol"?f:String(f)}function g(b,f){if(typeof b!="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var v=y.call(b,f);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(b)}function _(b,f){b.prototype=Object.create(f.prototype),b.prototype.constructor=b,x(b,f)}function x(b,f){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,w){return v.__proto__=w,v},x(b,f)}var j=function(b){_(f,b);function f(){for(var v,w=arguments.length,S=new Array(w),I=0;I<w;I++)S[I]=arguments[I];return v=b.call.apply(b,[this].concat(S))||this,v.handleRefs={},v.lastHandleRect=null,v.slack=null,v}var y=f.prototype;return y.componentWillUnmount=function(){this.resetData()},y.resetData=function(){this.lastHandleRect=this.slack=null},y.runConstraints=function(w,S){var I=this.props,N=I.minConstraints,D=I.maxConstraints,U=I.lockAspectRatio;if(!N&&!D&&!U)return[w,S];if(U){var E=this.props.width/this.props.height,K=w-this.props.width,J=S-this.props.height;Math.abs(K)>Math.abs(J*E)?S=w/E:w=S*E}var B=w,W=S,X=this.slack||[0,0],G=X[0],V=X[1];return w+=G,S+=V,N&&(w=Math.max(N[0],w),S=Math.max(N[1],S)),D&&(w=Math.min(D[0],w),S=Math.min(D[1],S)),this.slack=[G+(B-w),V+(W-S)],[w,S]},y.resizeHandler=function(w,S){var I=this;return function(N,D){var U=D.node,E=D.deltaX,K=D.deltaY;w==="onResizeStart"&&I.resetData();var J=(I.props.axis==="both"||I.props.axis==="x")&&S!=="n"&&S!=="s",B=(I.props.axis==="both"||I.props.axis==="y")&&S!=="e"&&S!=="w";if(!(!J&&!B)){var W=S[0],X=S[S.length-1],G=U.getBoundingClientRect();if(I.lastHandleRect!=null){if(X==="w"){var V=G.left-I.lastHandleRect.left;E+=V}if(W==="n"){var Se=G.top-I.lastHandleRect.top;K+=Se}}I.lastHandleRect=G,X==="w"&&(E=-E),W==="n"&&(K=-K);var Ie=I.props.width+(J?E/I.props.transformScale:0),St=I.props.height+(B?K/I.props.transformScale:0),ps=I.runConstraints(Ie,St);Ie=ps[0],St=ps[1];var su=Ie!==I.props.width||St!==I.props.height,Fc=typeof I.props[w]=="function"?I.props[w]:null,eT=w==="onResize"&&!su;Fc&&!eT&&(N.persist==null||N.persist(),Fc(N,{node:U,size:{width:Ie,height:St},handle:S})),w==="onResizeStop"&&I.resetData()}}},y.renderResizeHandle=function(w,S){var I=this.props.handle;if(!I)return t.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+w,ref:S});if(typeof I=="function")return I(w,S);var N=typeof I.type=="string",D=u({ref:S},N?{}:{handleAxis:w});return t.cloneElement(I,D)},y.render=function(){var w=this,S=this.props,I=S.children,N=S.className,D=S.draggableOpts;S.width,S.height,S.handle,S.handleSize,S.lockAspectRatio,S.axis,S.minConstraints,S.maxConstraints,S.onResize,S.onResizeStop,S.onResizeStart;var U=S.resizeHandles;S.transformScale;var E=l(S,o);return(0,n.cloneElement)(I,u(u({},E),{},{className:(N?N+" ":"")+"react-resizable",children:[].concat(I.props.children,U.map(function(K){var J,B=(J=w.handleRefs[K])!=null?J:w.handleRefs[K]=t.createRef();return t.createElement(s.DraggableCore,c({},D,{nodeRef:B,key:"resizableHandle-"+K,onStop:w.resizeHandler("onResizeStop",K),onStart:w.resizeHandler("onResizeStart",K),onDrag:w.resizeHandler("onResize",K)}),w.renderResizeHandle(K,B))}))}))},f}(t.Component);return Rl.default=j,j.propTypes=r.resizableProps,j.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},Rl}var Ll={},ww;function $be(){if(ww)return Ll;ww=1,Ll.__esModule=!0,Ll.default=void 0;var t=c(Nf()),s=a(Qw()),n=a(FP()),r=UP(),o=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function a(f){return f&&f.__esModule?f:{default:f}}function i(f){if(typeof WeakMap!="function")return null;var y=new WeakMap,v=new WeakMap;return(i=function(S){return S?v:y})(f)}function c(f,y){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var v=i(y);if(v&&v.has(f))return v.get(f);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in f)if(I!=="default"&&Object.prototype.hasOwnProperty.call(f,I)){var N=S?Object.getOwnPropertyDescriptor(f,I):null;N&&(N.get||N.set)?Object.defineProperty(w,I,N):w[I]=f[I]}return w.default=f,v&&v.set(f,w),w}function l(){return l=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var v=arguments[y];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(f[w]=v[w])}return f},l.apply(this,arguments)}function d(f,y){var v=Object.keys(f);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(f);y&&(w=w.filter(function(S){return Object.getOwnPropertyDescriptor(f,S).enumerable})),v.push.apply(v,w)}return v}function u(f){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?d(Object(v),!0).forEach(function(w){h(f,w,v[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(v)):d(Object(v)).forEach(function(w){Object.defineProperty(f,w,Object.getOwnPropertyDescriptor(v,w))})}return f}function h(f,y,v){return y=p(y),y in f?Object.defineProperty(f,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):f[y]=v,f}function p(f){var y=g(f,"string");return typeof y=="symbol"?y:String(y)}function g(f,y){if(typeof f!="object"||f===null)return f;var v=f[Symbol.toPrimitive];if(v!==void 0){var w=v.call(f,y);if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(f)}function _(f,y){if(f==null)return{};var v={},w=Object.keys(f),S,I;for(I=0;I<w.length;I++)S=w[I],!(y.indexOf(S)>=0)&&(v[S]=f[S]);return v}function x(f,y){f.prototype=Object.create(y.prototype),f.prototype.constructor=f,j(f,y)}function j(f,y){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},j(f,y)}var b=function(f){x(y,f);function y(){for(var w,S=arguments.length,I=new Array(S),N=0;N<S;N++)I[N]=arguments[N];return w=f.call.apply(f,[this].concat(I))||this,w.state={width:w.props.width,height:w.props.height,propsWidth:w.props.width,propsHeight:w.props.height},w.onResize=function(D,U){var E=U.size;w.props.onResize?(D.persist==null||D.persist(),w.setState(E,function(){return w.props.onResize&&w.props.onResize(D,U)})):w.setState(E)},w}y.getDerivedStateFromProps=function(S,I){return I.propsWidth!==S.width||I.propsHeight!==S.height?{width:S.width,height:S.height,propsWidth:S.width,propsHeight:S.height}:null};var v=y.prototype;return v.render=function(){var S=this.props,I=S.handle,N=S.handleSize;S.onResize;var D=S.onResizeStart,U=S.onResizeStop,E=S.draggableOpts,K=S.minConstraints,J=S.maxConstraints,B=S.lockAspectRatio,W=S.axis;S.width,S.height;var X=S.resizeHandles,G=S.style,V=S.transformScale,Se=_(S,o);return t.createElement(n.default,{axis:W,draggableOpts:E,handle:I,handleSize:N,height:this.state.height,lockAspectRatio:B,maxConstraints:J,minConstraints:K,onResizeStart:D,onResize:this.onResize,onResizeStop:U,resizeHandles:X,transformScale:V,width:this.state.width},t.createElement("div",l({},Se,{style:u(u({},G),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},y}(t.Component);return Ll.default=b,b.propTypes=u(u({},r.resizableProps),{},{children:s.default.element}),Ll}var Sw;function Obe(){return Sw||(Sw=1,Ol.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Ol.exports.Resizable=FP().default,Ol.exports.ResizableBox=$be().default),Ol.exports}var Rbe=Obe();const Cw={protectedBranchAlert:{title:"Protected Branch",message:"You're about to query a protected branch. Changes may impact production. Only proceed if you're sure."}},Bbe="_container_1e8vp_1",Lbe="_root_1e8vp_6",Dbe="_actions_1e8vp_16",Mbe="_run_action_1e8vp_21",Ube="_btn_1e8vp_29",Fbe="_divider_1e8vp_33",qbe="_info_1e8vp_39",zbe="_info_item_1e8vp_44",Hbe="_status_1e8vp_52",Vbe="_status_icon_1e8vp_61",Wbe="_connecting_1e8vp_65",Gbe="_idle_1e8vp_69",Kbe="_idleInTransaction_1e8vp_73",Qbe="_failedTransaction_1e8vp_77",Ybe="_disconnected_1e8vp_81",Jbe="_modalFooter_1e8vp_85",Zbe="_modalTitle_1e8vp_94",Xe={container:Bbe,root:Lbe,actions:Dbe,run_action:Mbe,btn:Ube,divider:Fbe,info:qbe,info_item:zbe,status:Hbe,status_icon:Vbe,connecting:Wbe,idle:Gbe,idleInTransaction:Kbe,failedTransaction:Qbe,disconnected:Ybe,modalFooter:Jbe,modalTitle:Zbe},Xbe={[Ue.Connecting]:Xe.connecting,[Ue.Idle]:Xe.idle,[Ue.IdleInTransaction]:Xe.idleInTransaction,[Ue.FailedTransaction]:Xe.failedTransaction,[Ue.Disconnected]:Xe.disconnected},exe={[Ue.Connecting]:"Connecting ...",[Ue.Idle]:"Connected",[Ue.IdleInTransaction]:"In transaction",[Ue.FailedTransaction]:"Failed transaction: ROLLBACK required",[Ue.Disconnected]:"Ready to connect"},txe={[Ue.Connecting]:"connect",[Ue.Idle]:"check_circle_inverted",[Ue.IdleInTransaction]:"data_transfer",[Ue.FailedTransaction]:"warning",[Ue.Disconnected]:"connect"},sxe=({isOpen:t,onRequestClose:s,onRunServerless:n,storeModalPreference:r})=>{const[o,a]=m.useState(!1);function i(c){o&&r({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24*7}),s(),n(c)}return e.jsx(Qe,{isOpen:t,onRequestClose:s,title:e.jsx("header",{className:Xe.modalTitle,children:Cw.protectedBranchAlert.title}),children:e.jsx(be,{children:e.jsxs("section",{children:[Cw.protectedBranchAlert.message,e.jsxs("footer",{className:Xe.modalFooter,children:[e.jsx(mb,{checked:o,onChange:()=>a(c=>!c),children:"Don't show me this again"}),e.jsx(P,{onClick:c=>i(c),children:"Run query"})]})]})})})},nxe=()=>{const{projectId:t}=O(),{branch:s}=ut(),{state:{numberOfQueriesToBeRun:n,isQueryRunning:r,query:o,isDisabled:a,timeTravelError:i,result:c,branchHasEndpoints:l,connectionStatus:d},actions:u}=Us(),[h,p]=xs(Me.ProtectedAlertController,`${t}-${(s==null?void 0:s.id)||"default"}`,{shouldNotShow:!1,expiresAt:0}),{currentIndex:g}=lS(),{trackUiInteraction:_}=k(),[x,j]=m.useState(!1),b=m.useMemo(()=>{if(!c||!c.response||!Array.isArray(c.response))return"";const B=c.response[g];if(!B||!B.data||!B.data.rows)return"";const W=B.data.rows.length;return W?`${W} row${W!==1?"s":""}`:"No result"},[c,g]),f=m.useMemo(()=>{if(!c)return"";const B=c.duration;if(B!==void 0)return Ex(B);if(!Array.isArray(c.response))return"";const W=c.response[g];if(!W)return"";const{duration:X}=W;return X?Ex(X):""},[c,g]),y=m.useCallback(B=>{u.runWithServerlessDriver({showHidden:B.shiftKey}),_("playground_run")},[u,_]),v=m.useCallback(B=>{u.runWithServerlessDriver({showHidden:B.shiftKey}),_("playground_run_in_txn")},[u,_]),w=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"ROLLBACK"}),_("playground_rollback")},[u,_]),S=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"COMMIT"}),_("playground_commit")},[u,_]),I=m.useCallback(B=>{u.runWithServerlessDriver({explain:!0,showHidden:B.shiftKey}),_("playground_explain")},[u,_]),N=m.useCallback(B=>{u.runWithServerlessDriver({explain:!0,analyze:!0,showHidden:B.shiftKey}),_("playground_analyze")},[u,_]),D=m.useCallback(()=>{u.cancelServerlessDriver(),_("playground_cancel")},[u,_]),U=m.useMemo(()=>s&&l?null:s?e.jsxs(e.Fragment,{children:["The selected branch does not have a compute endpoint."," ",e.jsx(A,{href:F(C.ProjectsItemBranchesItem,{projectId:t,branchId:s.id}),children:"Manage compute endpoints for this branch."})]}):e.jsx(e.Fragment,{children:"Please select a branch first."}),[s,l,t]),E=Xbe[d],K=typeof n=="number"?` (${n||"no"} quer${n===1?"y":"ies"})`:"";let J=exe[d];return(d===Ue.Idle||d===Ue.IdleInTransaction)&&(J+=K),e.jsxs("div",{className:Xe.container,children:[e.jsx(sxe,{isOpen:x,storeModalPreference:p,onRequestClose:()=>{j(!1)},onRunServerless:y}),e.jsxs("div",{className:M(Xe.status,E),children:[e.jsxs("span",{children:[e.jsx(L,{size:14,name:txe[d],className:Xe.status_icon}),J]}),o.length>$x&&e.jsxs("span",{children:[e.jsx(L,{size:14,name:"warning",className:Xe.status_icon}),"This query will still run OK, but the last"," ",o.length-$x," characters will be truncated from query history"]})]}),e.jsxs("div",{className:Xe.root,children:[e.jsxs("div",{className:Xe.actions,children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{disabled:i===null,content:e.jsx("span",{children:i==null?void 0:i.message}),children:e.jsxs("div",{className:Xe.run_action,children:[r&&e.jsx(P,{disabled:a,icon:"close",onClick:D,appearance:"error",size:"s",children:"Cancel"}),!r&&d===Ue.FailedTransaction&&e.jsx(P,{disabled:a,icon:"rollback",onClick:w,size:"s",children:"ROLLBACK"}),!r&&(d===Ue.Idle||d===Ue.Connecting||d===Ue.Disconnected)&&e.jsx(P,{disabled:a||d===Ue.Connecting||n===0,appearance:"primary",icon:"play_outline",onClick:B=>{const W=h.expiresAt>Date.now();if(h.shouldNotShow||!(s!=null&&s.protected)||W){y(B);return}j(!0)},size:"s",children:"Run"}),!r&&d===Ue.IdleInTransaction&&e.jsx(P,{disabled:a||n===0,appearance:"secondary",icon:"play_outline",onClick:v,size:"s",children:"Run in transaction"})]})}),!r&&(d===Ue.Idle||d===Ue.Connecting)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Xe.divider}),e.jsx(P,{disabled:a||d===Ue.Connecting||n===0,onClick:I,appearance:"secondary",className:M(Xe.btn),size:"s",children:"Explain"}),e.jsx(P,{disabled:a||d===Ue.Connecting||n===0,onClick:N,appearance:"secondary",className:M(Xe.btn),size:"s",children:"Analyze"})]}),!r&&d===Ue.IdleInTransaction&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Xe.divider}),e.jsx(P,{disabled:a,onClick:S,icon:"check",appearance:"secondary",className:M(Xe.btn),size:"s",children:"COMMIT"}),e.jsx(P,{disabled:a,onClick:w,icon:"rollback",appearance:"secondary",className:M(Xe.btn),size:"s",children:"ROLLBACK"})]})]}),!l&&e.jsx("div",{className:Xe.info_item,children:U})]}),e.jsx("div",{className:Xe.info,children:r?e.jsx(Bt,{}):e.jsxs(e.Fragment,{children:[f&&e.jsx("div",{className:Xe.info_item,children:f}),b&&e.jsx("div",{className:Xe.info_item,children:b})]})})]})]})},rxe="_root_41tlt_1",oxe="_success_41tlt_27",axe="_icon_41tlt_31",ixe="_iconSuccess_41tlt_39",cxe="_textArea_41tlt_43",lxe="_actions_41tlt_63",dxe="_inputArea_41tlt_74",uxe="_generateTitle_41tlt_84",ar={root:rxe,success:oxe,icon:axe,iconSuccess:ixe,textArea:cxe,actions:lxe,inputArea:dxe,generateTitle:uxe},kw=3,qP=m.forwardRef(({className:t,placeholder:s,pending:n,textareaRef:r,success:o,onSubmit:a,onCancel:i,onRequestClose:c},l)=>{const[d,u]=m.useState(""),[h,p]=m.useState(kw);return m.useEffect(()=>{if(o){if(h===-1){p(kw),c();return}setTimeout(()=>{p(g=>g-1)},1e3)}},[o,h,c]),e.jsxs("div",{ref:l,className:M(ar.root,o&&ar.success,t),children:[n?e.jsx(Bt,{}):o?e.jsx(L,{className:ar.iconSuccess,name:"success",size:20}):e.jsx(L,{className:ar.icon,name:"pgvector",size:20}),e.jsxs("div",{className:ar.inputArea,children:[n&&e.jsx("div",{className:ar.generateTitle,children:"Generating SQL..."}),o&&e.jsx("div",{className:ar.generateTitle,children:"Successfully generated SQL based on your prompt!"}),e.jsx("textarea",{rows:Math.min(d.split(`
`).length,3),className:ar.textArea,placeholder:s,ref:r,value:d,disabled:n,onChange:g=>u(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),a(d))}})]}),n?e.jsx(P,{appearance:"secondary",size:"s",onClick:i,children:"Cancel"}):o?e.jsxs(P,{icon:"cross_small",appearance:"secondary",size:"s",onClick:c,children:[h,"s • ESC"]}):e.jsxs("div",{className:ar.actions,children:[e.jsx(kr,{appearance:"default",disabled:d.trim()==="",iconName:"arrow_in_circle_right",iconSize:16,onClick:()=>{a(d)}}),e.jsx(kr,{appearance:"default",iconName:"cross_small",iconSize:16,onClick:c})]})]})});qP.displayName="AIPrompt";const hxe="_aiPromptPopper_d1nay_1",pxe="_aiPromptOverlay_d1nay_9",mxe="_aiGenerateLink_d1nay_18",w_={aiPromptPopper:hxe,aiPromptOverlay:pxe,aiGenerateLink:mxe},zP=m.forwardRef(({size:t},s)=>{const{projectId:n,project:r}=O(),{trackUiInteraction:o}=k(),{state:{query:a,isDisabled:i,isQueryRunning:c,isTextToSqlPopupOpen:l,isTextToSqlPending:d},actions:{textToSql:u,textToSqlCancel:h,runWithServerlessDriver:p,cancelServerlessDriver:g,onChangeTextToSqlPopup:_,onChangeQuery:x,onChangeQuerySelection:j}}=Us(),b=m.useCallback(()=>{i||p()},[i,p]),f=m.useCallback(()=>{c&&g()},[c,g]),y=m.useMemo(()=>D1(100,W=>{WE(n,W)}),[n]);m.useLayoutEffect(()=>{y(a)},[y,a]),m.useEffect(()=>()=>{var W;y.cancel(),s&&"current"in s&&s.current&&((W=s.current)==null||W.clearSelection())},[y,n,s]);const v=m.useCallback(()=>{var G,V;const W=!window.document.activeElement||window.document.activeElement.tagName==="BODY",X=!((G=window.document.getSelection())!=null&&G.toString());W&&X&&s&&"current"in s&&s.current&&((V=s.current)==null||V.focus())},[s]);m.useEffect(()=>(window.addEventListener("click",v),()=>{window.removeEventListener("click",v)}),[v]);const w=m.useRef(null);m.useLayoutEffect(()=>{l&&w.current&&w.current.focus()},[l]);const[S,I]=m.useState(!1),N=m.useCallback(async W=>{o("playground_text_to_sql_modal_submitted");const{result:X}=await u(W);X==="success"&&I(!0)},[u,o]);m.useEffect(()=>{l||I(!1)},[l,S]);const D=m.useCallback(()=>{o("playground_text_to_sql_run_cancel_clicked"),h()},[h,o]),U=m.useCallback(()=>{l&&(_(!1),S||o("playground_text_to_sql_modal_cancel_clicked"))},[l,_,S,o]);m.useEffect(()=>{const W=X=>{(X.metaKey||X.ctrlKey)&&X.key==="M"&&(X.preventDefault(),_(!l),o("playground_text_to_sql_keyboard_toggle",{action:l?"close":"open"})),X.key==="Escape"&&U()};return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[_,l,o,U]);const E=ee("text_to_sql"),K=m.useCallback(()=>{E&&(_(!l),o("playground_text_to_sql_keyboard_toggle",{action:l?"close":"open"}))},[E,_,l,o]),J=m.useCallback(W=>{W.preventDefault(),_(!0),o("playground_text_to_sql_button_clicked")},[_,o]),B=m.useMemo(()=>{let W=(r==null?void 0:r.pg_version)??15;return W<14&&(W=14),W>16&&(W=16),W},[r]);return e.jsxs(e.Fragment,{children:[e.jsx(GA,{className:w_.aiPromptPopper,hidden:!l,children:e.jsx(qP,{pending:d,success:S,textareaRef:w,onSubmit:N,onCancel:D,onRequestClose:U,placeholder:"Describe the type of SQL query you are looking to run..."})}),e.jsx(hb,{ref:s,name:"query_editor",mode:`pgsql${B}`,width:(t==null?void 0:t.width)||"100%",height:(t==null?void 0:t.height)||"100%",value:a,onChange:x,onSelectionChange:()=>{s&&"current"in s&&s.current&&j(s.current.getSelectedText())},onSubmit:b,onEscape:f,onAI:K,style:{height:"100%",width:"100%",...t},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14},focus:!0}),E&&a===""&&e.jsxs("div",{className:w_.aiPromptOverlay,children:["Type SQL or"," ",e.jsx(Z,{content:`${rS.isMacOs?"⌘":"Ctrl"}+Shift+M`,children:e.jsx("button",{type:"button",className:w_.aiGenerateLink,onClick:J,children:"Generate with AI"})}),"..."]})]})});zP.displayName="QueryLayoutEditor";const Iw=100,HP=({isOpen:t,proposedName:s,onClose:n,onSaveQuery:r})=>{var d,u;const o=zn({defaultValues:{name:s}}),{handleSubmit:a,register:i,formState:c}=o,{trackUiInteraction:l}=k();return e.jsx(mc,{isOpen:t,onRequestClose:n,title:"Save query",children:e.jsx(us,{...o,children:e.jsxs(Lt,{id:"query-save-form",onSubmit:a(h=>(l("playground_save"),r(h.name))),children:[e.jsx(gc,{children:e.jsx(R,{id:"name",error:(u=(d=c.errors)==null?void 0:d.name)==null?void 0:u.message,inline:!0,label:"Name",children:e.jsx(ne,{autoFocus:!0,...i("name",{required:{value:!0,message:"This field is required"},maxLength:{value:Iw,message:`Query name should be less than ${Iw} characters`}})})})}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{children:"Save"})]})]})})})},gxe=()=>{const[t,s]=m.useState(!1),{actions:{saveQuery:n},state:{selectedQueryName:r,selectedQueryId:o,queryChanged:a,queriesHistory:i,query:c}}=Us(),l=m.useCallback(()=>s(!1),[]),d=m.useCallback(()=>{r?n(o,r):s(!0)},[o,r,n]),u=m.useCallback(p=>n(null,p).then(l).catch(H),[n,l]),h=m.useMemo(()=>{const p=((i==null?void 0:i.slice(0,10))||[]).find(g=>g.query===c);return r||(p==null?void 0:p.name)||"New Query"},[i,c,r]);return e.jsxs(e.Fragment,{children:[e.jsx(P,{disabled:!!(r&&!a),appearance:"secondary",size:"s",onClick:d,children:"Save"}),e.jsx(HP,{isOpen:t,proposedName:h,onClose:l,onSaveQuery:u},h)]})},_xe="_root_1jg0p_1",fxe="_title_1jg0p_10",bxe="_main_1jg0p_23",xxe="_opts_1jg0p_33",jxe="_bigSelect_1jg0p_43",yxe="_smallSelect_1jg0p_49",vxe="_notSaved_1jg0p_55",wxe="_datePicker_1jg0p_59",Sxe="_divider_1jg0p_66",ir={root:_xe,title:fxe,main:bxe,opts:xxe,bigSelect:jxe,smallSelect:yxe,notSaved:vxe,datePicker:wxe,divider:Sxe},Cxe=()=>{const{state:{selectedQueryName:t,database:s,queryChanged:n,endpointId:r,isTimeTravelMode:o,timeTravelTimestamp:a,timeTravelError:i,isTextToSqlPopupOpen:c},actions:{onChangeDatabase:l,onChangeEndpointId:d,onChangeIsTimeTravelMode:u,onChangeTimeTravelTimestamp:h,onChangeTextToSqlPopup:p}}=Us(),{project:g,projectId:_}=O(),{trackUiInteraction:x}=k(),j=m.useCallback(()=>{u(!o),x(o?"playground_time_travel_mode_off":"playground_time_travel_mode_on")},[o,u,x]),b=m.useCallback(N=>{const D=typeof N=="string"?d1(uo(N),uo(ve.Full),!0):N;h(D.toDate())},[h]),f=c0(g),{selectOptions:y}=un(),[v,w]=Bc(),S=m.useMemo(()=>v?y.find(N=>N.value===v):void 0,[y,v]);m.useEffect(()=>{S&&S!==s&&l(S)},[s,l,S]);const I=ee("text_to_sql");return e.jsxs("div",{className:ir.root,children:[e.jsxs("div",{className:ir.main,children:[e.jsxs("div",{className:ir.title,children:[e.jsx("div",{children:t||"Untitled"}),t&&n&&e.jsx("span",{className:ir.notSaved,children:"*"})]}),e.jsx(gxe,{})]}),e.jsxs("div",{className:ir.opts,children:[e.jsx(im,{id:"endpoint",size:"s",disabled:o,endpointId:r,projectId:_,onChange:N=>{N&&d(N.id)},containerClassName:ir.bigSelect,popoverMaxWidth:350}),e.jsx(fb,{id:"database",size:"s",value:S,canCreateDatabase:!1,onChange:N=>{w((N==null?void 0:N.value)??void 0)},containerClassName:ir.smallSelect,popoverMaxWidth:300}),e.jsx(WC,{placement:"bottom right",trigger:e.jsx(P,{appearance:i===null?"secondary":"error",icon:"time","aria-label":"time travel menu",onClick:()=>{p(!1)}}),content:e.jsxs(e.Fragment,{children:[e.jsx(hn,{isSelected:o,onChange:j,children:"Time Travel Enabled"}),e.jsx(R,{"aria-label":"Time Travel Timestamp",className:ir.datePicker,error:i==null?void 0:i.message,children:e.jsx(u1,{value:a,size:"s",disabled:!o,showTimezone:!0,onChange:b,isValidDate:f,dateFormat:uo(ve.Date),timeFormat:uo(ve.TimeFull)})})]})}),I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ir.divider}),e.jsx(Z,{content:e.jsxs("span",{children:["Generate SQL",e.jsx("br",{}),rS.isMacOs?"⌘":"Ctrl","+Shift+M"]}),children:e.jsx(P,{appearance:"secondary",active:c,icon:"pgvector",onClick:()=>{x("playground_text_to_sql_button_clicked"),p(!c)}})})]})]})]})},Pw={alertText:"This account has reached its compute limit for this month. Upgrade to continue using SQL editor.",upgradeButton:"Upgrade plan"},kxe="_alertWrapper_1gwai_1",Ixe={alertWrapper:kxe};function Pxe(t){switch(t){case"compute_time":return gt.ComputeSizeLimitReached;case"data_transfer":return gt.Default}}const Txe=({overLimitMetric:t})=>{const[s,n]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Pt,{type:Pxe(t),isOpen:s,onRequestClose:()=>{n(!1)}}),e.jsx("div",{className:Ixe.alertWrapper,children:e.jsx(Q,{appearance:"warning",action:e.jsx(A,{noWrap:!0,onClick:()=>{n(!0)},children:Pw.upgradeButton}),children:Pw.alertText})})]})},Nxe="_history_1h7fh_1",Axe="_historyRecord_1h7fh_8",Exe="_selected_1h7fh_18",$xe="_recordName_1h7fh_25",Oxe="_recordNameGenerated_1h7fh_34",Rxe="_recordTooltipContent_1h7fh_47",Bxe="_recordTime_1h7fh_58",Lxe="_placeholder_1h7fh_72",pr={history:Nxe,historyRecord:Axe,selected:Exe,recordName:$xe,recordNameGenerated:Oxe,recordTooltipContent:Rxe,recordTime:Bxe,placeholder:Lxe},Dxe=({disabled:t})=>{const{state:{queriesHistory:s},actions:{onChangeQuery:n,selectQuery:r}}=Us(),{trackUiInteraction:o}=k(),a=ee("query_name_generation"),[i,c]=m.useState(null),l=m.useCallback(async d=>{await r(null)&&(c(d.id??0),n(d.query??""))},[n,r]);return e.jsx(e.Fragment,{children:(s==null?void 0:s.length)===0?e.jsx("div",{className:pr.placeholder,children:e.jsx(Wd,{iconName:"empty_history",size:"s",iconSize:48,title:"Your history is empty",muted:t})}):s==null?void 0:s.map(d=>e.jsx(Z,{content:e.jsx("div",{className:pr.recordTooltipContent,children:d.query}),placement:"right",disabled:!a||t,children:e.jsxs("div",{role:"button",tabIndex:0,className:M(pr.historyRecord,{[pr.selected]:d.id===i}),"aria-disabled":t,onClick:()=>{t||(l(d),o("playground_history_select"))},onKeyDown:u=>{t||u.key==="Enter"&&(l(d),o("playground_history_select",{keyboard:!0}))},children:[a?e.jsx("div",{className:pr.recordNameGenerated,children:d.name||d.query}):e.jsx("div",{className:pr.recordName,children:d.query}),e.jsx("div",{className:pr.recordTime,children:_t(d.created_at).format("MMM D, YYYY - h:mma")})]})},d.id))})},VP=m.memo(({disabled:t})=>{const{state:{queriesHistory:s}}=Us();return e.jsx("div",{className:pr.history,children:s?e.jsx(Dxe,{disabled:t}):br(3,n=>e.jsxs("div",{role:"button",className:pr.historyRecord,children:[e.jsx($,{style:{width:200,height:20}}),e.jsx("div",{style:{height:10}}),e.jsx($,{style:{width:100,height:20}})]},n))})});VP.displayName="QueryHistory";const Mxe="_root_166gv_1",Uxe="_item_166gv_6",Fxe="_active_166gv_18",qxe="_itemName_166gv_30",zxe="_placeholder_166gv_35",Ti={root:Mxe,item:Uxe,active:Fxe,delete:"_delete_166gv_26",itemName:qxe,placeholder:zxe},WP=m.memo(({disabled:t})=>{const{state:{queriesSaved:s,selectedQueryName:n},actions:{selectQuery:r,deleteSavedQuery:o,renameQuery:a}}=Us(),{trackUiInteraction:i}=k(),c=m.useCallback(h=>{o(h),i("playground_saved_delete")},[o,i]),[l,d]=m.useState(),u=m.useCallback(h=>a((l==null?void 0:l.id)??0,h).then(()=>d(void 0)).catch(H),[a,l]);return e.jsxs("div",{className:Ti.root,children:[e.jsx(HP,{isOpen:!!l,onClose:()=>d(void 0),onSaveQuery:u,proposedName:(l==null?void 0:l.name)??""},l==null?void 0:l.id),(s==null?void 0:s.length)===0?e.jsx("div",{className:Ti.placeholder,children:e.jsx(Wd,{iconName:"empty_saved",size:"s",iconSize:53,title:"You have no saved queries now"})}):s==null?void 0:s.map(h=>e.jsxs("div",{role:"button",onKeyPress:p=>{p.key==="Enter"&&r(h.name??"")},tabIndex:0,className:M({[Ti.item]:!0,[Ti.active]:h.name===n}),"aria-disabled":t,onClick:()=>{t||r(h.name??"")},children:[e.jsx("span",{className:Ti.itemName,title:h.name,children:h.name}),!t&&e.jsx("span",{children:e.jsxs(Jf,{triggerElement:({onClick:p,ref:g})=>e.jsx(L,{ref:g,onClick:p,name:"actions",size:16}),children:[e.jsx(_o,{as:"button",onClick:()=>d(h),children:"Rename"}),e.jsx(_o,{as:"button",className:Ti.delete,onClick:()=>c(h.id??0),children:"Delete"})]})})]},h.id))]})});WP.displayName="QueriesSaved";const Hxe="_root_k1th2_1",Vxe="_header_k1th2_11",Wxe="_newQuery_k1th2_15",Gxe="_actions_k1th2_19",Kxe="_body_k1th2_25",Dl={root:Hxe,header:Vxe,newQuery:Wxe,actions:Gxe,body:Kxe},Qxe=()=>new URL(window.location.href).searchParams.get("query")?"saved":"history",GP=m.memo(({disabled:t})=>{const[s,n]=m.useState(Qxe),{trackUiInteraction:r}=k(),{actions:{onChangeQuery:o,selectQuery:a}}=Us(),i=m.useCallback(()=>{o(""),a(null)},[o,a]);return e.jsxs("div",{className:Dl.root,children:[e.jsx("div",{className:Dl.header,children:e.jsx(eu,{title:"SQL Editor",actions:e.jsx("div",{className:Dl.newQuery,children:e.jsx(P,{wide:!0,appearance:"secondary",icon:"add",disabled:t,onClick:i,size:"s","aria-label":"New Query"})})})}),e.jsx("div",{className:Dl.actions,children:e.jsxs(Da,{children:[e.jsx(as,{active:s==="saved",disabled:t,onClick:()=>{n("saved"),r("playground_tab_saved")},children:"Saved"}),e.jsx(as,{active:s==="history",disabled:t,onClick:()=>{n("history"),r("playground_tab_history")},children:"History"})]})}),e.jsxs("div",{className:Dl.body,children:[s==="saved"&&e.jsx(WP,{disabled:t}),s==="history"&&e.jsx(VP,{disabled:t})]})]})});GP.displayName="QuerySidebar";const Yxe={timeTravelMode:t=>`You are viewing data as it existed on ${le(t,ve.Full)}`},Jxe=()=>{const{state:{isTimeTravelMode:t,timeTravelTimestamp:s}}=Us();return t?e.jsx(FC,{"data-qa":"time-travel-banner",appearance:"blue",icon:"info_italic",description:Yxe.timeTravelMode(s),actions:[]}):null},fo={branchWarmup:{title:"Warming up",description:"This table's branch is being unarchived, during which query and modification response times may be slow."},branchArchived:{title:"Archived branch",description:"This branch is archived. Querying will unarchive it.",descriptionSlow:"This branch is archived. Querying will unarchive it, during which query response times may be slow."},branchProtected:{title:"Protected branch",description:"This branch is protected. Direct changes can affect production data. Proceed with caution."}},Zxe="_root_uw0u7_1",Xxe="_sidebar_uw0u7_10",eje="_main_uw0u7_19",tje="_alert_uw0u7_27",sje="_handle_uw0u7_33",nje="_partEditor_uw0u7_43",rje="_partResult_uw0u7_48",oje="_serverlessDriver_uw0u7_55",aje="_editor_uw0u7_59",ije="_protectedAlert_uw0u7_64",en={root:Zxe,sidebar:Xxe,main:eje,alert:tje,handle:sje,partEditor:nje,partResult:rje,serverlessDriver:oje,editor:aje,protectedAlert:ije},cje=({branch:t})=>!t||!W1(t)?null:e.jsx(Sb,{title:fo.branchWarmup.title,className:en.alert,children:fo.branchWarmup.description}),lje=({branch:t})=>!t||t.current_state!=="archived"?null:e.jsx(Sb,{title:fo.branchArchived.title,className:en.alert,children:kc(t)?fo.branchArchived.descriptionSlow:fo.branchArchived.description}),dje=({branch:t})=>{const[s,n]=xs(Me.ProtectedAlertController,t.id,{shouldNotShow:!1,expiresAt:0});m.useEffect(()=>{s.expiresAt<Date.now()&&n({shouldNotShow:!1,expiresAt:0})},[s.expiresAt,n]);const r=s.expiresAt>=Date.now()&&s.shouldNotShow;return!t.protected||r?null:e.jsxs("div",{className:en.protectedAlert,title:fo.branchProtected.title,children:[e.jsx(Sb,{type:"warn",title:fo.branchProtected.title,children:fo.branchProtected.description}),e.jsx(P,{appearance:"clear",onClick:()=>{n({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24})},"aria-label":"Close",children:e.jsx(L,{name:"close",size:16})})]})},Ni=8,Tw=62,uje=()=>{var y;const{branch:t}=ut(),{state:{result:s,isQueryRunning:n,ipBlocked:r,isDisabled:o,isQueryErrorFixPending:a,overLimitMetric:i},editorRef:c,actions:l}=Us(),[d,u]=m.useState(0),[h,p]=m.useState(0),[g,_]=m.useState([800,800]),x=m.useRef(null),j=(v,{size:w})=>{p(w.height)},b=m.useMemo(()=>KA(300,()=>{x.current&&_([x.current.offsetWidth-200,x.current.offsetHeight-200])}),[]);m.useEffect(()=>{x.current&&(u(Math.floor((x.current.offsetWidth+Ni)/2)),p(Math.floor((x.current.offsetHeight+Ni)/2.75)),_([x.current.offsetWidth-200,x.current.offsetHeight-200]))},[]),m.useEffect(()=>(window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}),[b]);let f={height:`calc(100% - ${h}px)`,width:"100%"};return x.current&&(f={height:`${((y=x.current)==null?void 0:y.offsetHeight)-h-Tw+Ni/2}px`,width:"100%"}),e.jsxs("div",{className:en.root,ref:x,children:[r&&e.jsx(ix,{}),e.jsx("div",{className:en.sidebar,children:e.jsx(GP,{})}),e.jsxs("div",{className:en.main,children:[e.jsx(Cxe,{}),t&&e.jsx(dje,{branch:t}),e.jsx(cje,{branch:t}),e.jsx(lje,{branch:t}),h&&d?e.jsx(Rbe.Resizable,{height:h,width:d,axis:"y",onResize:j,minConstraints:[200,200],maxConstraints:g,handle:e.jsx("div",{className:en.handle,style:{minWidth:`${Ni}px`,minHeight:`${Ni}px`}}),children:e.jsxs("div",{className:en.partEditor,style:{height:`${h}px`,width:"100%"},children:[e.jsx("div",{className:en.editor,children:e.jsx(zP,{ref:c,size:{height:`${h-Ni/2-Tw}px`}})}),e.jsx(nxe,{})]})}):e.jsx("div",{}),e.jsx("div",{className:M(en.partResult,en.serverlessDriver),style:f,children:i?e.jsx(Txe,{overLimitMetric:i}):e.jsxs(e.Fragment,{children:[s!=null&&e.jsx(Jxe,{}),e.jsx(d0,{result:s,isQueryRunning:n,queryRunError:{fixError:l.queryFixError,fixErrorCancel:l.queryFixErrorCancel,isFixDisabled:o,isFixPending:a}})]})})]})]})},hje=t=>{const{state:{credentials:s},actions:{onChangeCredentials:n}}=Us(),{selectOptions:r,isLoading:o}=Ua(),a=zn({mode:"onChange",defaultValues:{user:s==null?void 0:s.user,password:""}}),i=d=>{n(d),t.onSubmit()},c=()=>{n(),t.onSubmit()},l=d=>{if(!d.user||!d.user.name){c();return}i(d)};return e.jsxs(Lt,{className:"QueryRoleForm",onSubmit:a.handleSubmit(l),actions:e.jsxs(e.Fragment,{children:[e.jsx(P,{appearance:"secondary",size:"l",onClick:c,children:"Use default"}),e.jsx(P,{type:"submit",size:"l",children:"Ok"})]}),children:[e.jsx(R,{id:"user_",children:e.jsx(me,{name:"user",control:a.control,render:({field:d})=>e.jsx(Pa,{...d,value:d.value?r.find(u=>u.value===d.value.name):void 0,onChange:u=>{if(!u){d.onChange(void 0);return}d.onChange(r.find(h=>h.value===u.value))},loading:o,options:r})})}),e.jsx(R,{id:"password",children:e.jsx(ne,{placeholder:"Password",type:"password",...a.register("password")})})]})},KP=m.memo(()=>{const[t,s]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{isOpen:t,onRequestClose:()=>s(!1),title:"Set role",children:e.jsx(be,{children:e.jsx(hje,{onSubmit:()=>s(!1)})})}),e.jsx("div",{className:xw.root,children:e.jsx("div",{className:xw.body,children:e.jsx(uje,{})})})]})});KP.displayName="QueryLayout";const QP=m.memo(()=>{const{isLoading:t,projectId:s}=O();return t?e.jsx(pe,{}):e.jsx(mS,{children:e.jsxs(hS,{children:[e.jsx(KP,{}),e.jsx(ix,{})]})},s)});QP.displayName="Query";const Ct={pageHeader:"Personal information",firstNameLabel:"First name",lastNameLabel:"Last name",nameFormSubmitButton:"Save",nameFormSubmitToast:"User data was successfully updated!",emailLabel:"Email",changeEmailLabel:"Change email",socialAccountsHeader:"Sign-in methods",unlinkProviderConfirmationText:t=>`Are you sure you want to unlink ${t} from your account?`,unlinkProviderConfirmationTitle:"Unlink social account",unlinkProviderConfirmationOk:"Yes, proceed",unlinkProviderSuccessToast:t=>`Successfully unlinked ${t} from your account`},pje="_nameFields_1kik0_1",mje="_emailLabelWrapper_1kik0_10",gje="_providersTitle_1kik0_15",_je="_providerCard_1kik0_19",fje="_providers_1kik0_15",bje="_providerText_1kik0_37",xje="_formBody_1kik0_41",Zr={nameFields:pje,emailLabelWrapper:mje,providersTitle:gje,providerCard:_je,providers:fje,providerText:bje,formBody:xje},jje=()=>{var a,i,c;const{data:t}=rt(),s=xe({mode:"onChange",defaultValues:{id:t==null?void 0:t.id,first_name:(t==null?void 0:t.firstName)??"",last_name:(t==null?void 0:t.lastName)??"",email:t==null?void 0:t.email}}),{formState:n,register:r}=s,o=m.useCallback(l=>q.updateUser(l).then(()=>{s.reset(l),Te(e.jsx(Fe,{children:Ct.nameFormSubmitToast}))}).catch(H),[s]);return e.jsx(Ae,{id:"profile",children:e.jsx(us,{...s,children:e.jsx(Lt,{onSubmit:s.handleSubmit(o),children:e.jsxs(Pe,{children:[e.jsx(fe,{children:Ct.pageHeader}),e.jsx("div",{children:e.jsxs("div",{className:Zr.nameFields,children:[e.jsx(R,{error:(a=n.errors.first_name)==null?void 0:a.message,label:Ct.firstNameLabel,children:e.jsx(ne,{...r("first_name",{required:{value:!0,message:"This field is required"}})})}),e.jsx(R,{error:(i=n.errors.last_name)==null?void 0:i.message,label:Ct.lastNameLabel,children:e.jsx(ne,{...r("last_name",{required:{value:!0,message:"This field is required"}})})})]})}),e.jsx("div",{children:e.jsxs(R,{error:(c=n.errors.email)==null?void 0:c.message,children:[e.jsx(Ap,{children:Ct.emailLabel}),e.jsx(ne,{...r("email",{required:{value:!0,message:"This field is required"}}),disabled:!0})]})}),e.jsx(Ss,{children:e.jsx(P,{type:"submit",disabled:n.isSubmitting||!n.isDirty,children:Ct.nameFormSubmitButton})})]})})})})},gr={changeEmailInstructions:"Enter your new email address below. We'll send a verification link to this address.",changeEmailWarning:t=>`Important: Changing your email will unlink your account from ${t}. You can only use this new email to sign in going forward.`,changeEmailToast:"Check your email inbox to confirm the email change!",changeEmailPasswordInstructions:"You need to set a password for your new email address.",newEmailLabel:"New email",newEmailConfirmationLabel:"Confirm new email address",newEmailMatchingError:"Email confirmation should match",modalTitle:t=>t===1?"Set email":"Set password",changeEmailSubmit:t=>t?"Submit":"Next"},yje="_text_f98al_1",vje="_formBody_f98al_8",Nw={text:yje,formBody:vje},jd={newPasswordLabel:"New password",newPasswordConfirmationLabel:"Confirm new password",newPasswordMatchingError:"Password confirmation should match",modalTitle:"Set password",changePasswordInstructions:"You need to set a password before unlinking your social provider."},wje="_formBody_ku1q6_1",Sje={formBody:wje},YP=({form:t,onSubmit:s,infoMessage:n})=>{var o,a;const r=t.watch("new_password");return e.jsxs(It,{providerProps:t,onSubmit:s,children:[e.jsxs(gc,{className:Sje.formBody,children:[e.jsx(T,{children:n}),e.jsx(R,{id:"new_password",label:jd.newPasswordLabel,error:(o=t.formState.errors.new_password)==null?void 0:o.message,children:e.jsx(td,{name:"new_password",autoComplete:"new-password",registerProps:{deps:"password_confirmation"},applyConstraints:!0,tooltipPlacement:"auto",autoFocus:!0})}),e.jsx(R,{id:"new_password_confirmation",label:jd.newPasswordConfirmationLabel,error:(a=t.formState.errors.new_password_confirmation)==null?void 0:a.message,children:e.jsx(td,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:i=>i===r||jd.newPasswordMatchingError}})})]}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{})]})]})},Cje=t=>{const{id:s}=wp(QA),n=xe({defaultValues:{id:s}}),r=o=>q.updateUser(o).then(()=>{var a;(a=t.onSuccess)==null||a.call(t)}).catch(H);return e.jsx(e.Fragment,{children:e.jsx(mc,{...t,isOpen:!0,title:jd.modalTitle,children:e.jsx(YP,{onSubmit:r,form:n,infoMessage:jd.changePasswordInstructions})})})},kje=({form:t,onSubmit:s,isFinal:n,userAuthAccounts:r})=>{var i,c;const o=t.watch("email"),a=new Intl.ListFormat().format(r.filter(l=>l!=="keycloak").map(l=>Iq[l]));return e.jsx(us,{...t,children:e.jsxs(Lt,{onSubmit:t.handleSubmit(s),children:[e.jsxs(gc,{className:Nw.formBody,children:[e.jsxs("div",{className:Nw.text,children:[e.jsx(T,{children:gr.changeEmailInstructions}),a.length>0&&e.jsx(Q,{children:gr.changeEmailWarning(a)})]}),e.jsx(R,{label:gr.newEmailLabel,error:(i=t.formState.errors.email)==null?void 0:i.message,children:e.jsx(ne,{autoFocus:!0,autoComplete:"email",...t.register("email",{required:{value:!0,message:"This field is required"},deps:"email_confirmation"}),"data-qa":"new_email_change"})}),e.jsx(R,{label:gr.newEmailConfirmationLabel,error:(c=t.formState.errors.email_confirmation)==null?void 0:c.message,children:e.jsx(ne,{autoComplete:"email",...t.register("email_confirmation",{validate:l=>l===o||gr.newEmailMatchingError}),"data-qa":"new_email_change_confirm"})})]}),e.jsxs(ge,{children:[e.jsx(_c,{}),e.jsx(_e,{children:gr.changeEmailSubmit(n)})]})]})})},Ije=t=>{const{data:s}=rt(),n=xe({defaultValues:{id:s==null?void 0:s.id}}),r=xe({defaultValues:{id:s==null?void 0:s.id}}),[o,a]=m.useState(1),i=t.userHasPassword?1:2,c=async()=>Promise.resolve(a(d=>d+1)),l=()=>{const d={...n.getValues(),...r.getValues()};return q.updateUser({id:d.id,email:d.email,new_password:d.new_password}).then(()=>{Te(e.jsx(Fe,{children:gr.changeEmailToast})),t.onSuccess()}).catch(H)};return e.jsx(e.Fragment,{children:e.jsxs(mc,{...t,isOpen:!0,title:gr.modalTitle(o),children:[o===1&&e.jsx(kje,{onSubmit:i>1?c:l,isFinal:i===1,form:n,userAuthAccounts:t.userAuthAccounts}),o===2&&e.jsx(YP,{onSubmit:l,form:r,infoMessage:gr.changeEmailPasswordInstructions})]})})},Pje=({isInitialized:t,userHasPassword:s,userLinkedAccounts:n,invalidate:r})=>{var v,w;const{trackUiInteraction:o}=k(),{data:a,isLoading:i,invalidate:c}=rt(),l=xe({defaultValues:{id:a==null?void 0:a.id,first_name:(a==null?void 0:a.firstName)??"",last_name:(a==null?void 0:a.lastName)??"",email:a==null?void 0:a.email}}),{formState:d,register:u}=l,h=m.useCallback(S=>q.updateUser({id:S.id,first_name:S.first_name,last_name:S.last_name}).then(()=>{c(),l.reset(S),Te(e.jsx(Fe,{children:Ct.nameFormSubmitToast}))}).catch(H),[l,c]),p=m.useMemo(()=>n??[],[n]),g=m.useCallback(S=>{q.detachSocialLink({provider:S.provider}).then(()=>{r(),Te(e.jsx(Fe,{children:Ct.unlinkProviderSuccessToast(S.provider_display_name)}))},H)},[r]),_=Ve(De.ChangePassword,!1),[x,j]=m.useState(),{confirm:b}=Oe(),f=m.useCallback(S=>{b({text:Ct.unlinkProviderConfirmationText(S.provider_display_name),header:Ct.unlinkProviderConfirmationTitle,confirmButtonText:Ct.unlinkProviderConfirmationOk}).then(I=>{if(!I){o("user_profile_detach_social_link_dismissed");return}o("user_profile_detach_social_link_confirmed"),s||p.length>1?g(S):(j(S),_.openModal())})},[b,g,s,p.length,_,o]),y=Ve(De.ChangeEmail);return i?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[y.isModalOpen&&e.jsx(Ije,{onRequestClose:()=>{o("user_profile_change_email_modal_dismissed"),y.closeModal()},onSuccess:()=>{o("user_profile_change_email_modal_confirmed"),y.closeModal()},userHasPassword:s,userAuthAccounts:p.map(({provider:S})=>S)??[]}),_.isModalOpen&&e.jsx(Cje,{onRequestClose:()=>{o("user_profile_password_modal_dismissed"),_.closeModal()},onSuccess:()=>{o("user_profile_password_modal_confirmed"),_.closeModal(),g(x)}}),e.jsxs(Ae,{id:"profile",children:[e.jsxs(Pe,{children:[e.jsx(fe,{children:Ct.pageHeader}),e.jsxs(It,{providerProps:l,onSubmit:h,formBodyClassName:Zr.formBody,children:[e.jsxs("div",{className:Zr.nameFields,children:[e.jsx(R,{error:(v=d.errors.first_name)==null?void 0:v.message,label:Ct.firstNameLabel,children:e.jsx(ne,{...u("first_name",{required:{value:!0,message:"This field is required"}})})}),e.jsx(R,{error:(w=d.errors.last_name)==null?void 0:w.message,label:Ct.lastNameLabel,children:e.jsx(ne,{...u("last_name",{required:{value:!0,message:"This field is required"}})})})]}),e.jsx("div",{children:e.jsx(P,{type:"submit",disabled:!t||d.isSubmitting||!d.isDirty,"data-qa":"save_name",children:Ct.nameFormSubmitButton})})]})]}),e.jsx(Pe,{children:e.jsxs(R,{"aria-label":Ct.emailLabel,children:[e.jsxs("div",{className:Zr.emailLabelWrapper,children:[e.jsx(Ap,{children:Ct.emailLabel}),e.jsx(A,{disabled:!t,onClick:()=>{o("user_profile_change_email_clicked"),y.openModal()},children:Ct.changeEmailLabel})]}),e.jsx(ne,{...u("email"),disabled:!0})]})}),p.length>0&&e.jsxs("div",{children:[e.jsx(z,{level:3,className:Zr.providersTitle,children:Ct.socialAccountsHeader}),e.jsx(Pe,{children:e.jsx("div",{className:Zr.providers,children:p.map(S=>e.jsxs("div",{className:Zr.providerCard,children:[kT(S.provider)&&e.jsx(L,{name:S.provider,size:20}),e.jsxs("div",{className:Zr.providerText,children:[S.provider==="github"?"@":"",S.username]}),e.jsx(kr,{iconName:"close",iconSize:16,disabled:S.provider==="vercelmp",onClick:()=>{o("user_profile_detach_social_link_clicked"),f(S)}})]},S.provider))})})]})]})]})},Tje=()=>{const{isKeycloakUser:t,...s}=u0();return t?e.jsx(Pje,{...s}):e.jsx(jje,{})},Nje=()=>{const t=m.useCallback(async()=>q.getUserDeletionChecklist(),[]),{data:s,isLoading:n}=ES(t),r=m.useMemo(()=>s==null?void 0:s.data.conditions.map(o=>({name:o.name,satisfied:o.expected===o.actual,expected:o.expected,actual:o.actual})),[s]);return{isLoading:n,conditions:r}},Ml={title:"Delete account",confirmationButtonText:"Delete account",disclaimer:e.jsxs(e.Fragment,{children:[e.jsx(T,{bold:!0,children:"This action will immediately deactivate your account."}),e.jsx(T,{children:"After 30 days, this account will be permanently deleted."})]}),emailLabel:e.jsxs(T,{children:["Enter ",e.jsx("strong",{children:"your account email"})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},Aje=({onSuccess:t,onRequestClose:s})=>{var a;const{data:n}=rt(),r=xe(),o=async i=>{try{await q.deleteUser(),t==null||t(i)}catch(c){H(c)}};return e.jsxs(ws,{providerProps:r,onSubmit:o,modalProps:{title:Ml.title,isOpen:!0,onRequestClose:s,width:650},children:[e.jsxs(be,{gaps:!0,children:[e.jsx(Q,{appearance:"warning",children:Ml.disclaimer}),e.jsx(R,{label:Ml.emailLabel,error:(a=r.formState.errors.email)==null?void 0:a.message,children:e.jsx(ne,{...r.register("email",{validate:i=>i===(n==null?void 0:n.email)||Ml.validationText})})})]}),e.jsxs(ge,{children:[e.jsx(Ds,{}),e.jsx(_e,{appearance:"error",children:Ml.confirmationButtonText})]})]})},Eje={project_count:(t,s)=>e.jsxs(e.Fragment,{children:["Delete all your personal"," ",t.satisfied?"projects":e.jsx(A,{href:F(C.ProjectsList),onClick:s,children:"projects"})]}),subscription_type:(t,s)=>e.jsxs(e.Fragment,{children:["Downgrade your"," ",t.satisfied?"account":e.jsx(A,{href:F(C.UserBilling),onClick:s,children:"account"})]}),org_admin_membership_count:()=>e.jsx(e.Fragment,{children:"Leave all organizations"})},Ul={title:"Delete account",unsatisfiedInfo:"Before you can delete your account, you need to:",satisfiedInfo:"This account is ready to be deleted. You've already completed the following actions.",deleteButtonText:"Delete account",conditionText:(t,s)=>Eje[t.name](t,s)},$je="_conditions_z9wqr_1",Oje="_condition_z9wqr_1",Aw={conditions:$je,condition:Oje},Rje={project_count:"user_profile_delete_project_count_link_clicked",org_admin_membership_count:"user_profile_delete_org_admin_membership_count_link_clicked",subscription_type:"user_profile_delete_subscription_type_link_clicked"},Bje=()=>{const t=Ve(De.DeleteUser),s=xe(),n=()=>{t.openModal()},{trackUiInteraction:r}=k(),{isLoading:o,conditions:a}=Nje();if(o||!a)return null;const i=a.every(c=>c.satisfied);return e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(Aje,{onSuccess:()=>{r("user_profile_delete_modal_confirmed"),m1().then(()=>qf())},onRequestClose:()=>{r("user_profile_delete_modal_dismissed"),t.closeModal()}}),e.jsx(Ae,{id:"delete",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:Ul.title}),e.jsxs(It,{gaps:!0,providerProps:s,onSubmit:n,children:[e.jsx(T,{appearance:"secondary",children:i?Ul.satisfiedInfo:Ul.unsatisfiedInfo}),e.jsx("div",{className:Aw.conditions,children:a.map(c=>e.jsxs("div",{className:Aw.condition,children:[e.jsx(L,{name:c.satisfied?"success":"done",size:20}),e.jsx(T,{children:Ul.conditionText(c,()=>r(Rje[c.name]))})]},c.name))}),e.jsx(Ss,{children:e.jsx(_e,{appearance:"error",disabled:!i,onClick:()=>{r("user_profile_delete_submitted")},children:Ul.deleteButtonText})})]})]})})]})},Lje="_channel_40sxr_1",Dje="_joined_40sxr_5",Ew={channel:Lje,joined:Dje},sa={title:"Early access",subtitle:t=>`Join the early access program to preview upcoming features for ${t}'s projects. You can opt out anytime.`,benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:t=>e.jsxs("div",{className:Ew.joined,children:[e.jsxs(T,{children:["Thank you for being an early access member! ",e.jsx("b",{children:t}),"'s projects have exclusive access to upcoming features."]}),e.jsxs(T,{children:["Get support and share feedback in our"," ",e.jsx(A,{href:Qh,openInNewTab:!0,children:"Discord community"}),"."]}),e.jsx(T,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:e.jsxs(e.Fragment,{children:["Share feedback directly with our team. Join our"," ",e.jsx(A,{href:Qh,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",e.jsx("b",{className:Ew.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the early access program!",submitJoin:"Join early access"},Mje="_formBody_6f5xe_1",Uje="_joinMessage_6f5xe_7",$w={formBody:Mje,joinMessage:Uje},Fje=()=>{const{data:t}=rt(),s=Hf("beta_program"),{trackUiInteraction:n}=k(),r=xe(),o=m.useCallback(async()=>{try{n("user_profile_early_access_joined"),await q.joinUserEarlyAccess(),re(sa.successJoin),setTimeout(()=>{window.location.reload()},3e3)}catch(a){H(a)}},[n]);return t===void 0?null:e.jsx(Ae,{id:"early-access",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:sa.title}),e.jsx(It,{providerProps:r,onSubmit:o,formBodyClassName:$w.formBody,children:s?e.jsx("div",{children:sa.alreadyIn(t.displayName)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(z,{level:5,children:sa.subtitle(t.displayName)}),e.jsx("ul",{children:sa.benefits.map(a=>e.jsx("li",{children:a},a))})]}),e.jsx("div",{children:e.jsx(T,{className:$w.joinMessage,children:sa.joinDiscord})}),e.jsx(Ss,{children:e.jsx(_e,{children:sa.submitJoin})})]})})]})})},qje="_formBody_ku1q6_1",zje={formBody:qje},Hje=()=>{var h,p;const{userHasPassword:t,isInitialized:s,invalidate:n,isError:r}=u0(),{data:o}=rt(),a=xe({defaultValues:{id:o==null?void 0:o.id,password:"",new_password:"",new_password_confirmation:""}}),{watch:i,formState:c,reset:l}=a,d=i("new_password"),u=m.useCallback(async({id:g,password:_,new_password:x})=>{var j;try{await q.updateUser({id:g,password:_,new_password:x}),Te(e.jsx(Fe,{children:"Password updated"})),n(),l()}catch(b){bc(b)&&((j=b.response)==null?void 0:j.status)===404?Te(e.jsx(fc,{children:"Current password is not correct"})):H(b)}},[l,n]);return r?e.jsx(is,{}):s?e.jsx(Ae,{id:"password",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:t?"Change password":"Set password"}),e.jsxs(It,{providerProps:a,className:zje.formBody,onSubmit:u,gaps:!0,children:[t&&e.jsx(R,{id:"password",label:"Current password",children:e.jsx(td,{name:"password",autoFocus:!0,autoComplete:"current-password"})}),e.jsx(R,{error:(h=c.errors.new_password)==null?void 0:h.message,label:t?"New password":"Password",id:"new_password",children:e.jsx(td,{name:"new_password",applyConstraints:!0,autoComplete:"new-password",registerProps:{deps:"new_password_confirmation"}})}),e.jsx(R,{error:(p=c.errors.new_password_confirmation)==null?void 0:p.message,label:`Confirm ${t?"new":""} password`,id:"new_password_confirmation",children:e.jsx(td,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:g=>g===d||"Password confirmation should match"}})}),e.jsx(Ss,{children:e.jsx(P,{type:"submit",disabled:!s||c.isSubmitting||!c.isDirty||Object.keys(c.errors).length>0,"data-qa":"save_password",children:t?"Update password":"Set password"})})]})]})}):e.jsx(pe,{})},S_={title:"Referral program",referralCode:t=>e.jsxs(e.Fragment,{children:["Your referral link:"," ",e.jsxs(A,{href:`${Wh}?refcode=${t}`,openInNewTab:!0,children:[Wh,"?refcode=",t]})]}),errorText:t=>e.jsxs(e.Fragment,{children:["Something went wrong. ",t.message]})},Vje=()=>{const[t,s]=m.useState({type:"idle"});return m.useEffect(()=>{(async()=>{s({type:"loading"});try{const{data:n}=await q.getCurrentUserRefCode();s({type:"loaded",referralCode:n.ref_code})}catch(n){s({type:"error",error:n instanceof Error?n:new Error(String(n))})}})()},[]),e.jsx(Ae,{id:"referral",children:e.jsxs(Pe,{children:[e.jsx(fe,{children:S_.title}),(()=>{switch(t.type){case"idle":case"loading":return e.jsx("div",{children:e.jsx(Bt,{})});case"loaded":return e.jsx("p",{children:S_.referralCode(t.referralCode)});case"error":return e.jsx("p",{children:S_.errorText(t.error)})}})()]})})},C_={title:"Create an organization to keep building with Neon",subtitle:"You need an organization to create and manage projects.",createOrgLabel:"Create organization"},Wje="_alert_z4i39_1",Gje={alert:Wje},Kje=()=>{const t=Ve(De.CreateOrg),{data:s}=Nr();return s===void 0||s.length>0?null:e.jsxs(e.Fragment,{children:[t.isModalOpen&&e.jsx(Tb,{onRequestClose:()=>{t.closeModal()}}),e.jsx(Q,{appearance:"info",className:Gje.alert,title:C_.title,action:e.jsx(A,{onClick:()=>{t.openModal()},children:C_.createOrgLabel}),children:C_.subtitle})]})},Qje=()=>{const t=ee("referral_codes"),{isKeycloakUser:s}=m.useContext(Wp),{data:n}=rt(),r=Ar(n);return e.jsxs(e.Fragment,{children:[r&&e.jsx(Kje,{}),e.jsx(Tje,{}),s&&e.jsx(Hje,{}),e.jsx(UI,{}),!r&&e.jsx(Fje,{}),t&&e.jsx(Vje,{}),e.jsx(Bje,{})]})},Yje=1024,JP=()=>e.jsx(wne,{title:"Get started with Neon",onStartAnalyticEvent:"onboarding_flow_started",onDoneAnalyticEvent:"onboarding_flow_done",shouldShowGlobe:()=>window.innerWidth>=Yje}),Jje=()=>{const{data:t}=vs(),{data:s}=cb();return e.jsx(e.Fragment,{children:(!!(t!=null&&t.length)||!!(s!=null&&s.length))&&e.jsx(vse,{})})},Ow={type:"toc",items:[{id:"profile",label:"Profile"},{id:"password",label:"Password"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},{id:"referral",label:"Referral code"},{id:"delete",label:"Delete account"}]},Zje={type:"toc",items:[{id:"general",label:"General"},{id:"compute",label:"Compute"},{id:"storage",label:"Instant restore"},{id:"update-schedule",label:"Updates"},{id:"sharing",label:"Collaborators"},{id:"network-security",label:"Network Security"},{id:"rls",label:"RLS"},{id:"out-replication",label:"Logical Replication"},{id:"transfer",label:"Transfer"},{id:"delete",label:"Delete"}]},Xje={type:"toc",items:[{id:"github",label:"GitHub"},{id:"vercel",label:"Vercel"}]},eye=({isReferralCodesEnabled:t,isKeycloakUser:s,userIsOrgBased:n})=>({...Ow,items:Ow.items.filter(r=>{switch(r.id){case"referral":return t;case"password":return s;case"early-access":return!n;default:return!0}})}),tye=({isVercelOrg:t,isFreeSubscription:s,orgHasCollaborators:n})=>({type:"toc",items:vt([{id:"members",label:"Members"},!t&&{id:"pending",label:"Pending invites"},!s&&n&&{id:"collaborators",label:"Collaborators"}])}),sye=({isVercelOrg:t})=>({type:"toc",items:vt([{id:"general",label:"General information"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},{id:"private-networking",label:"Private Networking"},!t&&{id:"transfer",label:"Transfer projects"},{id:"delete",label:"Delete organization"}])}),Rw=({billingSections:t})=>({type:"toc",items:t.map(({id:s,name:n})=>({id:s,label:n}))}),nye=({isVercelOrg:t})=>({type:"toc",items:vt([{id:"github",label:"GitHub"},!t&&{id:"vercel",label:"Vercel"}])}),ZP=()=>{const{data:t}=rt(),s=Ls(),n=aS(t==null?void 0:t.id),{orgId:r,isLoading:o}=Y();m.useEffect(()=>{if(o||t===void 0)return;const a=Ar(t);let i;if(r!==void 0)i={type:"org",id:r};else{if(a)return;i={type:"user"}}US(i,n)||s(fE({lastAccount:i,userId:t.id}))},[o,r,t,n,s])},ur=(t,s={},n)=>{const r=m.memo(o=>{const{params:a}=yc(),i=r0(),c=ee("referral_codes"),{isKeycloakUser:l}=m.useContext(Wp),{data:d}=rt(),u=Ar(d);ZP();const{orgId:h,org:p,isLoading:g,isOrgFetching:_,isVercelOrg:x}=Y(),{isFreeSubscription:j}=ae(),{data:b}=rb(),f=b&&b.length>0;return!g&&h&&!_&&!p?e.jsx(dc,{isError:!0,children:e.jsx(is,{title:`Org ${h} was not found`,imgSrc:sS,actions:e.jsx(P,{as:nS,to:C.Root,size:"l",children:"Back to Console"})})}):e.jsx(dc,{...s,userIsOrgBased:u,secondLevelNav:n==null?void 0:n({billingSections:i,orgId:a.orgId,isReferralCodesEnabled:c,isVercelOrg:x,isKeycloakUser:l,isFreeSubscription:j,orgHasCollaborators:f,userIsOrgBased:u}),children:e.jsx(t,{...o})})});return r.displayName=`withConsoleLayout(${t.displayName})`,r},rye=()=>{const t=Ak();return{type:"toc",items:Object.keys(wa).filter(s=>t[s].length!==0).map(s=>({id:s,label:wa[s]}))}},Qt=(t,s={},n)=>{const r=m.memo(o=>{const{projectId:a,project:i,isLoading:c,error:l}=O(),d=sx("role");ZP();const u=n==null?void 0:n({projectId:a});return!c&&(!i||l)?e.jsx(dc,{isError:!0,children:e.jsx(is,{title:l||"Something went wrong",imgSrc:sS,actions:e.jsx(P,{as:nS,to:C.ProjectsList,size:"l",children:"Back to Project List"})})}):e.jsxs(e.Fragment,{children:[d,e.jsx(dc,{...s,secondLevelNav:u,children:e.jsx(t,{...o})})]})});return r.displayName=`withProjectConsoleLayout(${t.displayName})`,r},XP=m.memo(({children:t})=>e.jsxs(Ai,{children:[t,e.jsx(Be,{component:Mh})]}));XP.displayName="BranchPreviewSwitch";const Bw=ur(d_e,{footer:e.jsx(Jje,{})}),oye=()=>II()?e.jsx(JP,{}):e.jsx(ce,{to:C.ProjectsList}),aye=()=>{const{orgId:t}=wc();return II()?e.jsx(JP,{}):e.jsx(ce,{to:F(C.OrgProjectsList,{orgId:t})})},jt=({path:t,to:s})=>{const{projectId:n}=O(),{defaultBranch:r}=Ye();return e.jsx(Je,{path:t,exact:!0,children:r?e.jsx(ce,{to:F(s,{projectId:n,branchId:r.id})}):null})},iye=Qt(({projectId:t})=>{const{branchId:s,isLoading:n}=ut();return n?e.jsx(pe,{}):e.jsx(ce,{to:s?F(C.ProjectsItemBranchesItem,{projectId:t,branchId:s}):F(C.ProjectsItemBranches,{projectId:t})})}),qe={[C.Claim]:OI,[C.ProjectsItem]:Qt(Nge),[C.ProjectsItemBranchesSQLEditor]:Qt(QP,{contentWidth:"app"}),[C.ProjectsItemDrizzle]:Qt(Rre,{contentWidth:"app"}),[C.ProjectsItemIntegrations]:Qt(Bge,{title:"Integrations",actions:e.jsx(pW,{})},rye),[C.ProjectsItemIdentity]:Qt(Vee,{title:"Identity"}),[C.ProjectsItemBranchesRestore]:Qt(che),[C.ProjectsItemBranchesItemMonitoringMetrics]:Qt(wh(lre,Kl.Metrics)),[C.ProjectsItemBranchesItemMonitoringOperations]:Qt(wh(fre,Kl.Operations)),[C.ProjectsItemBranchesItemMonitoringActiveQueries]:Qt(wh(jJ,Kl.ActiveQueries)),[C.ProjectsItemBranchesItemMonitoringQueryHistory]:Qt(wh(PJ,Kl.QueryHistory)),[C.ProjectsItemSettings]:Qt(Cbe,{contentWidth:"s",title:"Project Settings"},()=>Zje),[C.ProjectsItemBranches]:Qt(XI),[C.ProjectsItemBranchesNew]:Qt(ide),[C.ProjectsItemBranchesItem]:Qt(Fle),[C.UserSettings]:ur(Qje,{title:"Account settings",contentWidth:"s",showSidebarFn:t=>!t},eye),[C.UserBilling]:ur(hv,{contentWidth:"l",title:"Billing",actions:e.jsx(Yy,{})},Rw),[C.Welcome]:oye,[C.OrgWelcome]:aye,[C.ProjectsList]:Bw,[C.OrgProjectsList]:Bw,[C.ProjectsSharedList]:ur(Tbe,{showSidebarFn:!1}),[C.OrgPeople]:ur(eoe,{title:"People",contentWidth:"s"},tye),[C.OrgBilling]:ur(hv,{contentWidth:"l",title:"Billing",actions:e.jsx(Yy,{})},Rw),[C.OrgSettings]:ur(Koe,{contentWidth:"s",title:"Organization settings"},sye),[C.UserIntegrations]:ur(Kee,{contentWidth:"l",title:"Integrations"},()=>Xje),[C.OrgIntegrations]:ur(Dre,{contentWidth:"l",title:"Integrations"},nye)},cye=({from:t,to:s,exact:n})=>{const r=jc(),a=new URLSearchParams(r.search).get(Zh);let i=s;if(a){const c=new URL(s,"https://n");c.searchParams.set(Zh,a),i=`${c.pathname}${c.search}`}return e.jsx(ce,{from:t,to:i,exact:n})},lye=()=>{const t=ee("identity"),s=ee("new_branch_creation_flow"),n=ee("disable_drizzle_studio"),{data:r}=rt(),o=aS(r==null?void 0:r.id),{data:a,isFetching:i}=Nr(),{data:c}=zd(),l=Ar(r),d=m.useMemo(()=>{if(!(!l||i||a===void 0||c===void 0))return a.length>0?F(C.OrgProjectsList,{orgId:a[0].id}):c.length>0?C.ProjectsSharedList:C.UserSettings},[l,i,a,c]),u=m.useMemo(()=>{if(!(!l||i||a===void 0))return a.length>0?F(C.OrgWelcome,{orgId:a[0].id}):C.UserSettings},[l,i,a]);return e.jsxs(Ai,{children:[e.jsx(Je,{path:te.ProjectCreate,exact:!0,render:({location:h})=>{const p=new URLSearchParams(h.search);return p.set(P_,De.CreateProject),e.jsx(ce,{to:`${C.ProjectsList}?${p.toString()}`})}}),e.jsx(Je,{path:[C.ProjectsSharedList,C.ProjectsItem,C.ProjectsList,C.UserSettings,C.UserBilling,C.UserIntegrations],render:({match:h})=>{if(h.path===C.ProjectsItem){if(!("projectId"in h.params))throw new Error("Unreachable");return e.jsx(Xf,{projectId:h.params.projectId,children:e.jsx(Cm,{header:e.jsx(xk,{}),children:e.jsxs(Ai,{children:[e.jsx(Be,{path:C.ProjectsItem,exact:!0,component:qe[C.ProjectsItem]}),e.jsx(jt,{path:te.ProjectsItemQuery,to:C.ProjectsItemBranchesSQLEditor}),!n&&e.jsx(Be,{path:C.ProjectsItemDrizzle,exact:!0,component:qe[C.ProjectsItemDrizzle]}),e.jsx(Je,{path:C.ProjectsItemBranchesLastUsed,render:({match:p})=>e.jsx(iye,{projectId:p.params.projectId})}),e.jsx(Be,{path:C.ProjectsItemBranchesSQLEditor,exact:!0,component:qe[C.ProjectsItemBranchesSQLEditor]}),e.jsx(Be,{path:C.ProjectsItemBranchesRestore,exact:!0,component:qe[C.ProjectsItemBranchesRestore]}),e.jsx(ce,{from:te.ProjectsItemBranchesBackup,exact:!0,to:C.ProjectsItemBranchesRestore}),e.jsx(ce,{from:C.ProjectsItemBranchesItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0}),e.jsx(Be,{path:C.ProjectsItemBranchesItemMonitoringOperations,exact:!0,component:qe[C.ProjectsItemBranchesItemMonitoringOperations]}),e.jsx(Be,{path:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0,component:qe[C.ProjectsItemBranchesItemMonitoringMetrics]}),e.jsx(Be,{path:C.ProjectsItemBranchesItemMonitoringActiveQueries,exact:!0,component:qe[C.ProjectsItemBranchesItemMonitoringActiveQueries]}),e.jsx(Be,{path:C.ProjectsItemBranchesItemMonitoringQueryHistory,exact:!0,component:qe[C.ProjectsItemBranchesItemMonitoringQueryHistory]}),e.jsx(Be,{path:C.ProjectsItemIntegrations,exact:!0,component:qe[C.ProjectsItemIntegrations]}),e.jsx(Je,{path:C.ProjectsItemAuthorize,exact:!0,render:({match:p})=>e.jsx(ce,{to:`${F(C.ProjectsItemSettings,{projectId:p.params.projectId})}#rls`})}),t&&e.jsx(Be,{path:C.ProjectsItemIdentity,exact:!0,component:qe[C.ProjectsItemIdentity]}),e.jsx(jt,{path:te.ProjectsItemRestore,to:C.ProjectsItemBranchesRestore}),e.jsx(jt,{path:te.ProjectsItemBackup,to:C.ProjectsItemBranchesRestore}),e.jsx(jt,{path:te.ProjectsItemMonitoringOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(jt,{path:te.ProjectsItemMonitoringMetrics,to:C.ProjectsItemBranchesItemMonitoringMetrics}),e.jsx(jt,{path:te.ProjectsItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),e.jsx(jt,{path:te.ProjectsItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),e.jsx(Be,{path:C.ProjectsItemSettings,exact:!0,component:qe[C.ProjectsItemSettings]}),e.jsx(ce,{from:te.ProjectsItemSettingsGeneral,to:`${C.ProjectsItemSettings}#general`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsCompute,to:`${C.ProjectsItemSettings}#compute`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsStorage,to:`${C.ProjectsItemSettings}#storage`,exact:!0}),e.jsx(Je,{path:te.ProjectsItemSettingsIPAllow,exact:!0,render:({match:p})=>e.jsx(ce,{to:F(`${C.ProjectsItemSettings}#network-security`,{projectId:p.params.projectId})})}),e.jsx(ce,{from:te.ProjectsItemSettingsNetworkSecurity,to:`${C.ProjectsItemSettings}#network-security`,exact:!0}),e.jsx(Je,{path:te.ProjectsItemSettingsBeta,exact:!0,render:({match:p})=>e.jsx(ce,{to:F(`${C.ProjectsItemSettings}#out-replication`,{projectId:p.params.projectId})})}),e.jsx(ce,{from:te.ProjectsItemSettingsUpdateSchedule,to:`${C.ProjectsItemSettings}#update-schedule`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsOutboundLogicalReplication,to:`${C.ProjectsItemSettings}#out-replication`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsSharing,to:`${C.ProjectsItemSettings}#sharing`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsDelete,to:`${C.ProjectsItemSettings}#delete`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsTransfer,to:`${C.ProjectsItemSettings}#transfer`,exact:!0}),e.jsx(ce,{from:te.ProjectsItemSettingsRLS,to:`${C.ProjectsItemSettings}#rls`,exact:!0}),e.jsx(jt,{path:te.ProjectsItemSettingsOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(jt,{path:te.ProjectsItemSettingsDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(jt,{path:te.ProjectsItemUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(jt,{path:te.ProjectsItemSettingsUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(jt,{path:te.ProjectsItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics}),e.jsx(jt,{path:te.ProjectsItemOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),e.jsx(jt,{path:te.ProjectsItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(ce,{path:te.ProjectsItemBranchesItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(jt,{path:te.ProjectsItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(ce,{path:te.ProjectsItemBranchesItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),"Add commentMore actions",e.jsx(jt,{path:te.ProjectsItemBranchesRolesAndDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),e.jsx(jt,{path:te.ProjectsItemBranchesChildBranches,to:C.ProjectsItemBranchesChildBranches}),e.jsx(jt,{path:te.ProjectsItemBranchesDataAPI,to:C.ProjectsItemBranchesDataAPI}),e.jsx(jt,{path:te.ProjectsItemBranchesItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),e.jsx(jt,{path:te.ProjectsItemBranchesItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),e.jsxs(XP,{children:[e.jsx(Be,{path:C.ProjectsItemBranches,exact:!0,component:qe[C.ProjectsItemBranches]}),s?e.jsx(Je,{path:C.ProjectsItemBranchesNew,exact:!0,render:({match:p})=>e.jsx(ce,{to:F(C.ProjectsItemBranches,{projectId:p.params.projectId})})}):e.jsx(Je,{path:C.ProjectsItemBranchesNew,exact:!0,component:qe[C.ProjectsItemBranchesNew]}),e.jsx(Be,{path:C.ProjectsItemBranchesItem,exact:!0,component:qe[C.ProjectsItemBranchesItem]})]}),e.jsx(Be,{component:Mh})]})})})}return e.jsx(Cm,{header:e.jsx(cp,{}),children:e.jsxs(Ai,{children:[d===void 0?e.jsx(Be,{path:C.ProjectsList,exact:!0,component:qe[C.ProjectsList]}):e.jsx(ce,{path:C.ProjectsList,to:d}),e.jsx(Be,{path:C.ProjectsSharedList,exact:!0,component:qe[C.ProjectsSharedList]}),e.jsx(Be,{path:C.UserSettings,exact:!0,component:qe[C.UserSettings]}),e.jsx(Je,{path:te.UserSettingsAccount,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#profile`})}),e.jsx(Je,{path:te.UserSettingsPassword,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#password`})}),e.jsx(Je,{path:te.UserSettingsApiKeys,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#api-keys`})}),e.jsx(Je,{path:te.UserSettingsEarlyAccess,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#early-access`})}),e.jsx(Je,{path:te.UserSettingsReferral,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#referral`})}),e.jsx(Je,{path:te.UserSettingsDelete,exact:!0,render:()=>e.jsx(ce,{to:`${C.UserSettings}#delete`})}),e.jsx(Je,{path:te.UserSettingsTheme,exact:!0,render:()=>e.jsx(ce,{to:C.UserSettings})}),d===void 0?e.jsx(Be,{path:C.UserBilling,exact:!0,component:qe[C.UserBilling]}):e.jsx(ce,{path:C.UserBilling,to:d}),e.jsx(Be,{path:C.UserIntegrations,exact:!0,component:qe[C.UserIntegrations]})]})})}}),e.jsx(Be,{path:[C.Claim],exact:!0,component:qe[C.Claim]}),u===void 0?e.jsx(Be,{path:C.Welcome,exact:!0,component:qe[C.Welcome]}):e.jsx(ce,{path:C.Welcome,to:u}),e.jsx(Je,{path:C.OrgWelcome,exact:!0,render:({match:h})=>e.jsx(jx,{org_id:h.params.orgId,children:e.jsx(Be,{component:qe[C.OrgWelcome]})})}),e.jsx(ce,{from:C.Home,to:C.ProjectsList,exact:!0}),e.jsx(ce,{from:te.UserIntegrationsGithub,to:`${C.UserIntegrations}#github`}),e.jsx(ce,{from:te.UserIntegrationsVercel,to:`${C.UserIntegrations}#vercel`}),d&&e.jsx(ce,{path:C.UserIntegrations,to:d}),a!==void 0&&e.jsx(cye,{from:C.Root,to:(o==null?void 0:o.type)==="org"&&a.some(({id:h})=>h===o.id)?F(C.OrgProjectsList,{orgId:o.id}):C.ProjectsList,exact:!0}),e.jsx(Je,{path:C.OrgRoot,children:({match:h})=>e.jsx(jx,{org_id:h==null?void 0:h.params.orgId,children:e.jsx(Cm,{header:e.jsx(cp,{}),children:e.jsxs(Ai,{children:[e.jsx(Be,{path:C.OrgProjectsList,exact:!0,component:qe[C.OrgProjectsList]}),e.jsx(Je,{path:te.OrgProjectsCreate,exact:!0,render:({location:p,match:g})=>{const _=new URLSearchParams(p.search);return _.set(P_,De.CreateProject),e.jsx(ce,{to:`${F(C.OrgProjectsList,{orgId:g.params.orgId})}?${_.toString()}`})}}),e.jsx(Be,{path:C.OrgPeople,exact:!0,component:qe[C.OrgPeople]}),e.jsx(Je,{path:te.OrgMembers,exact:!0,render:()=>e.jsx(ce,{to:`${F(C.OrgPeople,{orgId:h.params.orgId})}#members`})}),e.jsx(Je,{path:te.OrgPendingInvites,exact:!0,render:()=>e.jsx(ce,{to:`${F(C.OrgPeople,{orgId:h.params.orgId})}#pending`})}),e.jsx(Je,{path:te.OrgCollaborators,exact:!0,render:()=>e.jsx(ce,{to:`${F(C.OrgPeople,{orgId:h.params.orgId})}#collaborators`})}),e.jsx(Je,{path:te.OrgGuests,exact:!0,render:()=>e.jsx(ce,{to:`${F(C.OrgPeople,{orgId:h.params.orgId})}#collaborators`})}),e.jsx(Be,{path:C.OrgBilling,exact:!0,component:qe[C.OrgBilling]}),e.jsx(Be,{path:C.OrgSettings,exact:!0,component:qe[C.OrgSettings]}),e.jsxs(Ai,{children:[e.jsx(ce,{from:te.OrgIntegrationsGithub,to:`${C.OrgIntegrations}#github`}),e.jsx(ce,{from:te.OrgIntegrationsVercel,to:`${C.OrgIntegrations}#vercel`}),e.jsx(Be,{path:C.OrgIntegrations,component:qe[C.OrgIntegrations]}),e.jsx(Be,{component:Mh})]}),e.jsx(Je,{component:Mh})]})})})})]})},dye=Pp({name:"ui",initialState:{visible:!1,branchId:""},reducers:{}}),uye=Tp(dye),hye=Pp({name:"workflowOnboarding",initialState:{isDismissed:!1},reducers:{setClosed:(t,{payload:s})=>({...t,isDismissed:s})}}),Bd=Tp(hye);function*pye(){try{const t=$t.get(Me.WorkflowOnboardingState);if(t){const s=JSON.parse(t);yield Qf(Bd.actions.setClosed(!!(s!=null&&s.isDismissed)))}}catch{$t.remove(Me.WorkflowOnboardingState)}}function*mye(){yield lb(Bd.actionTypes,function*(){const s=yield Kf(Bd.selector);$t.set(Me.WorkflowOnboardingState,JSON.stringify(s))})}function*gye(){yield Wf(pye),yield Gf(mye)}Bd.setSaga(gye);const _ye=Bd,fye=B1({baseQuery:Vf,reducerPath:"schemas",endpoints:t=>({getSchema:t.query({keepUnusedDataFor:5,query:s=>q.getProjectBranchSchema(s)})})}),bye=()=>{const t=YA([ZA,XA,oS,_ye,uye,I_,eE,Et,wf],[ib,Md,GE,bS,gn,fye,zh,RI,JA,lc,Oa]),s=Gw();return s!=null&&s.organizations&&tE(t.dispatch,zh,"getCurrentUserOrganizations",void 0,s.organizations),t};function xye(t,s,n){return cE(t,{path:s,exact:n})!==null}const jye=({children:t})=>{const s=Ne(),n=jc(),r=ee("breadcrumbs_separated_dropdown");return e.jsx(iE,{basename:qd,navigate:s.push,pathname:n.pathname,hash:n.hash,isCurrent:xye,breadcrumbsSeparatedDropdown:r,children:t})},yye=({platforms:t,consoleSettings:s,appVersion:n,psqlConnectHost:r,importAvailableRegions:o,keycloak:a,error:i})=>(uE(),e.jsx(sE,{children:e.jsx(nE,{children:e.jsx(hE,{platforms:t,importAvailableRegions:o,children:e.jsx(gE,{consoleSettings:s,appVersion:n,psqlConnectHost:r,error:i,children:e.jsx(kq,{config:a!==null?a:void 0,children:e.jsx(rE,{setupStore:bye,children:e.jsx(pE,{children:e.jsxs(Cq,{children:[e.jsx(oE,{}),e.jsx(aE,{basename:qd,children:e.jsxs(jye,{children:[e.jsx(lye,{}),e.jsx(Tq,{}),e.jsx(Sq,{})]})}),e.jsx(gD,{})]})})})})})})})}));[q,lE].forEach(t=>t.instance.interceptors.response.use(s=>s,s=>{var n;return bc(s)&&((n=s.response)==null?void 0:n.status)===401&&setTimeout(qf,1),Promise.reject(s)}));dE(yye,{analyticsAppName:IT.Console,analyticsPageMapper:wq});export{Tde as D,Sb as I,uP as a,Bc as b,Xye as s,jne as u};
